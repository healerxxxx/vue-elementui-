webpackJsonp([0],{"+Nlw":function(e,t){},0:function(e,t,a){a("j1ja"),e.exports=a("W2lQ")},"1+y7":function(e,t){},"332e":function(e,t){},"3kcH":function(e,t){},"4B3V":function(e,t){},"4qOc":function(e,t){},"4roC":function(e,t){},"5cTz":function(e,t){},"8Rfg":function(e,t){},CF4A:function(e,t){},DgHx:function(e,t){},FRoK:function(e,t){},GAzn:function(e,t){},Jmbc:function(e,t){},KwGT:function(e,t){},LZaC:function(e,t){},Me5S:function(e,t){},ORfI:function(e,t){},RRzt:function(e,t){},W2lQ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={};a.d(i,"goods2CH",function(){return Zd}),a.d(i,"payTerminal2CH",function(){return eu}),a.d(i,"urlRedirect2CH",function(){return tu}),a.d(i,"articleStatus2CH",function(){return au}),a.d(i,"matchStatus2CH",function(){return iu}),a.d(i,"tcmMatchStatus2CH",function(){return ru}),a.d(i,"tcmMall2CH",function(){return ou}),a.d(i,"tcmMallOrder2CH",function(){return nu}),a.d(i,"tcmOrder2CH",function(){return su}),a.d(i,"rechargeOrder2CH",function(){return lu}),a.d(i,"productOrderStatus2CH",function(){return cu}),a.d(i,"productPayType2CH",function(){return du}),a.d(i,"threadType2CH",function(){return uu}),a.d(i,"toPercent",function(){return mu}),a.d(i,"dateFormat",function(){return pu}),a.d(i,"payChannel2CH",function(){return fu}),a.d(i,"accountType2CH",function(){return hu}),a.d(i,"region2CH",function(){return gu}),a.d(i,"questionStatus2CH",function(){return vu}),a.d(i,"couponType2CH",function(){return bu}),a.d(i,"vipLevel2CH",function(){return _u});var r=a("fZjL"),o=a.n(r),n=a("lRwf"),s=a.n(n),l=a("zL8q"),c=a.n(l),d=a("Dd8w"),u=a.n(d),m={login:"/api/admin/login",logout:"/api/admin/logout",userInfo:"/api/admin/getLoginInfo"},p="/api/common/upload/{{serviceType}}",f="/api/common/upload/adminInner",h="/api/admin/lotteryCategory/getAll",g="/api/admin/matchInfo/leagueMatch/search",v="/api/admin/admin/getToken",b="/api/admin/coupon/getSimpleInfo/{{couponId}}",_="/api/admin/drawLottery/get/pointCard",y="/api/admin/thread/order/handle/refund",w="/api/admin/switch/getSwitch",T="/api/admin/switch/updateDict",I="/api/admin/thread/geThreadList/{{pageIndex}}/{{pageSize}}",x="/api/admin/thread/searchThread/{{pageIndex}}/{{pageSize}}",k="/api/admin/thread/getThreadBuyChannelTypeList",$="/api/admin/thread/{{threadId}}/updateWeight/{{weight}}",C="/api/admin/thread/updateVoteSupport/{{threadId}}",S="/api/admin/thread/query/{{threadId}}",L="/api/admin/thread/updateByOperation/{{threadId}}",D="/api/admin/thread/{{threadId}}/offline",P="/api/admin/thread/updatePlanReview/{{threadId}}",z="/api/admin/thread/delPlanReview/{{threadId}}",H="/api/admin/thread/delBuyReason/{{threadId}}",M="/api/admin/numThread/updateByOperation/{{threadId}}",F="/api/admin/numThread/delBuyReason/{{threadId}}",N="/api/admin/thread/getReplayThreadList/{{pageIndex}}/{{pageSize}}",E="/api/admin/thread/searchThreadReplay/{{pageIndex}}/{{pageSize}}",R="/api/admin/cms/getCmsDocList/{{pageIndex}}/{{pageSize}}",O="/api/admin/cms/updateAppWeight/{{id}}",A="/api/admin/cms/inactivateDoc/{{id}}",U="/api/admin/cms/activateDoc/{{id}}",V="/api/admin/numThread/list",q="/api/admin/numThread/updateWeight/{{threadId}}",j="/api/admin/admin/getAdminList",Q="/api/admin/admin/addAdmin",W="/api/admin/admin/modifyAdmin",B="/api/admin/admin/removeAdmin",G="/api/admin/role/getRoleList",Y="/api/admin/role/addRole",X="/api/admin/role/modifyRole",K="/api/admin/role/removeRole",J="/api/admin/role/getResourcesByRoleId",Z="/api/admin/role/roleAuth",ee="/api/admin/resource/getResourceList",te="/api/admin/resource/addResource",ae="/api/admin/resource/modifyResource",ie="/api/admin/resource/removeResource",re={0:{list:"/api/admin/version/list",add:"/api/admin/version/insert",update:"/api/admin/version/modify",del:"/api/admin/version/del",updateAll:"/api/admin/version/batch/update"},1:{list:"/api/admin/jzbf/version/list",add:"/api/admin/jzbf/version/insert",update:"/api/admin/jzbf/version/modify",del:"/api/admin/jzbf/version/del",updateAll:"/api/admin/jzbf/version/batch/update"}},oe={0:{hotFixList:"/api/admin/hotfix/list/{{offset}}/{{limit}}",hotFixAdd:"/api/admin/hotfix/save",hotFixUpdate:"/api/admin/hotfix/modify",hotFixDel:"/api/admin/hotfix/delete/{{hotfixId}}"},1:{hotFixList:"/api/admin/jzbf/hotfix/list/{{offset}}/{{limit}}",hotFixAdd:"/api/admin/jzbf/hotfix/save",hotFixUpdate:"/api/admin/jzbf/hotfix/modify",hotFixDel:"/api/admin/jzbf/hotfix/delete/{{hotfixId}}"}},ne={0:{switchList:"/api/admin/switch/list/{{pageIndex}}/{{pageSize}}",switchAdd:"/api/admin/switch/add",switchUpdate:"/api/admin/switch/update",switchDel:"/api/admin/switch/del/{{switchControlId}}",menuList:"/api/admin/switch/get/type/list",channelList:"/api/admin/switch/listAndroidChannelSwitch",channelUpdate:"/api/admin/switch/updateAndroidChannelSwitch"},1:{switchList:"/api/admin/jzbf/switch/list/{{pageIndex}}/{{pageSize}}",switchAdd:"/api/admin/jzbf/switch/add",switchUpdate:"/api/admin/jzbf/switch/update",switchDel:"/api/admin/jzbf/switch/del/{{switchControlId}}",menuList:"/api/admin/jzbf/switch/get/type/list",channelList:"/api/admin/switch/listAndroidChannelSwitch",channelUpdate:"/api/admin/switch/updateAndroidChannelSwitch"}},se={0:{apkList:"/api/admin/appPackageFile/fileList/androidApk",apkAdd:"/api/admin/appPackageFile/fileUpload/androidApk"},1:{apkList:"/api/admin/jzbf/appPackageFile/fileList/androidApk",apkAdd:"/api/admin/jzbf/appPackageFile/fileUpload/androidApk"}},le={0:{list:"/api/admin/channelSpreadConfig/list/{{pageIndex}}/{{pageSize}}",add:"/api/admin/channelSpreadConfig/add",update:"/api/admin/channelSpreadConfig/update/{{channelSpreadConfigId}}",checkApk:"/api/admin/channelSpreadConfig/returnUrlIfChannelApkExist"},1:{list:"/api/admin/jzbf/channelSpreadConfig/list/{{pageIndex}}/{{pageSize}}",add:"/api/admin/jzbf/channelSpreadConfig/add",update:"/api/admin/jzbf/channelSpreadConfig/update/{{channelSpreadConfigId}}",checkApk:"/api/admin/jzbf/channelSpreadConfig/returnUrlIfChannelApkExist"}},ce={0:{list:"/api/admin/apple/channel/list",add:"/api/admin/apple/channel/add",update:"/api/admin/apple/channel/update/{{appleChannelId}}",del:"/api/admin/apple/channel/delete/{{appleChannelId}}",typeList:"/api/admin/apple/channelGroup/select/list"},1:{list:"/api/admin/jzbf/apple/channel/list",add:"/api/admin/jzbf/apple/channel/add",update:"/api/admin/jzbf/apple/channel/update/{{appleChannelId}}",del:"/api/admin/jzbf/apple/channel/delete/{{appleChannelId}}",typeList:"/api/admin/jzbf/apple/channelGroup/select/list"}},de={0:{list:"/api/admin/apple/channelGroup/list/{{pageIndex}}/{{pageSize}}",add:"/api/admin/apple/channelGroup/add",update:"/api/admin/apple/channelGroup/update/{{appleChannelGroupId}}",del:"/api/admin/apple/channelGroup/delete/{{appleChannelGroupId}}"},1:{list:"/api/admin/jzbf/apple/channelGroup/list/{{pageIndex}}/{{pageSize}}",add:"/api/admin/jzbf/apple/channelGroup/add",update:"/api/admin/jzbf/apple/channelGroup/update/{{appleChannelGroupId}}",del:"/api/admin/jzbf/apple/channelGroup/delete/{{appleChannelGroupId}}"}},ue="/api/admin/dict/coupon/page",me="/api/admin/dict/coupon/add",pe="/api/admin/dict/coupon/update",fe="/api/admin/cooperation/list/vendor",he="/api/admin/cooperation/del/vendor",ge="/api/admin/cooperation/add/vendor",ve="/api/admin/cooperation/update/vendor",be="/api/admin/cooperation/list/app",_e="/api/admin/cooperation/add/app",ye="/api/admin/cooperation/update/app",we="/api/admin/cooperation/del/app",Te="/api/admin/cooperation/update/status/app",Ie="/api/admin/clientLog/V2/getClientLog/{{pageIndex}}/{{pageSize}}",xe={list:"/api/metrics/user/consumer/info",addRemark:"/api/admin/operationLog/userWarning/add",freezeUser:"/api/admin/user/freezeUser",unfreezeUser:"/api/admin/user/unfreezeUser",flushBalance:"/api/admin/user/flushBalance",userWarningLog:"/api/metrics/user/earlyWarning/list",Remark:"/api/admin/operationLog/userWarning/list",exportWarning:"/api/metrics/user/consumer/export",exportVip:"/api/metrics/user/consumer/export/vip",erasingPhone:"/api/admin/user/erasingPhone"},ke={list:"/api/admin/jzbf/user/list",search:"/api/admin/jzbf/user/search"},$e={info:"/api/metrics/user/userInfo/{{userId}}",updateBirthday:"/api/admin/user/edit/birthday",rechargeOrderList:"/api/metrics/user/getRechargeOrderList",consumerThreadOrderList:"/api/metrics/user/getConsumerThreadOrderList",getConsumerThreadOrderPriceSum:"/api/metrics/user/getConsumerThreadOrderPriceSum",getPayExpertList:"/api/metrics/user/getPayExpertList",getThreadOrderList:"/api/metrics/user/getThreadOrderList",getThreadOrderStatsInfo:"/api/metrics/user/getThreadOrderStatsInfo",getMatchOrderList:"/api/metrics/user/getMatchOrderList",getMatchOrderStatsInfo:"/api/metrics/user/getMatchOrderStatsInfo"},Ce="/api/admin/account/list",Se="/api/admin/account/unbind",Le={0:{rechargeList:"/api/admin/recharge/order/getRechargeOrderList"},1:{rechargeList:"/api/admin/jzbf/recharge/order/getRechargeOrderList"}},De={0:{getRechargeOrderDetail:"/api/admin/recharge/order/getRechargeOrderDetail",getRechargeOrderChangeList:"/api/admin/recharge/order/getRechargeOrderChangeList",getChannelTradeDetailList:"api/admin/recharge/order/getChannelTradeDetailList"},1:{getRechargeOrderDetail:"/api/admin/jzbf/recharge/order/getRechargeOrderDetail",getRechargeOrderChangeList:"/api/admin/jzbf/recharge/order/getRechargeOrderChangeList",getChannelTradeDetailList:"api/admin/jzbf/recharge/order/getChannelTradeDetailList"}},Pe={0:{list:"/api/admin/thread/order/getThreadOrderList"},1:{list:"/api/admin/jzbf/thread/order/getThreadOrderList"}},ze={detail:"/api/admin/thread/order/getThreadOrderDetail",detailOfPointCard:"/api/admin/thread/order/getThreadOrderDetail/pointCard",changeList:"/api/admin/thread/order/getThreadOrderChangeList"},He={detail:"/api/admin/jzbf/thread/order/getThreadOrderDetail",detailOfPointCard:"/api/admin/jzbf/thread/order/getThreadOrderDetail/pointCard",changeList:"/api/admin/jzbf/thread/order/getThreadOrderChangeList"},Me={0:{rechargeList:"/api/admin/pay/apple/losingOrder/list",confirmLosingOrder:"/api/admin/pay/apple/losingOrder/confirm/{{appleOrderId}}",offlineConfirmOrder:"/api/admin/pay/apple/losingOrder/offline/{{appleOrderId}}"},1:{rechargeList:"/api/admin/jzbf/pay/apple/losingOrder/list",confirmLosingOrder:"/api/admin/jzbf/pay/apple/losingOrder/confirm/{{appleOrderId}}",offlineConfirmOrder:"/api/admin/jzbf/pay/apple/losingOrder/offline/{{appleOrderId}}"}},Fe={0:{paymentList:"/api/admin/recharge/order/getChannelTradeList",freeze:"/api/admin/recharge/order/freezing"},1:{paymentList:"/api/admin/jzbf/recharge/order/getChannelTradeList",freeze:"/api/admin/jzbf/recharge/order/freezing"}},Ne={0:{getChannelTradeDetail:"/api/admin/recharge/order/getChannelTradeDetail",getChannelTradeChangeList:"/api/admin/recharge/order/getChannelTradeChangeList"},1:{getChannelTradeDetail:"/api/admin/jzbf/recharge/order/getChannelTradeDetail",getChannelTradeChangeList:"/api/admin/jzbf/recharge/order/getChannelTradeChangeList"}},Ee={0:{orderList:"/api/admin/tcm/order/list",orderStatusList:"/api/admin/tcm/order/status/list",matchList:"/api/admin/tcm/order/fuzzySearchCompetition",batchRepair:"/api/admin/tcm/order/tcm/order/status/batch/update{{tcmBaseOrderId}}"},1:{orderList:"/api/admin/quiz/order/list"}},Re={orderDetail:"/api/admin/tcm/order/info",orderStatusList:"/api/admin/tcm/order/status/info"},Oe={orderDetail:"/api/admin/quiz/order/info",orderStatusList:"/api/admin/quiz/order/info/status"},Ae="/api/admin/expert/list",Ue="/api/admin/expert/search",Ve="/api/admin/expert/add",qe="/api/admin/expert/{{userId}}/update/weight",je="/api/admin/affiche/add",Qe="/api/admin/affiche/page/{{offset}}/{{limit}}",We="/api/admin/expert/{{userId}}/getBaseInfo",Be="/api/admin/expert/{{userId}}/getTacticStat",Ge="/api/admin/expert/{{userId}}/update",Ye="/api/admin/expert/protocol/list/{{userId}}",Xe="/api/admin/thread/expertUser/{{userId}}/getThreadList/{{pageIndex}}/{{pageSize}}",Ke="/api/metrics/numLottery/expertUser/getNumLotteryThreadList/{{pageIndex}}/{{pageSize}}",Je="/api/admin/expert/{{userId}}/offline",Ze="/api/admin/expert/{{userId}}/online",et="/api/admin/expert/protocol/updateDivideRate/{{protocolId}}",tt={0:{list:"/api/admin/goods/list/{{payTerminalId}}",add:"/api/admin/goods/add",update:"/api/admin/goods/update",weight:"/api/admin/goods/update/weight",status:"/api/admin/goods/update/status"},1:{list:"/api/admin/jzbf/goods/list/{{payTerminalId}}",add:"/api/admin/jzbf/goods/add",update:"/api/admin/jzbf//goods/update",weight:"/api/admin/jzbf/goods/update/weight",status:"/api/admin/jzbf/goods/update/status"}},at={0:{list:"/api/admin/price/list",weight:"/api/admin/price/update/weight",add:"/api/admin/price/add",update:"/api/admin/price/update",status:"/api/admin/price/update/status"},1:{list:"/api/admin/jzbf/price/list",weight:"/api/admin/jzbf/price/update/weight",add:"/api/admin/jzbf/price/add",update:"/api/admin/jzbf/price/update",status:"/api/admin/jzbf/price/update/status"}},it={0:{list:"/api/admin/sp/list",add:"/api/admin/sp/add",update:"/api/admin/sp/update",weight:"/api/admin/sp/update/weight",status:"/api/admin/sp/update/status"},1:{list:"/api/admin/jzbf/sp/list",add:"/api/admin/jzbf/sp/add",update:"/api/admin/jzbf/sp/update",weight:"/api/admin/jzbf/sp/update/weight",status:"/api/admin/jzbf/sp/update/status"}},rt={0:{list:"/api/admin/pointCard/{{type}}/list/{{pageIndex}}/{{pageSize}}",add:"/api/admin/pointCard/{{type}}/add",update:"/api/admin/pointCard/{{type}}/update/{{pointCardId}}",status:"/api/admin/pointCard/{{type}}/updateUseStatus/{{pointCardId}}/{{status}}",weight:"/api/admin/pointCard/updateWeight/{{pointCardId}}/{{weight}}",userList:"/api/admin/pointCard/userLevel/selectList"},1:{list:"/api/admin/jzbf/pointCard/{{type}}/list/{{pageIndex}}/{{pageSize}}",add:"/api/admin/jzbf/pointCard/{{type}}/add",update:"/api/admin/jzbf/pointCard/{{type}}/update/{{pointCardId}}",status:"/api/admin/jzbf/pointCard/{{type}}/updateUseStatus/{{pointCardId}}/{{status}}",weight:"/api/admin/jzbf/pointCard/updateWeight/{{pointCardId}}/{{weight}}",userList:"/api/admin/jzbf/pointCard/userLevel/selectList"}},ot={0:{list:"/api/admin/pointCard/userLevel/list/{{pageIndex}}/{{pageSize}}",add:"/api/admin/pointCard/userLevel/add",update:"/api/admin/pointCard/userLevel/update/{{userLevelId}}",status:"/api/admin/pointCard/userLevel/updateUseStatus/{{userLevelId}}/{{status}}",del:"/api/admin/pointCard/userLevel/delete/{{userLevelId}}",addCardList:"/api/admin/pointCard/lottery/selectList",addCard:"/api/admin/pointCard/userLevel/relateLotteryCard/{{userLevelId}}",addCardUpdate:"/api/admin/pointCard/userLevel/relateLotteryCard/update/{{userLevelId}}"},1:{list:"/api/admin/jzbf/pointCard/userLevel/list/{{pageIndex}}/{{pageSize}}",add:"/api/admin/jzbf/pointCard/userLevel/add",update:"/api/admin/jzbf/pointCard/userLevel/update/{{userLevelId}}",status:"/api/admin/jzbf/pointCard/userLevel/updateUseStatus/{{userLevelId}}/{{status}}",del:"/api/admin/jzbf/pointCard/userLevel/delete/{{userLevelId}}",addCardList:"/api/admin/jzbf/pointCard/lottery/selectList",addCard:"/api/admin/jzbf/pointCard/userLevel/relateLotteryCard/{{userLevelId}}",addCardUpdate:"/api/admin/jzbf/pointCard/userLevel/relateLotteryCard/update/{{userLevelId}}"}},nt={0:{list:"/api/admin/headImage/queryAll",update:"/api/admin/headImage/modify",del:"/api/admin/headImage/delete",add:"/api/admin/headImage/insert"},1:{list:"/api/admin/jzbf/headImage/queryAll",update:"/api/admin/jzbf/headImage/modify",del:"/api/admin/jzbf/headImage/delete",add:"/api/admin/jzbf/headImage/insert",sync:"/api/admin/jzbf/headImage/syncHeadImage"}},st="/api/admin/matchInfo/getMatchInfoList/{{pageIndex}}/{{pageSize}}",lt="/api/admin/matchInfo/searchMatch/{{pageIndex}}/{{pageSize}}",ct="/api/admin/matchInfo/modifyWeight",dt="/api/admin/winningColours/list",ut="/api/admin/winningColours/getAllDegree",mt="/api/admin/winningColours/get",pt="/api/admin/matchInfo/setRefund",ft="/api/admin/matchInfo/cancelRefund",ht="/api/admin/winningColours/statsExpertThreadWCInfo",gt="/api/admin/winningColours/manualDrawPrize",vt="/api/admin/winningColours/createWCInfo",bt="/api/admin/winningColours/updateWCDateInfo",_t="/api/admin/numbersGames/adminList",yt="/api/admin/numbersGames/update",wt="api/admin/numbersGames/updateAwardInfo",Tt="/api/admin/matchInfo/getMatchInfoById/{{matchInfoId}}",It="/api/admin/thread/match/{{matchInfoId}}/getThreadList/{{pageIndex}}/{{pageSize}}",xt="/api/admin/thread/{{threadId}}/updateWeight/{{weight}}",kt="/api/admin/recommend/match/list",$t="/api/admin/recommend/add/match",Ct="/api/admin/recommend/del/match",St="/api/admin/push/create",Lt="/api/admin/push/list/{{offset}}/{{limit}}",Dt="/api/admin/thread/getPushThreadList",Pt={0:{list:"/api/admin/recharge/getRechargeLogList/{{month}}/{{pageIndex}}/{{pageSize}}",export:"/api/admin/recharge/exportRechargeLogList/{{month}}",exportDay:"/api/admin/recharge/exportRechargeLogList?startDay={{startDay}}&endDay={{endDay}}"},1:{list:"/api/admin/jzbf/recharge/getRechargeLogList/{{month}}/{{pageIndex}}/{{pageSize}}",export:"/api/admin/jzbf/recharge/exportRechargeLogList/{{month}}",exportDay:"/api/admin/jzbf/recharge/exportRechargeLogList?startDay={{startDay}}&endDay={{endDay}}"},listTestAccount:"/api/admin/systemInfo/listTestAccount",addTestAccount:"/api/admin/systemInfo/addTestAccount"},zt="/api/admin/cooperation/business/appSelect/list",Ht={hongcai:{list:"/api/admin/costDetail/getCostDetailList/{{month}}/{{pageIndex}}/{{pageSize}}",export:"/api/admin/costDetail/exportCostDetailList/{{month}}",exportDay:"/api/admin/costDetail/exportCostDetailList?startDay={{startDay}}&endDay={{endDay}}"},cooperation:{list:"/api/admin/cooperation/costDetail/getCostDetailList/{{month}}/{{pageIndex}}/{{pageSize}}",export:"/api/admin/cooperation/costDetail/exportCostDetailList/{{month}}",exportDay:"/api/admin/costDetail/exportCostDetailList?startDay={{startDay}}&endDay={{endDay}}"}},Mt={hongcai:{list:"/api/admin/expert/netIncome/list/{{pageIndex}}/{{pageSize}}",export:"/api/admin/expert/netIncome/list/exportExcel",setDespositRate:"/api/admin/expert/netIncome/despositRate/set"},cooperation:{list:"api/admin/cooperation/expert/netIncome/list/{{pageIndex}}/{{pageSize}}",export:"/api/admin/cooperation/expert/netIncome/list/exportExcel"}},Ft="/api/admin/expert/protocol/list/{{pageIndex}}/{{pageSize}}",Nt="/api/admin/expert/protocol/confirm/{{protocolId}}",Et="/api/admin/expert/protocol/update/{{protocolId}}",Rt="/api/admin/expert/protocol/{{protocolId}}/updateLog/list",Ot="/api/admin/expert/protocol/exportExcel",At={0:{list:"/api/metrics/sp/stats",export:"/api/metrics/sp/export"},1:{list:"/api/metrics/jzbf/sp/stats",export:"/api/metrics/jzbf/sp/export"}},Ut={0:{list:"/api/metrics/sp/confirmed/stats",export:"/api/metrics/sp/confirmed/export"},1:{list:"/api/metrics/jzbf/sp/confirmed/stats",export:"/api/metrics/jzbf/sp/confirmed/export"}},Vt="/api/metrics/pointCard/stats",qt="/api/metrics/pointCard/discount/list",jt="/api/metrics/pointCard/stats/sum",Qt="/api/metrics/pointCard/stats/export",Wt="/api/metrics/pointCard/card/stats",Bt="/api/metrics/pointCard/discount/list",Gt="/api/metrics/pointCard/stats/sum",Yt="/api/metrics/pointCard/card/stats/sum",Xt="/api/metrics/pointCard/card/stats/export",Kt={0:{list:"/api/metrics/pointCard/point/stats",sum:"/api/metrics/pointCard/point/stats/sum",export:"/api/metrics/pointCard/point/stats/export"},1:{list:"/api/metrics/pointCard/point/expire/stats",export:"/api/metrics/pointCard/point/expire/stats/export"}},Jt={0:{list:"/api/metrics/tcm/order/list",sum:"/api/metrics/tcm/order/orderPrice/count/all",export:"/api/metrics/tcm/order/list/export"},1:{list:"/api/metrics/quiz/order/list",sum:"/api/metrics/quiz/order/orderPrice/count/all",export:"/api/metrics/quiz/order/list/export"}},Zt="/api/metrics/tcm/consumeDetail/creditAdd",ea="/api/metrics/tcm/consumeDetail/creditAdd/exportExcel",ta="/api/metrics/tcm/consumeDetail/creditConsume",aa="/api/metrics/tcm/consumeDetail/creditConsume/exportExcel",ia="/api/metrics/tcm/consumeDetail/nCoinAdd",ra="/api/metrics/tcm/consumeDetail/nCoinAdd/exportExcel",oa="/api/metrics/tcm/consumeDetail/nCoinConsume",na="/api/metrics/tcm/consumeDetail/nCoinConsume/exportExcel",sa="/api/admin/messageTemplet/list/{{pageIndex}}/{{pageSize}}",la="/api/admin/messageTemplet/add",ca="/api/admin/messageTemplet/updateUseStatus/{{templetId}}/{{useStatus}}",da="/api/admin/messageTemplet/delete/{{templetId}}",ua="/api/admin/messageTemplet/updateSend/{{templetId}}",ma="/api/admin/messageTemplet/list/keyword",pa="/api/admin/message/log/page/{{start}}/{{limit}}",fa="/api/admin/message/type/normal/list",ha="/api/admin/message/userGroup/list",ga="/api/admin/message/log/add",va="/api/admin/message/log/updateDel",ba="/api/admin/message/type/page/{{start}}/{{limit}}",_a="/api/admin/message/type/add",ya="/api/admin/message/type/updateDelStatus",wa="/api/admin/message/type/update",Ta="/api/admin/triggerCondition/list/{{pageIndex}}/{{pageSize}}",Ia="/api/admin/messageTemplet/canBeRelated/list",xa="/api/admin/triggerCondition/getCanUseConditionCode",ka="/api/admin/triggerCondition/add",$a="/api/admin/triggerCondition/update/{{conditionId}}",Ca="/api/admin/triggerCondition/updateUseStatus/{{conditionId}}/{{useStatus}}",Sa="/api/admin/triggerCondition/delete/{{conditionId}}",La="/api/admin/black/search/user",Da="/api/admin/black/update/white",Pa="/api/metrics/tcm/event/list",za="/api/admin/tcm/event/update/weight",Ha="/api/admin/tcm/event/update/choiceness",Ma="/api/admin/tcm/event/update/allowBetting",Fa="/api/admin/tcm/event/update/betting",Na="/api/admin/tcm/event/update/extra/odds",Ea="/api/admin/tcm/event/get/closeAll/switch",Ra="/api/admin/tcm/event/update/closeAll/switch",Oa="/api/metrics/tcm/event/info",Aa={0:{list:"/api/admin/appleOrderFlow/list",add:"/api/admin/appleOrderFlow/add",leaderCheck:"/api/admin/appleOrderFlow/leaderCheck",devCheck:"/api/admin/appleOrderFlow/devCheck",finalCheck:"/api/admin/appleOrderFlow/leaderFinalCheck",searchTradeId:"/api/admin/appleOrderFlow/devCheck/search",finalTradeId:"/api/admin/appleOrderFlow/leaderFinalCheck/getAppleOrder",log:"/api/admin/appleOrderFlow/opLog"},1:{list:"/api/admin/jzbf/appleOrderFlow/list",add:"/api/admin/jzbf/appleOrderFlow/add",leaderCheck:"/api/admin/jzbf/appleOrderFlow/leaderCheck",devCheck:"/api/admin/jzbf/appleOrderFlow/devCheck",finalCheck:"/api/admin/jzbf/appleOrderFlow/leaderFinalCheck",searchTradeId:"/api/admin/jzbf/appleOrderFlow/devCheck/search",finalTradeId:"/api/admin/jzbf/appleOrderFlow/leaderFinalCheck/getAppleOrder",log:"/api/admin/jzbf/appleOrderFlow/opLog"}},Ua="/api/admin/quiz/list",Va="/api/admin/quiz/get/top/count",qa="/api/admin/quiz/update/del",ja="/api/admin/quiz/add",Qa="/api/admin/quiz/update",Wa="/api/admin/quiz/update/showStatus",Ba="/api/admin/quiz/update/weight",Ga="/api/admin/quiz/update/settlement",Ya="/api/admin/quiz/add/robot",Xa="/api/admin/quiz/get/quiz/count",Ka="/api/admin/quiz/update/refund",Ja="/api/admin/activity/plaza/page/list",Za="/api/admin/activity/plaza/add",ei="/api/admin/activity/plaza/update/status",ti="/api/admin/activity/plaza/update/weight",ai="/api/admin/activity/plaza/del",ii="/api/admin/activity/plaza/update/major",ri="/api/admin/activity/list",oi="/api/admin/activity/insert",ni="/api/admin/activity/modify",si="/api/admin/activity/online",li="/api/admin/activity/offline",ci="/api/admin/activity/project/page/h5/{{offset}}/{{limit}}",di="/api/admin/activity/project/add/h5",ui={0:{consumerByDay:{list:"/api/metrics/consumer/count/info",tcmList:"/api/metrics/consumer/tcm/count/info",quizList:"/api/metrics/consumer/quiz/count/info",exportList:"/api/metrics/consumer/count/info/excel",exportTcmList:"/api/metrics/consumer/tcm/count/info/excel",exportQuizList:"/api/metrics/consumer/quiz/count/info/excel"},consumerByPrice:{list:"/api/metrics/consumer/count/price/info",tcmList:"/api/metrics/tcm/order/orderPrice/stats"},newUserByDay:{list:"/api/metrics/flow/day/totalCount",createExcel:"/api/metrics/flow/day/createExcel",checkExcel:"/api/metrics/flow/day/existExcel",exportExcel:"/api/metrics/flow/day/downloadExcel"},userBuyThread:{list:"/api/metrics/consumer/buyThread/stats/list",export:"/api/metrics/consumer/buyThread/stats"},cpsOrder:{export:"/api/metrics/consumer/cps/order/excel"},lotterPush:{list:"/api/metrics/pushHands/settle/stats",export:"/api/metrics/pushHands/settle/export"}},1:{consumerByDay:{list:"/api/metrics/jzbf/consumer/count/info",exportList:"/api/metrics/jzbf/consumer/count/info/excel"},consumerByPrice:{list:"/api/metrics/jzbf/consumer/count/price/info"},newUserByDay:{list:"/api/metrics/jzbf/flow/day/totalCount",createExcel:"/api/metrics/jzbf/flow/day/createExcel",checkExcel:"/api/metrics/jzbf/flow/day/existExcel",exportExcel:"/api/metrics/jzbf/flow/day/downloadExcel"}}},mi={0:{listByTime:"/api/metrics/recharge/overview",listByPlatform:"/api/metrics/recharge/price/{{platform}}"},1:{listByTime:"/api/metrics/jzbf/recharge/overview",listByPlatform:"/api/metrics/jzbf/recharge/price/{{platform}}"}},pi="/api/metrics/expert/basicStats",fi="/api/metrics/expert/league/stats",hi="/api/metrics/expert/league/export",gi="/api/admin/expert/rank/getEarningRateRankList/{{pageIndex}}/{{pageSize}}",vi="/api/metrics/expert/monthEarningRate/stats",bi="/api/metrics/expert/earningRate/stats",_i="/api/admin/expert/rank/getPopularityRankList/{{categoryId}}/{{pageIndex}}/{{pageSize}}",yi="/api/metrics/sp/data/crosstrade/list/{{offset}}/{{limit}}",wi="/api/metrics/sp/data/macau/list/{{offset}}/{{limit}}",Ti="/api/metrics/sp/data/macau/top/count",Ii="/api/metrics/sp/data/macau/info/{{matchInfoId}}",xi="/api/metrics/sp/data/elo/list/{{offset}}/{{limit}}",ki="/api/metrics/sp/data/elo/stats",$i="/api/metrics/sp/data/elo/detail/{{matchInfoId}}",Ci="/api/admin/sp/data/elo/delEloMatch",Si="/api/admin/sp/data/elo/showEloMatch",Li="/api/admin/sp/data/elo/addFakeEloMatch",Di="/api/admin/sp/data/elo/previewFakeEloMatch",Pi={0:{create:"/api/metrics/flow/createExcel",check:"/api/metrics/flow/existExcel",export:"/api/metrics/flow/downloadExcel"},1:{create:"/api/metrics/jzbf/flow/createExcel",check:"/api/metrics/jzbf/flow/existExcel",export:"/api/metrics/jzbf/flow/downloadExcel"}},zi="/api/admin/questionAnswering/getTopicList",Hi="/api/admin/questionAnswering/reject",Mi="/api/admin/questionAnswering/modify/title",Fi="/api/admin/questionAnswering/modify/content",Ni="/api/admin/celebrity/list",Ei="/api/admin/celebrity/add",Ri="/api/admin/celebrity/update",Oi="/api/admin/celebrity/updateStatus",Ai="/api/admin/celebrity/preShow",Ui="/api/metrics/celebrity/getRec",Vi={0:{list:"/api/admin/coupon/wrap/list",listByCouponWrapId:"/api/admin/coupon/{{couponWrapId}}/list",status:"/api/admin/coupon/wrap/updateValidStatus",codeList:"/api/admin/coupon/warp/code/list",add:"/api/admin/coupon/wrap/add",update:"/api/admin/coupon/wrap/update",sendConfirmation:"/api/admin/coupon/secondary/confirmation",send:"/api/admin/coupon/wrap/send/by/excel",ResendNewCoupon:"/api/admin/coupon/wrap/send/new/coupon/account"},1:{list:"/api/admin/jzbf/coupon/wrap/list",listByCouponWrapId:"/api/admin/jzbf/coupon/{{couponWrapId}}/list",status:"/api/admin/jzbf/coupon/wrap/updateValidStatus",codeList:"/api/admin/jzbf/coupon/warp/code/list",add:"/api/admin/jzbf/coupon/wrap/add",update:"/api/admin/jzbf/coupon/wrap/update",sendConfirmation:"/api/admin/jzbf/coupon/secondary/confirmation",send:"/api/admin/jzbf/coupon/wrap/send/by/excel"}},qi={0:{list:"/api/admin/coupon/list/{{type}}/{{pageIndex}}/{{pageSize}}",status:"/api/admin/coupon/update/validStatus",checkCouponStr:"/api/admin/coupon/check/user/code/{{str}}",add:"/api/admin/coupon/{{couponWrapId}}/add",detail:"/api/admin/coupon/update/{{couponId}}/info",update:"/api/admin/coupon/update"},1:{list:"/api/admin/jzbf/coupon/list/{{type}}/{{pageIndex}}/{{pageSize}}",status:"/api/admin/jzbf/coupon/update/validStatus",checkCouponStr:"/api/admin/jzbf/coupon/check/user/code/{{str}}",add:"/api/admin/jzbf/coupon/{{couponWrapId}}/add",detail:"/api/admin/jzbf/coupon/update/{{couponId}}/info",update:"/api/admin/jzbf/coupon/update"}},ji="/api/admin/channel/list",Qi="/api/admin/channel/add",Wi="/api/admin/channel/update",Bi={0:{list:"/api/metrics/coupon/{{couponId}}/couponDetail/{{type}}/{{pageIndex}}/{{pageSize}}",log:"/api/admin/couponLog/getCouponLogList/{{couponId}}/{{pageIndex}}/{{pageSize}}",add:"/api/admin/coupon/add/total/count",addExport:"/api/admin/coupon/add/total/count/and/export"},1:{list:"/api/admin/jzbf/coupon/{{couponId}}/couponDetail/{{type}}/{{pageIndex}}/{{pageSize}}",log:"/api/admin/jzbf/couponLog/getCouponLogList/{{couponId}}/{{pageIndex}}/{{pageSize}}",add:"/api/admin/jzbf/coupon/add/total/count",addExport:"/api/admin/jzbf/coupon/add/total/count/and/export"}},Gi="/api/admin/sharePullNew/getSwitch",Yi="/api/admin/sharePullNew/upSwitch",Xi="/api/admin/sharePullNew/list/{{pageIndex}}/{{pageSize}}",Ki="/api/admin/sharePullNew/warningUser/list/{{pageIndex}}/{{pageSize}}",Ji="/api/admin/recommendExpert/getPage/{{pageIndex}}/{{pageSize}}",Zi="/api/admin/recommendExpert/add",er="/api/admin/recommendExpert/del",tr="/api/admin/recommendExpert/update",ar="/api/admin/buyXGetN/list/{{pageIndex}}/{{pageSize}}",ir="/api/admin/buyXGetN/add",rr="/api/admin/buyXGetN/update/{{buyXGetNActivityId}}",or="/api/admin/buyXGetN/updateStatus/{{buyXGetNActivityId}}",nr="/api/admin/buyXGetN/get/{{buyXGetNActivityId}}",sr="/api/admin/buyXGetN/del/{{buyXGetNActivityId}}",lr="/api/admin/pushHands/list/{{pageIndex}}/{{pageSize}}",cr="/api/admin/pushHands/add",dr="/api/admin/pushHands/update/{{pushHandsId}}",ur="/api/admin/pushHands/del/{{pushHandsId}}",mr="/api/admin/pushHands/getSwitch",pr="/api/admin/pushHands/upSwitch",fr="/api/admin/pushHandsUser/list",hr="/api/admin/pushHandsUser/add",gr="/api/admin/pushHandsUser/{{pushHandsUserId}}/update",vr="/api/admin/pushHandsUser/{{pushHandsUserId}}/onlineOffline",br={status:"api/admin/jzbf/pushChat/getSwitch",updateStatus:"api/admin/jzbf/pushChat/upSwitch"},_r={get:"/api/admin/jzbf/push/access/getSwitch",update:"/api/admin/jzbf/push/access/upSwitch"},yr={accessList:"/api/admin/websocket/instance/list",statusByAccessId:"/api/admin/rocket/{{accessId}}/status",channelListByAccessId:"/api/admin/rocket/{{accessId}}/mq/channelList",channelDelByAccessId:"/api/admin/rocket/{{accessId}}/mq/channel/remove",clientQueryById:"/api/admin/rocket/{{accessId}}/client/query",clientDelById:"/api/admin/rocket/{{accessId}}/client/remove",msgDispatch:"api/admin/rocket/{{accessId}}/dispatcher/msg/info",msgPub:"api/admin/rocket/{{accessId}}/pub/msg/info"},wr={accessList:"/api/admin/jzbf/websocket/instance/list",statusByAccessId:"/api/admin/jzbf/rocket/{{accessId}}/status",channelListByAccessId:"/api/admin/jzbf/rocket/{{accessId}}/mq/channelList",channelDelByAccessId:"/api/admin/jzbf/rocket/{{accessId}}/mq/channel/remove",clientQueryById:"/api/admin/jzbf/rocket/{{accessId}}/client/query",clientDelById:"/api/admin/jzbf/rocket/{{accessId}}/client/remove",msgDispatch:"api/admin/jzbf/rocket/{{accessId}}/dispatcher/msg/info",msgPub:"api/admin/jzbf/rocket/{{accessId}}/pub/msg/info"},Tr="/api/admin/nano/map/old/matchList",Ir="/api/admin/nano/map/nano/matchList",xr="/api/admin/nano/map/old/leagueMatchList",kr="/api/admin/nano/map/nano/leagueMatchList",$r="/api/admin/nano/map/forceMatch",Cr="/api/admin/nano/map/delMatch",Sr={0:{user:{get:"/api/metrics/chat/stats/info",export:"/api/metrics/chat/stats/info/export"},vote:{get:"/api/metrics/vote/stats/count"}},1:{user:{get:"/api/metrics/jzbf/chat/stats/info",export:"/api/metrics/jzbf/chat/stats/info/export"},vote:{get:"/api/metrics/jzbf/vote/stats/count"}}},Lr="/api/admin/residentExpert/list/{{pageIndex}}/{{pageSize}}",Dr="/api/admin/residentExpert/add",Pr="/api/admin/residentExpert/update",zr="/api/admin/residentExpert/del/{{statusExtendId}}",Hr={list:"/api/admin/chatSystem/special/list/{{pageIndex}}/{{pageSize}}",add:"/api/admin/chatSystem/special/add",editnickname:"/api/admin/admin/updateNickname"},Mr={list:"/api/admin/chatSystem/global/list/{{pageIndex}}/{{pageSize}}",add:"/api/admin/chatSystem/global/add",delete:"/api/admin/chatSystem/global/del/{{chatSystemAnnounceId}}"},Fr="/api/admin/drawLottery/activity/list",Nr="/api/admin/drawLottery/activity/add",Er="/api/admin/drawLottery/activity/updateRecHomePage",Rr="/api/admin/drawLottery/activity/updateStatus",Or="/api/admin/drawLottery/activity/delete",Ar="/api/admin/drawLottery/lottery/list",Ur="/api/admin/drawLottery/lottery/add",Vr="/api/admin/drawLottery/lottery/update",qr="/api/admin/drawLottery/lottery/delete",jr="/api/admin/advertising/list",Qr="/api/admin/advertising/add",Wr="/api/admin/advertising/update",Br="/api/admin/advertising/type/list",Gr="/api/metrics/pushHands/orderDetail/stats",Yr="/api/metrics/pushHands/orderDetail/export",Xr="/api/admin/expert/netIncome/pushHandsDepositRate/set",Kr="/api/admin/expert/netIncome/pushHandsDepositRate/clear",Jr="/api/admin/fix/nano/clear/live/text",Zr="/api/admin/fix/thread/allThread/fixDataErrorResetThreadOver/{{matchInfoId}}",eo="/api/admin/fix/match/updateStatusScore/{{matchInfoId}}/{{matchStatus}}/{{homeScore}}/{{guestScore}}",to="/api/admin/fix/match/cleanDataCache",ao="/api/admin/fix/match/matchTeam/updateMatchTeam/{{teamId}}",io="/api/admin/fix/match/matchLeague/updateMatchLeague/{{leagueMatchId}}",ro="/api/admin/fix/nano/score/fixdata",oo="/api/admin/fix/del/cache",no="/api/admin/fix/expert/deleteExpertCanBetCountKey/{{expertId}}",so="/api/admin/fix/expert/expertCanBetCount/autoFixAllExpert",lo="/api/admin/fix/expert/win/autoFixAllExpert",co="/api/admin/fix/expert/expert/win/autoFix",uo="/api/admin/fix/expert/expert/win/autoFix/getValue",mo="/api/admin/fix/expert/win/manualFix",po="/api/admin/fix/expert/rank/flushPopularityRankListCache/{{categoryId}}",fo="/api/admin/fix/user/delUserCache/{{userId}}",ho="/api/admin/fix/init/dishRoad",go="/api/admin/fix/elo/predictOneMatch/{{matchInfoId}}",vo="/api/admin/fix/elo/deleteElo/{{matchInfoId}}",bo="/api/admin/fix/elo/settlement/{{matchInfoId}}",_o="/api/admin/fix/elo/cache/list/delete",yo="/api/admin/fix/elo/cache/detail/delete/{{matchInfoId}}",wo="/api/admin/fix/elo/delCompetitionRatingScoreList/{{leagueMatchId}}",To="/api/admin/fix/elo/delTeamRatingScore/{{leagueMatchId}}/{{teamId}}",Io="/api/admin/fix/elo/delAllTeamRatingScoreCache",xo="/api/admin/fix/elo/fetchSchedule",ko="/api/admin/fix/elo/sendDrawOddsMessage/{{competitionCode}}/{{season}}/{{round}}",$o="/api/admin/fix/elo/league/statistic",Co="/api/admin/fix/matchVote/initMatchVote",So="/api/admin/fix/matchVote/settleMatchVoteFinallyManual",Lo="/api/admin/fix/matchVote/setMatchAllVote2Cancel",Do="/api/admin/fix/matchVote/clearVoteCache",Po="/api/admin/fix/matchVote/setMatchVote2Start",zo="/api/admin/fix/matchVote/rollbackMatchVoteManual",Ho="/api/admin/fix/nano/nano/data",Mo="/api/admin/fix/user/stopUserVIPNService",Fo="api/admin/offline/list",No="/api/admin/offline/add",Eo="/api/admin/offline/update/on",Ro="/api/admin/offline/update/off",Oo="/api/admin/offline/history",Ao={0:{list:"/api/admin/chat/userManage/list/{{type}}/{{pageIndex}}/{{pageSize}}",add:"/api/admin/chat/userManage/add/{{type}}",del:"/api/admin/chat/userManage/del/{{type}}"},1:{list:"/api/admin/jzbf/chat/userManage/list/{{type}}/{{pageIndex}}/{{pageSize}}",add:"/api/admin/jzbf/chat/userManage/add/{{type}}",del:"/api/admin/jzbf/chat/userManage/del/{{type}}"}},Uo="/api/metrics/sp/vip/stats",Vo=a("mvHQ"),qo=a.n(Vo),jo=a("pFYg"),Qo=a.n(jo),Wo=a("//Fk"),Bo=a.n(Wo),Go=a("mtWM"),Yo=a.n(Go),Xo=function(e,t){return e?((t=t||{}).method=t.method||"get",t.url=e,t.urlParams&&(t.url=(a=t.url,(i=t.urlParams)?a.replace(/\{\{([^}]+)\}\}/g,function(e,t){return null!==i[t]||void 0!==i[t]?i[t]:e}):a)),t.headers=t.headers||{},Yo.a.defaults.headers.post["Content-Type"]=t.headers["Content-Type"]||"application/x-www-form-urlencoded;charset=UTF-8",t.transformRequest=function(e){if(!e||"object"!==(void 0===e?"undefined":Qo()(e))||t.headers["Content-Type"])return e;var a=[];for(var i in e)a.push(i+"="+encodeURIComponent("object"===Qo()(e[i])?qo()(e[i]):e[i]));return a.join("&")},Yo.a.defaults.timeout=12e4,Yo()(t).then(function(e){return e.status&&200===e.status?Bo.a.resolve(e.data):Bo.a.reject(e)},function(t){var a=null;return a=t.response?{status:t.response.status,statusText:t.response.statusText,url:e}:e+" 接口权限不足",Bo.a.reject(a)})):Bo.a.reject(new Error("URL路径错误"));var a,i},Ko={name:"Header",methods:{userLogout:function(){var e=this;Xo(m.logout).then(function(t){200===t.code?window.location.href=window.location.origin+m.login:e.$message.error("接口异常，退出失败！")},function(t){t&&e.$message.error("接口异常，退出失败！")})}}},Jo={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"manager-header"},[a("div",{staticClass:"logo"},[e.$store.state.windowWidth>=1280?a("span",[e._v("网易红彩运营平台")]):a("span",{staticClass:"menu-icon",class:{open:!e.$store.state.menuOpen,close:e.$store.state.menuOpen},on:{click:function(t){e.$store.state.menuOpen=!e.$store.state.menuOpen}}})]),e._v(" "),e.$store.state.userInfo?a("div",{staticClass:"user-info"},[a("el-button",{staticClass:"myLink",attrs:{type:"danger",size:"mini"}},[a("a",{attrs:{href:"/im.html",target:"_blank"}},[e._v("专属客服")])]),e._v(" "),a("span",[e._v("你好，"+e._s(e.$store.state.userInfo.userName))]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.userLogout()}}},[e._v("退出")])],1):e._e()])},staticRenderFns:[]};var Zo=a("VU/8")(Ko,Jo,!1,function(e){a("1+y7")},null,null).exports,en=a("woOf"),tn=a.n(en),an=a("Gu7T"),rn=a.n(an),on={goodsType:{0:[{id:1,name:"专家方案"},{id:2,name:"交叉盘(老)"},{id:3,name:"澳彩五星"},{id:4,name:"盘赔变动"},{id:5,name:"点卡"},{id:6,name:"红彩指数"},{id:8,name:"交叉盘(MAJIA1)"},{id:9,name:"交叉盘(MAJIA2)"},{id:10,name:"交叉盘(MAJIA3)"},{id:11,name:"交叉盘(新)"},{id:13,name:"VIP大会员"},{id:14,name:"数字彩方案"},{id:15,name:"旋转矩阵付费"}],1:[{id:1,name:"专家方案"},{id:3,name:"澳彩五星"},{id:4,name:"盘赔变动"},{id:5,name:"点卡"},{id:6,name:"红彩指数"},{id:13,name:"VIP大会员"}]},payTerminal:{0:[{id:0,name:"其他"},{id:2,name:"iOS"},{id:1,name:"Android"},{id:3,name:"PC"},{id:4,name:"WAP"},{id:5,name:"PRVIP"},{id:6,name:"MAJIA1"},{id:7,name:"MAJIA2"},{id:8,name:"MAJIA2"},{id:9,name:"iOSWAP"},{id:10,name:"AndroidWAP"},{id:11,name:"AndroidHousedWAP"},{id:12,name:"iOSHousedWAP"},{id:13,name:"HousedWAP"}],1:[{id:0,name:"其他"},{id:2,name:"iOS"},{id:1,name:"Android"},{id:3,name:"PC"},{id:4,name:"WAP"},{id:5,name:"iOSWAP"},{id:6,name:"WX_MINIPRO"}]},urlRedirectType:[{id:2,type:"EXPERT",name:"专家"},{id:3,type:"MATCH",name:"赛事"},{id:4,type:"THREAD",name:"方案"},{id:1,type:"URL",name:"URL"},{id:5,type:"FAVORITE_EXPERT",name:"关注专家方案列表"},{id:6,type:"FREE_THREAD",name:"免费专区列表"},{id:7,type:"SOCCER_REAL",name:"足球即时列表(今)"},{id:8,type:"BASKETBALL_REAL",name:"篮球即时列表(今)"},{id:9,type:"SOCCER_RESULTS",name:"足球赛果列表(昨)"},{id:10,type:"BASKETBALL_RESULTS",name:"篮球赛果列表(昨)"},{id:11,type:"SOCCER_COURSE",name:"足球赛程列表(明)"},{id:12,type:"BASKETBALL_COURSE",name:"篮球赛程列表(明)"},{id:13,type:"SFC",name:"胜负彩列表"},{id:14,type:"COUPON",name:"优惠券列表"},{id:15,type:"FAVORITE_MATCH",name:"关注赛事列表"},{id:16,type:"RECHARGE",name:"充值页"},{id:17,type:"BALANCE",name:"余额页"},{id:18,type:"ORDER_GOODS",name:"我的订单"},{id:19,type:"CROSS_TRADE",name:"交叉盘列表"},{id:20,type:"PANELLIST",name:"盘路榜列表"},{id:21,type:"LEAGUE_MATCH",name:"联赛列表"},{id:22,type:"MACAUS_MATCHLIST",name:"澳彩五星列表"},{id:23,type:"MACAUS_MATCHPAGE",name:"澳彩五星详情页"},{id:24,type:"ODDS_CHANGE",name:"盘赔变动详情页"},{id:25,type:"POINT_CARDLIST",name:"点卡列表"},{id:26,type:"POINT_CARDPAGE",name:"点卡详情页"},{id:27,type:"ELO_MATCHLIST",name:"红彩指数列表"},{id:28,type:"ELO_MATCHPAGE",name:"红彩指数详情页"},{id:30,type:"NEW_CROSS_TRADE_PAY",name:"交叉盘购买页"},{id:31,type:"QUIZ_INDEX",name:"竞猜首页"},{id:32,type:"QUIZ_HISTORY_BET",name:"拉新竞猜历史记录"},{id:33,type:"SUBJECT_QUIZ_INDEX",name:"拉新竞猜首页"},{id:34,type:"H5_URL_REDIRECT_MODEL",name:"竞猜类型链接"}],articleStatus:[{id:1,name:"未开始"},{id:2,name:"进行中"},{id:3,name:"已结束"},{id:4,name:"比赛取消"},{id:5,name:"审核未过"},{id:6,name:"已下线"}],matchStatus:[{id:1,name:"未开始"},{id:2,name:"进行中"},{id:3,name:"已结束"},{id:4,name:"已延期"},{id:5,name:"已取消"}],tcmMatchStatus:[{id:1,name:"未开始"},{id:2,name:"进行中"},{id:3,name:"已结束"},{id:4,name:"已封盘"},{id:5,name:"已延期"},{id:6,name:"已取消"}],tcmMallType:[{id:1,name:"实物"},{id:2,name:"内部虚拟物品"},{id:3,name:"外部虚拟物品"}],tcmMallOrderStatus:[{id:1,name:"创建"},{id:2,name:"待确认"},{id:3,name:"确认兑换"},{id:4,name:"驳回兑换"},{id:5,name:"已发货"},{id:6,name:"重新发货"},{id:7,name:"确认收货"}],tcmOrderStatus:[{id:0,name:"订单处理中"},{id:1,name:"下单成功"},{id:2,name:"已结算"},{id:3,name:"已退单"},{id:4,name:"提前结算处理中"},{id:5,name:"提前结算"},{id:6,name:"下单失败"},{id:7,name:"订单无效"},{id:8,name:"下单被拒"},{id:9,name:"二次结算"}],rechargeOrderStatus:[{id:1,name:"待支付"},{id:2,name:"成功"},{id:3,name:"失败"},{id:4,name:"退款中"},{id:5,name:"已退款"},{id:6,name:"关闭"},{id:7,name:"卖家资料审核中"},{id:8,name:"退款失败"},{id:9,name:"冻结"}],payChannel:[{id:1,name:"IPA"},{id:2,name:"支付宝"},{id:3,name:"微信"},{id:4,name:"网易宝"},{id:5,name:"京东支付"},{id:6,name:"银联云闪付"}],orderType:[{id:1,name:"红豆充值"},{id:2,name:"现金订阅"},{id:3,name:"点卡购买"}],productOrderStatus:[{id:1,name:"冻结"},{id:2,name:"取消"},{id:3,name:"结算"},{id:4,name:"退豆"},{id:5,name:"不中退"},{id:6,name:"首单不中退"},{id:7,name:"清除账号红豆"},{id:8,name:"五连黑不中退"},{id:9,name:"不中退券退款"}],productPayType:{0:[{id:1,name:"红豆"},{id:2,name:"现金"},{id:3,name:"点卡"}],1:[{id:1,name:"金币"},{id:2,name:"现金"},{id:3,name:"点卡"}]},threadType:[{id:1,name:"足球"},{id:2,name:"篮球"},{id:3,name:"胜负彩"},{id:4,name:"任九"},{id:5,name:"胜负彩&任九"},{id:6,name:"北单足球"},{id:7,name:"北单篮球"}],accountType:[{id:1,name:"个人"},{id:2,name:"机构"}],region:[{id:0,name:"国内"},{id:1,name:"国外"},{id:2,name:"外国人中国卡"},{id:3,name:"机构"}],questionStatus:[{id:0,name:"待回复"},{id:1,name:"已驳回"},{id:2,name:"已超时"},{id:3,name:"已拒绝"},{id:4,name:"已回复"}],couponType:[{id:1,name:"折扣券"},{id:2,name:"减满券"},{id:3,name:"直减券"},{id:5,name:"不中退"},{id:6,name:"体验券"},{id:7,name:"充值券"}],vipLevel:[{id:0,name:"基础用户"},{id:1,name:"银卡用户"},{id:2,name:"金卡用户"},{id:3,name:"钻石卡用户"},{id:4,name:"至尊VIP用户"}]},nn=a("/ocq"),sn=a("NYxO");s.a.use(sn.a);var ln={userInfo:null,windowHeight:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,windowWidth:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,menuOpen:!1},cn={getUserInfo:function(e){var t=e.commit;return new Bo.a(function(e,a){Xo(m.login,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(i){40110===i.code?Xo(m.userInfo).then(function(i){200===i.code?(t("setUserInfo",i.data),e(i)):a(i)},function(e){a(e)}):a(i)},function(e){a(e)})})}},dn=new sn.a.Store({state:ln,mutations:{setUserInfo:function(e,t){e.userInfo=t}},actions:cn}),un={name:"view",computed:{keepAliveRoutes:function(){return uh()}}},mn={render:function(){var e=this.$createElement,t=this._self._c||e;return t("keep-alive",{attrs:{include:[].concat(this.keepAliveRoutes)}},[t("router-view")],1)},staticRenderFns:[]},pn=a("VU/8")(un,mn,!1,null,null,null).exports,fn={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"error"},[this._v("\n  Error\n")])},staticRenderFns:[]},hn=a("VU/8")({name:"Error"},fn,!1,null,null,null).exports,gn={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"forbidden"},[this._v("\n  权限不足\n")])},staticRenderFns:[]},vn=a("VU/8")({name:"Forbidden"},gn,!1,null,null,null).exports,bn={name:"ArticleQuizList",data:function(){return{listType:"filter",sortRrders:["descending","ascending",null],pageIndex:1,pageSize:25,articleStatus:on.articleStatus,lotteryList:[],buyChannelList:[],buyChannel2CH:{},list:[],filterQuery:{foreign:"false",eType:0,categoryId:0,leagueName:"",leagueId:"",startTime:null,endTime:null,threadEndTimeStart:null,threadEndTimeEnd:null,plock:"0",weight:"",buyTypeId:0,sortField:null,sortDesc:null},searchQuery:"",loading:!1,tableHeight:null}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getLottery(),this.getChannelList(),this.getFilterList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getLottery:function(){var e=this;this.$service(h).then(function(t){200===t.code&&(t.data.forEach(function(t){100!==t.cId&&e.lotteryList.push(t)}),e.lotteryList.sort(hh("cId")),e.setHeight())})},getChannelList:function(){var e=this;this.$service(k).then(function(t){200===t.code&&(e.buyChannelList=t.data,t.data.forEach(function(t){e.buyChannel2CH[t.typeId]=t.name}),e.setHeight())})},getFilterList:function(e){var t=this;if(!this.loading){this.loading=!0,void 0===e&&(this.filterQuery.sortField=null),this.pageIndex=fh(e)?e:1;var a={buyTypeId:this.filterQuery.buyTypeId,foreign:"false"!==this.filterQuery.foreign&&("true"===this.filterQuery.foreign||"")};parseInt(this.filterQuery.categoryId)&&(a.categoryId=this.filterQuery.categoryId),this.filterQuery.leagueId&&(a.leagueId=this.filterQuery.leagueId),parseInt(this.filterQuery.plock)&&(a.plock=this.filterQuery.plock),this.filterQuery.startTime&&(a.startTime=this.filterQuery.startTime),this.filterQuery.endTime&&(a.endTime=this.filterQuery.endTime),this.filterQuery.threadEndTimeStart&&(a.threadEndTimeStart=this.filterQuery.threadEndTimeStart),this.filterQuery.threadEndTimeEnd&&(a.threadEndTimeEnd=this.filterQuery.threadEndTimeEnd),this.filterQuery.weight>=-999&&this.filterQuery.weight<=999&&""!==this.filterQuery.weight&&(a.weight=this.filterQuery.weight),this.filterQuery.sortField&&(a.sortField=this.filterQuery.sortField,a.sortDesc=this.filterQuery.sortDesc),this.filterQuery.businessTypeId&&"1"===this.filterQuery.businessTypeId&&(a.businessTypeId=1),(this.filterQuery.eType||0===this.filterQuery.eType)&&(a.eType=this.filterQuery.eType),this.searchQuery="",this.$service(I,{urlParams:{pageIndex:this.pageIndex,pageSize:this.pageSize},params:a}).then(function(a){t.loading=!1,200===a.code?(t.listType="filter",t.$refs.elTable.bodyWrapper.scrollTop=0,t.list=a.data.records||[],t.pageCount=a.data.page&&a.data.page.pageCount?a.data.page.pageCount:1,e&&"category"!==e||t.$refs.elTable.clearSort()):t.$message.error(a.code+":"+a.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))})}},getSearchList:function(e){var t=this;this.searchQuery&&!this.loading&&(this.loading=!0,this.pageIndex="search"===e?1:e,this.filterQuery.categoryId=null,this.$service(x,{urlParams:{pageIndex:this.pageIndex,pageSize:this.pageSize},params:{queryParam:this.searchQuery}}).then(function(e){t.loading=!1,200===e.code?(t.listType="search",t.$refs.elTable.bodyWrapper.scrollTop=0,t.list=e.data.records||[],t.pageCount=e.data.page?e.data.page.pageCount:1):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))}))},pageChange:function(e){switch(this.listType){case"filter":this.getFilterList(e);break;case"search":this.getSearchList(e)}},querySearchLeagueAsync:function(e,t){e&&this.$service(g,{params:{queryParam:e}}).then(function(e){200===e.code&&t(e.data)})},handleLeagueSelect:function(e){this.filterQuery.leagueId=e.leagueId},handlerWeightSearch:function(){this.filterQuery.weight=this.filterQuery.weight.replace(/[^0-9-]/g,"")},changeWeightColumn:function(e){var t=this;this.$prompt("","修改权重",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^-?\d{1,3}$/,inputErrorMessage:"-999-999之间",closeOnClickModal:!1,inputValue:e.weight}).then(function(a){var i=a.value;t.$service($,{urlParams:{threadId:e.threadId,weight:i}}).then(function(a){200===a.code?(e.weight=i,t.$message.success("修改成功！")):t.$message.error(a.code+":"+a.message)},function(e){t.$message.error(qo()(e))})})},changeVoteSupport:function(e){var t=this;this.$prompt("","修改:支持量",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^-?\d{1,3}$/,inputErrorMessage:"-999-999之间",closeOnClickModal:!1,inputValue:e.voteSupport}).then(function(a){var i=a.value;t.$service(C,{method:"post",urlParams:{threadId:e.threadId},params:{voteSupport:i}}).then(function(a){200===a.code?(e.voteSupport=i,t.$message.success("修改成功！")):t.$message.error(a.code+":"+a.message)},function(e){t.$message.error(qo()(e))})})},sortList:function(e,t,a){this.filterQuery.sortField=e.prop,this.filterQuery.sortDesc="ascending"!==e.order&&("descending"===e.order||null),this.getFilterList("sort")},expertChange:function(e){this.filterQuery.categoryId=null,this.filterQuery.eType=e}},watch:{windowHeight:function(){this.setHeight()}}},_n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"quiz-list"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title)+"\n        ")])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-input",{staticStyle:{width:"auto"},attrs:{placeholder:"标题/文章ID/专家名","prefix-icon":"el-icon-search",clearable:"",size:"mini"},on:{clear:function(t){return e.getFilterList()},change:function(t){return e.getSearchList("search")}},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}})],1)]),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.filterQuery,size:"mini",disabled:e.loading}},[a("el-form-item",[a("el-radio-group",{on:{change:function(t){e.filterQuery.eType=0}},model:{value:e.filterQuery.categoryId,callback:function(t){e.$set(e.filterQuery,"categoryId",t)},expression:"filterQuery.categoryId"}},[a("el-radio-button",{attrs:{label:"0"}},[e._v("全部")]),e._v(" "),e._l(e.lotteryList,function(t){return a("el-radio-button",{key:t.cId,attrs:{label:t.cId}},[e._v(e._s(t.cName)+"\n        ")])})],2)],1),e._v(" "),a("el-form-item",[a("el-button",{class:{"el-button--primary":1===e.filterQuery.eType},on:{click:function(t){return e.expertChange(1)}}},[e._v("预选专家")])],1),e._v(" "),a("el-form-item",{attrs:{label:"联赛筛选"}},[a("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchLeagueAsync,placeholder:"请输入联赛名称","trigger-on-focus":!1,debounce:30,"value-key":"leagueName",clearable:""},on:{select:e.handleLeagueSelect},model:{value:e.filterQuery.leagueName,callback:function(t){e.$set(e.filterQuery,"leagueName",t)},expression:"filterQuery.leagueName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发布时间"}},[a("el-date-picker",{staticStyle:{width:"135px"},attrs:{type:"date",editable:"false",placeholder:"开始日期","value-format":"yyyy-MM-dd 00:00:00","picker-options":{disabledDate:function(t){return t.getTime()>Date.now()||0!==new Date(e.filterQuery.endTime).getTime()&&t.getTime()>new Date(e.filterQuery.endTime).getTime()}}},on:{change:function(t){e.filterQuery.threadEndTimeStart="",e.filterQuery.threadEndTimeEnd=""}},model:{value:e.filterQuery.startTime,callback:function(t){e.$set(e.filterQuery,"startTime",t)},expression:"filterQuery.startTime"}}),e._v("\n      ~\n      "),a("el-date-picker",{staticStyle:{width:"135px"},attrs:{type:"date",editable:"false",placeholder:"结束日期","value-format":"yyyy-MM-dd 23:59:59","picker-options":{disabledDate:function(t){return t.getTime()>Date.now()||0!==new Date(e.filterQuery.startTime).getTime()&&t.getTime()<new Date(e.filterQuery.startTime).getTime()}}},on:{change:function(t){e.filterQuery.threadEndTimeStart="",e.filterQuery.threadEndTimeEnd=""}},model:{value:e.filterQuery.endTime,callback:function(t){e.$set(e.filterQuery,"endTime",t)},expression:"filterQuery.endTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结算时间"}},[a("el-date-picker",{staticStyle:{width:"135px"},attrs:{type:"date",editable:"false",width:"100",placeholder:"结算开始日期","value-format":"yyyy-MM-dd 00:00:00","picker-options":{disabledDate:function(t){return t.getTime()>Date.now()||0!==new Date(e.filterQuery.threadEndTimeEnd).getTime()&&t.getTime()>new Date(e.filterQuery.threadEndTimeEnd).getTime()}}},on:{change:function(t){e.filterQuery.startTime="",e.filterQuery.endTime=""}},model:{value:e.filterQuery.threadEndTimeStart,callback:function(t){e.$set(e.filterQuery,"threadEndTimeStart",t)},expression:"filterQuery.threadEndTimeStart"}}),e._v("\n      ~\n      "),a("el-date-picker",{staticStyle:{width:"135px"},attrs:{type:"date",editable:"false",placeholder:"结算结束日期","value-format":"yyyy-MM-dd 23:59:59","picker-options":{disabledDate:function(t){return t.getTime()>Date.now()||0!==new Date(e.filterQuery.threadEndTimeStart).getTime()&&t.getTime()<new Date(e.filterQuery.threadEndTimeStart).getTime()}}},on:{change:function(t){e.filterQuery.startTime="",e.filterQuery.endTime=""}},model:{value:e.filterQuery.threadEndTimeEnd,callback:function(t){e.$set(e.filterQuery,"threadEndTimeEnd",t)},expression:"filterQuery.threadEndTimeEnd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{staticStyle:{width:"105px"},model:{value:e.filterQuery.plock,callback:function(t){e.$set(e.filterQuery,"plock",t)},expression:"filterQuery.plock"}},[a("el-option",{attrs:{label:"全部",value:"0"}},[e._v("全部")]),e._v(" "),e._l(e.articleStatus,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"权重"}},[a("el-input",{staticStyle:{width:"102px"},attrs:{placeholder:"-999~999",max:"999",min:"-999",clearable:""},nativeOn:{keyup:function(t){return e.handlerWeightSearch(t)}},model:{value:e.filterQuery.weight,callback:function(t){e.$set(e.filterQuery,"weight",t)},expression:"filterQuery.weight"}})],1),e._v(" "),e.buyChannelList.length>0?a("el-form-item",{attrs:{label:"购买数"}},[a("el-select",{staticStyle:{width:"110px"},model:{value:e.filterQuery.buyTypeId,callback:function(t){e.$set(e.filterQuery,"buyTypeId",t)},expression:"filterQuery.buyTypeId"}},e._l(e.buyChannelList,function(e){return a("el-option",{key:e.typeId,attrs:{label:e.name,value:e.typeId}})}),1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"专家分类"}},[a("el-select",{staticStyle:{width:"110px"},model:{value:e.filterQuery.foreign,callback:function(t){e.$set(e.filterQuery,"foreign",t)},expression:"filterQuery.foreign"}},[a("el-option",{attrs:{label:"全部",value:"false"}}),e._v(" "),a("el-option",{attrs:{label:"外籍专家",value:"true"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否临场类型"}},[a("el-select",{staticStyle:{width:"110px"},model:{value:e.filterQuery.businessTypeId,callback:function(t){e.$set(e.filterQuery,"businessTypeId",t)},expression:"filterQuery.businessTypeId"}},[a("el-option",{attrs:{label:"全部",value:"0"}},[e._v("全部")]),e._v(" "),a("el-option",{attrs:{label:"临场方案",value:"1"}},[e._v("临场方案")])],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getFilterList()}}},[e._v("查询")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight},on:{"sort-change":e.sortList}},[a("el-table-column",{attrs:{label:"彩种",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.cName)+" "),3===t.row.plock?a("el-tag",{staticStyle:{color:"#fff"},attrs:{size:"mini",color:1===t.row.isWin?"#e62121":"#333"}},[e._v(e._s(t.row.hitRateValue))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"发布时间",width:"155"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题","min-width":"200","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.refund?a("el-tag",{attrs:{size:"mini"}},[e._v("不中退")]):e._e(),e._v(" "),a("router-link",{attrs:{to:{name:"ArticleQuizDetail",params:{id:t.row.threadId}}}},[t.row.businessTypeId?a("span",{staticStyle:{color:"#e62121"}},[e._v("【临场】")]):e._e(),3==t.row.categoryId||4==t.row.categoryId?a("span",{staticStyle:{color:"#e62121"}},[e._v("【"+e._s(e._f("threadType2CH")(t.row.threadTypeId))+"】")]):e._e(),e._v(e._s(t.row.title)+"\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"threadId",label:"文章ID",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"ArticleQuizDetail",params:{id:t.row.threadId}}}},[e._v(e._s(t.row.threadId)+"\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"专家",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"ExpertDetail",params:{id:t.row.userId}}}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"近X场",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.maxHitRate))),a("span",{staticClass:"text-red"},[e._v(e._s(t.row.partOfAllRate?"("+t.row.partOfAllRate.match(/\d+/g)[0]+")":""))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"5场",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.fiveMatchesEarningRate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"10场",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.tenMatchesEarningRate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"15场",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.fifteenMatchesEarningRate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"20场",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.twentyMatchesEarningRate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"总盈利率",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.totalEarningRate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"buyCount",sortable:"filter"===e.listType&&!e.filterQuery.leagueId&&"custom","sort-orders":e.sortRrders,width:"115"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v(e._s(("filter"===e.listType?e.buyChannel2CH[e.filterQuery.buyTypeId]||"红彩":"")+"购买数"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格",sortable:"filter"===e.listType&&!e.filterQuery.leagueId&&"custom","sort-orders":e.sortRrders,width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.price>0?a("span",[e._v(e._s(t.row.price))]):a("span",{staticClass:"text-red"},[e._v("免费")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"weight",label:"权重",sortable:"filter"===e.listType&&!e.filterQuery.leagueId&&"custom","sort-orders":e.sortRrders,width:"85"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.changeWeightColumn(t.row)}}},[e._v(e._s(t.row.weight))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("articleStatus2CH")(t.row.plock))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"points",label:"点数",sortable:"filter"===e.listType&&!e.filterQuery.leagueId&&"custom","sort-orders":e.sortRrders,width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"voteSupport",label:"方案支持量",sortable:"filter"===e.listType&&!e.filterQuery.leagueId&&"custom","sort-orders":e.sortRrders,width:"115"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.changeVoteSupport(t.row)}}},[e._v(e._s(t.row.voteSupport))])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.pageChange}})],1)},staticRenderFns:[]},yn=a("VU/8")(bn,_n,!1,null,null,null).exports,wn=a("yPE/"),Tn=a.n(wn),In=a("Zx67"),xn=a.n(In),kn=a("Zrlr"),$n=a.n(kn),Cn=a("wxAW"),Sn=a.n(Cn),Ln=a("zwoO"),Dn=a.n(Ln),Pn=a("yEsh"),zn=a.n(Pn),Hn=a("Pf15"),Mn=a.n(Hn),Fn=function(e){function t(){return $n()(this,t),Dn()(this,(t.__proto__||xn()(t)).apply(this,arguments))}return Mn()(t,e),Sn()(t,null,[{key:"create",value:function(e){var a=zn()(t.__proto__||xn()(t),"create",this).call(this);return a.setAttribute("ourl",e.ourl),a.setAttribute("owidth",e.owidth),a.setAttribute("oheight",e.oheight),a.setAttribute("src",e.src),a}},{key:"value",value:function(e){return{ourl:e.getAttribute("ourl"),src:e.getAttribute("src"),owidth:e.getAttribute("owidth"),oheight:e.getAttribute("oheight")}}}]),t}(Tn.a.import("blots/block/embed"));Fn.blotName="image",Fn.tagName="img";var Nn=Fn,En=function(e,t,a){var i={};i=a?f:p;var r=new FormData;return r.append("0",e),Xo(i,{urlParams:{serviceType:t},method:"post",headers:{"Content-Type":"multipart/form-data"},data:r}).then(function(e){return 200===e.code?Bo.a.resolve(e.data[0].sourceUrl):Bo.a.reject(e.message)},function(e){return Bo.a.reject(qo()(e))})},Rn=function(e){return Xo(S,{urlParams:{threadId:e}}).then(function(e){return 200===e.code?Bo.a.resolve(e.data):Bo.a.reject(e.message)},function(e){return Bo.a.reject(qo()(e))})},On=function(e){return Xo(We,{urlParams:{userId:e}}).then(function(e){return 200===e.code?Bo.a.resolve(e.data):Bo.a.reject(e.message)},function(e){return Bo.a.reject(qo()(e))})},An=function(e){return Xo(Tt,{urlParams:{matchInfoId:e}}).then(function(e){return 200===e.code?Bo.a.resolve(e.data):Bo.a.reject(e.message)},function(e){return Bo.a.reject(qo()(e))})},Un=function(e){return Xo(b,{urlParams:{couponId:e}}).then(function(e){return 200===e.code?Bo.a.resolve(e.data):Bo.a.reject(e.message)},function(e){return Bo.a.reject(qo()(e))})};a("4qOc");Tn.a.register(Nn);var Vn={name:"Editor",props:{value:{type:"String",default:""},height:{type:"Number",default:250},wordLimitString:{type:"String",default:""}},data:function(){return{quill:null,quillTemp:null,content:null,wordCount:0,quillUpdateImg:!1,editorOption:{theme:"snow",boundary:document.body,placeholder:"",modules:{toolbar:{container:[["bold","italic","underline","image","clean"]],handlers:{image:this.handlersImage}},clipboard:{matchers:[[Node.ELEMENT_NODE,function(e,t){var a=[];return t.ops.forEach(function(e){e.insert&&"string"==typeof e.insert&&a.push({insert:e.insert})}),t.ops=a,t}]]}}}}},mounted:function(){this.initialize()},methods:{initialize:function(){var e=this;this.$el&&(this.quill=new Tn.a(this.$refs.quillEditor,this.editorOption),this.quillTemp=new Tn.a(this.$refs.quillEditorTemp),(this.value||this.content)&&(this.quill.root.innerHTML=this.value||this.content||""),this.quill.container.style.height=this.height+"px",this.quill.on("editor-change",function(t,a,i){var r=e.quill.root.innerHTML;"<p><br></p>"===r&&(r=""),e.content=r,e.$emit("input",e.content)}))},handlersImage:function(e){var t=this;if(e){if(this.quillUpdateImg)return void this.$message.warning("正有图片在上传中...");this.quillUpdateImg=!0;var a=document.createElement("input");a.type="file",a.accept="image/jpeg,image/jpg,image/png,image/gif",a.style.display="none",a.addEventListener("change",function(e){t.quillUpdateImg=!1;var i=e.target.files||e.dataTransfer.files;En(i[0],"feedback").then(function(e){var i=new Image;i.src=e,i.onload=function(){var a=e+"?imageView&thumbnail=1000y1000&quality=85",r=i.width,o=i.height,n=t.quill,s=n.getSelection().index;n.insertEmbed(s,"image",{ourl:e,src:a,owidth:r,oheight:o}),n.setSelection(s+1)},document.documentElement.removeChild(a)},function(e){t.quillUpdateImg=!1,document.documentElement.removeChild(a),e&&t.$message.error("上传图片失败")})}),document.documentElement.appendChild(a),a.click()}},getWordCount:function(){this.wordCount=yh(this.value)}},watch:{value:function(e,t){if(this.getWordCount(),this.quill)if(e&&e!==this.content){this.content=e,this.quillTemp.pasteHTML(e);var a=this.quillTemp.getContents();this.quill.setContents(a)}else e||this.quill.setText("")}}},qn={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"editor"},[a("div",{ref:"quillEditor"}),e._v(" "),a("div",{ref:"quillEditorTemp",staticStyle:{display:"none"}}),e._v(" "),a("div",{staticClass:"quill-limit"},[a("span",[e._v("注："+e._s(e.wordLimitString)+"建议上传图片宽高不超1000px, 大小不超1M")]),e._v(" "),a("span",{staticStyle:{float:"right"}},[e._v("已输入"+e._s(e.wordCount)+"字")])])])},staticRenderFns:[]};var jn={name:"ArticleQuizDetail",data:function(){return{loading:!1,fromRouter:null,currentRouter:null,updateLoading:!1,offlineLoading:!1,lotteryObj:{},threadTypeId2CH:{3:"【胜负彩】",4:"【任九】",5:"【胜负彩&任九】"},articleInfo:null,titleTemp:"",titleEditor:!1,contentTemp:"",contentEditor:!1,reasonTemp:"",reasonEditor:!1,reviewTemp:"",reviewEditor:!1,offLineDialogVisible:!1,offLineReasonList:[{value:1,label:"方案质量不合格"},{value:2,label:"比赛延期"},{value:3,label:"比赛取消"},{value:4,label:"竞彩官方停售"}],offLineReasonType:null,offLineReason:null}},computed:{categoryId:function(){return this.articleInfo&&this.articleInfo.categoryId||null},numLottery:function(){return this.articleInfo&&this.articleInfo.numLottery||null},expertStatistic:function(){return this.articleInfo&&this.articleInfo.expertStatistic||null},contentWordCount:function(){return 3!==this.categoryId&&4!==this.categoryId?300*(this.articleInfo.matchVoList&&this.articleInfo.matchVoList.length||1):800},buttonAuth:function(){return mh([33,34,35,36],this.$store.state.userInfo.roleList)}},created:function(){this.getLottery(),this.getDetail(this.$route.params.id)},components:{Editor:a("VU/8")(Vn,qn,!1,function(e){a("lHC7")},null,null).exports},methods:{selectOffLineReason:function(){this.offLineReason=null,this.offLineReasonType=null,this.offLineDialogVisible=!0},selectReasonChange:function(e){this.offLineReason=this.offLineReasonList[e-1].label},getLottery:function(){var e=this;this.$service(h).then(function(t){200===t.code&&t.data.forEach(function(t){e.lotteryObj[t.cId]=t.cName})})},getDetail:function(e){var t=this;this.loading||(this.loading=!0,Rn(e).then(function(e){t.articleInfo=e,t.articleInfo.content=vh(t.articleInfo.content),t.articleInfo.buyReason&&(t.articleInfo.buyReason=vh(t.articleInfo.buyReason)),t.articleInfo.planReview&&(t.articleInfo.planReview=vh(t.articleInfo.planReview)),t.loading=!1}).catch(function(e){t.loading=!1,t.$message.error(qo()(e))}))},updateThread:function(e){var t=this,a=null;if("title"===e){if(!this.titleTemp)return this.$message.error("方案标题不允许为空");a={title:this.titleTemp}}if("content"===e){var i=this.$refs.editorContent.wordCount;if(0===i)return this.$message.error("推荐理由不允许为空");if(i<this.contentWordCount)return this.$message.error("推荐理由不少于"+this.contentWordCount+"字");a={content:this.contentTemp}}if("reason"===e){var r=this.$refs.editorReason.wordCount;if(r>0&&r<100)return this.$message.error("购买理由非空时，不少于100字");a={buyReason:this.reasonTemp}}if("review"===e){if(this.$refs.editorReview.wordCount<163)return this.$message.error("复盘内容不少于163字");a={planReview:this.reviewTemp}}if(!this.updateLoading&&a){this.updateLoading=!0;var o="review"===e?P:L;100===this.categoryId&&(o=M),this.$service(o,{method:"post",urlParams:{threadId:this.articleInfo.threadId},data:a}).then(function(a){t.updateLoading=!1,200===a.code?("title"===e&&(t.articleInfo.title=t.titleTemp,t.titleEditor=!1),"content"===e&&(t.articleInfo.content=t.contentTemp,t.contentEditor=!1),"reason"===e&&(t.articleInfo.buyReason=t.reasonTemp,t.reasonEditor=!1),"review"===e&&(t.articleInfo.planReview=t.reviewTemp,t.reviewEditor=!1),t.$message.success("更新成功")):t.$message.error(a.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}},offlineThread:function(){var e=this;if(!this.offlineLoading){if(!this.offLineReasonType)return this.$message.error("请选择下线该文章的理由！");this.offLineDialogVisible=!1,this.$confirm("此文章属于"+this.offLineReason+"原因下线，请确认是否操作？",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.offlineLoading=!0,e.$service(D,{urlParams:{threadId:e.articleInfo.threadId},params:{deletedType:e.offLineReasonType}}).then(function(t){e.offlineLoading=!1,200===t.code?(e.articleInfo.plock=6,e.$message.success("下线成功")):e.$message.error(t.message)},function(t){e.offlineLoading=!1,e.$message.error(qo()(t))})})}},contentDel:function(e){var t=this;this.updateLoading||this.$confirm("确认删除"+("reason"===e?"购买理由":"复盘内容")+"？",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){t.updateLoading=!0;var a="reason"===e?H:z;100===t.categoryId&&(a=F),t.$service(a,{method:"post",urlParams:{threadId:t.articleInfo.threadId}}).then(function(a){t.updateLoading=!1,200===a.code?("reason"===e&&(t.articleInfo.buyReason=""),"review"===e&&(t.articleInfo.planReview=""),t.$message.success("删除成功")):t.$message.error(a.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})})}},beforeRouteUpdate:function(e,t,a){this.getDetail(e.params.id),a()},beforeRouteEnter:function(e,t,a){a(function(a){a.fromRouter=t&&t.name?t:null,a.currentRouter=e})}},Qn={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"quize-detail"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e.fromRouter?a("el-breadcrumb-item",{attrs:{to:{path:e.fromRouter.fullPath}}},[e._v(e._s(e.fromRouter.meta.title)+"\n        ")]):e._e(),e._v(" "),e.currentRouter?a("el-breadcrumb-item",[e._v(e._s(e.currentRouter.meta.title))]):e._e()],1)],1)]),e._v(" "),e.articleInfo?a("div",{staticClass:"thread-header"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:22}},[a("el-tag",{attrs:{size:"small"}},[e._v(e._s(e._f("articleStatus2CH")(e.articleInfo.plock)))]),e._v(" "),e.articleInfo.refund?a("span",{staticClass:"text-red"},[a("b",[e._v("[不中退]")])]):e._e(),e._v(" "),e.articleInfo.businessTypeId?a("span",{staticClass:"text-red"},[e._v("【临场】")]):e._e(),e._v(" "),a("h2",{staticClass:"text-red"},[e._v(e._s(e.threadTypeId2CH[e.articleInfo.threadTypeId]||""))]),e._v(" "),e.titleEditor?e._e():a("h2",[e._v(e._s(e.articleInfo.title))]),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.titleEditor,expression:"titleEditor"}],staticStyle:{"min-width":"480px",width:"auto"},attrs:{placeholder:"请输入标题"},model:{value:e.titleTemp,callback:function(t){e.titleTemp=t},expression:"titleTemp"}}),e._v(" "),!e.titleEditor&&e.buttonAuth?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.titleTemp=e.articleInfo.title,e.titleEditor=!0}}},[e._v("编辑")]):e._e(),e._v(" "),e.titleEditor?a("el-button",{attrs:{type:"primary",size:"mini",loading:e.updateLoading},on:{click:function(t){return e.updateThread("title")}}},[e._v("保存")]):e._e(),e._v(" "),e.titleEditor?a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.titleEditor=!1}}},[e._v("取消")]):e._e()],1),e._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:2}},[6===e.articleInfo.plock||e.articleInfo.numLottery?e._e():a("el-button",{attrs:{type:"danger",size:"mini",loading:e.offlineLoading},on:{click:e.selectOffLineReason}},[e._v("文章下线")])],1)],1),e._v(" "),a("table",{staticClass:"article"},[e._m(0),e._v(" "),a("tbody",[a("tr",[a("td",{staticClass:"bg-fa"},[e._v("发布时间：")]),e._v(" "),a("td",{staticClass:"text-red"},[e._v(e._s(e.articleInfo.createTime))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("文章ID：")]),e._v(" "),a("td",{staticClass:"text-red"},[e._v(e._s(e.articleInfo.threadId))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("价格：")]),e._v(" "),a("td",[e._v(e._s(e.articleInfo.price))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("购买数(红彩)：")]),e._v(" "),a("td",[e._v(e._s(e.articleInfo.buyCount))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("被收藏数：")]),e._v(" "),a("td",[e._v(e._s(e.articleInfo.favCount))])])])])],1):e._e(),e._v(" "),e.expertStatistic?a("div",{staticClass:"thread-expert"},[a("table",{staticClass:"article"},[e._m(1),e._v(" "),a("tbody",[a("tr",[a("td",{attrs:{rowspan:"2"}},[a("router-link",{attrs:{to:{name:"ExpertDetail",params:{id:e.expertStatistic.userId}}}},[a("img",{attrs:{src:e.expertStatistic.avatar+"?imageView&thumbnail=100y100&quality=85"}})])],1),e._v(" "),a("td",{attrs:{rowspan:"2"}},[a("router-link",{attrs:{to:{name:"ExpertDetail",params:{id:e.expertStatistic.userId}}}},[a("span",{staticClass:"text-red"},[e._v(e._s(e.expertStatistic.nickname||e.expertStatistic.realName))]),a("span",[e._v("("+e._s(e.expertStatistic.slogan)+")")])])],1),e._v(" "),a("td",[e._v("文章数")]),e._v(" "),a("td",[e._v("粉丝数")]),e._v(" "),a("td",[e._v("命中率")]),e._v(" "),a("td",[e._v("盈利率")]),e._v(" "),a("td",[e._v("最近连红")])]),e._v(" "),a("tr",[a("td",[e._v(e._s(e.expertStatistic.threadCount))]),e._v(" "),a("td",[e._v(e._s(e.expertStatistic.follower))]),e._v(" "),a("td",[e._v(e._s(e._f("toPercent")(e.expertStatistic.totalHitRate)))]),e._v(" "),a("td",[e._v(e._s(e._f("toPercent")(e.expertStatistic.totalEarningRate)))]),e._v(" "),a("td",[e._v(e._s(e.expertStatistic.continuityWin))])])])]),e._v(" "),100!==e.categoryId?a("el-table",{attrs:{data:e.expertStatistic.playTacticStatList}},[a("el-table-column",{attrs:{label:"玩法",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.playMetaName)+"\n        ")]}}],null,!1,1127542915)}),e._v(" "),a("el-table-column",{attrs:{label:"玩法命中率"}},[a("el-table-column",{attrs:{label:"3天"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("toPercent")(t.row.threeDaysHitRate)))]),e._v(" "),a("p",[e._v(e._s(t.row.threeDaysPOARate))])]}}],null,!1,3048662402)}),e._v(" "),a("el-table-column",{attrs:{label:"7天"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("toPercent")(t.row.sevenDaysHitRate)))]),e._v(" "),a("p",[e._v(e._s(t.row.sevenDaysPOARate))])]}}],null,!1,2509873794)}),e._v(" "),a("el-table-column",{attrs:{label:"30天"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("toPercent")(t.row.thirtyDaysHitRate)))]),e._v(" "),a("p",[e._v(e._s(t.row.thirtyDaysPOARate))])]}}],null,!1,2852647778)})],1),e._v(" "),a("el-table-column",{attrs:{label:"玩法盈利率"}},[a("el-table-column",{attrs:{label:"3天"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("toPercent")(t.row.threeDaysEarningRate))+"\n          ")]}}],null,!1,3357945503)}),e._v(" "),a("el-table-column",{attrs:{label:"7天"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("toPercent")(t.row.sevenDaysEarningRate))+"\n          ")]}}],null,!1,267900698)}),e._v(" "),a("el-table-column",{attrs:{label:"30天"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("toPercent")(t.row.thirtyDaysEarningRate))+"\n          ")]}}],null,!1,2882143067)})],1)],1):e._e()],1):e._e(),e._v(" "),e.articleInfo&&100!==e.categoryId?a("div",{staticClass:"article-match"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:16}},[a("h2",[e._v("推荐结果："+e._s(e.lotteryObj[e.categoryId]||"-"))])]),e._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:8}},[e.articleInfo.hitRateValue?a("span",[e._v(e._s(e.articleInfo.hitRateValue))]):e._e(),e._v(" "),3===e.articleInfo.plock&&e.articleInfo.isRed&&3!==e.categoryId&&4!==e.categoryId?a("el-tag",{staticStyle:{color:"#fff"},attrs:{size:"mini",color:"#e62121"}},[e._v("红")]):e._e()],1)],1),e._v(" "),e._l(e.articleInfo.matchVoList,function(t,i){return a("div",{key:i,staticClass:"match-detail"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:2}},[e._v("\n          比赛"+e._s(i+1)+"\n        ")]),e._v(" "),a("el-col",{attrs:{span:6}},[a("span",[e._v("联赛名称：")]),e._v(e._s(t.leagueName)+"\n        ")]),e._v(" "),a("el-col",{attrs:{span:4}},[a("span",[e._v("联赛ID：")]),e._v(e._s(t.leagueId)+"\n        ")]),e._v(" "),a("el-col",{attrs:{span:9}},[a("span",[e._v("开赛时间：")]),e._v(e._s(t.matchTime)+"\n        ")]),e._v(" "),a("el-col",{attrs:{span:3}},[e._v("\n          "+e._s(e._f("matchStatus2CH")(t.matchStatus))+"\n        ")])],1),e._v(" "),2!==e.categoryId&&6!==e.categoryId?a("el-row",{staticStyle:{"margin-top":"10px","text-align":"center"},attrs:{gutter:10}},[a("el-col",{attrs:{span:7}},[a("p",{staticClass:"text-ellipsis",attrs:{title:t.homeTeam.teamName}},[e._v(e._s(t.homeTeam.teamName))]),e._v(" "),a("p",[e._v(e._s(t.homeTeam.teamCode))])]),e._v(" "),a("el-col",{attrs:{span:3}},[a("img",{staticStyle:{"max-width":"100%"},attrs:{src:t.homeTeam.teamIcon?t.homeTeam.teamIcon+"?imageView&thumbnail=60y60&quality=85":"https://cms-bucket.ws.126.net/2019/03/20/08b4e64d94a9422dab8e65d949863e94.png?imageView&thumbnail=60y60&quality=85"}})]),e._v(" "),a("el-col",{staticStyle:{"font-size":"18px"},attrs:{span:4}},[e._v("\n          "+e._s(2===t.matchStatus||3===t.matchStatus?t.homeScore+" - "+t.guestScore:"VS")+"\n        ")]),e._v(" "),a("el-col",{attrs:{span:3}},[a("img",{staticStyle:{"max-width":"100%"},attrs:{src:t.guestTeam.teamIcon?t.guestTeam.teamIcon+"?imageView&thumbnail=60y60&quality=85":"https://cms-bucket.ws.126.net/2019/03/20/08b4e64d94a9422dab8e65d949863e94.png?imageView&thumbnail=60y60&quality=85"}})]),e._v(" "),a("el-col",{attrs:{span:7}},[a("p",{staticClass:"text-ellipsis",attrs:{title:t.guestTeam.teamName}},[e._v(e._s(t.guestTeam.teamName))]),e._v(" "),a("p",[e._v(e._s(t.guestTeam.teamCode))])])],1):a("el-row",{staticStyle:{"margin-top":"10px","text-align":"center"},attrs:{gutter:10}},[a("el-col",{attrs:{span:7}},[a("p",{staticClass:"text-ellipsis",attrs:{title:t.guestTeam.teamName}},[e._v(e._s(t.guestTeam.teamName))]),e._v(" "),a("p",[e._v(e._s(t.guestTeam.teamCode))])]),e._v(" "),a("el-col",{attrs:{span:3}},[a("img",{staticStyle:{"max-width":"100%"},attrs:{src:t.guestTeam.teamIcon?t.guestTeam.teamIcon+"?imageView&thumbnail=60y60&quality=85":"https://cms-bucket.ws.126.net/2019/03/20/08b4e64d94a9422dab8e65d949863e94.png?imageView&thumbnail=60y60&quality=85"}})]),e._v(" "),a("el-col",{staticStyle:{"font-size":"18px"},attrs:{span:4}},[e._v("\n          "+e._s(2===t.matchStatus||3===t.matchStatus?t.guestScore+" - "+t.homeScore:"VS")+"\n        ")]),e._v(" "),a("el-col",{attrs:{span:3}},[a("img",{staticStyle:{"max-width":"100%"},attrs:{src:t.homeTeam.teamIcon?t.homeTeam.teamIcon+"?imageView&thumbnail=60y60&quality=85":"https://cms-bucket.ws.126.net/2019/03/20/08b4e64d94a9422dab8e65d949863e94.png?imageView&thumbnail=60y60&quality=85"}})]),e._v(" "),a("el-col",{attrs:{span:7}},[a("p",{staticClass:"text-ellipsis",attrs:{title:t.homeTeam.teamName}},[e._v(e._s(t.homeTeam.teamName))]),e._v(" "),a("p",[e._v(e._s(t.homeTeam.teamCode))])])],1),e._v(" "),e._l(t.playVoList,function(i,r){return a("div",{key:r,staticClass:"play-list",class:{two:2==i.itemVoList.length}},[a("div",{staticClass:"odds-name"},[e._v(e._s(i.playName)+"("+e._s(i.concede)+")")]),e._v(" "),e._l(i.itemVoList,function(t,i){return a("div",{key:i,staticClass:"odds-list",class:{recommend:t.isRecommend,result:t.isMatchResult}},[e._v("\n          "+e._s(t.playItemName)+"("+e._s(t.odds&&0!==t.odds?t.odds:"-")+")"),1===t.isMRecommend?a("span",[e._v("(主推)")]):e._e()])}),e._v(" "),e._l(i.itemVoList,function(t){return a("el-tag",{directives:[{name:"show",rawName:"v-show",value:1==t.isMatchResult,expression:"resItem.isMatchResult==1"}],key:t.playItemId,staticStyle:{position:"absolute",right:"0",top:"0",color:"#fff"},attrs:{size:"mini",color:t.isMatchResult===t.isRecommend?"#e62121":"#000"}},[e._v("\n          "+e._s(t.isMatchResult===t.isRecommend?"中":"未中")+"\n        ")])}),e._v(" "),3===e.categoryId&&1===t.isOptionalNine?a("el-checkbox",{attrs:{value:!0,disabled:!0}},[e._v("同时选择为任九方案\n        ")]):e._e()],2)})],2)})],2):e._e(),e._v(" "),100===e.categoryId?a("div",{staticClass:"article-num-lottery"},[a("img",{attrs:{src:e.numLottery.icon+"?imageView&thumbnail=134y144&quality=85"}}),e._v(" "),a("div",{staticClass:"info"},[a("div",{staticClass:"middle"},[a("p",{staticClass:"name"},[e._v("["+e._s(e.numLottery.numLotteryName)+"]"+e._s(e.numLottery.degree))]),e._v(" "),0===e.numLottery.drawLottery?a("p",[e._v("开奖时间："+e._s(e.numLottery.prizeTime))]):e._e(),e._v(" "),"0"!==e.numLottery.poolMoney?a("p",[e._v("奖池：¥"+e._s(e.numLottery.poolMoney))]):e._e(),e._v(" "),0!==e.numLottery.drawLottery?a("p",[e._v("开奖结果：\n          "),e._l(e.numLottery.red.split(","),function(t,i){return a("span",{directives:[{name:"show",rawName:"v-show",value:e.numLottery.red,expression:"numLottery.red"}],key:i,staticClass:"num-lottery-red-ball"},[e._v(e._s(t))])}),e._v(" "),e._l(e.numLottery.blue.split(","),function(t,i){return a("span",{directives:[{name:"show",rawName:"v-show",value:e.numLottery.blue,expression:"numLottery.blue"}],key:i,staticClass:"num-lottery-blue-ball"},[e._v(e._s(t))])})],2):e._e(),e._v(" "),0!==e.numLottery.drawLottery?a("p",[e._v("已开奖")]):e._e()])])]):e._e(),e._v(" "),e.articleInfo?a("div",{staticClass:"article-content"},[a("h2",[e._v("推荐理由：")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.contentEditor,expression:"!contentEditor"}],staticClass:"content-html",domProps:{innerHTML:e._s(e.articleInfo.content)}}),e._v(" "),a("Editor",{directives:[{name:"show",rawName:"v-show",value:e.contentEditor,expression:"contentEditor"}],ref:"editorContent",attrs:{wordLimitString:"发文字数不少于"+e.contentWordCount+"字；",height:400},model:{value:e.contentTemp,callback:function(t){e.contentTemp=t},expression:"contentTemp"}}),e._v(" "),a("div",{staticClass:"article-button"},[!e.contentEditor&&e.buttonAuth?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.contentTemp=e.articleInfo.content,e.contentEditor=!0}}},[e._v("编辑")]):e._e(),e._v(" "),e.contentEditor?a("el-button",{attrs:{type:"primary",size:"small",loading:e.updateLoading},on:{click:function(t){return e.updateThread("content")}}},[e._v("保存")]):e._e(),e._v(" "),e.contentEditor?a("el-button",{attrs:{size:"small"},on:{click:function(t){e.contentEditor=!1}}},[e._v("取消")]):e._e()],1)],1):e._e(),e._v(" "),e.articleInfo&&e.articleInfo.buyReason?a("div",{staticClass:"article-content"},[a("h2",[e._v("购买理由：")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.reasonEditor,expression:"!reasonEditor"}],staticClass:"content-html",domProps:{innerHTML:e._s(e.articleInfo.buyReason)}}),e._v(" "),a("Editor",{directives:[{name:"show",rawName:"v-show",value:e.reasonEditor,expression:"reasonEditor"}],ref:"editorReason",attrs:{wordLimitString:"为空或不少于100字；"},model:{value:e.reasonTemp,callback:function(t){e.reasonTemp=t},expression:"reasonTemp"}}),e._v(" "),a("div",{staticClass:"article-button"},[!e.reasonEditor&&e.buttonAuth?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.reasonTemp=e.articleInfo.buyReason,e.reasonEditor=!0}}},[e._v("编辑")]):e._e(),e._v(" "),!e.reasonEditor&&e.buttonAuth?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.contentDel("reason")}}},[e._v("删除\n      ")]):e._e(),e._v(" "),e.reasonEditor?a("el-button",{attrs:{type:"primary",size:"small",loading:e.updateLoading},on:{click:function(t){return e.updateThread("reason")}}},[e._v("保存")]):e._e(),e._v(" "),e.reasonEditor?a("el-button",{attrs:{size:"small"},on:{click:function(t){e.reasonEditor=!1}}},[e._v("取消")]):e._e()],1)],1):e._e(),e._v(" "),e.articleInfo&&1===e.articleInfo.reviewStatus&&e.articleInfo.planReview&&100!==e.categoryId?a("div",{staticClass:"article-content"},[a("h2",[e._v("复盘内容：")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.reviewEditor,expression:"!reviewEditor"}],staticClass:"content-html",domProps:{innerHTML:e._s(e.articleInfo.planReview)}}),e._v(" "),a("Editor",{directives:[{name:"show",rawName:"v-show",value:e.reviewEditor,expression:"reviewEditor"}],ref:"editorReview",attrs:{wordLimitString:"复盘内容不少于163字；",height:250},model:{value:e.reviewTemp,callback:function(t){e.reviewTemp=t},expression:"reviewTemp"}}),e._v(" "),a("div",{staticClass:"article-button"},[!e.reviewEditor&&e.buttonAuth?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.reviewTemp=e.articleInfo.planReview,e.reviewEditor=!0}}},[e._v("编辑")]):e._e(),e._v(" "),!e.reviewEditor&&e.buttonAuth?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.contentDel("review")}}},[e._v("删除\n      ")]):e._e(),e._v(" "),e.reviewEditor?a("el-button",{attrs:{type:"primary",size:"small",loading:e.updateLoading},on:{click:function(t){return e.updateThread("review")}}},[e._v("保存")]):e._e(),e._v(" "),e.reviewEditor?a("el-button",{attrs:{size:"small"},on:{click:function(t){e.reviewEditor=!1}}},[e._v("取消")]):e._e()],1)],1):e._e(),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"请选择下线该文章的理由",visible:e.offLineDialogVisible,width:"400px"},on:{"update:visible":function(t){e.offLineDialogVisible=t}}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择文章下线理由"},on:{change:e.selectReasonChange},model:{value:e.offLineReasonType,callback:function(t){e.offLineReasonType=t},expression:"offLineReasonType"}},e._l(e.offLineReasonList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.offLineDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.offlineThread}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("colgroup",[a("col",{attrs:{width:"110"}}),e._v(" "),a("col",{attrs:{width:""}}),e._v(" "),a("col",{attrs:{width:"85"}}),e._v(" "),a("col",{attrs:{width:""}}),e._v(" "),a("col",{attrs:{width:"70"}}),e._v(" "),a("col",{attrs:{width:""}}),e._v(" "),a("col",{attrs:{width:"130"}}),e._v(" "),a("col",{attrs:{width:""}}),e._v(" "),a("col",{attrs:{width:"105"}}),e._v(" "),a("col",{attrs:{width:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("colgroup",[t("col",{attrs:{width:"100"}}),this._v(" "),t("col"),this._v(" "),t("col",{attrs:{width:"12%"}}),this._v(" "),t("col",{attrs:{width:"12%"}}),this._v(" "),t("col",{attrs:{width:"14%"}}),this._v(" "),t("col",{attrs:{width:"14%"}}),this._v(" "),t("col",{attrs:{width:"14%"}})])}]};var Wn=a("VU/8")(jn,Qn,!1,function(e){a("332e")},null,null).exports,Bn=[{cName:"双色球",cId:101},{cName:"3D",cId:102},{cName:"大乐透",cId:103},{cName:"排列3",cId:104},{cName:"排列5",cId:105}],Gn={};Bn.map(function(e){Gn[e.cId]=e.cName});var Yn={name:"ArticleNumLotteryList",data:function(){return{listType:"filter",offset:0,limit:20,total:1,lotteryList:Bn,list:[],filterQuery:{lotteryCategoryId:"0",startTime:null,threadTypeId:"0",endTime:null,numLotteryThreadId:"0",degree:null},loading:!1,tableHeight:null}},computed:u()({},Object(sn.d)(["windowHeight"])),filters:{numLotteryId2CH:function(e){return Gn[e]||""}},created:function(){this.getFilterList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getFilterList:function(e){var t=this;if(!this.loading){this.loading=!0,this.offset="number"==typeof e&&e?(e-1)*this.limit:0;var a={offset:this.offset,limit:this.limit};"0"!==this.filterQuery.threadTypeId&&(a.gameType=this.filterQuery.threadTypeId),this.filterQuery.startTime&&(a.startTime=this.filterQuery.startTime),this.filterQuery.endTime&&(a.endTime=this.filterQuery.endTime),this.filterQuery.degree&&(a.degree=this.filterQuery.degree),this.$service(V,{params:a}).then(function(e){t.loading=!1,200===e.code?(t.listType="filter",t.$refs.elTable.bodyWrapper.scrollTop=0,t.list=e.data.data||[],t.total=e.data.total||1):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))})}},handlerDegreeSearch:function(){this.filterQuery.degree=this.filterQuery.degree.replace(/[^0-9-]/g,"")},changeWeightColumn:function(e){var t=this;this.$prompt("","修改权重",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^-?\d{1,3}$/,inputErrorMessage:"-999-999之间",closeOnClickModal:!1,inputValue:e.weight}).then(function(a){var i=a.value;t.$service(q,{method:"post",urlParams:{threadId:e.numLotteryThreadId},params:{weight:i}}).then(function(a){200===a.code?(e.weight=i,t.$message.success("修改成功！")):t.$message.error(a.code+":"+a.message)},function(e){t.$message.error(qo()(e))})})}},watch:{windowHeight:function(){this.setHeight()}}},Xn={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"numlottery-list"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title)+"\n        ")])})],2)],1)]),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.filterQuery,size:"mini",disabled:e.loading}},[a("el-form-item",[a("el-radio-group",{on:{change:function(t){return e.getFilterList("gameType")}},model:{value:e.filterQuery.threadTypeId,callback:function(t){e.$set(e.filterQuery,"threadTypeId",t)},expression:"filterQuery.threadTypeId"}},[a("el-radio-button",{attrs:{label:"0"}},[e._v("全部")]),e._v(" "),e._l(e.lotteryList,function(t){return a("el-radio-button",{key:t.cId,attrs:{label:t.cId}},[e._v(e._s(t.cName)+"\n        ")])})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"发布时间"}},[a("el-date-picker",{staticStyle:{width:"135px"},attrs:{type:"date",editable:"false",placeholder:"开始日期","value-format":"yyyy-MM-dd 00:00:00","picker-options":{disabledDate:function(t){return t.getTime()>Date.now()||0!==new Date(e.filterQuery.endTime).getTime()&&t.getTime()>new Date(e.filterQuery.endTime).getTime()}}},model:{value:e.filterQuery.startTime,callback:function(t){e.$set(e.filterQuery,"startTime",t)},expression:"filterQuery.startTime"}}),e._v("\n      ~\n      "),a("el-date-picker",{staticStyle:{width:"135px"},attrs:{type:"date",editable:"false",placeholder:"结束日期","value-format":"yyyy-MM-dd 23:59:59","picker-options":{disabledDate:function(t){return t.getTime()>Date.now()||0!==new Date(e.filterQuery.startTime).getTime()&&t.getTime()<new Date(e.filterQuery.startTime).getTime()}}},model:{value:e.filterQuery.endTime,callback:function(t){e.$set(e.filterQuery,"endTime",t)},expression:"filterQuery.endTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"期数"}},[a("el-input",{staticStyle:{width:"110px"},attrs:{placeholder:"请输入期数",clearable:""},nativeOn:{keyup:function(t){return e.handlerDegreeSearch(t)}},model:{value:e.filterQuery.degree,callback:function(t){e.$set(e.filterQuery,"degree",t)},expression:"filterQuery.degree"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getFilterList()}}},[e._v("查询")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight},on:{"sort-change":e.sortList}},[a("el-table-column",{attrs:{label:"彩种",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("numLotteryId2CH")(t.row.threadTypeId))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"numLotteryThreadId",label:"文章ID",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"ArticleQuizDetail",params:{id:t.row.numLotteryThreadId}}}},[e._v("\n          "+e._s(t.row.numLotteryThreadId))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题","min-width":"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"ArticleQuizDetail",params:{id:t.row.numLotteryThreadId}}}},[e._v("\n          "+e._s(t.row.title)+"\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"发布时间",width:"185"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"专家",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"ExpertDetail",params:{id:t.row.userId}}}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"buyCount",label:"购买数",width:"115"}}),e._v(" "),a("el-table-column",{attrs:{prop:"points",label:"点数",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.price>0?a("span",[e._v(e._s(t.row.price))]):a("span",{staticClass:"text-red"},[e._v("免费")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"weight",label:"权重",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.changeWeightColumn(t.row)}}},[e._v(e._s(t.row.weight))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("articleStatus2CH")(t.row.plock))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"periodsDegree",label:"期数","min-width":"100"}})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":Math.floor(e.offset/e.limit)+1,total:e.total,"page-size":e.limit},on:{"current-change":e.getFilterList}})],1)},staticRenderFns:[]},Kn=a("VU/8")(Yn,Xn,!1,null,null,null).exports,Jn={name:"Api",data:function(){return{loading:!1,list:[],pageIndex:1,pageSize:25,pageCount:1,tableHeight:null,resourceType2CH:{0:"菜单",1:"按钮"},status2CH:{0:"正常",1:"停用"},dialogFormVisible:!1,form:{resourceName:"",url:"",resourceType:"0",status:"0",seq:0,description:""},formRules:{resourceName:[{required:!0,message:"资源名称必填",trigger:["blur","change"]}],url:[{required:!0,message:"路径必填",trigger:["blur","change"]}],description:[{required:!0,message:"资源描述必填",trigger:["blur","change"]}]},updateLoading:!1}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getApiList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getApiList:function(e){var t=this;this.loading||(this.loading=!0,this.pageIndex=e||this.pageIndex,this.$service(ee,{params:{pageIndex:this.pageIndex,pageSize:this.pageSize}}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.records||[],t.pageCount=e.data.page?e.data.page.pageCount:1,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){t.$message.error(qo()(e))}))},apiPop:function(e){var t=this;e?(this.form=tn()({},e),this.form.resourceType=this.form.resourceType+"",this.form.status=this.form.status+""):this.form=tn()({},{resourceName:"",url:"",resourceType:"0",status:"0",seq:0,description:""}),this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.apiForm.clearValidate()})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.apiUpdate(t.form)})},apiUpdate:function(e){var t=this;if(!this.updateLoading){this.updateLoading=!0;var a=tn()({icon:"1.jpg",pid:0},e);this.$service(e.resourceId?ae:te,{method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:qo()(a)}).then(function(a){t.updateLoading=!1,200===a.code?(t.dialogFormVisible=!1,t.$message.success((e.resourceId?"修改":"添加")+"成功。"),e.resourceId||(t.pageIndex=1),t.getApiList()):t.$message.error(a.code+":"+a.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}},apiDel:function(e){var t=this;this.$set(e,"loading",!0),this.$service(ie,{method:"delete",params:{resourceId:e.resourceId}}).then(function(a){e.loading=!1,200===a.code?(e.delPop=!1,t.$message.success("删除成功"),t.getApiList()):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})}},watch:{windowHeight:function(){this.setHeight()}}},Zn={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"auth-api"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.apiPop()}}},[e._v("添加资源")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"resourceName",label:"资源名称","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"resourceType",label:"资源类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.resourceType2CH[t.row.resourceType])+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"资源状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.status2CH[t.row.status])+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"url",label:"资源路径","min-width":"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"资源描述","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.apiPop(t.row)}}}),e._v(" "),a("el-popover",{attrs:{placement:"left"},model:{value:t.row.delPop,callback:function(a){e.$set(t.row,"delPop",a)},expression:"scope.row.delPop"}},[a("p",[e._v("确定删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.apiDel(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:"",size:"small"},slot:"reference"})],1)]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getApiList}}),e._v(" "),a("el-dialog",{attrs:{title:e.form.resourceId?"修改资源":"添加资源","close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"apiForm",attrs:{model:e.form,rules:e.formRules,disabled:e.updateLoading,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"资源名称",prop:"resourceName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.resourceName,callback:function(t){e.$set(e.form,"resourceName",t)},expression:"form.resourceName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"资源路径",prop:"url"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"资源类型",prop:"resourceType"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.form.resourceType,callback:function(t){e.$set(e.form,"resourceType",t)},expression:"form.resourceType"}},[e._v("菜单")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.form.resourceType,callback:function(t){e.$set(e.form,"resourceType",t)},expression:"form.resourceType"}},[e._v("按钮")])],1),e._v(" "),a("el-form-item",{attrs:{label:"资源状态",prop:"status"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[e._v("正常")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[e._v("停用")])],1),e._v(" "),a("el-form-item",{attrs:{label:"角色排序",prop:"seq"}},[a("el-input-number",{attrs:{min:0,max:99999},model:{value:e.form.seq,callback:function(t){e.$set(e.form,"seq",t)},expression:"form.seq"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"资源描述",prop:"description"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"资源描述"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("apiForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},es=a("VU/8")(Jn,Zn,!1,null,null,null).exports,ts={name:"Roles",data:function(){return{list:[],loading:!1,pageIndex:1,pageSize:25,pageCount:1,status2CH:{0:"正常",1:"停用"},dialogFormRoles:!1,tableHeight:null,form:{roleName:"",seq:0,status:"0",description:""},formRules:{roleName:[{required:!0,message:"角色名称必填",trigger:"blur"}],description:[{required:!0,message:"角色描述必填",trigger:"blur"}]},updateLoading:!1,resourceLoading:!1,dialogResource:!1,allResourceList:[],resourceIds:[],roleId:null}},computed:u()({},Object(sn.d)(["windowHeight"]),{isIndeterminate:function(){return this.resourceIds.length>0&&this.resourceIds.length<this.allResourceList.length},resourceCheckAll:function(){return this.resourceIds.length>0&&this.resourceIds.length>=this.allResourceList.length}}),created:function(){this.getRolesList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getRolesList:function(e){var t=this;this.loading||(this.loading=!0,this.pageIndex=e||this.pageIndex,this.$service(G,{params:{pageIndex:this.pageIndex,pageSize:this.pageSize}}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.records||[],t.pageCount=e.data.page?e.data.page.pageCount:1,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){t.$message.error(qo()(e))}))},rolesPop:function(e){var t=this;e?(this.form=tn()({},e),this.form.status=this.form.status+""):this.form=tn()({},{roleName:"",seq:0,status:"0",description:""}),this.dialogFormRoles=!0,this.$nextTick(function(){t.$refs.rolesForm.clearValidate()})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e&&t.rolseUpdate(t.form)})},rolseUpdate:function(e){var t=this;this.updateLoading||(this.updateLoading=!0,this.$service(e.roleId?X:Y,{method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:qo()(e)}).then(function(a){t.updateLoading=!1,200===a.code?(t.dialogFormRoles=!1,t.$message.success((e.roleId?"修改":"添加")+"成功。"),e.roleId||(t.pageIndex=1),t.getRolesList()):t.$message.error(a.code+":"+a.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))}))},rolesDel:function(e){var t=this;this.$set(e,"loading",!0),this.$service(K,{method:"delete",params:{roleId:e.roleId}}).then(function(a){e.loading=!1,200===a.code?(e.delPop=!1,t.$message.success("删除成功"),t.getRolesList()):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})},getAllResourceList:function(){var e=this;return this.allResourceList.length>0?Bo.a.resolve():this.$service(ee,{params:{pageIndex:1,pageSize:999}}).then(function(t){return 200===t.code?(e.allResourceList=t.data.records||[],Bo.a.resolve()):Bo.a.reject(t)},function(e){return Bo.a.reject(e)})},getResourceListById:function(e){var t=this;this.getAllResourceList().then(function(){t.$service(J,{params:{roleId:e}}).then(function(a){200===a.code?(t.resourceIds=[],a.data.forEach(function(e){t.resourceIds.push(e.resourceId)}),t.allResourceList.forEach(function(e){t.$set(e,"check",t.resourceIds.indexOf(e.resourceId)>-1)}),t.dialogResource=!0,t.roleId=e,t.$nextTick(function(){t.$refs.resourceTable.bodyWrapper.scrollTop=0})):t.$message.error(a.code+":"+a.message)},function(e){t.$message.error(qo()(e))})},function(e){t.$message.error(qo()(e))})},handleCheckResourceChange:function(e){var t=this;e?e.check?this.resourceIds.indexOf(e.resourceId)<0&&this.resourceIds.push(e.resourceId):this.resourceIds.indexOf(e.resourceId)>-1&&this.resourceIds.splice(this.resourceIds.indexOf(e.resourceId),1):this.resourceCheckAll?(this.resourceIds=[],this.allResourceList.forEach(function(e){e.check=!1})):(this.resourceIds=[],this.allResourceList.forEach(function(e){e.check=!0,t.resourceIds.push(e.resourceId)}))},submitResource:function(){var e=this;if(!this.resourceLoading){var t={roleId:this.roleId,resourceIds:this.resourceIds.join(",")};this.resourceLoading=!0,this.$service(Z,{method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:qo()(t)}).then(function(t){e.resourceLoading=!1,200===t.code?(e.roleId=null,e.dialogResource=!1,e.$message.success("角色授权成功")):e.$message.error(t.code+":"+t.message)},function(t){e.resourceLoading=!1,e.$message.error(qo()(t))})}}},watch:{windowHeight:function(){this.setHeight()}}},as={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"auth-roles"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.rolesPop()}}},[e._v("添加角色")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"roleId",label:"ID","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleName",label:"角色名称","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"角色描述","min-width":"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"seq",label:"角色排序号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"角色状态","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.status2CH[t.row.status]||"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.getResourceListById(t.row.roleId)}}},[e._v("授权")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-edit",size:"small"},on:{click:function(a){return e.rolesPop(t.row)}}}),e._v(" "),a("el-popover",{attrs:{placement:"left"},model:{value:t.row.delPop,callback:function(a){e.$set(t.row,"delPop",a)},expression:"scope.row.delPop"}},[a("p",[e._v("确定删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.rolesDel(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",size:"small"},slot:"reference"})],1)]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getRolesList}}),e._v(" "),a("el-dialog",{attrs:{title:e.form.roleId?"修改角色":"添加角色","close-on-click-modal":!1,visible:e.dialogFormRoles,width:"500px",center:""},on:{"update:visible":function(t){e.dialogFormRoles=t}}},[a("el-form",{ref:"rolesForm",attrs:{model:e.form,rules:e.formRules,disabled:e.updateLoading,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.roleName,callback:function(t){e.$set(e.form,"roleName",t)},expression:"form.roleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色排序",prop:"seq"}},[a("el-input-number",{attrs:{min:0,max:9999},model:{value:e.form.seq,callback:function(t){e.$set(e.form,"seq",t)},expression:"form.seq"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色状态",prop:"status"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[e._v("正常")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[e._v("停用")])],1),e._v(" "),a("el-form-item",{attrs:{label:"角色描述",prop:"description"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"角色描述"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormRoles=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("rolesForm")}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"角色授权","close-on-click-modal":!1,visible:e.dialogResource,width:"600px",center:"",size:"small"},on:{"update:visible":function(t){e.dialogResource=t}}},[a("el-table",{ref:"resourceTable",staticStyle:{width:"100%"},attrs:{data:e.allResourceList,"tooltip-effect":"dark",size:"small","max-height":"350",stripe:""}},[a("el-table-column",{attrs:{width:"50"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:function(t){return e.handleCheckResourceChange()}},model:{value:e.resourceCheckAll,callback:function(t){e.resourceCheckAll=t},expression:"resourceCheckAll"}})]}},{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){return e.handleCheckResourceChange(t.row)}},model:{value:t.row.check,callback:function(a){e.$set(t.row,"check",a)},expression:"scope.row.check"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"resourceName",label:"接口名称","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"url",label:"接口地址","show-overflow-tooltip":""}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogResource=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.resourceLoading},on:{click:e.submitResource}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},is=a("VU/8")(ts,as,!1,null,null,null).exports,rs={name:"Users",data:function(){return{list:[],pageIndex:1,pageSize:25,pageCount:1,rolesList:[],dialogFormVisible:!1,loading:!1,updateLoading:!1,tableHeight:null,form:{adminName:"",loginName:"",roleIds:[]}}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},filters:{roles2String:function(e){if(!e||e.length<=0)return"";var t=[];return e.forEach(function(e){t.push(e.roleName)}),t.join("、")}},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(e){var t=this;this.loading||(this.pageIndex=e||this.pageIndex,this.loading=!0,this.$service(j,{params:{pageIndex:this.pageIndex,pageSize:this.pageSize}}).then(function(e){t.loading=!1,200===e.code?(t.$refs.elTable.bodyWrapper.scrollTop=0,t.list=e.data.records||[],t.pageCount=e.data.page?e.data.page.pageCount:1):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))}))},getRolesList:function(){var e=this;return this.$service(G,{params:{pageIndex:1,pageSize:999}}).then(function(t){if(200===t.code)return e.rolesList=t.data.records,Bo.a.resolve(t)})},getToken:function(){return this.$service(v,{method:"post"}).then(function(e){return 200===e.code?Bo.a.resolve(e.data):Bo.a.reject(e)},function(e){return Bo.a.reject(e)})},userPop:function(e){var t=this;e?(e.roleIds=[],e.rolesList.forEach(function(t){e.roleIds.push(t.roleId)}),this.form=tn()({},e)):this.form=tn()({},{adminName:"",loginName:"",roleIds:[]}),this.rolesList.length<=0?this.getRolesList().then(function(e){t.dialogFormVisible=!0,t.$nextTick(function(){t.$refs.userForm.clearValidate()})}):(this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.userForm.clearValidate()}))},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.updateLoading=!0,t.form.adminId?t.userUpdata(t.form):t.getToken().then(function(e){t.userUpdata(t.form,e)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})})},userUpdata:function(e,t){var a=this,i={loginName:e.loginName,adminName:e.adminName,roleIds:e.roleIds.join(","),status:0,password:"",adminType:0,organizationId:1};e.adminId&&(i.adminId=e.adminId),t&&(i.token=t),this.$service(e.adminId?W:Q,{method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:qo()(i)}).then(function(t){a.updateLoading=!1,200===t.code?(a.dialogFormVisible=!1,a.$message.success((e.adminId?"修改":"添加")+"成功。"),e.adminId||(a.pageIndex=1),a.getList()):a.$message.error(t.code+":"+t.message)},function(e){a.updateLoading=!1,a.$message.error(qo()(e))})},userDel:function(e){var t=this;this.$set(e,"loading",!0),this.$service(B,{method:"delete",params:{adminId:e.adminId}}).then(function(a){e.loading=!1,200===a.code?(e.delPop=!1,t.$message.success("删除成功"),t.getList()):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})}},watch:{windowHeight:function(){this.setHeight()}}},os={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"auth-users"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.userPop()}}},[e._v("添加用户")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"loginName",label:"账号","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"adminName",label:"姓名","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"loginTime",label:"最后登录时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.loginTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"rolesList",label:"角色","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("roles2String")(t.row.rolesList))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.userPop(t.row)}}}),e._v(" "),a("el-popover",{attrs:{placement:"left"},model:{value:t.row.delPop,callback:function(a){e.$set(t.row,"delPop",a)},expression:"scope.row.delPop"}},[a("p",[e._v("确定删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.userDel(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:"",size:"small"},slot:"reference"})],1)]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList}}),e._v(" "),a("el-dialog",{attrs:{title:e.form.adminId?"修改用户":"添加用户","close-on-click-modal":!1,visible:e.dialogFormVisible,width:"400px",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"userForm",attrs:{model:e.form,disabled:e.updateLoading,"label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"用户姓名",prop:"adminName",rules:[{required:!0,message:"请输入用户姓名",trigger:["blur","change"]},{max:10,message:"最多10个字符",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.adminName,callback:function(t){e.$set(e.form,"adminName",t)},expression:"form.adminName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"登录账号",prop:"loginName",rules:[{required:!0,message:"请输入登录账号",trigger:["blur","change"]},{type:"email",message:"邮箱格式错误",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.loginName,callback:function(t){e.$set(e.form,"loginName",t)},expression:"form.loginName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色",prop:"roleIds",rules:{required:!0,message:"不为空",trigger:["blur","change"]}}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.form.roleIds,callback:function(t){e.$set(e.form,"roleIds",t)},expression:"form.roleIds"}},e._l(e.rolesList,function(e){return a("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("userForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},ns=a("VU/8")(rs,os,!1,null,null,null).exports,ss={name:"Version",data:function(){return{activeTab:"0",loading:!1,list:[],offset:0,limit:25,total:1,dialogFormVisible:!1,updateLoading:!1,tableHeight:null,form:{versionChannel:"",title:"",versionCode:"",apkUrl:"",content:""},buildRules:[{required:!0,message:"请输入build值",trigger:["blur","change"]},{type:"number",message:"build值必须为正整数",trigger:["blur","change"]},{validator:function(e,t,a){t>4294967295?a(new Error("build值最大不超过4294967295")):a()},trigger:["blur","change"]}]}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},handleClickTabs:function(e,t){this.list=[],this.getList()},getList:function(e,t){var a=this;this.loading||(this.loading=!0,this.offset=e?(e-1)*this.limit:0,this.$service(re[this.activeTab].list,{params:{offset:this.offset,limit:this.limit}}).then(function(e){a.loading=!1,200===e.code?(!t&&(a.$refs.elTable.bodyWrapper.scrollTop=0),a.list=e.data.data||[],a.total=e.data.total?e.data.total:1):a.$message.error(e.code+":"+e.message)},function(e){a.loading=!1,a.$message.error(qo()(e))}))},versionDel:function(e){var t=this;this.$set(e,"loading",!0),this.$service(re[this.activeTab].del,{method:"post",data:{versionDescId:e.versionDescId}}).then(function(a){e.loading=!1,200===a.code?(e.delPop=!1,t.$message.success("删除成功"),t.getList(Math.floor(t.offset/t.limit)+1,!0)):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})},versionPop:function(e){var t=this;e&&e.versionDescId?(this.form=tn()({},e),this.form.content=this.form.content.replace(/<br(\/)?(\s)?>/g,"\n"),e.versionChannel||(this.form.gw=!0)):this.form=e?{all:!0,title:"",versionCode:"",content:""}:{versionChannel:"",title:"",versionCode:"",apkUrl:"",content:""},this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.versionForm.clearValidate()})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a={title:t.form.title,content:t.form.content,versionCode:t.form.versionCode};t.form.all||(t.form.gw||(a.versionChannel=t.form.versionChannel),a.apkUrl=t.form.apkUrl.replace(/\?.*/,"")),t.form.versionDescId&&(a.versionDescId=t.form.versionDescId),t.updateLoading=!0,t.$service(t.form.versionDescId?re[t.activeTab].update:t.form.all?re[t.activeTab].updateAll:re[t.activeTab].add,{method:"post",data:a}).then(function(e){t.updateLoading=!1,200===e.code?(t.dialogFormVisible=!1,t.getList(Math.floor(t.offset/t.limit)+1,!0),t.$message.success(t.form.versionDescId||t.form.all?"更新成功":"添加成功")):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}})}},watch:{windowHeight:function(){this.setHeight()}}},ls={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-version"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.versionPop()}}},[e._v("新建版本")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.versionPop("all")}}},[e._v("批量更新版本信息")])],1)]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"红彩",name:"0",disabled:e.loading}}),e._v(" "),a("el-tab-pane",{attrs:{label:"精准比分",name:"1",disabled:e.loading}})],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"versionDescId",label:"ID",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"versionChannel",label:"渠道号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.versionChannel?t.row.versionChannel:"官网包")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题","min-width":"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"versionCode",label:"build值",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"apkUrl",label:"安装包路径","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"content",label:"升级信息","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(t.row.content)}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"operator",label:"最后操作人",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.versionPop(t.row)}}}),e._v(" "),t.row.versionChannel?a("el-popover",{attrs:{placement:"left"},model:{value:t.row.delPop,callback:function(a){e.$set(t.row,"delPop",a)},expression:"scope.row.delPop"}},[a("p",[e._v("确定删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.versionDel(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:"",size:"small"},slot:"reference"})],1):e._e()]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":Math.floor(e.offset/e.limit)+1,total:e.total,"page-size":e.limit},on:{"current-change":e.getList,"update:currentPage":function(t){e.$set(Math,"floor(offset/limit) + 1",t)},"update:current-page":function(t){e.$set(Math,"floor(offset/limit) + 1",t)}}}),e._v(" "),a("el-dialog",{attrs:{title:e.form.versionDescId?"修改版本信息":e.form.all?"批量更新版本信息":"新增版本信息",visible:e.dialogFormVisible,width:"500px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"versionForm",staticStyle:{"max-width":"600px"},attrs:{model:e.form,disabled:e.updateLoading,"label-width":"140px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.form.gw&&!e.form.all,expression:"!form.gw&&!form.all"}],attrs:{prop:"versionChannel",label:"渠道号",rules:[{required:!e.form.gw&&!e.form.all,message:"不为空",trigger:["blur","change"]},{pattern:/^[A-Za-z0-9_-]{1,}$/,message:"必须为数字、字幕或-_组成",trigger:["blur","change"]}]}},[a("el-input",{model:{value:e.form.versionChannel,callback:function(t){e.$set(e.form,"versionChannel",t)},expression:"form.versionChannel"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"title",label:"标题",rules:[{required:!0,message:"请输入标题",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"versionCode",label:"版本build值",rules:e.buildRules}},[a("el-input",{attrs:{max:4294967295,autocomplete:"off"},model:{value:e.form.versionCode,callback:function(t){e.$set(e.form,"versionCode",e._n(t))},expression:"form.versionCode"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.form.all,expression:"!form.all"}],attrs:{prop:"apkUrl",label:"Android安装包路径",rules:[{required:!e.form.all,message:"请输入路径",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.apkUrl,callback:function(t){e.$set(e.form,"apkUrl",t)},expression:"form.apkUrl"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"content",label:"版本升级信息",rules:[{required:!0,message:"请输入版本升级信息",trigger:["blur","change"]}]}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"版本信息"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("versionForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},cs=a("VU/8")(ss,ls,!1,null,null,null).exports,ds={name:"HotFix",data:function(){var e=this;return{activeTab:0,list:[],offset:0,limit:2,pageCount:1,loading:!1,tableHeight:null,form:{versionName:"",versionCode:"",isAll:!0,file:null,channelIds:""},formRules:{versionName:[{required:!0,message:"版本号必填",trigger:"blur"}],versionCode:[{required:!0,message:"build号必填",trigger:"blur"},{type:"number",message:"build号必须为数字值"}],file:[{validator:function(t,a,i){e.form.hotfixId||e.form.file?i():i(new Error("增量包必选"))},trigger:"blur"}]},dialogFormVisible:!1,updateLoading:!1}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getHotFixList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},handleClickTabs:function(){this.offset=0,this.pageCount=1,this.list=[],this.getHotFixList()},handleFileExceed:function(){this.$message.warning("请先移除增量包列表里的文件。")},handleFileRemove:function(e){this.form.file=null},handleFileChange:function(e,t){this.form.file=e.raw},getHotFixList:function(e,t){var a=this;this.loading||(this.offset=e?(e-1)*this.limit:this.offset,this.loading=!0,this.$service(oe[this.activeTab].hotFixList,{urlParams:{offset:this.offset,limit:this.limit}}).then(function(e){a.loading=!1,200===e.code?(!t&&(a.$refs.elTable.bodyWrapper.scrollTop=0),a.list=e.data.records||[],a.pageCount=e.data.page?e.data.page.pageCount:1):a.$message.error(e.code+":"+e.message)},function(e){e&&(a.loading=!1,a.$message.error(qo()(e)))}))},hotFixPop:function(e){var t=this;e?(this.form=tn()({},e),this.$set(this.form,"isAll","all"===e.channelIds),"all"===e.channelIds&&(this.form.channelIds="")):this.form=tn()({},{versionName:"",versionCode:"",isAll:!0,file:null,channelIds:""}),this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.hotFixForm.clearValidate()})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e&&t.hotFixUpdate(t.form)})},hotFixUpdate:function(e){var t=this;e.isAll?e.channelIds="":e.channelIds=e.channelIds.replace(/\;|\；|\,|\，|\s/g,",");var a=new FormData;e.hotfixId&&a.append("hotfixId",e.hotfixId),a.append("versionName",e.versionName),a.append("versionCode",e.versionCode),a.append("isAll",e.isAll),a.append("channelIds",e.channelIds),e.file?a.append("packageUrl",e.file):a.append("packageUrl",e.packageUrl),this.updateLoading=!0,this.$service(e.hotfixId?oe[this.activeTab].hotFixUpdate:oe[this.activeTab].hotFixAdd,{method:"post",headers:{"Content-Type":"multipart/form-data"},data:a}).then(function(a){t.updateLoading=!1,200===a.code?(t.dialogFormVisible=!1,t.$message.success((e.hotfixId?"修改":"添加")+"成功"),e.hotfixId||(t.offset=0),t.getHotFixList(Math.floor(t.offset/t.limit)+1,!!e.hotfixId)):t.$message.error(a.code+":"+a.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})},hotFixDel:function(e){var t=this;this.$set(e,"loading",!0),this.$service(oe[this.activeTab].hotFixDel,{method:"post",urlParams:{hotfixId:e.hotfixId}}).then(function(a){e.loading=!1,200===a.code?(e.delPop=!1,t.$message.success("删除成功"),t.getHotFixList(Math.floor(t.offset/t.limit)+1,!0)):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})}},watch:{windowHeight:function(){this.setHeight()}}},us={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-hot-fix"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.hotFixPop()}}},[e._v("添加热修复")])],1)]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"红彩",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"精准比分",name:"1"}})],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"hotfixId",label:"ID",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"versionName",label:"版本号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"packageUrl",label:"增量包地址","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.packageUrl)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"channelIds",label:"渠道号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operator",label:"操作者","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"loginTime",label:"最后登录时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.updateTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.hotFixPop(t.row)}}}),e._v(" "),a("el-popover",{attrs:{placement:"left"},model:{value:t.row.delPop,callback:function(a){e.$set(t.row,"delPop",a)},expression:"scope.row.delPop"}},[a("p",[e._v("确定删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.hotFixDel(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:"",size:"small"},slot:"reference"})],1)]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":Math.floor(e.offset/e.limit)+1,"page-count":e.pageCount},on:{"current-change":e.getHotFixList}}),e._v(" "),a("el-dialog",{attrs:{title:e.form.hotfixId?"修改热修复":"添加热修复","close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"hotFixForm",attrs:{model:e.form,rules:e.formRules,disabled:e.updateLoading,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"版本号",prop:"versionName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.versionName,callback:function(t){e.$set(e.form,"versionName",t)},expression:"form.versionName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"build号",prop:"versionCode"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.versionCode,callback:function(t){e.$set(e.form,"versionCode",e._n(t))},expression:"form.versionCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"全渠道"}},[a("el-checkbox",{model:{value:e.form.isAll,callback:function(t){e.$set(e.form,"isAll",t)},expression:"form.isAll"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.form.isAll,expression:"!form.isAll"}],attrs:{label:"渠道号",prop:"channelIds",rules:[{required:!this.form.isAll,message:"渠道号必填",trigger:"blur"}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.channelIds,callback:function(t){e.$set(e.form,"channelIds",t)},expression:"form.channelIds"}})],1),e._v(" "),e.form.hotfixId?a("el-form-item",{staticClass:"word-break",attrs:{label:"增量包链接"}},[e._v("\n        "+e._s(e.form.packageUrl)+"\n      ")]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"增量包",prop:"file"}},[a("el-upload",{attrs:{limit:"1",accept:".apk","on-remove":e.handleFileRemove,"on-change":e.handleFileChange,"on-exceed":e.handleFileExceed,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传apk文件")])],1)],1),e._v(" "),e.form.hotfixId?a("el-form-item",{attrs:{label:"操作人"}},[a("el-input",{attrs:{disabled:"true",autocomplete:"off"},model:{value:e.form.operator,callback:function(t){e.$set(e.form,"operator",t)},expression:"form.operator"}})],1):e._e()],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("hotFixForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},ms=a("VU/8")(ds,us,!1,null,null,null).exports,ps={name:"channel-switch",props:["info","api"],data:function(){return{list:[],loading:!1}},methods:{getList:function(){var e=this;this.loading||this.list.length>0||(this.loading=!0,this.$service(this.api.channelList,{params:{version:this.info.version}}).then(function(t){200===t.code?e.list=t.data:e.$message.error(t.message)}).catch(function(t){e.$message.error(qo()(t))}).finally(function(){e.loading=!1}))},switchStatus:function(e){var t=this;this.$set(e,"loading",!0);var a={switchControlId:e.switchControlId,status:e.status};this.$service(this.api.channelUpdate,{method:"post",data:a}).then(function(e){200===e.code?t.$message.success("状态更新成功"):t.$message.error(e.message)}).catch(function(a){t.$set(e,"status",e.status?0:1),t.$message.error(a.code?a.code+":"+a.message:qo()(a))}).finally(function(){e.loading=!1})}}},fs={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return 16===e.info.menuType?a("el-popover",{attrs:{placement:"left",width:"480",trigger:"click"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{stripe:"",data:e.list,"max-height":"300"}},[a("el-table-column",{attrs:{prop:"channel",width:"100",label:"渠道名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.status?"关":"开")+"\n      ")]}}],null,!1,241538847)}),e._v(" "),a("el-table-column",{attrs:{prop:"operator",label:"操作者",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(/@/gi.test(t.row.operator)?t.row.operator.split("@")[0]:t.row.operator)+"\n      ")]}}],null,!1,3348848964)}),e._v(" "),a("el-table-column",{attrs:{prop:"loginTime",label:"更新时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.updateTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}],null,!1,2211360573)}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{disabled:t.row.statusLoading,"active-value":0,"inactive-value":1},nativeOn:{click:function(a){return e.switchStatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}],null,!1,2976940253)})],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"text"},on:{click:function(t){return e.getList()}},slot:"reference"},[e._v("列表")])],1):e._e()},staticRenderFns:[]},hs=a("VU/8")(ps,fs,!1,null,null,null).exports,gs={name:"Swtich",data:function(){return{activeTab:"0",menuName:null,list:[],expands:[],pageIndex:1,pageSize:20,pageCount:1,loading:!1,tableHeight:null,dialogFormVisible:!1,form:{version:"",menuTypeList:[],menuType:"",status:"0"}}},computed:u()({},Object(sn.d)(["windowHeight"]),{switchApi:function(){return ne[this.activeTab]}}),components:{ChannelSwitch:hs},mounted:function(){var e=this;this.getSwitchTypeList().then(function(){e.getSwtichList()},function(){e.getSwtichList()}),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},setClassName:function(e){var t=e.row;e.index;return t.versionSwitchControlValue&&t.versionSwitchControlValue.length>1?"":"expend-hidden"},countExpand:function(e,t){var a=this;this.expands=[],t.length>0&&t.forEach(function(e){a.expands.push(e.versionKey)})},getRowKeys:function(e){return e.versionKey},handleClickTabs:function(){var e=this;this.pageIndex=1,this.pageCount=1,this.list=[],this.menuName=null,this.getSwitchTypeList().then(function(){e.getSwtichList()},function(){e.getSwtichList()})},getSwitchTypeList:function(){var e=this;return this.$service(this.switchApi.menuList).then(function(t){return 200===t.code?(e.menuName=t.data,Bo.a.resolve(t)):Bo.a.reject(t)},function(e){return Bo.a.reject(e)})},getSwtichList:function(e,t){var a=this;this.loading||(this.pageIndex=e||this.pageIndex,this.loading=!0,this.$service(this.switchApi.switchList,{urlParams:{pageIndex:this.pageIndex,pageSize:this.pageSize}}).then(function(e){if(a.loading=!1,200===e.code){var i=a;!t&&(a.$refs.elTable.bodyWrapper.scrollTop=0),a.list=e.data.records||[],a.list.forEach(function(e){var t=e.versionSwitchControlValue.splice(0,1);o()(t[0]).forEach(function(a){i.$set(e,a,t[0][a])})}),a.pageCount=e.data.page?e.data.page.pageCount:1}else a.$message.error(e.code+":"+e.message)},function(e){e&&(a.loading=!1,a.$message.error(qo()(e)))}))},switchStatus:function(e){var t=this;this.$set(e,"statusLoading",!0);var a={switchControlId:e.switchControlId,status:e.status};this.switchUpdate(a).then(function(){e.statusLoading=!1,t.$message.success("状态更新成功")},function(a){e.statusLoading=!1,t.$set(e,"status",e.status?0:1),t.$message.error(a.code?a.code+":"+a.message:qo()(a))})},switchPop:function(e){var t=this;this.menuName?this.asyncPop(e):this.getSwitchTypeList().then(function(){t.asyncPop(e)},function(){t.$message.error("获取开关列表失败，请稍后再试")})},asyncPop:function(e){var t=this;e?(this.form=tn()({},e),this.form.menuType=this.form.menuType+"",this.form.menuTypeList=[],this.form.status=this.form.status+""):this.form=tn()({},{version:"",menuTypeList:[],status:"0"}),this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.switchForm.clearValidate()})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a={version:t.form.version,status:t.form.status};t.form.switchControlId?(a.switchControlId=t.form.switchControlId,a.menuType=t.form.menuType):a.menuTypeList=t.form.menuTypeList.join(","),t.switchUpdate(a).then(function(){t.updateLoading=!1,t.dialogFormVisible=!1,t.$message.success((a.switchControlId?"修改":"添加")+"成功"),a.switchControlId||(t.pageIndex=1),t.getSwtichList(t.pageIndex,!!a.switchControlId)},function(e){t.updateLoading=!1,t.$message.error(e.code?e.code+":"+e.message:qo()(e))})}})},switchUpdate:function(e){return this.$service(e.switchControlId?this.switchApi.switchUpdate:this.switchApi.switchAdd,{method:"post",data:e}).then(function(e){return 200===e.code?Bo.a.resolve():Bo.a.reject(e)},function(e){return Bo.a.reject(e)})},switchDel:function(e){var t=this;this.$set(e,"loading",!0),e.loading||this.$service(this.switchApi.switchDel,{urlParams:{switchControlId:e.switchControlId}}).then(function(a){e.loading=!1,200===a.code?(e.delPop=!1,t.$message.success("删除成功"),t.getSwtichList(t.pageIndex,!0)):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})}},watch:{windowHeight:function(){this.setHeight()}}},vs={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-switch"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.switchPop()}}},[e._v("添加开关")])],1)]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"红彩",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"精准比分",name:"1"}})],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{"row-class-name":e.setClassName,data:e.list,stripe:"","row-key":e.getRowKeys,"expand-row-keys":e.expands,"max-height":e.tableHeight<400?400:e.tableHeight},on:{"expand-change":e.countExpand}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-table",{attrs:{"show-header":!1,stripe:"",data:t.row.versionSwitchControlValue}},[a("el-table-column",{attrs:{prop:"version",label:"版本号",width:"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"menuType",label:"开关名","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e.menuName[t.row.menuType]||t.row.menuType)+"\n            ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.status?"关":"开")+"\n            ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"operator",label:"操作者","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(/@/gi.test(t.row.operator)?t.row.operator.split("@")[0]:t.row.operator)+"\n            ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n            ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"loginTime",label:"更新时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("dateFormat")([t.row.updateTime,"yyyy-MM-dd hh:mm:ss"]))+"\n            ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"channel",label:"渠道控制",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("channel-switch",{attrs:{info:t.row,api:e.switchApi}})]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[16!==t.row.menuType?a("el-switch",{attrs:{disabled:t.row.statusLoading,"active-value":0,"inactive-value":1},nativeOn:{click:function(a){return e.switchStatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}}):e._e(),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.switchPop(t.row)}}}),e._v(" "),a("el-popover",{attrs:{placement:"left"},model:{value:t.row.delPop,callback:function(a){e.$set(t.row,"delPop",a)},expression:"scope.row.delPop"}},[a("p",[e._v("确定删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.switchDel(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:"",size:"small"},slot:"reference"})],1)]}}],null,!0)})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"versionKey",label:"版本号",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.versionKey+(t.row.versionKey!==t.row.version?"("+t.row.version+")":""))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"menuType",label:"开关名","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.menuName[t.row.menuType]||t.row.menuType)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.status?"关":"开")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"operator",label:"操作者","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(/@/gi.test(t.row.operator)?t.row.operator.split("@")[0]:t.row.operator)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"loginTime",label:"更新时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.updateTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"channel",label:"渠道控制",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("channel-switch",{attrs:{info:t.row,api:e.switchApi}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[16!==t.row.menuType?a("el-switch",{attrs:{disabled:t.row.statusLoading,"active-value":0,"inactive-value":1},nativeOn:{click:function(a){return e.switchStatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}}):e._e(),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.switchPop(t.row)}}}),e._v(" "),a("el-popover",{attrs:{placement:"left"},model:{value:t.row.delPop,callback:function(a){e.$set(t.row,"delPop",a)},expression:"scope.row.delPop"}},[a("p",[e._v("确定删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{change:function(a){return e.switchDel(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:"",size:"small"},slot:"reference"})],1)]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getSwtichList}}),e._v(" "),a("el-dialog",{attrs:{title:e.form.switchControlId?"修改开关":"添加开关","close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"switchForm",attrs:{model:e.form,disabled:e.updateLoading,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"版本号",prop:"version",rules:[{required:!0,message:"版本号必填",trigger:"blur"}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.version,callback:function(t){e.$set(e.form,"version",t)},expression:"form.version"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.form.switchControlId,expression:"!form.switchControlId"}],attrs:{label:"菜单类型",prop:"menuTypeList",rules:[{required:!e.form.switchControlId,message:"请选择菜单类型",trigger:"blur"}]}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.form.menuTypeList,callback:function(t){e.$set(e.form,"menuTypeList",t)},expression:"form.menuTypeList"}},e._l(e.menuName,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.switchControlId,expression:"form.switchControlId"}],attrs:{label:"菜单类型",prop:"menuType",rules:[{required:e.form.switchControlId,message:"请选择菜单类型",trigger:"blur"}]}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.menuType,callback:function(t){e.$set(e.form,"menuType",t)},expression:"form.menuType"}},e._l(e.menuName,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"开关控制"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[e._v("开")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[e._v("关")])],1),e._v(" "),e.form.switchControlId?a("el-form-item",{attrs:{label:"操作人"}},[a("el-input",{attrs:{disabled:"true",autocomplete:"off"},model:{value:e.form.operator,callback:function(t){e.$set(e.form,"operator",t)},expression:"form.operator"}})],1):e._e()],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("switchForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},bs=a("VU/8")(gs,vs,!1,null,null,null).exports,_s={name:"DeveloperLog",data:function(){return{filterQuery:{type:"1",userId:""},loading:!1,list:[],pageIndex:1,pageSize:25,pageCount:1,tableHeight:null}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getLogList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getLogList:function(e){var t=this;if(!this.loading){this.loading=!0,this.pageIndex=fh(e)?e:1;var a={};this.filterQuery.type&&(a.type=this.filterQuery.type),this.filterQuery.userId&&(a.userId=this.filterQuery.userId),this.$service(Ie,{urlParams:{pageIndex:this.pageIndex,pageSize:this.pageSize},params:a}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.records||[],t.pageCount=e.data.page?e.data.page.pageCount:1,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){t.$message.error(qo()(e))})}}},watch:{windowHeight:function(){this.setHeight()}}},ys={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"developer-log"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1)]),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.filterQuery,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{staticStyle:{width:"105px"},model:{value:e.filterQuery.type,callback:function(t){e.$set(e.filterQuery,"type",t)},expression:"filterQuery.type"}},[a("el-option",{attrs:{label:"支付",value:"1"}},[e._v("支付")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"用户ID"}},[a("el-input",{attrs:{clearable:"",placeholder:"用户ID"},model:{value:e.filterQuery.userId,callback:function(t){e.$set(e.filterQuery,"userId",t)},expression:"filterQuery.userId"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.getLogList}},[e._v("搜索")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"clientLogId",label:"LogId",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"用户ID",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"用户IP",width:"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operateTime",label:"操作时间",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"logContent",label:"日志内容","min-width":"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(1==t.row.type?"支付":"--")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"phoneInfo",label:"手机型号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operateSystem",label:"系统版本",width:"120"}})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getLogList}})],1)},staticRenderFns:[]},ws=a("VU/8")(_s,ys,!1,null,null,null).exports,Ts={name:"Apk",data:function(){return{activeTab:0,list:[],loading:!1,tableHeight:null,fileList:[],filesStatus2CH:{0:"未开始",1:"上传中",2:"已完成",3:"失败",4:"跳过",5:"上传中断",6:"请一分钟后再上传"},isRemind:!1,isOverwrite:!1,isSkip:!1,uploadEnd:!1,apkIndex:0,coverFileObj:null,apkUpStyle:{position:"absolute",left:0,top:0,bottom:0,right:0,opacity:0}}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getApkList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-20})},handleClickTabs:function(){this.list=[],this.getApkList()},getApkList:function(){var e=this;this.loading||(this.loading=!0,this.$service(se[this.activeTab].apkList).then(function(t){e.loading=!1,200===t.code?(e.list=t.data,e.$refs.elTable.bodyWrapper.scrollTop=0):e.$message.error(t.code+":"+t.message)},function(t){e.loading=!1,e.$message.error(qo()(t))}))},apkUpload:function(e){var t=e.target.files||e.dataTransfer.files;this.fileList=[];for(var a=0,i=t.length;a<i;a++)this.fileList.push({status:0,file:t[a]});e.target.value="",this.isRemind=!1,this.isOverwrite=!1,this.isSkip=!1,this.apkIndex=0,this.uploadEnd=!1,this.apkFileUpload()},apkUploadRequest:function(e,t){var a=new FormData;return a.append("file",e),a.append("validateRepeat",t),this.$service(se[this.activeTab].apkAdd,{method:"post",headers:{"Content-Type":"multipart/form-data"},data:a}).then(function(e){return Bo.a.resolve(e)},function(e){return Bo.a.reject(e)})},apkFileUpload:function(e){var t=this;if(!this.uploadEnd)if(this.apkIndex>=this.fileList.length)this.uploadEnd=!0;else{var a=!0;(!1===e||this.isOverwrite)&&(a=!1);var i=this.fileList[this.apkIndex].file;this.fileList[this.apkIndex].status=1,this.apkUploadRequest(i,a).then(function(e){200===e.code?(t.fileList[t.apkIndex].status=2,t.apkIndex++,t.apkFileUpload()):91e5===e.code||301001===e.code?t.isSkip?(t.fileList[t.apkIndex].status=4,t.apkIndex++,t.apkFileUpload()):t.coverFileObj=t.fileList[t.apkIndex].file.name:9100005===e.code||207006===e.code?(t.fileList[t.apkIndex].status=6,t.apkIndex++,t.apkFileUpload()):(t.fileList[t.apkIndex].status=3,t.apkIndex++,t.apkFileUpload())},function(){t.fileList[t.apkIndex].status=3,t.apkIndex++,t.apkFileUpload()})}},overwrite:function(){this.isOverwrite=!0,this.apkFileUpload(!1),this.coverFileObj=null},skip:function(){this.isSkip=!0,this.fileList[this.apkIndex].status=4,this.apkIndex++,this.apkFileUpload(),this.coverFileObj=null},cancel:function(){this.fileList[this.apkIndex].status=5,this.uploadEnd=!0,this.coverFileObj=null}},watch:{windowHeight:function(){this.setHeight()}}},Is={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"apk"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools",staticStyle:{position:"relative",overflow:"hidden"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),a("input",{ref:"ApkFiles",style:e.apkUpStyle,attrs:{type:"file",multiple:"multiple",accept:".apk"},on:{change:function(t){return e.apkUpload(t)}}}),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传APK文件")])],1)]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"红彩",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"精准比分",name:"1"}})],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"fileName",label:"文件名","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"url",label:"链接","min-width":"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fileSize",label:"大小",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fileType",label:"类型",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lastModifyTime",label:"最近修改",width:"160"}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.uploadEnd?"上传完成":"上传中",visible:e.fileList.length,width:"500px",center:"","show-close":!e.uploadEnd,"close-on-click-modal":!e.uploadEnd},on:{"update:visible":function(t){return e.$set(e.fileList,"length",t)}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.fileList,"max-height":"450","show-header":!1}},[a("el-table-column",{attrs:{prop:"name",label:"文件名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.file.name)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.filesStatus2CH[t.row.status]||"未开始")+"\n        ")]}}])})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.uploadEnd,expression:"uploadEnd"}],on:{click:function(t){e.fileList=[]}}},[e._v("知道了")])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.coverFileObj,width:"500px",center:"","show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.coverFileObj=t}}},[a("div",{staticClass:"cover-file-pop-item"},[e._v("\n      "+e._s(e.coverFileObj)+"\n    ")]),e._v(" "),a("div",{staticClass:"cover-file-pop-item"},[a("el-checkbox",{model:{value:e.isRemind,callback:function(t){e.isRemind=t},expression:"isRemind"}},[e._v("总是执行相同操作")])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.overwrite}},[e._v("覆盖")]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:e.skip}},[e._v("跳过")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)])],1)},staticRenderFns:[]};var xs=a("VU/8")(Ts,Is,!1,function(e){a("zPM9")},null,null).exports,ks={name:"ChannelPromotion",data:function(){var e=this;return{activeTab:0,loading:!1,list:[],pageIndex:1,pageSize:25,pageCount:1,tableHeight:null,promotionUrl:{0:[{url:"https://hongcai.163.com/html/downloadapp.html"},{url:"https://hongcai.163.com/html/live_download.html"},{url:"https://hongcai.163.com/html/promotion.html"},{url:"https://hongcai.163.com/html/promotion_lottery.html"},{url:"https://hongcai.163.com/html/promotion_new.html"},{url:"https://hongcai.163.com/html/worldcupquiz.html"}],1:[]},dialogFormVisible:!1,form:{channelName:"",iosShortChain:"",androidApkUrl:"",weChatUrl:""},formRules:{channelName:[{validator:function(t,a,i){""===a?i(new Error("请输入渠道号")):/^[A-Za-z0-9_-]{1,}$/.test(a)?i(e.checkApkUrl()):i(new Error("只支持输入大小字母数字及-_"))},trigger:"blur"}],iosShortChain:[{type:"url",message:"请输入正确的链接",trigger:"blur"}],androidApkUrl:[{type:"url",message:"请输入正确的链接",trigger:"blur"}],weChatUrl:[{type:"url",message:"请输入正确的链接",trigger:"blur"}]},apkUrl:null,updateLoading:!1}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getChannelList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},handleClickTabs:function(){this.pageIndex=1,this.pageCount=1,this.list=[],this.getChannelList()},getChannelList:function(e){var t=this;this.loading||(this.loading=!0,this.pageIndex=e||this.pageIndex,this.$service(le[this.activeTab].list,{urlParams:{pageIndex:this.pageIndex,pageSize:this.pageSize}}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.records||[],t.pageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){t.$message.error(qo()(e))}))},channelPop:function(e){var t=this;this.apkUrl=null,this.form=e?tn()({},e):tn()({},{channelName:"",iosShortChain:"",androidApkUrl:"",weChatUrl:""}),this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.channelForm.clearValidate()})},checkApkUrl:function(){var e=this;this.$service(le[this.activeTab].checkApk,{params:{channelName:this.form.channelName}}).then(function(t){200===t.code&&t.data&&"string"==typeof t.data?(e.form.androidApkUrl&&(e.apkUrl="安卓渠道APK链接已更新"),e.form.androidApkUrl=t.data):e.apkUrl="找不到对应的安卓渠道APK链接"},function(t){t&&(e.apkUrl="找不到对应的安卓渠道APK链接")})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(t.updateLoading)return;if(!t.form.iosShortChain&&!t.form.androidApkUrl&&!t.form.weChatUrl)return t.$message.error("三个地址必填一个");t.updateLoading=!0,t.$service(t.form.channelSpreadConfigId?le[t.activeTab].update:le[t.activeTab].add,{method:"post",urlParams:t.form.channelSpreadConfigId?{channelSpreadConfigId:t.form.channelSpreadConfigId}:null,data:t.form}).then(function(e){t.updateLoading=!1,200===e.code?(t.dialogFormVisible=!1,t.$message.success((t.form.channelSpreadConfigId?"修改":"添加")+"成功。"),t.form.channelSpreadConfigId||(t.pageIndex=1),t.getChannelList()):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}})}},watch:{windowHeight:function(){this.setHeight()}}},$s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"channel-promotion"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.channelPop()}}},[e._v("新建渠道")])],1)]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"红彩",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"精准比分",name:"1"}})],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"channelName",label:"渠道号","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"iosShortChain",label:"iOS短链","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"androidApkUrl",label:"安卓地址","min-width":"170"}}),e._v(" "),a("el-table-column",{attrs:{prop:"weChatUrl",label:"微信地址","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{label:"推广页面链接",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.promotionUrl[e.activeTab].length>0?a("el-popover",{attrs:{placement:"left",width:"400",trigger:"click"}},[a("el-table",{key:Math.random(),attrs:{data:e.promotionUrl[e.activeTab],"show-header":!1}},[a("el-table-column",{attrs:{width:"400",prop:"url"},scopedSlots:e._u([{key:"default",fn:function(i){return[a("a",{attrs:{href:i.row.url+"?from="+t.row.channelName,target:"_blank"}},[e._v(e._s(i.row.url+"?from="+t.row.channelName))])]}}],null,!0)})],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[e._v("查看推广链接")])],1):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.channelPop(t.row)}}})]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getChannelList}}),e._v(" "),a("el-dialog",{attrs:{title:e.form.channelSpreadConfigId?"修改渠道":"添加渠道","close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"channelForm",attrs:{model:e.form,rules:e.formRules,disabled:e.updateLoading,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"渠道号",prop:"channelName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.channelName,callback:function(t){e.$set(e.form,"channelName",t)},expression:"form.channelName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"iOS短链",prop:"iosShortChain"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.iosShortChain,callback:function(t){e.$set(e.form,"iosShortChain",t)},expression:"form.iosShortChain"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"安卓地址",prop:"androidApkUrl"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.androidApkUrl,callback:function(t){e.$set(e.form,"androidApkUrl",t)},expression:"form.androidApkUrl"}})],1),e._v(" "),e.apkUrl?a("el-form-item",{attrs:{label:""}},[a("span",[e._v(e._s(e.apkUrl))])]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"微信地址",prop:"weChatUrl"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.weChatUrl,callback:function(t){e.$set(e.form,"weChatUrl",t)},expression:"form.weChatUrl"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("channelForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},Cs=a("VU/8")(ks,$s,!1,null,null,null).exports,Ss={name:"ShortUrl",data:function(){return{activeTab:0,loading:!1,list:[],tableHeight:null,type2CH:{},typeList:[],dialogFormVisible:!1,form:{channelCode:"",appleChannelGroupId:"",description:""},formRules:{channelCode:[{required:!0,message:"请输入渠道号",trigger:["blur","change"]},{max:50,message:"长度不多于50个字符",trigger:["blur","change"]},{pattern:/^[0-9a-zA-Z_-]{1,}$/,message:"仅支持字母、数字及_或-",trigger:["blur","change"]}],appleChannelGroupId:[{required:!0,message:"类型必选",trigger:["blur","change"]}]},updateLoading:!1}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){var e=this;this.getTypeList().then(function(){e.getShorUrlList()},function(){e.getShorUrlList()}),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-20})},handleClickTabs:function(){var e=this;this.list=[],this.type2CH={},this.typeList=[],this.getTypeList().then(function(){e.getShorUrlList()},function(){e.getShorUrlList()})},getShorUrlList:function(){var e=this;this.loading||(this.loading=!0,this.$service(ce[this.activeTab].list).then(function(t){e.loading=!1,200===t.code?(e.list=t.data,e.$refs.elTable.bodyWrapper.scrollTop=0):e.$message.error(t.code+":"+t.message)},function(t){e.loading=!1,e.$message.error(qo()(t))}))},getTypeList:function(){var e=this;return this.$service(ce[this.activeTab].typeList).then(function(t){return 200===t.code?(t.data.forEach(function(t){e.type2CH[t.appleChannelGroupId]=t.channelGroupName}),e.typeList=t.data,Bo.a.resolve(t)):(e.$message.error(t.code+":"+t.message),Bo.a.reject(t))},function(t){return e.$message.error(qo()(t)),Bo.a.reject(t)})},shortUrlPop:function(e){var t=this;this.typeList.length>0?this.asyncPop(e):this.getTypeList().then(function(){t.asyncPop(e)})},asyncPop:function(e){var t=this;this.form=tn()({},e||{channelCode:"",appleChannelGroupId:"",description:""}),this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.shortUrlForm.clearValidate()})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(t.updateLoading)return;t.updateLoading=!0,t.$service(t.form.appleChannelId?ce[t.activeTab].update:ce[t.activeTab].add,{method:"post",urlParams:t.form.appleChannelId?{appleChannelId:t.form.appleChannelId}:null,data:t.form}).then(function(e){t.updateLoading=!1,200===e.code?(t.dialogFormVisible=!1,t.getShorUrlList(),t.$message.success((t.form.appleChannelId?"更新":"添加")+"成功")):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}})},shortUrlDel:function(e){var t=this;this.$set(e,"loading",!0),this.$service(ce[this.activeTab].del,{method:"post",urlParams:{appleChannelId:e.appleChannelId}}).then(function(a){e.loading=!1,200===a.code?(e.delPop=!1,t.$message.success("删除成功"),t.getShorUrlList()):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})}},watch:{windowHeight:function(){this.setHeight()}}},Ls={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"short-url"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.shortUrlPop()}}},[e._v("新建短链")])],1)]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"红彩",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"精准比分",name:"1"}})],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"appleChannelId",label:"短链ID",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelCode",label:"渠道号","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"appleChannelGroupId",label:"渠道类型","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.type2CH[t.row.appleChannelGroupId]||t.row.appleChannelGroupId)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"shortUrl",label:"短链","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"备注","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.shortUrlPop(t.row)}}}),e._v(" "),a("el-popover",{attrs:{placement:"left"},model:{value:t.row.delPop,callback:function(a){e.$set(t.row,"delPop",a)},expression:"scope.row.delPop"}},[a("p",[e._v("确定删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.shortUrlDel(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:"",size:"small"},slot:"reference"})],1)]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:e.form.appleChannelId?"修改短链":"添加短链","close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"shortUrlForm",attrs:{model:e.form,rules:e.formRules,disabled:e.updateLoading,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"渠道号",prop:"channelCode"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.channelCode,callback:function(t){e.$set(e.form,"channelCode",t)},expression:"form.channelCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"appleChannelGroupId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.appleChannelGroupId,callback:function(t){e.$set(e.form,"appleChannelGroupId",t)},expression:"form.appleChannelGroupId"}},e._l(e.typeList,function(e){return a("el-option",{key:e.appleChannelGroupId,attrs:{label:e.channelGroupName,value:e.appleChannelGroupId}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"description"}},[a("el-input",{attrs:{type:"textarea",rows:2,maxlength:"30",placeholder:"备注可为空"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("shortUrlForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},Ds=a("VU/8")(Ss,Ls,!1,null,null,null).exports,Ps={name:"DateYearQuarter",props:{value:{type:"String",default:null}},data:function(){return{time:null,visible:!1,year:(new Date).getFullYear(),disableYear:(new Date).getFullYear(),disableQuarter:Math.ceil(((new Date).getMonth()+1)/3),firstYear:null,quarter:{1:"一",2:"二",3:"三",4:"四"},type:"quarter"}},methods:{yearDown:function(){"quarter"===this.type?this.year--:this.firstYear=this.firstYear<=100?2e3:this.firstYear-10},yearUp:function(){if("quarter"===this.type){if(this.year>=this.disableYear)return;this.year++}else{if(this.firstYear+10>this.disableYear)return;this.firstYear=this.firstYear+10}},chooseType:function(){this.type="year",this.firstYear=this.year-this.year%10},chooseYear:function(e){e>this.disableYear||(this.type="quarter",this.year=e)},chooseQuarter:function(e){this.year>=this.disableYear&&e>=this.disableQuarter||(this.$emit("input",this.year+"-"+e),this.visible=!1)}},watch:{value:function(e){if(e&&e.split("-")){var t=e.split("-");this.time=t[0]+"年第"+this.quarter[t[1]]+"季度"}else this.time=null},visible:function(e){e&&(this.type="quarter")}}},zs={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("div",{staticClass:"date-year-quarter-wrapper"},[a("div",{staticClass:"date-header-wrapper"},[a("i",{staticClass:"el-icon-d-arrow-left",on:{click:e.yearDown}}),e._v(" "),"quarter"===e.type?a("span",{on:{click:e.chooseType}},[e._v(e._s(e.year)+"年")]):a("span",[e._v(e._s(e.firstYear)+"年 - "+e._s(e.firstYear+9)+"年")]),e._v(" "),a("i",{class:{"el-icon-d-arrow-right":!0,disable:"quarter"===e.type?e.year>=e.disableYear:e.firstYear+10>e.disableYear},on:{click:e.yearUp}})]),e._v(" "),"quarter"===e.type?a("div",{staticClass:"date-quarter-wrapper"},e._l(4,function(t){return a("li",{key:t,class:{disable:e.year>=e.disableYear&&t>=e.disableQuarter},on:{click:function(a){return e.chooseQuarter(t)}}},[e._v("\n        第"+e._s(e.quarter[t])+"季度\n      ")])}),0):a("div",{staticClass:"date-year-wrapper"},e._l(10,function(t){return a("li",{key:t,class:{disable:e.firstYear+t-1>e.disableYear},on:{click:function(a){return e.chooseYear(e.firstYear+t-1)}}},[e._v("\n        "+e._s(e.firstYear+t-1)+"年\n      ")])}),0)]),e._v(" "),a("el-input",{attrs:{slot:"reference","prefix-icon":"el-icon-date",placeholder:"请选择季度"},slot:"reference",model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1)},staticRenderFns:[]};var Hs=a("VU/8")(Ps,zs,!1,function(e){a("LZaC")},null,null).exports,Ms={data:function(){return{vipLevel:on.vipLevel,sortRrders:["descending","ascending",null],activeTab:"0",list:[],jzbfList:[],loading:!1,pageIndex:1,pageCount:1,pageStart:0,pageTotal:1,pageLimit:20,tableHeight:null,tableHeightJzbf:null,filterQuery:{type:"0",vipType:"-1"},searchQuery:{userName:""},dialogRemarkVisible:!1,markForm:{remark:""},markLoading:!1,operateData:null,remarkLogVisible:!1,remarkLogTitle:"",remarkLog:[],warningLog:[],vipForm:{},vipVisible:!1}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},components:{DateYearQuarter:Hs},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-("0"===e.activeTab?e.$refs.elTable.$el.offsetTop:e.$refs.elTableJzbf.$el.offsetTop)-63})},search:function(){parseInt(this.activeTab)?this.searchQuery.userName?this.searchJzbf():this.getJzbfList():this.getList("search")},pageChange:function(){parseInt(this.activeTab)?this.getJzbfList():(this.pageStart=(this.pageIndex-1)*this.pageLimit,this.getList())},handleClickTabs:function(){parseInt(this.activeTab)?this.getJzbfList():this.getList(),this.setHeight()},getList:function(e,t){var a=this;if(!this.loading){this.loading=!0;var i={};fh(e)?(this.pageStart=(e-1)*this.pageLimit,i=this.searchQuery.userName?tn()({start:this.pageStart,limit:this.pageLimit},this.searchQuery):tn()({start:this.pageStart,limit:this.pageLimit},this.sortQuery,this.filterQuery)):"search"===e&&this.searchQuery.userName?(this.pageStart=0,i=tn()({start:this.pageStart,limit:this.pageLimit},this.searchQuery)):(this.searchQuery.userName="",this.pageStart=0,i=tn()({start:this.pageStart,limit:this.pageLimit},this.sortQuery,this.filterQuery)),this.$service(xe.list,{method:"post",data:i}).then(function(i){a.loading=!1,200===i.code?(a.list=i.data.data||[],a.pageTotal=i.data.total||1,t||(a.$refs.elTable.bodyWrapper.scrollTop=0,a.$refs.elTable.bodyWrapper.scrollLeft=0),"1"!==a.filterQuery.type&&"search"!==e||a.$refs.elTable.clearSort()):a.$message.error(i.code+":"+i.message)},function(e){e&&(a.loading=!1,a.$message.error(qo()(e)))})}},getJzbfList:function(e,t){var a=this;this.loading||(this.loading=!0,this.pageIndex=e||1,this.searchQuery.userName="",this.$service(ke.list,{method:"post",data:tn()(this.searchQuery.userName?this.searchQuery:{},{pageIndex:this.pageIndex,pageSize:this.pageLimit})}).then(function(e){a.loading=!1,200===e.code?(a.jzbfList=e.data.records||[],a.pageCount=e.data.page?e.data.page.pageCount:1,t||(a.$refs.elTableJzbf.bodyWrapper.scrollTop=0,a.$refs.elTableJzbf.bodyWrapper.scrollLeft=0)):a.$message.error(e.code+":"+e.message)},function(e){e&&(a.loading=!1,a.$message.error(qo()(e)))}))},searchJzbf:function(){var e=this;this.loading||(this.loading=!0,this.$service(ke.search,{params:{query:this.searchQuery.userName}}).then(function(t){e.loading=!1,200===t.code&&t.data?(e.jzbfList=[],t.data.account&&e.jzbfList.push(t.data),e.pageCount=1):e.$message.error(t.code+":"+t.message)},function(t){t&&(e.loading=!1,e.$message.error(qo()(t)))}))},sortList:function(e){this.sortQuery={},this.sortQuery[e.prop]="ascending"===e.order?1:2,"credit"===e.prop&&(this.sortQuery.creditNcoinOrderBy="ascending"===e.order?1:2),"nCoin"===e.prop&&(this.sortQuery.creditNcoinOrderBy="ascending"===e.order?3:4),"totalOrderCredit"===e.prop&&(this.sortQuery.tcmOrderBy="ascending"===e.order?1:2),"totalOrderNCoin"===e.prop&&(this.sortQuery.tcmOrderBy="ascending"===e.order?3:4),"tcmNetPrice"===e.prop&&(this.sortQuery.tcmOrderBy="ascending"===e.order?7:8),"tcmOrderPrice"===e.prop&&(this.sortQuery.tcmOrderBy="ascending"===e.order?5:6),this.getList()},exportUser:function(){window.open(window.location.origin+xe.exportWarning)},exportVip:function(){if(this.vipForm.date&&this.vipForm.date.split("-")){var e=this.vipForm.date.split("-");window.open(window.location.origin+xe.exportVip+"?year="+e[0]+"&quarter="+e[1]),this.vipVisible=!1}else this.$message.warning("请选择导出日期")},currentOperate:function(e){this.operateData=e,this.dialogRemarkVisible=!0},submitMarkForm:function(e){var t=this;this.$refs[e].validate(function(e){e&&t.addRrmark()})},addRrmark:function(){var e=this;this.markLoading=!0,this.$service(xe.addRemark,{method:"post",data:{content:this.markForm.remark,userId:this.operateData.userId}}).then(function(t){e.markLoading=!1,200===t.code?(e.dialogRemarkVisible=!1,e.getList(Math.floor(e.pageStart/e.pageLimit)+1,!0),e.$message.success("操作成功")):e.$message.error(t.code+":"+t.message)},function(t){t&&(e.markLoading=!1,e.$message.error(qo()(t)))})},confirm:function(e,t){var a=this,i=void 0;"freeze"===t?i=2===parseInt(e.status)?"解冻":"冻结":"clear"===t&&(i="清除"),this.$confirm("确定"+i+" "+e.account+" 的账户红豆余额?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.submitFreeOrClear(e,t)})},submitFreeOrClear:function(e,t){var a=this,i=void 0;"freeze"===t?i=2===parseInt(e.status)?xe.unfreezeUser:xe.freezeUser:"clear"===t&&(i=xe.flushBalance),this.$service(i,{method:"post",data:{userId:e.userId}}).then(function(e){200===e.code?(a.getList(Math.floor(a.pageStart/a.pageLimit)+1,!0),a.$message.success("操作成功!")):a.$message.error(e.code+":"+e.message)},function(e){e&&a.$message.error(qo()(e))})},warningPop:function(e){var t=this;this.warningLog=[],this.$service(xe.userWarningLog,{method:"get",params:{userId:e}}).then(function(e){200===e.code?t.warningLog=e.data:t.$message.error(e.code+":"+e.message)},function(e){e&&t.$message.error(qo()(e))})},lookRemark:function(e){var t=this;this.remarkLog=[],this.remarkLogVisible=!0,this.remarkLogTitle="备注详情 (用户ID："+e.userId+")",this.$service(xe.Remark,{method:"get",params:{userId:e.userId}}).then(function(e){200===e.code?t.remarkLog=e.data:t.$message.error(e.code+":"+e.message)},function(e){e&&t.$message.error(qo()(e))})},unbindPhone:function(e){var t=this;this.$confirm("确定解绑尾号为"+e.phone.slice(-4)+"的手机号？",{confirmButtonText:"确定",cancelButtonText:"取消",center:!0}).then(function(){t.$service(xe.erasingPhone,{params:{userId:e.userId}}).then(function(a){e.loading=!1,200===a.code?(e.unbindPop=!1,t.getList(Math.floor(t.pageStart/t.pageLimit)+1,!0),t.$message.success("解绑成功")):t.$message.error(a.code+":"+a.message)},function(a){a&&(e.loading=!1,t.$message.error(qo()(a)))})})}},watch:{windowHeight:function(){this.setHeight()}}},Fs={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-list"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-input",{staticStyle:{width:"246px"},attrs:{placeholder:"账号/昵称/手机号/用户ID/设备号","prefix-icon":"el-icon-search",clearable:"",size:"mini"},on:{clear:e.search},model:{value:e.searchQuery.userName,callback:function(t){e.$set(e.searchQuery,"userName",t)},expression:"searchQuery.userName"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.search}},[e._v("搜索")])],1)]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"红彩",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"精准比分",name:"1"}})],1),e._v(" "),parseInt(e.activeTab)?e._e():a("el-form",{attrs:{inline:!0,model:e.filterQuery,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"预警状态"}},[a("el-select",{staticStyle:{width:"105px"},on:{change:function(t){return e.getList()}},model:{value:e.filterQuery.type,callback:function(t){e.$set(e.filterQuery,"type",t)},expression:"filterQuery.type"}},[a("el-option",{attrs:{label:"全部",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"预警中",value:"1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"当季会员等级"}},[a("el-select",{staticStyle:{width:"105px"},on:{change:function(t){return e.getList()}},model:{value:e.filterQuery.vipType,callback:function(t){e.$set(e.filterQuery,"vipType",t)},expression:"filterQuery.vipType"}},[a("el-option",{attrs:{label:"全部",value:"-1"}}),e._v(" "),e._l(e.vipLevel,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id+""}})})],2)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.exportUser}},[e._v("预警用户导出")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.vipVisible=!0}}},[e._v("会员用户导出")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"},{name:"show",rawName:"v-show",value:"0"===e.activeTab,expression:"activeTab==='0'"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight},on:{"sort-change":e.sortList}},[a("el-table-column",{attrs:{prop:"userId",fixed:"",label:"用户ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"account",label:"用户账号","min-width":200},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"UserDetail",params:{id:t.row.userId,source:0}}}},[e._v(e._s(t.row.account))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"earlyWarning",label:"状态",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.earlyWarning?"预警中":"正常")+"\n        "),t.row.earlyWarning?a("el-popover",{attrs:{placement:"top-start",title:"",trigger:"hover"}},[a("el-table",{attrs:{data:e.warningLog}},[a("el-table-column",{attrs:{width:"60",property:"warningId",label:"ID"}}),e._v(" "),a("el-table-column",{attrs:{width:"100",property:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.status?"预警中":"取消预警")+"\n              ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{property:"content",label:"内容",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.content||"-")+"\n              ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{property:"warningDay",label:"预警天数",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.warningDay?t.row.warningDay+"天":"-")+"\n              ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{property:"warningTime",label:"预警时间",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.warningTime||"-")+"\n              ")]}}],null,!0)})],1),e._v(" "),a("i",{staticClass:"el-icon-warning",staticStyle:{color:"#FFD306"},attrs:{slot:"reference"},on:{mouseenter:function(a){return e.warningPop(t.row.userId)}},slot:"reference"})],1):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"昵称","min-width":150}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceIdList",label:"查看设备号",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.deviceIdList&&t.row.deviceIdList.length?a("el-popover",{attrs:{placement:"right",width:"370",trigger:"click"}},[a("div",{staticClass:"device-content"},e._l(t.row.deviceIdList,function(t,i){return a("p",{key:i},[e._v(e._s(t))])}),0),e._v(" "),a("el-button",{attrs:{slot:"reference",size:"small",type:"text"},slot:"reference"},[e._v("查看设备号")])],1):a("p",[e._v("-")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"couponStatus",label:"是否领取新人礼包",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.couponStatus?"是":"否")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"firstDate",label:"首次消费时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.firstDate||"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"firstTime",label:"首次消费时长",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.firstTime||"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"lastTime",label:"最后消费时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.lastTime||"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"orderByRechargeCount",sortable:"0"===e.filterQuery.type&&!e.searchQuery.userName&&"custom","sort-orders":e.sortRrders,label:"充值总额(元)",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.rechargeCount||"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"orderByCostCount",sortable:"0"===e.filterQuery.type&&!e.searchQuery.userName&&"custom","sort-orders":e.sortRrders,label:"消费总额(豆)",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.costCount||"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"orderByRedCurrency",sortable:"0"===e.filterQuery.type&&!e.searchQuery.userName&&"custom","sort-orders":e.sortRrders,label:"账户余额(豆)",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.redCurrency||"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"orderByRechargeNum",sortable:"0"===e.filterQuery.type&&!e.filterQuery.vipType&&!e.searchQuery.userName&&"custom","sort-orders":e.sortRrders,label:"充值次数",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.rechargeNum||"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"orderByCostNum",sortable:"0"===e.filterQuery.type&&!e.filterQuery.vipType&&!e.searchQuery.userName&&"custom","sort-orders":e.sortRrders,label:"消费次数",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.costNum||"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"nCoin",sortable:"0"===e.filterQuery.type&&!e.filterQuery.vipType&&!e.searchQuery.userName&&"custom","sort-orders":e.sortRrders,label:"剩余N币",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.nCoin||"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"level",label:"当季会员等级",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("vipLevel2CH")(t.row.level))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"levelPre",label:"上季会员等级",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("vipLevel2CH")(t.row.levelPre))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"vipStatus",label:"是否VIP",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dayAvgNum",label:"日均消费次数",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.dayAvgNum||"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"weekAvgNum",label:"周均消费次数",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.weekAvgNum||"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"dayAvgCount",label:"日均消费总额",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.dayAvgCount||"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"weekAvgCount",label:"周均消费总额",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.weekAvgCount||"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.currentOperate(t.row)}}},[e._v("增加")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.lookRemark(t.row)}}},[e._v("查看")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"余额",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[2===parseInt(t.row.status)?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.confirm(t.row,"freeze")}}},[e._v("解冻")]):e._e(),e._v(" "),2!==parseInt(t.row.status)?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.confirm(t.row,"freeze")}}},[e._v("冻结")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.confirm(t.row,"clear")}}},[e._v("清除")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.phone?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.unbindPhone(t.row)}}},[e._v("解绑手机")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:"0"===e.activeTab,expression:"activeTab==='0'"}],staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":Math.floor(e.pageStart/e.pageLimit)+1,total:e.pageTotal,"page-size":e.pageLimit},on:{"current-change":e.getList,"update:currentPage":function(t){e.$set(Math,"floor(pageStart/pageLimit) + 1",t)},"update:current-page":function(t){e.$set(Math,"floor(pageStart/pageLimit) + 1",t)}}}),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"},{name:"show",rawName:"v-show",value:"1"===e.activeTab,expression:"activeTab==='1'"}],ref:"elTableJzbf",attrs:{data:e.jzbfList,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"userId",fixed:"",label:"用户ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"account",fixed:"",label:"用户账号","min-width":180}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(2==t.row.status?"冻结":1==t.row.status?"删除":"正常")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"昵称","min-width":150}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceIdList",label:"查看设备号",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.deviceIdList&&t.row.deviceIdList.length?a("el-popover",{attrs:{placement:"right",width:"370",trigger:"click"}},[a("div",{staticClass:"device-content"},e._l(t.row.deviceIdList,function(t,i){return a("p",{key:i},[e._v(e._s(t))])}),0),e._v(" "),a("el-button",{attrs:{slot:"reference",size:"small",type:"text"},slot:"reference"},[e._v("查看设备号")])],1):a("p",[e._v("-")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"couponStatus",label:"是否领取新人礼包",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.couponStatus?"是":"否")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"follow",label:"关注专家",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.follow||"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"birthday",label:"生日",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.birthday,"yyyy-MM-dd"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"gender",label:"性别",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s({0:"男",1:"女",2:"未知"}[t.row.gender])+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"redCurrency",label:"金币",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.redCurrency||"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"vipStatus",label:"是否VIP",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"device",label:"设备",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("payTerminal2CH")([t.row.device,1]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"IP",width:"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lastTime",label:"最后登录时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.lastLoginTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"lastTime",label:"创建时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])})],1),e._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:"1"===e.activeTab,expression:"activeTab==='1'"}],staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getJzbfList,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}}),e._v(" "),a("el-dialog",{attrs:{title:"维护处理","close-on-click-modal":!1,visible:e.dialogRemarkVisible,width:"500px"},on:{"update:visible":function(t){e.dialogRemarkVisible=t},close:function(t){e.markForm.remark=""}}},[a("el-form",{ref:"markForm",attrs:{"status-icon":"",size:"small",model:e.markForm,disabled:e.markLoading,"label-width":"50px"}},[a("el-form-item",{attrs:{label:"备注",prop:"remark",rules:[{required:!0,message:"请输入备注",trigger:"blur"}]}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.markForm.remark,callback:function(t){e.$set(e.markForm,"remark",t)},expression:"markForm.remark"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogRemarkVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.markLoading,size:"small"},on:{click:function(t){return e.submitMarkForm("markForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.remarkLogTitle,width:"600px",visible:e.remarkLogVisible},on:{"update:visible":function(t){e.remarkLogVisible=t}}},[a("el-table",{attrs:{data:e.remarkLog}},[a("el-table-column",{attrs:{property:"adminName",label:"姓名",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{property:"content",label:"内容",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{property:"createTime",width:"150",label:"时间"}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"会员用户导出",center:"",width:"360px",visible:e.vipVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.vipVisible=t}}},[a("el-form",{attrs:{model:e.vipForm,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:"选择导出季度",prop:"status"}},[a("date-year-quarter",{model:{value:e.vipForm.date,callback:function(t){e.$set(e.vipForm,"date",t)},expression:"vipForm.date"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.vipVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",loading:e.exportLoading},on:{click:function(t){return e.exportVip()}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]};var Ns=a("VU/8")(Ms,Fs,!1,function(e){a("arY2")},null,null).exports,Es={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"table-scroll"},[this._t("default")],2)},staticRenderFns:[]};var Rs=a("VU/8")({name:"tableScroll"},Es,!1,function(e){a("x9dA")},null,null).exports,Os={name:"tabRecharge",props:{visible:{type:"Boolean",default:!1},userId:{type:"Number"}},data:function(){return{rechargeOrderStatus:on.rechargeOrderStatus,payTerminal:on.payTerminal[0],loading:!1,pageIndex:1,pageSize:20,pageCount:1,list:[],filter:{date:[],orderId:"",orderStatus:"",orderPrice:null,payTerminal:null},filterQuery:{},price:[],priceLoading:!1}},mounted:function(){this.visible&&this.getList()},methods:{getList:function(e){var t=this;this.loading=!0,this.pageIndex=e||1;var a=tn()({userId:this.userId,pageIndex:this.pageIndex,pageSize:this.pageSize},this.filterQuery);this.$service($e.rechargeOrderList,{method:"post",data:a}).then(function(e){t.loading=!1,200===e.code&&e.data?(t.list=e.data.records||[],t.pageCount=e.data.page.pageCount||1):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))})},filterList:function(){var e=_h(tn()({},this.filter));this.filter.date&&this.filter.date.length?(e.startTime=e.date[0]+" 00:00:00",e.endTime=e.date[1]+" 23:59:59",delete e.date):delete e.date,this.filterQuery=e,this.getList(1)},getPrice:function(e){var t=this;this.priceLoading||(this.price=[],this.filter.payTerminal&&(this.priceLoading=!0,this.$service(tt[0].list,{urlParams:{payTerminalId:e}}).then(function(e){t.priceLoading=!1,200===e.code&&e.data?t.price=e.data:t.$message.error("获取价格失败")},function(e){e&&(t.priceLoading=!1,t.$message.error("获取价格失败"))})))}},watch:{visible:function(e){e&&0===this.list.length&&this.getList()},userId:function(e){this.filter={date:[],orderId:"",orderStatus:"",orderPrice:null,payTerminal:null},this.filterQuery={},this.price={},this.list=[],this.visible&&this.getList()}}},As={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"tab-recharge"},[a("el-form",{attrs:{inline:!0,model:e.filter,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"订单ID"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入订单ID"},model:{value:e.filter.orderId,callback:function(t){e.$set(e.filter,"orderId",t)},expression:"filter.orderId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{clearable:""},model:{value:e.filter.orderStatus,callback:function(t){e.$set(e.filter,"orderStatus",t)},expression:"filter.orderStatus"}},e._l(e.rechargeOrderStatus,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"终端"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{clearable:"",disabled:e.priceLoading},on:{change:e.getPrice},model:{value:e.filter.payTerminal,callback:function(t){e.$set(e.filter,"payTerminal",t)},expression:"filter.payTerminal"}},e._l(e.payTerminal,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.filter.payTerminal,expression:"filter.payTerminal"}],attrs:{label:"价位"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{clearable:"",loading:e.priceLoading},model:{value:e.filter.orderPrice,callback:function(t){e.$set(e.filter,"orderPrice",t)},expression:"filter.orderPrice"}},e._l(e.price,function(e){return a("el-option",{key:e.goodsId,attrs:{label:e.name,value:e.redCurrency}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"时间"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange",editable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.filter.date,callback:function(t){e.$set(e.filter,"date",t)},expression:"filter.date"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.filterList}},[e._v("筛选")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,stripe:""}},[a("el-table-column",{attrs:{prop:"orderId",label:"订单ID",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"OrderRechargeDetail",params:{id:t.row.orderId,source:0}}}},[e._v(e._s(t.row.orderId))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"orderStatus",label:"订单状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("rechargeOrder2CH")(t.row.orderStatus))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"订单创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"successTime",label:"订单成功时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.successTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"buyCount",label:"购买数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"红豆价格/订单价格"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.redCurrency||"-")+" / "+e._s(t.row.orderPrice||"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"payTerminal",label:"支付终端"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("payTerminal2CH")([t.row.payTerminal,0])))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"channelName",label:"支付通道"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.channelName||"-"))])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}})],1)},staticRenderFns:[]},Us={name:"tabConsumer",props:{visible:{type:"Boolean",default:!1},userId:{type:"Number"}},data:function(){return{goodsType:on.goodsType[0],tcmOrderStatus:on.tcmOrderStatus,productOrderStatus:on.productOrderStatus,payTerminal:on.payTerminal[0],lotteryList:[],lotteryObj:{},list:[],pageIndex:1,pageCount:1,pageSize:20,loading:!1,filter:{expertId:null,payTerminal:null,orderStatus:null,orderId:null,price:null,goodsTypeId:null,category:"",date:[]},filterQuery:{},price:{},priceSum:[]}},mounted:function(){this.visible&&(this.getList(),this.getLottery())},filters:{quizOrderStatus2CH:function(e){return{1:"冻结",2:"结算",3:"退单"}[e]||"-"}},methods:{quizType2CH:function(e){return{1:"主题竞猜",2:"单选项赛事",3:"双选项赛事"}[e]||"-"},getLottery:function(){var e=this;this.lotteryList.length>0||this.$service(h).then(function(t){200===t.code&&(e.lotteryList=t.data.sort(hh("cId")),t.data.forEach(function(t){e.lotteryObj[t.cId]=t.lotteryName}))})},getList:function(e){var t=this;this.loading=!0,this.pageIndex=e||1;var a=tn()({userId:this.userId,pageIndex:this.pageIndex,pageSize:this.pageSize},this.filterQuery);this.$service($e.consumerThreadOrderList,{method:"post",data:a}).then(function(e){t.loading=!1,200===e.code&&e.data?(t.list=e.data.records||[],t.pageCount=e.data.page.pageCount||1):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))})},filterList:function(){var e=_h(tn()({},this.filter));this.filter.date&&this.filter.date.length?(e.startTime=e.date[0]+" 00:00:00",e.endTime=e.date[1]+" 23:59:59",delete e.date):delete e.date,delete e.selectType,this.filterQuery=e,this.getList(),this.getSum()},getSum:function(){var e=this;this.$service($e.getConsumerThreadOrderPriceSum,{method:"post",data:tn()({},this.filterQuery,{userId:this.userId,pageIndex:1,pageSize:this.pageSize})}).then(function(t){200===t.code&&t.data?e.priceSum=t.data||[]:e.$message.error(t.code+":"+t.message)},function(t){t&&e.$message.error(qo()(t))})},selectTypeChange:function(e){2!==parseInt(e)&&(this.filter.goodsTypeId=null,this.filter.price=null),this.filter.orderId=null,this.filter.expertId=null},getPrice:function(){var e=this,t=this.filter.goodsTypeId;if(this.price=[],t&&100!==parseInt(t)&&101!==parseInt(t))if(1===t){if(this.priceLoading)return;this.priceLoading=!0,this.$service(at[0].list).then(function(t){e.priceLoading=!1,200===t.code&&t.data?t.data.forEach(function(t){e.price.push(t.threadPrice)}):e.$message.error("获取价格失败")},function(t){t&&(e.priceLoading=!1,e.$message.error("获取价格失败"))})}else if(5===t);else{if(this.priceLoading)return;this.priceLoading=!0,this.$service(it.list,{method:"get",params:{pageIndex:1,pageSize:100,typeId:t}}).then(function(t){e.priceLoading=!1,200===t.code&&t.data?t.data.records.forEach(function(t){e.price.push(t.price)}):e.$message.error("获取价格失败")},function(t){t&&(e.priceLoading=!1,e.$message.error("获取价格失败"))})}},refundVip:function(e){var t=this;e.loading||this.$confirm("确定为用户退款VIP服务?",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){t.$set(e,"loading",!0),t.$service(y,{params:{orderId:e.orderId}}).then(function(e){200===e.code?t.$message.success("用户大会员退款成功"):t.$message.error(e.message)}).catch(function(e){e&&t.$message.error(qo()(e))}).finally(function(){e.loading=!1})})}},watch:{visible:function(e){e&&0===this.list.length&&(this.getList(),this.getLottery())},userId:function(e){this.filter={expertId:null,payTerminal:null,orderStatus:null,orderId:null,price:null,goodsTypeId:null,category:"",date:[]},this.filterQuery={},this.price={},this.priceSum=[],this.list=[],this.visible&&this.getList()}}},Vs={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"tab-consumer"},[a("el-form",{attrs:{inline:!0,model:e.filter,size:"mini",disabled:e.loading}},[a("el-form-item",[a("el-select",{staticStyle:{width:"105px"},attrs:{clearable:""},on:{change:e.selectTypeChange},model:{value:e.filter.selectType,callback:function(t){e.$set(e.filter,"selectType",t)},expression:"filter.selectType"}},[a("el-option",{attrs:{value:"1",label:"专家ID"}}),e._v(" "),a("el-option",{attrs:{value:"2",label:"商品类型"}}),e._v(" "),a("el-option",{attrs:{value:"3",label:"订单ID"}})],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3===parseInt(e.filter.selectType),expression:"parseInt(filter.selectType)===3"}]},[a("el-input",{attrs:{clearable:"",placeholder:"请输入订单ID"},model:{value:e.filter.orderId,callback:function(t){e.$set(e.filter,"orderId",t)},expression:"filter.orderId"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1===parseInt(e.filter.selectType),expression:"parseInt(filter.selectType)===1"}]},[a("el-input",{attrs:{clearable:"",placeholder:"请输入专家ID"},model:{value:e.filter.expertId,callback:function(t){e.$set(e.filter,"expertId",t)},expression:"filter.expertId"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2===parseInt(e.filter.selectType),expression:"parseInt(filter.selectType)===2"}]},[a("el-select",{staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"请选择商品类型",disabled:e.priceLoading},on:{change:e.getPrice},model:{value:e.filter.goodsTypeId,callback:function(t){e.$set(e.filter,"goodsTypeId",t)},expression:"filter.goodsTypeId"}},[e._l(e.goodsType,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})}),e._v(" "),a("el-option",{key:"100",attrs:{label:"竞猜",value:"100"}}),e._v(" "),a("el-option",{key:"101",attrs:{label:"拉新竞猜",value:"101"}})],2)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2===parseInt(e.filter.selectType)&&1===e.filter.goodsTypeId,expression:"parseInt(filter.selectType)===2&&filter.goodsTypeId===1"}],attrs:{label:"彩种"}},[a("el-select",{staticStyle:{width:"130px"},model:{value:e.filter.category,callback:function(t){e.$set(e.filter,"category",t)},expression:"filter.category"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.lotteryList,function(e){return a("el-option",{key:e.cId,attrs:{label:e.cName,value:e.cId}})})],2)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2===parseInt(e.filter.selectType)&&100!==e.filter.goodsTypeId&&101!==e.filter.goodsTypeId,expression:"parseInt(filter.selectType)===2&&filter.goodsTypeId!==100&&filter.goodsTypeId!==101"}],attrs:{label:"价位"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{clearable:"",loading:e.priceLoading},model:{value:e.filter.price,callback:function(t){e.$set(e.filter,"price",t)},expression:"filter.price"}},e._l(e.price,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{directives:[{name:"show",rawName:"v-show",value:!("2"===e.filter.selectType&&("100"===e.filter.goodsTypeId||"101"===e.filter.goodsTypeId)),expression:"!(filter.selectType==='2'&&(filter.goodsTypeId==='100'||filter.goodsTypeId==='101'))"}],staticStyle:{width:"130px"},attrs:{clearable:""},model:{value:e.filter.orderStatus,callback:function(t){e.$set(e.filter,"orderStatus",t)},expression:"filter.orderStatus"}},e._l(e.productOrderStatus,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),a("el-select",{directives:[{name:"show",rawName:"v-show",value:"2"===e.filter.selectType&&"101"===e.filter.goodsTypeId,expression:"filter.selectType==='2'&&filter.goodsTypeId==='101'"}],staticStyle:{width:"130px"},attrs:{clearable:""},model:{value:e.filter.quizOrderStatus,callback:function(t){e.$set(e.filter,"quizOrderStatus",t)},expression:"filter.quizOrderStatus"}},[a("el-option",{key:"1",attrs:{label:"冻结",value:"1"}}),e._v(" "),a("el-option",{key:"2",attrs:{label:"结算",value:"2"}}),e._v(" "),a("el-option",{key:"3",attrs:{label:"退款",value:"3"}})],1),e._v(" "),a("el-select",{directives:[{name:"show",rawName:"v-show",value:"2"===e.filter.selectType&&"100"===e.filter.goodsTypeId,expression:"filter.selectType==='2'&&filter.goodsTypeId==='100'"}],staticStyle:{width:"105px"},attrs:{clearable:""},model:{value:e.filter.tcmOrderStatus,callback:function(t){e.$set(e.filter,"tcmOrderStatus",t)},expression:"filter.tcmOrderStatus"}},e._l(e.tcmOrderStatus,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"终端"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{clearable:""},model:{value:e.filter.payTerminal,callback:function(t){e.$set(e.filter,"payTerminal",t)},expression:"filter.payTerminal"}},e._l(e.payTerminal,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"时间"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange",editable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.filter.date,callback:function(t){e.$set(e.filter,"date",t)},expression:"filter.date"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.filterList}},[e._v("筛选")])],1),e._v(" "),e.priceSum.length?a("el-form-item",[e._v("\n      筛选后订单总额:"),e._l(e.priceSum,function(t,i){return a("span",{key:i},[e._v(e._s(t.orderPrice)+" "+e._s(1===t.orderType?"红豆":"元"))])})],2):e._e()],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.list,stripe:""}},[a("el-table-column",{attrs:{prop:"orderId",label:"订单ID",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.list.length&&e.list[0].quizOrderId?a("router-link",{attrs:{to:{name:"OrderQuizOrderDetail",params:{id:t.row.orderId}}}},[e._v(e._s(t.row.orderId))]):e._e(),e._v(" "),e.list.length&&e.list[0].tcmSelectionId?a("router-link",{attrs:{to:{name:"OrderTcmOrderDetail",params:{id:t.row.orderId}}}},[e._v(e._s(t.row.orderId))]):e._e(),e._v(" "),!e.list.length||e.list[0].tcmSelectionId||e.list[0].quizOrderId?e._e():a("router-link",{attrs:{to:{name:"OrderProductDetail",params:{jzbf:0,id:t.row.orderId,appId:0,type:1===t.row.goodsTypeId&&3===t.row.orderType||5===t.row.goodsTypeId?1:0}}}},[e._v("\n          "+e._s(t.row.orderId)+"\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"orderStatus",label:"订单状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.list.length&&e.list[0].tcmSelectionId?a("span",[e._v(e._s(e._f("tcmOrder2CH")(t.row.orderStatus)))]):e._e(),e._v(" "),e.list.length&&e.list[0].quizOrderId?a("span",[e._v(e._s(e._f("quizOrderStatus2CH")(t.row.orderStatus)))]):e._e(),e._v(" "),!e.list.length||e.list[0].tcmSelectionId||e.list[0].quizOrderId?e._e():a("span",[e._v(e._s(e._f("productOrderStatus2CH")(t.row.orderStatus)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"订单冻结时间",width:"110","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.frozenTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"successTime",label:"订单成功时间",width:"110","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.successTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"80",label:e.list.length&&e.list[0].tcmSelectionId?"赛事ID":"商品ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.list.length&&e.list[0].tcmSelectionId?t.row.tcmEventId:t.row.goodsId)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"lotteryCategoryId",label:"彩种",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.lotteryObj[t.row.lotteryCategoryId]||"")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.list.length&&e.list[0].quizOrderId?e.quizType2CH(e.item.goodsTypeId):e.list[0].tcmSelectionId?"竞猜":t.row.goodsType)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsName",label:"商品名称","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"expertId",label:"专家ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderPrice",label:"订单价格"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payTerminal",label:"支付终端"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("payTerminal2CH")([t.row.payTerminal,0])))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"120",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[13===t.row.goodsTypeId&&3===t.row.orderStatus?a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.refundVip(t.row)}}},[e._v("大会员退款")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}})],1)},staticRenderFns:[]},qs={name:"tabExpert",props:{visible:{type:"Boolean",default:!1},userId:{type:"Number"}},data:function(){return{loading:!1,pageIndex:1,pageSize:20,pageCount:1,list:[]}},mounted:function(){this.visible&&this.getList()},methods:{getList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loading=!0,this.$service($e.getPayExpertList,{method:"post",data:{userId:this.userId,offset:(t-1)*this.pageSize,limit:this.pageSize}}).then(function(a){e.loading=!1,200===a.code&&a.data?(e.list=a.data.data||[],e.pageIndex=t,e.pageCount=a.data.total?Math.ceil(a.data.total/e.pageSize):1):e.$message.error(a.code+":"+a.message)},function(t){t&&(e.loading=!1,e.$message.error(qo()(t)))})}},watch:{visible:function(e){e&&0===this.list.length&&this.getList()},userId:function(e){this.list=[],this.visible&&this.getList()}}},js={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"tab-expert"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"expertTable",staticStyle:{width:"100%"},attrs:{data:e.list,stripe:""}},[a("el-table-column",{attrs:{prop:"expertId",label:"专家ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderStatus",label:"专家昵称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"ExpertDetail",params:{id:t.row.expertId}}}},[e._v(e._s(t.row.expertName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"totalEarningRate",label:"专家总盈利率"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.totalEarningRate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"threadCount",label:"购买此专家文章数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"threadHit",label:"购买命中篇数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"favThread",label:"收藏此专家文章数"}})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}})],1)},staticRenderFns:[]},Qs={name:"tabThread",props:{visible:{type:"Boolean",default:!1},userId:{type:"Number"}},data:function(){return{loading:!1,pageIndex:1,pageSize:20,pageCount:1,list:[],info:null}},mounted:function(){this.visible&&(this.getList(),this.getCount())},methods:{getList:function(e){var t=this;this.loading=!0,this.pageIndex=e||1,this.$service($e.getThreadOrderList,{method:"get",params:{userId:this.userId,pageIndex:this.pageIndex,pageSize:this.pageSize}}).then(function(e){t.loading=!1,200===e.code&&e.data?(t.list=e.data.records||[],t.pageCount=e.data.page.pageCount||1):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))})},getCount:function(){var e=this;this.$service($e.getThreadOrderStatsInfo,{method:"get",params:{userId:this.userId}}).then(function(t){200===t.code&&t.data?e.info=t.data||{}:e.$message.error(t.code+":"+t.message)},function(t){t&&e.$message.error(qo()(t))})}},watch:{visible:function(e){e&&0===this.list.length&&(this.getList(),this.getCount())},userId:function(e){this.list=[],this.info={},this.visible&&(this.getList(),this.getCount())}}},Ws={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"tab-thread"},[e.info?a("div",[a("span",[e._v("购买文章数："+e._s(e.info.threadCount))]),e._v("；\n    "),a("span",[e._v("总盈利率： "+e._s(e._f("toPercent")(e.info.totalEarningRate)))]),e._v("；\n    "),a("span",[e._v("总命中率："+e._s(e._f("toPercent")(e.info.totalHitRate)))]),e._v("；\n    "),a("span",[e._v("红："+e._s(e.info.threadWinCount))]),e._v("；\n    "),a("span",[e._v("黑："+e._s(e.info.threadLoseCount))]),e._v("；\n    "),a("span",[e._v("近期连黑："+e._s(e.info.threadContinueLoseCount))]),e._v("；\n    "),a("span",[e._v("最高连黑："+e._s(e.info.threadMaxContinueLoseCount))])]):e._e(),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,stripe:""}},[a("el-table-column",{attrs:{prop:"threadId",label:"文章ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"文章标题"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"ArticleQuizDetail",params:{id:t.row.threadId}}}},[e._v(e._s(t.row.title))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"文章发布时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"专家昵称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"partOfAllRate",label:"专家近X场命中率"}}),e._v(" "),a("el-table-column",{attrs:{prop:"threadHitRateStr",label:"红/黑"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.threadHitRateStr?a("el-tag",{staticStyle:{color:"#fff"},attrs:{size:"mini",color:1===t.row.isWin?"#e62121":"#333"}},[e._v(e._s(t.row.threadHitRateStr))]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}})],1)},staticRenderFns:[]},Bs={name:"tabMatch",props:{visible:{type:"Boolean",default:!1},userId:{type:"Number"}},data:function(){return{loading:!1,pageIndex:1,pageSize:20,pageCount:1,list:[],info:null}},mounted:function(){this.visible&&(this.getList(),this.getCount())},methods:{getList:function(e){var t=this;this.loading=!0,this.pageIndex=e||1,this.$service($e.getMatchOrderList,{method:"get",params:{userId:this.userId,pageIndex:this.pageIndex,pageSize:this.pageSize}}).then(function(e){t.loading=!1,200===e.code&&e.data?(t.list=e.data.records||[],t.pageCount=e.data.page.pageCount||1):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))})},getCount:function(){var e=this;this.$service($e.getMatchOrderStatsInfo,{method:"get",params:{userId:this.userId}}).then(function(t){200===t.code&&t.data?e.info=t.data||{}:e.$message.error(t.code+":"+t.message)},function(t){t&&e.$message.error(qo()(t))})}},watch:{visible:function(e){e&&0===this.list.length&&(this.getList(),this.getCount())},userId:function(e){this.list=[],this.info={},this.visible&&(this.getList(),this.getCount())}}},Gs={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"tab-match"},[e.info?a("div",[a("span",[e._v("购买2篇相同赛事次数："+e._s(e.info.twoCount||"-"))]),e._v("；\n    "),a("span",[e._v("购买3篇以上相同赛事次数： "+e._s(e.info.overThreeCount||"-"))])]):e._e(),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,stripe:""}},[a("el-table-column",{attrs:{prop:"matchInfoId",label:"赛事ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"matchTitle",label:"比赛对阵"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"MatchDetail",params:{id:t.row.matchInfoId}}}},[e._v(e._s(t.row.matchTitle))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"matchTime",label:"开赛时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.matchTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"expert",label:"专家昵称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isTarget",label:"红/黑"},scopedSlots:e._u([{key:"default",fn:function(t){return[-1!==t.row.isTarget?a("el-tag",{staticStyle:{color:"#fff"},attrs:{size:"mini",color:1===t.row.isTarget?"#e62121":0===t.row.isTarget?"#333":"transparent"}},[e._v("  ")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}})],1)},staticRenderFns:[]},Ys={data:function(){return{fromRouter:null,currentRouter:null,activeTab:"0",userId:null,userInfo:null,birthdayEditor:!1,birthdayTemp:"",birthdayLoading:!1}},created:function(){var e=this;this.userId=this.$route.params.id,this.getuserInfo().then(function(t){e.userInfo=t.data})},components:{TableScroll:Rs,TabRecharge:a("VU/8")(Os,As,!1,null,null,null).exports,TabConsumer:a("VU/8")(Us,Vs,!1,null,null,null).exports,TabExpert:a("VU/8")(qs,js,!1,null,null,null).exports,TabThread:a("VU/8")(Qs,Ws,!1,null,null,null).exports,TabMatch:a("VU/8")(Bs,Gs,!1,null,null,null).exports},methods:{getuserInfo:function(){var e=this;return new Bo.a(function(t,a){e.$service($e.info,{urlParams:{userId:e.userId}}).then(function(a){200===a.code&&a.data?t(a):e.$message.error(a.code+":"+a.message)},function(t){t&&e.$message.error(qo()(t))})})},birthdayEditorClick:function(){var e=this;if(this.birthdayEditor)if(this.birthdayTemp){if(this.birthdayLoading)return;this.birthdayLoading=!0,this.$service($e.updateBirthday,{method:"post",data:{userId:this.userId,birthday:this.birthdayTemp}}).then(function(t){200===t.code?(e.$message.success("更新成功"),e.birthdayEditor=!1,e.userInfo.birthday=e.birthdayTemp,e.birthdayTemp=""):e.$message.error(t.code+":"+t.message),e.birthdayLoading=!1}).catch(function(t){t&&(e.birthdayLoading=!1,e.$message.error(qo()(t)))})}else this.$message.warning("请填写生日日期");else this.birthdayEditor=!0}},beforeRouteUpdate:function(e,t,a){var i=this;this.userId=e.params.id,this.getuserInfo().then(function(e){i.userInfo=e.data}),a()},beforeRouteEnter:function(e,t,a){a(function(a){a.fromRouter=t&&t.name?t:null,a.currentRouter=e})}},Xs={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-detail"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{patd:"/"}}},[e._v("首页")]),e._v(" "),e.fromRouter?a("el-breadcrumb-item",{attrs:{to:{path:e.fromRouter.fullPath}}},[e._v(e._s(e.fromRouter.meta.title))]):e._e(),e._v(" "),e.currentRouter?a("el-breadcrumb-item",[e._v(e._s(e.currentRouter.meta.title))]):e._e()],1)],1)]),e._v(" "),a("table-scroll",[e.userInfo?a("table",{staticClass:"detail-table",staticStyle:{"min-width":"660px"}},[a("colgroup",[a("col",{attrs:{width:"10%"}}),e._v(" "),a("col",{attrs:{width:"20%"}}),e._v(" "),a("col",{attrs:{width:"10%"}}),e._v(" "),a("col",{attrs:{width:"20%"}}),e._v(" "),a("col",{attrs:{width:"10%"}}),e._v(" "),a("col",{attrs:{width:"30%"}})]),e._v(" "),a("tr",[a("td",[e._v("账号")]),e._v(" "),a("td",[e._v(e._s(e.userInfo.account||"-"))]),e._v(" "),a("td",[e._v("昵称")]),e._v(" "),a("td",[e._v(e._s(e.userInfo.nickname||"-"))]),e._v(" "),a("td",[e._v("注册时间")]),e._v(" "),a("td",[e._v(e._s(e.userInfo.registerTime||"-"))])]),e._v(" "),a("tr",[a("td",[e._v("活动范围")]),e._v(" "),a("td",[e._v(e._s(e.userInfo.location||"-"))]),e._v(" "),a("td",[e._v("账号余额")]),e._v(" "),a("td",[e._v(e._s(e.userInfo.redCurrency||"-"))]),e._v(" "),a("td",[e._v("消费总额")]),e._v(" "),a("td",[e._v(e._s(e.userInfo.costCount||"-"))])]),e._v(" "),a("tr",[a("td",[e._v("首次消费日期")]),e._v(" "),a("td",[e._v(e._s(e.userInfo.firstDate||"-"))]),e._v(" "),a("td",[e._v("首次消费时长")]),e._v(" "),a("td",[e._v(e._s(e.userInfo.firstTime?e.userInfo.firstTime+"天":"-"))]),e._v(" "),a("td",[e._v("最后一次消费时间")]),e._v(" "),a("td",[e._v(e._s(e.userInfo.lastTime?e.userInfo.lastTime+"天前":"-"))])]),e._v(" "),a("tr",[a("td",[e._v("用户等级")]),e._v(" "),a("td",[e._v(e._s(e._f("vipLevel2CH")(e.userInfo.level)))]),e._v(" "),a("td",[e._v("是否VIP")]),e._v(" "),a("td",[e._v(e._s(e.userInfo.vipStatus||"否"))]),e._v(" "),a("td",[e._v("生日")]),e._v(" "),a("td",[!e.birthdayEditor&&e.userInfo.birthday?a("span",[e._v(e._s(e._f("dateFormat")([e.userInfo.birthday,"yyyy-MM-dd"])))]):e._e(),e._v(" "),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:e.birthdayEditor,expression:"birthdayEditor"}],staticStyle:{width:"130px"},attrs:{size:"mini",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.birthdayTemp,callback:function(t){e.birthdayTemp=t},expression:"birthdayTemp"}}),e._v(" "),e.userInfo.birthday?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.birthdayEditorClick}},[e._v(e._s(e.birthdayEditor?"确定":"修改"))]):e._e(),e._v(" "),e.birthdayEditor?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){e.birthdayEditor=!1}}},[e._v("取消")]):e._e()],1)])]):e._e()]),e._v(" "),a("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"充值订单 "+(e.userInfo?e.userInfo.rechargeListCount:""),name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"消费订单 "+(e.userInfo?e.userInfo.consumerListCount:""),name:"1"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"购买专家 "+(e.userInfo?e.userInfo.buyExpertListCount:""),name:"2"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"购买文章 "+(e.userInfo?e.userInfo.buyThreadListCount:""),name:"3"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"购买赛事 "+(e.userInfo?e.userInfo.buyMatchListCount:""),name:"4"}})],1),e._v(" "),a("tab-recharge",{attrs:{visible:"0"===e.activeTab,userId:e.userId}}),e._v(" "),a("tab-consumer",{attrs:{visible:"1"===e.activeTab,userId:e.userId}}),e._v(" "),a("tab-expert",{attrs:{visible:"2"===e.activeTab,userId:e.userId}}),e._v(" "),a("tab-thread",{attrs:{visible:"3"===e.activeTab,userId:e.userId}}),e._v(" "),a("tab-match",{attrs:{visible:"4"===e.activeTab,userId:e.userId}})],1)},staticRenderFns:[]},Ks=a("VU/8")(Ys,Xs,!1,null,null,null).exports,Js={data:function(){return{list:[],pageIndex:1,pageSize:20,pageCount:1,tableHeight:null,searchQuery:{query:""}}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},pageChange:function(){this.pageStart=(this.pageIndex-1)*this.pageLimit,this.getList()},getList:function(e){var t=this;if(!this.loading){this.loading=!0;var a={pageIndex:this.pageIndex,pageSize:this.pageSize};this.$service(Ce,{method:"post",data:tn()(a,this.searchQuery)}).then(function(e){t.loading=!1,200===e.code?(t.$refs.elTable.bodyWrapper.scrollTop=0,t.list=e.data.records||[],t.pageCount=e.data.page.pageCount,t.pageIndex=e.data.page.pageIndex):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))})}},bind:function(e,t){var a=this;this.$service(Se,{method:"post",data:{accountBindId:t.accountBindId,status:1===t.status?0:1}}).then(function(e){200===e.code?a.getList():a.$message.error(e.code+":"+e.message)},function(e){e&&a.$message.error(qo()(e))})}},watch:{windowHeight:function(){this.setHeight()}}},Zs={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-list"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-input",{staticStyle:{width:"auto"},attrs:{placeholder:"账号/手机号","prefix-icon":"el-icon-search",clearable:"",size:"small"},model:{value:e.searchQuery.query,callback:function(t){e.$set(e.searchQuery,"query",t)},expression:"searchQuery.query"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.getList()}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight},on:{"sort-change":e.sortList}},[a("el-table-column",{attrs:{prop:"mainAccount","min-width":"120",label:"新闻客户端账号"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"120",prop:"phoneAccount",label:"关联手机账号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",width:"150",label:"注册时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",width:"90",label:"是否绑定"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(0===t.row.status?"是":"否")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"left",width:"160"},model:{value:t.row.bindPop,callback:function(a){e.$set(t.row,"bindPop",a)},expression:"scope.row.bindPop"}},[a("p",[e._v(e._s(1===parseInt(t.row.status)?"确定关联账号绑定?":"确定解除账号绑定?"))]),e._v(" "),a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.bindPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.bind(a,t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:0===t.row.status?"primary":"",size:"small"},slot:"reference"},[e._v(e._s(0===t.row.status?"解除":"关联")+"账号绑定")])],1)]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","page-size":"pageSize","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":function(t){return e.pageChange()},"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}})],1)},staticRenderFns:[]},el=a("VU/8")(Js,Zs,!1,null,null,null).exports,tl={name:"OrderIphone",data:function(){return{list:[],pageIndex:1,pageSize:20,pageCount:1,tableHeight:null,activeTab:"0",loading:!1,orderLosingFrom:{0:"自动发现",1:"冻结",2:"人工录入"},orderLosingTypeId:{1:"红豆充值",2:"现金订阅"},statusDict:{1:"待确认",2:"线上确认成功",3:"冻结",4:"线下确认成功"},filterQuery:{orderFrom:"",status:""},pickerOptions0:{disabledDate:function(e){return e.getTime()>Date.now()}}}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageIndex;if(!this.loading){this.loading=!0;var a={pageIndex:t,pageSize:this.pageSize};this.$service(Me[this.activeTab].rechargeList,{method:"get",params:tn()({},a,this.filter)}).then(function(t){e.loading=!1,200===t.code?(e.$refs.elTable.bodyWrapper.scrollTop=0,e.list=t.data.records||[],e.pageCount=t.data.page.pageCount,e.pageIndex=t.data.page.pageIndex):(e.list=[],e.$message.error(t.code+":"+t.message))},function(t){t&&(e.list=[],e.loading=!1,e.$message.error(qo()(t)))})}},handleClickTabs:function(){this.$refs.filterForm.resetFields(),this.filter={},this.getList(1)},filterList:function(){this.filter=_h(tn()({},this.filterQuery)),this.getList(1)},confirm:function(e){var t=this,a=void 0;1===e.status&&(a=Me[this.activeTab].confirmLosingOrder),3===e.status&&(a=Me[this.activeTab].offlineConfirmOrder),this.$service(a,{method:"get",urlParams:{appleOrderId:e.appleOrderId}}).then(function(e){t.loading=!1,200===e.code?t.getList(1):t.$message.error(e.code+":"+e.message)},function(e){e&&t.$message.error(qo()(e))})}},watch:{windowHeight:function(){this.setHeight()}}},al={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"order-iphone-list"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1)]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"红彩",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"精准比分",name:"1"}})],1),e._v(" "),a("el-form",{ref:"filterForm",attrs:{inline:!0,model:e.filterQuery,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"掉单源",prop:"orderFrom"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{clearable:""},model:{value:e.filterQuery.orderFrom,callback:function(t){e.$set(e.filterQuery,"orderFrom",t)},expression:"filterQuery.orderFrom"}},[a("el-option",{attrs:{label:"自动发现",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"冻结",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"人工录入",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"处理状态",prop:"status"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{clearable:""},model:{value:e.filterQuery.status,callback:function(t){e.$set(e.filterQuery,"status",t)},expression:"filterQuery.status"}},[a("el-option",{attrs:{label:"待确认",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"线上确认成功",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"冻结",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"线下确认成功",value:"4"}})],1)],1),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.filterList()}}},[e._v("筛选")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight},on:{"sort-change":e.sortList}},[a("el-table-column",{attrs:{prop:"appleOrderId",label:"掉单ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tradeId",label:"交易ID","min-width":"170"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"掉单账号","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"用户ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"iapSign",label:"验签指纹","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderFrom",label:"掉单源",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.orderLosingFrom[t.row.orderFrom]||"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"orderTypeId",label:"订单类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.orderLosingTypeId[t.row.orderTypeId]||"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.updateTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"successTime",label:"处理成功时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.successTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"处理状态",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.statusDict[t.row.status]||"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[2===t.row.status||4===t.row.status?a("span",[e._v(e._s(t.row.loginName||"-"))]):e._e(),e._v(" "),1===t.row.status||3===t.row.status?a("el-popover",{attrs:{placement:"left",width:"260"},model:{value:t.row.bindPop,callback:function(a){e.$set(t.row,"bindPop",a)},expression:"scope.row.bindPop"}},[a("p",[e._v("交易ID："+e._s(t.row.tradeId))]),e._v(" "),a("p",[e._v("状态："+e._s(e.statusDict[t.row.status]||"-"))]),e._v(" "),a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.bindPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",size:"small"},on:{click:function(a){return e.confirm(t.row)}},slot:"reference"},[e._v(e._s(1===t.row.status?"线上确认":"线下确认"))])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",size:"small"},slot:"reference"},[e._v("\n            "+e._s(1===t.row.status?"线上确认":"线下确认")+"\n          ")])],1):e._e()]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","page-size":"pageSize","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}})],1)},staticRenderFns:[]},il=a("VU/8")(tl,al,!1,null,null,null).exports,rl={name:"OrderPaymentList",data:function(){return{list:[],pageIndex:1,pageSize:20,pageCount:1,tableHeight:null,activeTab:"0",loading:!1,rechargeOrderStatus:on.rechargeOrderStatus,payChannel:on.payChannel,orderType:on.orderType,filterQuery:{tradeStatus:"",payTerminal:"",channelId:"",orderTypeId:"",filterType:"",filterTypeName:"",date:[]},filter:{},pickerOptions0:{disabledDate:function(e){return e.getTime()>Date.now()}}}},computed:u()({},Object(sn.d)(["windowHeight"]),{payTerminal:function(){return on.payTerminal[this.activeTab]}}),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageIndex;if(!this.loading){this.loading=!0;var a={pageIndex:t,pageSize:this.pageSize};this.$service(Fe[this.activeTab].paymentList,{method:"post",data:tn()({},a,this.filter)}).then(function(t){e.loading=!1,200===t.code?(e.$refs.elTable.bodyWrapper.scrollTop=0,e.list=t.data.records||[],e.pageCount=t.data.page.pageCount,e.pageIndex=t.data.page.pageIndex):(e.list=[],e.$message.error(t.code+":"+t.message))},function(t){t&&(e.list=[],e.loading=!1,e.$message.error(qo()(t)))})}},handleClickTabs:function(){this.$refs.filterForm.resetFields(),this.filter={},this.getList(1)},filterList:function(){var e=_h(tn()({},this.filterQuery));e.filterTypeName?(e[e.filterType]=e.filterTypeName,delete e.filterTypeName,delete e.filterType):delete e.filterType,e.date&&e.date.length&&(e.startTime=e.date[0]+" 00:00:00",e.endTime=e.date[1]+" 23:59:59",delete e.date),this.filter=e,this.getList(1)},confirmFreeze:function(e){var t=this;this.$service(Fe[this.activeTab].freeze,{method:"get",params:{tradeId:e.tradeId}}).then(function(e){t.loading=!1,200===e.code?(t.getList(),t.$message.success("订单冻结成功")):(t.list=[],t.$message.error(e.code+":"+e.message))},function(e){e&&(t.list=[],t.loading=!1,t.$message.error(qo()(e)))})}},watch:{windowHeight:function(){this.setHeight()}}},ol={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"order-payment-list"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1)]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"红彩",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"精准比分",name:"1"}})],1),e._v(" "),a("el-form",{ref:"filterForm",attrs:{inline:!0,model:e.filterQuery,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"",prop:"filterType"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{clearable:""},on:{clear:function(t){e.filterQuery.filterTypeName=""}},model:{value:e.filterQuery.filterType,callback:function(t){e.$set(e.filterQuery,"filterType",t)},expression:"filterQuery.filterType"}},[a("el-option",{attrs:{label:"订单ID",value:"orderId"}}),e._v(" "),a("el-option",{attrs:{label:"用户通行证",value:"account"}}),e._v(" "),a("el-option",{attrs:{label:"交易ID",value:"tradeId"}}),e._v(" "),a("el-option",{attrs:{label:"渠道流水号",value:"exOrderId"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"filterTypeName"}},[a("el-input",{attrs:{placeholder:"请输入订单ID/用户通行证",disabled:!e.filterQuery.filterType},model:{value:e.filterQuery.filterTypeName,callback:function(t){e.$set(e.filterQuery,"filterTypeName",t)},expression:"filterQuery.filterTypeName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"tradeStatus"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{clearable:""},model:{value:e.filterQuery.tradeStatus,callback:function(t){e.$set(e.filterQuery,"tradeStatus",t)},expression:"filterQuery.tradeStatus"}},e._l(e.rechargeOrderStatus,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"终端",prop:"payTerminal"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{clearable:""},model:{value:e.filterQuery.payTerminal,callback:function(t){e.$set(e.filterQuery,"payTerminal",t)},expression:"filterQuery.payTerminal"}},e._l(e.payTerminal,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"渠道",prop:"channelId"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{clearable:""},model:{value:e.filterQuery.channelId,callback:function(t){e.$set(e.filterQuery,"channelId",t)},expression:"filterQuery.channelId"}},e._l(e.payChannel,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"orderTypeId"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{clearable:""},model:{value:e.filterQuery.orderTypeId,callback:function(t){e.$set(e.filterQuery,"orderTypeId",t)},expression:"filterQuery.orderTypeId"}},e._l(e.orderType,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"时间",prop:"date"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange",editable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions0,size:"small"},model:{value:e.filterQuery.date,callback:function(t){e.$set(e.filterQuery,"date",t)},expression:"filterQuery.date"}})],1),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.filterList()}}},[e._v("筛选")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight},on:{"sort-change":e.sortList}},[a("el-table-column",{attrs:{prop:"orderId",label:"订单ID","min-width":"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"OrderPaymentDetail",params:{id:t.row.tradeId,source:e.activeTab}}}},[e._v(e._s(t.row.orderId))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"tradeId",label:"交易ID","min-width":"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"OrderPaymentDetail",params:{id:t.row.tradeId,source:e.activeTab}}}},[e._v(e._s(t.row.tradeId))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"exOrderId",label:"渠道流水号","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.exOrderId||"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"tradeStatus",label:"支付状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("rechargeOrder2CH")(t.row.tradeStatus))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"支付创建时间",width:"155"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"successTime",label:"支付成功时间",width:"155"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.successTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"用户通行证","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payTerminal",label:"支付终端",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("payTerminal2CH")([t.row.payTerminal,e.activeTab]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"channelName",label:"支付渠道",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.channelName||"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[6==t.row.tradeStatus&&"IAP"==t.row.channelName?a("el-popover",{attrs:{placement:"left",width:"260"},model:{value:t.row.bindPop,callback:function(a){e.$set(t.row,"bindPop",a)},expression:"scope.row.bindPop"}},[a("p",[e._v("交易ID："+e._s(t.row.tradeId))]),e._v(" "),a("p",[e._v("支付状态："+e._s(e._f("rechargeOrder2CH")(t.row.tradeStatus)))]),e._v(" "),a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.bindPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.confirmFreeze(t.row)}}},[e._v("确认冻结")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",size:"mini"},slot:"reference"},[e._v("冻结")])],1):e._e()]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","page-size":"pageSize","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}})],1)},staticRenderFns:[]},nl=a("VU/8")(rl,ol,!1,null,null,null).exports,sl={name:"OrderPaymentDetail",data:function(){return{activeTab:"0",tradeDetail:null,tradeChangeList:[],loading:!1}},props:["id","source"],created:function(){this.renderDetail()},methods:{getChannelTradeDetail:function(e,t){var a=this;return new Bo.a(function(i,r){a.loading=!0;var o=void 0;o="getChannelTradeDetail"===t?{tradeId:e}:{orderId:e},a.$service(Ne[a.source][t],{method:"get",params:o}).then(function(e){a.loading=!1,200===e.code?i(e):(a.$message.error(e.code+":"+e.message),r(e.message))},function(e){e&&(a.loading=!1,a.$message.error(qo()(e)),r(qo()(e)))})})},renderDetail:function(){var e=this;this.getChannelTradeDetail(this.id,"getChannelTradeDetail").then(function(t){return e.tradeDetail=t.data,e.getChannelTradeDetail(e.tradeDetail.orderId,"getChannelTradeChangeList")}).then(function(t){e.tradeChangeList=t.data})}}},ll={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"order-payment-detail"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1)]),e._v(" "),a("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"支付详细信息",name:"0"}},[e.tradeDetail?a("table",{staticClass:"detail-table"},[a("colgroup",[a("col",{attrs:{width:"10%"}}),e._v(" "),a("col",{attrs:{width:"25%"}}),e._v(" "),a("col",{attrs:{width:"10%"}}),e._v(" "),a("col",{attrs:{width:"25%"}}),e._v(" "),a("col",{attrs:{width:"10%"}}),e._v(" "),a("col",{attrs:{width:"20%"}})]),e._v(" "),a("tr",[a("td",[e._v("交易ID")]),e._v(" "),a("td",[e._v(e._s(e.tradeDetail.tradeId))]),e._v(" "),a("td",[e._v("通道ID")]),e._v(" "),a("td",[e._v(e._s(e.tradeDetail.channelId))]),e._v(" "),a("td",[e._v("支付创建时间")]),e._v(" "),a("td",[e._v(e._s(e._f("dateFormat")([e.tradeDetail.createTime,"yyyy-MM-dd hh:mm:ss"])))])]),e._v(" "),a("tr",[a("td",[e._v("用户账号")]),e._v(" "),a("td",[e._v(e._s(e.tradeDetail.account))]),e._v(" "),a("td",[e._v("通道标识")]),e._v(" "),a("td",[e._v(e._s(e.tradeDetail.channelType))]),e._v(" "),a("td",[e._v("支付成功时间")]),e._v(" "),a("td",[e._v(e._s(e._f("dateFormat")([e.tradeDetail.successTime,"yyyy-MM-dd hh:mm:ss"])))])]),e._v(" "),a("tr",[a("td",[e._v("订单ID")]),e._v(" "),a("td",[e._v(e._s(e.tradeDetail.orderId))]),e._v(" "),a("td",[e._v("通道名称")]),e._v(" "),a("td",[e._v(e._s(e.tradeDetail.channelName))]),e._v(" "),a("td",[e._v("退款时间")]),e._v(" "),a("td",[e._v(e._s(e._f("dateFormat")([e.tradeDetail.refundTime,"yyyy-MM-dd hh:mm:ss"])))])]),e._v(" "),a("tr",[a("td",[e._v("交易状态")]),e._v(" "),a("td",[e._v(e._s(e._f("rechargeOrder2CH")(e.tradeDetail.tradeStatus)))]),e._v(" "),a("td",[e._v("通道费率")]),e._v(" "),a("td",[e._v(e._s(e._f("toPercent")(e.tradeDetail.channelRate)))]),e._v(" "),a("td",[e._v("IP地址")]),e._v(" "),a("td",[e._v(e._s(e.tradeDetail.ip))])]),e._v(" "),a("tr",[a("td",[e._v("渠道流水号")]),e._v(" "),a("td",[e._v(e._s(e.tradeDetail.exOrderId))]),e._v(" "),a("td",[e._v("通道支付账户")]),e._v(" "),a("td",[e._v(e._s(e.tradeDetail.channelUser))]),e._v(" "),a("td",[e._v("支付平台")]),e._v(" "),a("td",[e._v(e._s(e._f("payTerminal2CH")([e.tradeDetail.payTerminal,e.source])))])]),e._v(" "),a("tr",[a("td",[e._v("金额")]),e._v(" "),a("td",[e._v(e._s(parseFloat(e.tradeDetail.tradePrice))+"元")]),e._v(" "),a("td",[e._v("备注")]),e._v(" "),a("td",[e._v(e._s(e.tradeDetail.remark))]),e._v(" "),a("td",[e._v("设备型号")]),e._v(" "),a("td",[e._v(e._s(e.tradeDetail.devicesModel))])]),e._v(" "),a("tr",[a("td",[e._v("设备ID")]),e._v(" "),a("td",[e._v(e._s(e.tradeDetail.devicesId))]),e._v(" "),a("td"),e._v(" "),a("td"),e._v(" "),a("td"),e._v(" "),a("td")])]):e._e()]),e._v(" "),a("el-tab-pane",{attrs:{label:"交易状态变更记录",name:"1"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tradeChangeList,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"订单ID",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tradeId",label:"交易ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelName",label:"通道名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"exOrderId",label:"渠道流水号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"IP地址"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"tradeStatus",label:"交易状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("rechargeOrder2CH")(t.row.tradeStatus)))])]}}])})],1)],1)],1)],1)},staticRenderFns:[]};var cl=a("VU/8")(sl,ll,!1,function(e){a("CF4A")},"data-v-4dcb0142",null).exports,dl={name:"OrderProductList",data:function(){return{appList:[],list:[],pageIndex:1,pageSize:20,pageCount:1,tableHeight:null,activeTab:"0",loading:!1,productOrderStatus:on.productOrderStatus,orderType:on.orderType,goodsType:on.goodsType,productPayType:on.productPayType,filterQuery:{orderStatus:"",payTerminal:"",orderType:"",goodsTypeId:"",date:[]},filter:{},pickerOptions0:{disabledDate:function(e){return e.getTime()>Date.now()}}}},computed:u()({},Object(sn.d)(["windowHeight"]),{payTerminal:function(){var e=0;return"精准比分"===this.appListObj[this.activeTab]&&(e=1),"红彩"!==this.appListObj[this.activeTab]&&"精准比分"!==this.appListObj[this.activeTab]&&(e=null),on.payTerminal[e]||[]},appListObj:function(){var e={};return this.appList.map(function(t){e[t.typeId]=t.name}),e},ProductOrderApi:function(){var e=0;return"精准比分"===this.appListObj[this.activeTab]&&parseInt(this.filterQuery.goodsTypeId)>1&&(e=1),Pe[e]}}),created:function(){this.getAPPlist(),this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageIndex;if(!this.loading){this.loading=!0;var a={pageIndex:t,pageSize:this.pageSize,appId:this.activeTab};this.$service(this.ProductOrderApi.list,{method:"post",data:tn()({},a,this.filter)}).then(function(t){200===t.code?(e.$refs.elTable.bodyWrapper.scrollTop=0,e.list=t.data.records||[],e.pageCount=t.data.page.pageCount,e.pageIndex=t.data.page.pageIndex):(e.list=[],e.pageCount=1,e.$message.error("string"==typeof t?t:t.code+":"+t.message)),e.loading=!1},function(t){t&&(e.list=[],e.pageCount=1,e.loading=!1,e.$message.error(qo()(t)))})}},handleClickTabs:function(){this.$refs.filterForm.resetFields(),this.filter={},this.getList(1)},filterList:function(){var e=_h(tn()({},this.filterQuery));e.filterTypeName?(e[e.filterType]=e.filterTypeName,delete e.filterTypeName,delete e.filterType):delete e.filterType,e.date&&e.date.length&&(e.startTime=e.date[0]+" 00:00:00",e.endTime=e.date[1]+" 23:59:59",delete e.date),this.filter=e,this.getList(1)},getAPPlist:function(){var e=this;this.$service(zt).then(function(t){200===t.code?(e.appList=t.data.filter(function(e){return-1!==e.typeId}),e.setHeight()):e.$message.error(t.message)}).catch(function(t){t&&e.$message.error(qo()(t))})}},watch:{windowHeight:function(){this.setHeight()}}},ul={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"order-product-list"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1)]),e._v(" "),e.appList.length>0?a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.appList,function(t){return a("el-tab-pane",{key:t.typeId,attrs:{label:t.name,name:t.typeId.toString(),disabled:e.loading}})}),1):e._e(),e._v(" "),a("el-form",{ref:"filterForm",attrs:{inline:!0,model:e.filterQuery,size:"mini",disabled:e.loading}},[a("el-form-item",[a("el-select",{staticStyle:{width:"125px"},attrs:{clearable:""},on:{clear:function(t){e.filterQuery.filterTypeName=""}},model:{value:e.filterQuery.filterType,callback:function(t){e.$set(e.filterQuery,"filterType",t)},expression:"filterQuery.filterType"}},[a("el-option",{attrs:{label:"订单ID",value:"orderId"}}),e._v(" "),a("el-option",{attrs:{label:"用户通行证",value:"userAccount"}}),e._v(" "),a("el-option",{attrs:{label:"商品ID",value:"threadId"}}),e._v(" "),a("el-option",{attrs:{label:"专家通行证",value:"expertAccount"}})],1)],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入订单ID/用户通行证",disabled:!e.filterQuery.filterType},model:{value:e.filterQuery.filterTypeName,callback:function(t){e.$set(e.filterQuery,"filterTypeName",t)},expression:"filterQuery.filterTypeName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{clearable:""},model:{value:e.filterQuery.orderStatus,callback:function(t){e.$set(e.filterQuery,"orderStatus",t)},expression:"filterQuery.orderStatus"}},e._l(e.productOrderStatus,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"支付终端"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{clearable:""},model:{value:e.filterQuery.payTerminal,callback:function(t){e.$set(e.filterQuery,"payTerminal",t)},expression:"filterQuery.payTerminal"}},e._l(e.payTerminal,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"商品类型"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{clearable:""},model:{value:e.filterQuery.goodsTypeId,callback:function(t){e.$set(e.filterQuery,"goodsTypeId",t)},expression:"filterQuery.goodsTypeId"}},e._l(e.goodsType[0===parseInt(e.activeTab)?0:1],function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"支付方式",prop:"orderType"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{clearable:""},model:{value:e.filterQuery.orderType,callback:function(t){e.$set(e.filterQuery,"orderType",t)},expression:"filterQuery.orderType"}},e._l(e.productPayType["精准比分"===e.appListObj[e.activeTab]?1:0],function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"时间",prop:"date"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange",editable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions0,size:"small"},model:{value:e.filterQuery.date,callback:function(t){e.$set(e.filterQuery,"date",t)},expression:"filterQuery.date"}})],1),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.filterList()}}},[e._v("筛选")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight},on:{"sort-change":e.sortList}},[a("el-table-column",{attrs:{prop:"orderId",label:"订单ID",fixed:"","min-width":"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"OrderProductDetail",params:{jzbf:"精准比分"===e.appListObj[e.activeTab]?1:0,id:t.row.orderId,appId:e.activeTab,type:1===t.row.goodsTypeId&&3===t.row.orderType||5===t.row.goodsTypeId?1:0}}}},[e._v("\n          "+e._s(t.row.orderId)+"\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"orderStatus",label:"订单状态",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("productOrderStatus2CH")(t.row.orderStatus))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"frozenTime",label:"订单冻结时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.frozenTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"successTime",label:"订单成功时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.successTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"用户通行证","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsId",label:"商品ID","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsType",label:"类型",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderPrice",label:"订单价格",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payTerminal",label:"支付方式",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("productPayType2CH")([t.row.orderType,"精准比分"===e.appListObj[e.activeTab]?1:0]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"channelName",label:"支付终端",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("payTerminal2CH")([t.row.payTerminal,"精准比分"===e.appListObj[e.activeTab]?1:0]))+"\n      ")]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","page-size":"pageSize","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}})],1)},staticRenderFns:[]},ml=a("VU/8")(dl,ul,!1,null,null,null).exports,pl={name:"OrderProductDetail",data:function(){return{activeTab:"0",orderDetail:null,orderChangeList:[],loading:!1}},props:["id","jzbf","type","appId"],computed:{serviceDay:function(){var e=this.orderDetail;return(new Date).getTime()<e.serviceStartTime?"0天":(new Date).getTime()>e.serviceEndTime&&e.validDay?e.validDay+"天":Math.ceil(((new Date).getTime()-e.serviceStartTime)/24/60/60/1e3)+"天"}},created:function(){this.getInfo(),this.getChangeList()},methods:{getInfo:function(){var e=this;if(!this.loading&&this.id){this.loading=!0;var t=ze;"1"===this.jzbf.toString()&&(t=He),this.$service("1"===this.type.toString()?t.detailOfPointCard:t.detail,{params:{orderId:this.id,appId:this.appId}}).then(function(t){if(200===t.code){if(e.orderDetail=t.data,e.orderDetail.serviceNowDays="-",e.orderDetail.serviceTotalDays){var a=(new Date).valueOf();e.orderDetail.serviceStartTime>a&&(e.orderDetail.serviceNowDays="0天"),e.orderDetail.serviceEndTime<a&&(e.orderDetail.serviceNowDays=e.orderDetail.serviceTotalDays+"天"),e.orderDetail.serviceStartTime<a&&a<e.orderDetail.serviceEndTime&&(e.orderDetail.serviceNowDays=Math.ceil((a-e.orderDetail.serviceStartTime)/864e5)+"天")}}else e.$message.error(t.code+":"+t.message);e.loading=!1}).catch(function(t){t&&(e.loading=!1,e.$message.error(qo()(t)))})}},getChangeList:function(){var e=this;if(this.id){var t=ze;"1"===this.jzbf.toString()&&(t=He),this.$service(t.changeList,{params:{orderId:this.id,appId:this.appId}}).then(function(t){200===t.code&&(e.orderChangeList=t.data)})}}}},fl={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"order-product-detail"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"payment-detail"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1)]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"订单详细信息",name:"0"}},[e.orderDetail?a("table",{staticClass:"detail-table"},[a("colgroup",[a("col",{attrs:{width:"10%"}}),e._v(" "),a("col",{attrs:{width:"25%"}}),e._v(" "),a("col",{attrs:{width:"10%"}}),e._v(" "),a("col",{attrs:{width:"25%"}}),e._v(" "),a("col",{attrs:{width:"10%"}}),e._v(" "),a("col",{attrs:{width:"20%"}})]),e._v(" "),a("tr",[a("td",[e._v("订单ID")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.orderId))]),e._v(" "),a("td",[e._v("商品ID")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.goodsId))]),e._v(" "),a("td",[e._v("订单冻结时间")]),e._v(" "),a("td",[e._v(e._s(e._f("dateFormat")([e.orderDetail.frozenTime,"yyyy-MM-dd hh:mm:ss"])))])]),e._v(" "),a("tr",[a("td",[e._v("用户账号")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.account))]),e._v(" "),a("td",[e._v("商品名称")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.goodsName))]),e._v(" "),a("td",[e._v("订单结算时间")]),e._v(" "),a("td",[e._v(e._s(e._f("dateFormat")([e.orderDetail.successTime,"yyyy-MM-dd hh:mm:ss"])))])]),e._v(" "),a("tr",[a("td",[e._v("订单类型")]),e._v(" "),a("td",[e._v(e._s({1:"红豆购买",2:"现金购买",3:"点卡购买"}[e.orderDetail.orderType])+"\n              ")]),e._v(" "),a("td",[e._v("商品类型")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.goodsType))]),e._v(" "),a("td",[e._v("订单退豆时间")]),e._v(" "),a("td",[e._v(e._s(e._f("dateFormat")([e.orderDetail.refundTime,"yyyy-MM-dd hh:mm:ss"])))])]),e._v(" "),a("tr",[a("td",[e._v("订单价格")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.orderPrice))]),e._v(" "),a("td",[e._v("商品定价")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.goodsPrice))]),e._v(" "),a("td",[e._v("退豆价格")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.refundPrice))])]),e._v(" "),a("tr",[a("td",[e._v("订单状态")]),e._v(" "),a("td",[e._v(e._s(e._f("productOrderStatus2CH")(e.orderDetail.orderStatus)))]),e._v(" "),a("td",[e._v("商品类型ID")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.goodsTypeId))]),e._v(" "),a("td",[e._v("优惠券类型")]),e._v(" "),a("td",[e._v(e._s(e._f("couponType2CH")(e.orderDetail.couponType)))])]),e._v(" "),a("tr",[a("td",[e._v("成功交易ID")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.threadTradeId))]),e._v(" "),a("td",[e._v("购买数量")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.buyCount))]),e._v(" "),a("td",[e._v("优惠券码")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.couponCode||"-"))])]),e._v(" "),a("tr",[a("td",[e._v("专家ID")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.expertId||"-"))]),e._v(" "),a("td",[e._v("服务开始日期")]),e._v(" "),a("td",[e._v(e._s(e._f("dateFormat")([e.orderDetail.serviceStartTime,"yyyy-MM-dd hh:mm:ss"])))]),e._v(" "),a("td",[e._v("优惠力度")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.couponTypeDesc))])]),e._v(" "),a("tr",[a("td",[e._v("专家网易宝")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.expertEpay||"-"))]),e._v(" "),a("td",[e._v("服务结束日期")]),e._v(" "),a("td",[e._v(e._s(e._f("dateFormat")([e.orderDetail.serviceEndTime,"yyyy-MM-dd hh:mm:ss"])))]),e._v(" "),a("td",[e._v("优惠额")]),e._v(" "),1!==parseInt(e.type)||1!==e.orderDetail.goodsTypeId&&5!==e.orderDetail.goodsTypeId?a("td",[e._v(e._s(e.orderDetail.preferentialAmount||"-")),a("span",{directives:[{name:"show",rawName:"v-show",value:e.orderDetail.preferentialAmount,expression:"orderDetail.preferentialAmount"}]},[e._v("豆")])]):e._e(),e._v(" "),1===parseInt(e.type)&&5===e.orderDetail.goodsTypeId?a("td",[e._v(e._s(e.orderDetail.goodsPrice-e.orderDetail.orderPrice))]):e._e(),e._v(" "),1===parseInt(e.type)&&1===e.orderDetail.goodsTypeId?a("td",[e._v(e._s(Math.round(e.orderDetail.goodsPrice-e.orderDetail.price/e.orderDetail.point*e.orderDetail.orderPrice)||"0"))]):e._e()]),e._v(" "),a("tr",[a("td",[e._v("分成比例")]),e._v(" "),a("td",[e._v(e._s(e._f("toPercent")(e.orderDetail.shareRate)))]),e._v(" "),a("td",[e._v("总服务天数")]),e._v(" "),a("td",[e._v(e._s(0===parseInt(e.type)?e.orderDetail.serviceTotalDays?e.orderDetail.serviceTotalDays+"天":"-":e.orderDetail.validDay?e.orderDetail.validDay+"天":"-"))]),e._v(" "),a("td",[e._v("支付平台")]),e._v(" "),a("td",[e._v(e._s(e._f("payTerminal2CH")([e.orderDetail.payTerminal,1])))])]),e._v(" "),a("tr",[a("td",[e._v("IP地址")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.ip))]),e._v(" "),a("td",[e._v("已服务天数")]),e._v(" "),0===parseInt(e.type)||5!==e.orderDetail.goodsTypeId?a("td",[e._v(e._s(e.orderDetail.serviceNowDays))]):e._e(),e._v(" "),1===parseInt(e.type)&&5===e.orderDetail.goodsTypeId?a("td",[e._v(e._s(e.serviceDay))]):e._e(),e._v(" "),a("td",[e._v("通道费率")]),e._v(" "),a("td",[e._v(e._s(e._f("toPercent")(e.orderDetail.channelRate)))])]),e._v(" "),a("tr",[a("td",[e._v("点卡名称")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.name||"-"))]),e._v(" "),a("td",[e._v("点数")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.point||"-"))]),e._v(" "),a("td",[e._v("已使用点数")]),e._v(" "),a("td",[e._v(e._s(5===e.orderDetail.goodsTypeId&&e.orderDetail.point?e.orderDetail.point-e.orderDetail.usedPoints:"-"))])]),e._v(" "),a("tr",[a("td",[e._v("总场次数")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.dataCount||"-"))]),e._v(" "),a("td",[e._v("已使用场次数")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.serveDataCount||"-"))]),e._v(" "),a("td",[e._v("赠送积分")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.creditPresent))])]),e._v(" "),a("tr",[a("td",[e._v("备注")]),e._v(" "),a("td",[e._v("-")]),e._v(" "),a("td",[e._v("设备型号")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.devicesModel||"-"))]),e._v(" "),a("td",[e._v("设备ID")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.deviceId))])])]):e._e()]),e._v(" "),a("el-tab-pane",{attrs:{label:"状态变更记录",name:"1"}},[e.orderDetail?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.orderChangeList,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"订单ID",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderStatus",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("productOrderStatus2CH")(t.row.orderStatus)))])]}}],null,!1,1653232621)}),e._v(" "),a("el-table-column",{attrs:{prop:"threadTradeId",label:"交易ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"reduceCount",label:e.orderDetail.goodsTypeId&&11===e.orderDetail.goodsTypeId?"现金消耗":0===parseInt(e.type)?"红豆消耗":"点数消耗"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n              ")]}}],null,!1,3506217864)})],1):e._e()],1)],1)],1)])])},staticRenderFns:[]},hl=a("VU/8")(pl,fl,!1,null,null,null).exports,gl={name:"OrderRechargeList",data:function(){return{list:[],pageIndex:1,pageSize:20,pageCount:1,tableHeight:null,activeTab:"0",loading:!1,rechargeOrderStatus:on.rechargeOrderStatus,payChannel:on.payChannel,orderType:on.orderType,filterQuery:{orderStatus:"",payTerminal:"",channelId:"",orderTypeId:"",filterType:"",filterTypeName:"",date:[]},pickerOptions0:{disabledDate:function(e){return e.getTime()>Date.now()}}}},computed:u()({},Object(sn.d)(["windowHeight"]),{payTerminal:function(){return on.payTerminal[this.activeTab]}}),created:function(){console.log("recharge"),this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(e){var t=this;if(this.pageIndex=e||1,!this.loading){this.loading=!0;var a={pageIndex:this.pageIndex,pageSize:this.pageSize};this.$service(Le[this.activeTab].rechargeList,{method:"post",data:tn()({},a,this.filter)}).then(function(e){t.loading=!1,200===e.code?(t.$refs.elTable.bodyWrapper.scrollTop=0,t.list=e.data.records||[],t.pageCount=e.data.page.pageCount,t.pageIndex=e.data.page.pageIndex):(t.list=[],t.$message.error(e.code+":"+e.message))},function(e){e&&(t.list=[],t.loading=!1,t.$message.error(qo()(e)))})}},handleClickTabs:function(){this.filter={},this.$refs.filterForm.resetFields(),this.getList(1)},filterList:function(){var e=_h(tn()({},this.filterQuery));e.filterTypeName?(e[e.filterType]=e.filterTypeName,delete e.filterTypeName,delete e.filterType):delete e.filterType,e.date&&e.date.length&&(e.startTime=e.date[0]+" 00:00:00",e.endTime=e.date[1]+" 23:59:59",delete e.date),this.filter=e,this.getList(1)}},watch:{windowHeight:function(){this.setHeight()}}},vl={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"order-recharge-list"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1)]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"红彩",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"精准比分",name:"1"}})],1),e._v(" "),a("el-form",{ref:"filterForm",attrs:{inline:!0,model:e.filterQuery,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"",prop:"filterType"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{clearable:""},on:{clear:function(t){e.filterQuery.filterTypeName=""}},model:{value:e.filterQuery.filterType,callback:function(t){e.$set(e.filterQuery,"filterType",t)},expression:"filterQuery.filterType"}},[a("el-option",{attrs:{label:"订单ID",value:"orderId"}}),e._v(" "),a("el-option",{attrs:{label:"用户通行证",value:"account"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"filterTypeName"}},[a("el-input",{attrs:{placeholder:"请输入订单ID/用户通行证",disabled:!e.filterQuery.filterType},model:{value:e.filterQuery.filterTypeName,callback:function(t){e.$set(e.filterQuery,"filterTypeName",t)},expression:"filterQuery.filterTypeName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"orderStatus"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{clearable:""},model:{value:e.filterQuery.orderStatus,callback:function(t){e.$set(e.filterQuery,"orderStatus",t)},expression:"filterQuery.orderStatus"}},e._l(e.rechargeOrderStatus,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"终端",prop:"payTerminal"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{clearable:""},model:{value:e.filterQuery.payTerminal,callback:function(t){e.$set(e.filterQuery,"payTerminal",t)},expression:"filterQuery.payTerminal"}},e._l(e.payTerminal,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"渠道",prop:"channelId"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{clearable:""},model:{value:e.filterQuery.channelId,callback:function(t){e.$set(e.filterQuery,"channelId",t)},expression:"filterQuery.channelId"}},e._l(e.payChannel,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"orderTypeId"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{clearable:""},model:{value:e.filterQuery.orderTypeId,callback:function(t){e.$set(e.filterQuery,"orderTypeId",t)},expression:"filterQuery.orderTypeId"}},e._l(e.orderType,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"时间",prop:"date"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange",editable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions0,size:"small"},model:{value:e.filterQuery.date,callback:function(t){e.$set(e.filterQuery,"date",t)},expression:"filterQuery.date"}})],1),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.filterList()}}},[e._v("筛选")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight},on:{"sort-change":e.sortList}},[a("el-table-column",{attrs:{prop:"orderId",label:"订单ID","min-width":"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"OrderRechargeDetail",params:{id:t.row.orderId,source:e.activeTab}}}},[e._v(e._s(t.row.orderId))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"orderStatus",label:"订单状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("rechargeOrder2CH")(t.row.orderStatus))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"订单创建时间",width:"155"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"订单成功时间",width:"155"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.successTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"用户通行证","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"buyCount",label:"购买数量",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderPrice",label:"订单价格(元)",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payTerminal",label:"支付终端",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("payTerminal2CH")([t.row.payTerminal,e.activeTab]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"channelName",label:"支付通道",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.channelName||"-")+"\n      ")]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","page-size":"pageSize","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}})],1)},staticRenderFns:[]},bl=a("VU/8")(gl,vl,!1,null,null,null).exports,_l={name:"OrderRechargeDetail",data:function(){return{fromRouter:null,currentRouter:null,activeTab:"0",orderDetail:null,orderChangeList:null,tradeDetailList:null,orderLoading:!0,statusLoading:!0,tradeLoading:!0}},props:["orderType","id","source"],computed:{serviceDay:function(){var e=this.orderDetail;return(new Date).getTime()<e.serviceStartTime?"0天":(new Date).getTime()>e.serviceEndTime&&e.validDay?e.validDay+"天":Math.ceil(((new Date).getTime()-e.serviceStartTime)/24/60/60/1e3)+"天"}},created:function(){var e=this;console.log("recharge detail"),this.getRechargeDetail("getRechargeOrderDetail").then(function(t){e.orderDetail=t.data,e.orderLoading=!1},function(t){e.$message.error(t),e.orderLoading=!1}),this.getRechargeDetail("getRechargeOrderChangeList").then(function(t){e.orderChangeList=t.data,e.statusLoading=!1},function(t){e.$message.error(t),e.orderChangeList=[],e.statusLoading=!1}),this.getRechargeDetail("getChannelTradeDetailList").then(function(t){e.tradeDetailList=t.data,e.tradeLoading=!1},function(t){e.$message.error(t),e.tradeDetailList=[],e.tradeLoading=!1})},methods:{getRechargeDetail:function(e){var t=this;return new Bo.a(function(a,i){t.$service(De[t.source][e],{method:"get",params:{orderId:t.id}}).then(function(e){200===e.code?a(e):i(e.message)},function(e){e&&i(qo()(e))})})}},beforeRouteEnter:function(e,t,a){a(function(a){a.fromRouter=t&&t.name?t:null,a.currentRouter=e})}},yl={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"order-recharge-detail"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"payment-detail"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e.fromRouter?a("el-breadcrumb-item",{attrs:{to:{path:e.fromRouter.fullPath}}},[e._v(e._s(e.fromRouter.meta.title))]):e._e(),e._v(" "),e.currentRouter?a("el-breadcrumb-item",[e._v(e._s(e.currentRouter.meta.title))]):e._e()],1)],1)]),e._v(" "),a("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:e.orderLoading,expression:"orderLoading"}],attrs:{label:"订单详细信息",name:"0"}},[e.orderDetail?a("table",{staticClass:"detail-table"},[a("colgroup",[a("col",{attrs:{width:"10%"}}),e._v(" "),a("col",{attrs:{width:"25%"}}),e._v(" "),a("col",{attrs:{width:"10%"}}),e._v(" "),a("col",{attrs:{width:"25%"}}),e._v(" "),a("col",{attrs:{width:"10%"}}),e._v(" "),a("col",{attrs:{width:"20%"}})]),e._v(" "),a("tr",[a("td",[e._v("订单ID")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.orderId))]),e._v(" "),a("td",[e._v("商品ID")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.goodsId))]),e._v(" "),a("td",[e._v("订单创建时间")]),e._v(" "),a("td",[e._v(e._s(e._f("dateFormat")([e.orderDetail.createTime,"yyyy-MM-dd hh:mm:ss"])))])]),e._v(" "),a("tr",[a("td",[e._v("用户账号")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.account))]),e._v(" "),a("td",[e._v("商品名称")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.goodsName))]),e._v(" "),a("td",[e._v("订单成功时间")]),e._v(" "),a("td",[e._v(e._s(e._f("dateFormat")([e.orderDetail.successTime,"yyyy-MM-dd hh:mm:ss"])))])]),e._v(" "),a("tr",[a("td",[e._v("订单价格")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.orderPrice)+"元")]),e._v(" "),a("td",[e._v("商品定价")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.goodsPrice)+"元")]),e._v(" "),a("td",[e._v("退款时间")]),e._v(" "),a("td",[e._v(e._s(e._f("dateFormat")([e.orderDetail.refundTime,"yyyy-MM-dd hh:mm:ss"])))])]),e._v(" "),a("tr",[a("td",[e._v("订单类型")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.orderType))]),e._v(" "),a("td",[e._v("商品类型")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.goodsTypeName))]),e._v(" "),a("td",[e._v("IP地址")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.ip))])]),e._v(" "),a("tr",[a("td",[e._v("订单状态")]),e._v(" "),a("td",[e._v(e._s(e._f("rechargeOrder2CH")(e.orderDetail.orderStatus)))]),e._v(" "),a("td",[e._v("商品类型ID")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.goodsTypeId))]),e._v(" "),a("td",[e._v("支付平台")]),e._v(" "),a("td",[e._v(e._s(e._f("payTerminal2CH")([e.orderDetail.payTerminal,e.source])))])]),e._v(" "),a("tr",[a("td",[e._v("结算许可")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.settlementLicense))]),e._v(" "),a("td",[e._v("购买数量")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.buyCount))]),e._v(" "),a("td",[e._v("设备型号")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.devicesModel||"-"))])]),e._v(" "),a("tr",[a("td",[e._v("渠道流水号")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.exOrderId||"-"))]),e._v(" "),a("td",[e._v("服务时长")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.serviceDuration))]),e._v(" "),a("td",[e._v("设备ID")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.devicesId))])]),e._v(" "),a("tr",[a("td",[e._v("新增红豆数")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.redCurrency)+"豆")]),e._v(" "),a("td",[e._v("备注")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.remark||"-"))]),e._v(" "),a("td",[e._v("充值优惠券信息")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.couponDesc||""))])])]):e._e()]),e._v(" "),a("el-tab-pane",{attrs:{label:"订单状态变更记录",name:"1"}},[e.orderDetail?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.statusLoading,expression:"statusLoading"}],staticStyle:{width:"100%"},attrs:{data:e.orderChangeList,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"订单ID",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderStatus",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("rechargeOrder2CH")(t.row.orderStatus)))])]}}],null,!1,846008351)}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"IP地址"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n            ")]}}],null,!1,975024136)})],1):e._e()],1),e._v(" "),a("el-tab-pane",{attrs:{label:"支付详细信息",name:"2"}},[a("p",[e._v("交易状态变更记录")]),e._v(" "),e.tradeDetailList?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tradeLoading,expression:"tradeLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tradeDetailList,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tradeId",label:"交易ID",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelName",label:"通道名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"exOrderId",label:"渠道流水号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"IP地址"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"支付创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n            ")]}}],null,!1,975024136)}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"支付成功时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("dateFormat")([t.row.successTime,"yyyy-MM-dd hh:mm:ss"]))+"\n            ")]}}],null,!1,899788847)}),e._v(" "),a("el-table-column",{attrs:{prop:"payTerminal",label:"支付平台"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("payTerminal2CH")([t.row.payTerminal,e.source]))+"\n            ")]}}],null,!1,893001066)}),e._v(" "),a("el-table-column",{attrs:{prop:"tradeStatus",label:"交易状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("rechargeOrder2CH")(t.row.tradeStatus)))])]}}],null,!1,767209399)})],1):e._e()],1)],1)],1)])},staticRenderFns:[]},wl=a("VU/8")(_l,yl,!1,null,null,null).exports,Tl={name:"OrderTcmOrderList",data:function(){return{activeTab:"0",pageIndex:1,pageSize:20,pageCount:1,tableHeight:null,loading:!1,tcm:{list:[],tcmOrderStatusList:[],filterQuery:{orderType:"",orderTypeName:"",matchType:"",matchTypeName:"",orderStatus:null,date:[]},filter:{},match:{loading:!1,list:[],filterQuery:{date:[]}},repairList:null},quiz:{list:[],orderStatus:{1:"冻结",2:"结算",3:"退款"},filterQuery:{orderType:"",orderTypeName:"",orderStatus:null,date:[]},filter:{}}}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){var e=this;this.getTcmOrderStatusList().then(function(t){e.tcm.tcmOrderStatusList=t.data,"0"===e.activeTab?e.getTcmOrderList():e.getQuizOrderList()}).catch(function(t){e.$message.error(t)}),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-("0"===e.activeTab?e.$refs.elTableTcm.$el.offsetTop:e.$refs.elTableQuiz.$el.offsetTop)-63})},tcmOrderStatus2CH:function(e){var t=void 0;return this.tcm.tcmOrderStatusList.filter(function(a){a.id===e&&(t=a.desc)}),t},handleClickTabs:function(){this.pageCount=1,"0"===this.activeTab?(this.$refs.tcmFilterForm.resetFields(),this.$refs.tcmFilterForm.clearValidate(),this.tcm.filter={},this.getTcmOrderList()):(this.$refs.quizFilterForm.resetFields(),this.quiz.filter={},this.getQuizOrderList()),this.setHeight()},getTcmOrderStatusList:function(){var e=this;return new Bo.a(function(t,a){e.loading=!0,e.$service(Ee[0].orderStatusList).then(function(e){200===e.code?t(e):a(e.message)},function(e){e&&a(qo()(e))})})},filterTcmOrderList:function(e){var t=this;this.getTcmFilterQuery().then(function(e){t.tcm.filter=e,t.getTcmOrderList(1)})},getTcmOrderList:function(e){var t=this;this.pageIndex=e||1,this.loading=!0,this.$service(Ee[this.activeTab].orderList,{method:"post",data:tn()({},{pageIndex:this.pageIndex,pageSize:this.pageSize},this.tcm.filter)}).then(function(e){t.loading=!1,200===e.code?(t.$refs.elTableTcm.bodyWrapper.scrollTop=0,t.tcm.list=e.data.records||[],t.pageCount=e.data.page.pageCount,t.pageIndex=e.data.page.pageIndex):(t.tcm.list=[],t.$message.error(e.code+":"+e.message))},function(e){e&&(t.tcm.list=[],t.loading=!1,t.$message.error(qo()(e)))})},getQuizOrderList:function(e){var t=this,a={pageIndex:e||1,pageSize:this.pageSize};this.loading=!0,this.$service(Ee[this.activeTab].orderList,{method:"post",data:tn()({},this.quiz.filter,a)}).then(function(e){t.loading=!1,200===e.code?(t.$refs.elTableQuiz.bodyWrapper.scrollTop=0,t.quiz.list=e.data.records||[],t.pageCount=e.data.page.pageCount,t.pageIndex=e.data.page.pageIndex):(t.quiz.list=[],t.$message.error(e.code+":"+e.message))},function(e){e&&(t.quiz.list=[],t.loading=!1,t.$message.error(qo()(e)))})},getMatchList:function(e){var t=this;this.tcm.match.loading=!0,this.$service(Ee[this.activeTab].matchList,{method:"get",params:{keyWords:e}}).then(function(e){t.tcm.match.loading=!1,200===e.code?t.tcm.match.list=e.data||[]:(t.tcm.match.list=[],t.$message.error(e.code+":"+e.message))},function(e){e&&(t.tcm.match.list=[],t.tcm.match.loading=!1,t.$message.error(qo()(e)))})},getTcmFilterQuery:function(){var e=this;return new Bo.a(function(t,a){var i=e.tcm.filterQuery,r={};i.date.length&&(r.startTime=i.date[0]||"",r.endTime=i.date[1]||""),i.orderTypeName&&(r[i.orderType]=i.orderTypeName),i.matchTypeName&&(r[i.matchType]=i.matchTypeName),(i.orderStatus||0===i.orderStatus)&&(r.orderStatus=i.orderStatus),!r.goodsname||r.startTime&&r.endTime?t(r):(e.$message.error("请选择起止时间"),a(new Error("请选择起止时间")))})},getQuizFilterQuery:function(){var e=this.quiz.filterQuery,t={};e.date.length&&(t.startTime=e.date[0]+" 00:00:00",t.endTime=e.date[0]+" 23:59:59"),e.orderTypeName&&(t[e.orderType]=e.orderTypeName),e.orderStatus&&(t.orderStatus=e.orderStatus),this.quiz.filter=t,this.getQuizOrderList(1)},handleSelectionChange:function(e){this.tcm.repairList=e},batchRepair:function(){for(var e=this,t="",a=this.tcm.repairList.length,i=0;i<a;i++)t=0===i?t+"?tcmBaseOrderId="+this.tcm.repairList[i].tcmBaseOrderId:t+"&tcmBaseOrderId="+this.tcm.repairList[i].tcmBaseOrderId;this.$service(Ee[this.activeTab].batchRepair,{urlParams:{tcmBaseOrderId:t}}).then(function(t){200===t.code?(e.getTcmOrderList(),e.$message.success("批量修复成功")):e.$message.error(t.code+":"+t.message)},function(t){t&&e.$message.error(qo()(t))})}},watch:{windowHeight:function(){this.setHeight()}}},Il={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"order-tcm-list"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1)]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"TCM竞猜订单",disabled:!e.tcm.tcmOrderStatusList.length&&"0"===e.activeTab,name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"拉新竞猜订单",disabled:!e.tcm.tcmOrderStatusList.length&&"1"===e.activeTab,name:"1"}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"0"===e.activeTab,expression:"activeTab==='0'"}]},[a("el-form",{ref:"tcmFilterForm",attrs:{inline:!0,model:e.tcm.filterQuery,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"",prop:"filterType"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{clearable:""},on:{clear:function(t){e.tcm.filterQuery.orderTypeName=""}},model:{value:e.tcm.filterQuery.orderType,callback:function(t){e.$set(e.tcm.filterQuery,"orderType",t)},expression:"tcm['filterQuery'].orderType"}},[a("el-option",{attrs:{label:"用户通行证",value:"account"}}),e._v(" "),a("el-option",{attrs:{label:"订单ID",value:"orderId"}}),e._v(" "),a("el-option",{attrs:{label:"交易ID（数据商订单号）",value:"orderTradeId"}}),e._v(" "),a("el-option",{attrs:{label:"赛事ID（我们的）",value:"tcmEventId"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"orderTypeName"}},[a("el-input",{attrs:{placeholder:"",disabled:!e.tcm.filterQuery.orderType},model:{value:e.quiz.filterQuery.orderTypeName,callback:function(t){e.$set(e.quiz.filterQuery,"orderTypeName",t)},expression:"quiz.filterQuery.orderTypeName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"filterType"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{clearable:""},on:{clear:function(t){e.tcm.filterQuery.matchTypeName=""}},model:{value:e.tcm.filterQuery.matchType,callback:function(t){e.$set(e.tcm.filterQuery,"matchType",t)},expression:"tcm['filterQuery'].matchType"}},[a("el-option",{attrs:{label:"球队筛选",value:"goodsname"}}),e._v(" "),a("el-option",{attrs:{label:"联赛筛选",value:"tcmCompetitionId"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"matchTypeName"}},["tcmCompetitionId"===e.tcm.filterQuery.matchType?a("el-select",{attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"请输入联赛名","remote-method":e.getMatchList,loading:e.tcm.match.loading},model:{value:e.tcm.filterQuery.matchTypeName,callback:function(t){e.$set(e.tcm.filterQuery,"matchTypeName",t)},expression:"tcm.filterQuery.matchTypeName"}},e._l(e.tcm.match.list,function(e){return a("el-option",{key:e.tcmCompetitionId,attrs:{label:e.competitionName,value:e.tcmCompetitionId}})}),1):a("el-input",{attrs:{placeholder:"goodsname"===e.tcm.filterQuery.matchType?"请输入联赛名称，空格分隔":"",disabled:!e.tcm.filterQuery.matchType},model:{value:e.tcm.filterQuery.matchTypeName,callback:function(t){e.$set(e.tcm.filterQuery,"matchTypeName",t)},expression:"tcm.filterQuery.matchTypeName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"orderStatus"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{clearable:""},model:{value:e.tcm.filterQuery.orderStatus,callback:function(t){e.$set(e.tcm.filterQuery,"orderStatus",t)},expression:"tcm.filterQuery.orderStatus"}},e._l(e.tcm.tcmOrderStatusList,function(e){return a("el-option",{key:e.id,attrs:{label:e.desc,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"时间",prop:"date"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange",editable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions0,size:"small"},model:{value:e.tcm.filterQuery.date,callback:function(t){e.$set(e.tcm.filterQuery,"date",t)},expression:"tcm.filterQuery.date"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.filterTcmOrderList()}}},[e._v("\n          筛选\n        ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.batchRepair}},[e._v("\n          批量修复订单\n        ")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTableTcm",staticStyle:{width:"100%"},attrs:{data:e.tcm.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderId",fixed:"","min-width":"170",label:"订单ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"OrderTcmOrderDetail",params:{id:t.row.orderId}}}},[e._v(e._s(t.row.orderId))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"orderTradeId","min-width":"200",label:"交易ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderStatus",label:"订单状态",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e.tcmOrderStatus2CH(t.row.orderStatus)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"frozenTime",width:"155",label:"订单冻结时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("dateFormat")([t.row.frozenTime,"yyyy-MM-dd hh:mm:ss"]))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"successTime",width:"155",label:"订单结算时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("dateFormat")([t.row.successTime,"yyyy-MM-dd hh:mm:ss"]))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"account","min-width":"190",label:"用户通行证"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tcmEventId",width:"80",label:"赛事ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsName","min-width":"190",label:"商品名称(对阵)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsType",width:"80",label:"商品类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ruleTypeName",width:"100",label:"玩法"}}),e._v(" "),a("el-table-column",{attrs:{prop:"selectionName",width:"100",label:"投注项"}}),e._v(" "),a("el-table-column",{attrs:{prop:"odds",width:"90",label:"投注时赔率"}}),e._v(" "),a("el-table-column",{attrs:{prop:"resultMatchScore",width:"90",label:"结算时比分"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.resultMatchScore||"-")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"orderPrice",width:"90",label:"订单金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"netPrice",width:"90",label:"用户盈亏"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{slot:"reference",type:"primary",size:"mini"},slot:"reference"},[e._v("查询TCM订单")])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","page-size":"pageSize","current-page":e.pageIndex,"page-count":e.pageCount,disabled:!e.tcm.list.length},on:{"current-change":e.getTcmOrderList,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"1"===e.activeTab,expression:"activeTab==='1'"}]},[a("el-form",{ref:"quizFilterForm",attrs:{inline:!0,model:e.quiz.filterQuery,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"",prop:"filterType"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{clearable:""},on:{clear:function(t){e.quiz.filterQuery.orderTypeName=""}},model:{value:e.quiz.filterQuery.orderType,callback:function(t){e.$set(e.quiz.filterQuery,"orderType",t)},expression:"quiz['filterQuery'].orderType"}},[a("el-option",{attrs:{label:"用户通行证",value:"account"}}),e._v(" "),a("el-option",{attrs:{label:"订单ID",value:"orderId"}}),e._v(" "),a("el-option",{attrs:{label:"拉新活动ID",value:"subjectQuizId"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"orderTypeName"}},[a("el-input",{attrs:{placeholder:"",disabled:!e.quiz.filterQuery.orderType},model:{value:e.quiz.filterQuery.orderTypeName,callback:function(t){e.$set(e.quiz.filterQuery,"orderTypeName",t)},expression:"quiz.filterQuery.orderTypeName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"orderStatus"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{clearable:""},model:{value:e.quiz.filterQuery.orderStatus,callback:function(t){e.$set(e.quiz.filterQuery,"orderStatus",t)},expression:"quiz.filterQuery.orderStatus"}},e._l(e.quiz.orderStatus,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"时间",prop:"date"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange",editable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions0,size:"small"},model:{value:e.quiz.filterQuery.date,callback:function(t){e.$set(e.quiz.filterQuery,"date",t)},expression:"quiz.filterQuery.date"}})],1),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.getQuizFilterQuery()}}},[e._v("筛选")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTableQuiz",attrs:{data:e.quiz.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"orderId",fixed:"","min-width":"170",label:"订单ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"OrderQuizOrderDetail",params:{id:t.row.orderId}}}},[e._v(e._s(t.row.orderId))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"orderStatus",label:"订单状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e.quiz.orderStatus[t.row.orderStatus]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"frozenTime",width:"155",label:"订单冻结时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("dateFormat")([t.row.frozenTime,"yyyy-MM-dd hh:mm:ss"]))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"successTime",width:"155",label:"订单结算时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("dateFormat")([t.row.successTime,"yyyy-MM-dd hh:mm:ss"]))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"orderSelectionName","min-width":"150",label:"投注项"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderCredit",width:"120",label:"投注金额"}})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","page-size":"pageSize","current-page":e.pageIndex,"page-count":e.pageCount,disabled:!e.quiz.list.length},on:{"current-change":e.getQuizOrderList,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}})],1)],1)},staticRenderFns:[]},xl=a("VU/8")(Tl,Il,!1,null,null,null).exports,kl={name:"OrderTcmOrderDetail",data:function(){return{activeTab:"0",orderDetail:null,orderChangeList:null,orderLoading:!0,statusLoading:!0,orderStatusList:[]}},props:["id"],created:function(){var e=this;this.getTcmOrderStatusList(),this.getDetail("orderDetail").then(function(t){e.orderDetail=t.data,e.orderLoading=!1},function(t){e.$message.error(t),e.orderLoading=!1}),this.getDetail("orderStatusList").then(function(t){e.orderChangeList=t.data,e.statusLoading=!1},function(t){e.orderChangeList=[],e.$message.error(t),e.statusLoading=!1})},methods:{tcmOrderStatus2CH:function(e){var t=void 0;return this.orderStatusList.filter(function(a){a.id===e&&(t=a.desc)}),t||"-"},getTcmOrderStatusList:function(){var e=this;this.$service(Ee[0].orderStatusList).then(function(t){200===t.code?e.orderStatusList=t.data||[]:e.$message.error(t.message)},function(t){t&&e.$message.error(qo()(t))})},getDetail:function(e){var t=this;return new Bo.a(function(a,i){t.$service(Re[e],{method:"get",params:{orderId:t.id}}).then(function(e){200===e.code?a(e):i(e.message)},function(e){e&&i(qo()(e))})})}}},$l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"order-tcm-detail"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"payment-detail"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1)]),e._v(" "),a("div",[a("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:e.orderLoading,expression:"orderLoading"}],attrs:{label:"订单详细信息",name:"0"}},[e.orderDetail?a("table",{staticClass:"detail-table"},[a("colgroup",[a("col",{attrs:{width:"15%"}}),e._v(" "),a("col",{attrs:{width:"20%"}}),e._v(" "),a("col",{attrs:{width:"10%"}}),e._v(" "),a("col",{attrs:{width:"25%"}}),e._v(" "),a("col",{attrs:{width:"10%"}}),e._v(" "),a("col",{attrs:{width:"20%"}})]),e._v(" "),a("tr",[a("td",[e._v("订单ID")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.orderId))]),e._v(" "),a("td",[e._v("比赛ID")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.tcmEventId))]),e._v(" "),a("td",[e._v("订单冻结时间")]),e._v(" "),a("td",[e._v(e._s(e._f("dateFormat")([e.orderDetail.frozenTime,"yyyy-MM-dd hh:mm:ss"])))])]),e._v(" "),a("tr",[a("td",[e._v("用户账号")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.account))]),e._v(" "),a("td",[e._v("商品名称(赛事对阵)")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.goodsName))]),e._v(" "),a("td",[e._v("订单结算时间")]),e._v(" "),a("td",[e._v(e._s(e._f("dateFormat")([e.orderDetail.successTime,"yyyy-MM-dd hh:mm:ss"])))])]),e._v(" "),a("tr",[a("td",[e._v("订单金额（积分+N币）")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.orderPrice))]),e._v(" "),a("td",[e._v("商品类型")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.goodsType))]),e._v(" "),a("td",[e._v("退款时间")]),e._v(" "),a("td",[e._v(e._s(e._f("dateFormat")([e.orderDetail.refundTime,"yyyy-MM-dd hh:mm:ss"])))])]),e._v(" "),a("tr",[a("td",[e._v("订单类型")]),e._v(" "),a("td",[e._v(e._s(e._f("orderType2CH")(e.orderDetail.orderType)))]),e._v(" "),a("td",[e._v("商品类型（ID）")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.goodsTypeId))]),e._v(" "),a("td",[e._v("退款金额")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.refundPrice))])]),e._v(" "),a("tr",[a("td",[e._v("订单状态")]),e._v(" "),a("td",[e._v(e._s(e.tcmOrderStatus2CH(e.orderDetail.orderStatus)))]),e._v(" "),a("td",[e._v("玩法")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.ruleTypeName))]),e._v(" "),a("td",[e._v("退款积分")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.refundCredit))])]),e._v(" "),a("tr",[a("td",[e._v("成功交易ID（数据商订单ID）")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.orderTradeId||"-"))]),e._v(" "),a("td",[e._v("marketID")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.goodsId))]),e._v(" "),a("td",[e._v("退款牛币")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.refundNCoin||"-"))])]),e._v(" "),a("tr",[a("td",[e._v("订单创建时间")]),e._v(" "),a("td",[e._v(e._s(e._f("dateFormat")([e.orderDetail.createTime,"yyyy-MM-dd hh:mm:ss"])))]),e._v(" "),a("td",[e._v("下单时比分")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.matchScore))]),e._v(" "),a("td",[e._v("IP地址")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.ip||"-"))])]),e._v(" "),a("tr",[a("td",[e._v("订单消耗积分")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.orderCredit||"-"))]),e._v(" "),a("td",[e._v("投注项")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.selectionName))]),e._v(" "),a("td",[e._v("设备ID")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.deviceId))])]),e._v(" "),a("tr",[a("td",[e._v("订单消耗牛币")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.orderNCoin||"-"))]),e._v(" "),a("td",[e._v("投注时赔率")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.odds))]),e._v(" "),a("td",[e._v("终端")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.payTerminal))])]),e._v(" "),a("tr",[a("td",[e._v("盈亏金额")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.netPrice||"-"))]),e._v(" "),a("td",[e._v("结算时结果（比分）")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.resultMatchScore||"-"))]),e._v(" "),a("td",[e._v("备注")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.mark||"-"))])]),e._v(" "),a("tr",[a("td",[e._v("盈亏积分")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.netCredit))]),e._v(" "),a("td",[e._v("购买数量")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.buyCount))]),e._v(" "),a("td",[e._v("返奖额")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.netReturn))])]),e._v(" "),a("tr",[a("td",[e._v("盈亏牛币")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.expertId||"-"))]),e._v(" "),a("td",[e._v("加奖额")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.bonus||"-"))]),e._v(" "),a("td"),e._v(" "),a("td")])]):e._e()]),e._v(" "),a("el-tab-pane",{attrs:{label:"订单状态变更记录",name:"1"}},[e.orderDetail?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.statusLoading,expression:"statusLoading"}],staticStyle:{width:"100%"},attrs:{data:e.orderChangeList,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"订单ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderStatus",label:"订单状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.tcmOrderStatus2CH(t.row.orderStatus)))])]}}],null,!1,3907129636)}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n              ")]}}],null,!1,3506217864)})],1):e._e()],1)],1)],1)])])},staticRenderFns:[]},Cl=a("VU/8")(kl,$l,!1,null,null,null).exports,Sl={name:"OrderQuizOrderDetail",data:function(){return{activeTab:"1",orderDetail:null,orderChangeList:null,orderLoading:!0,statusLoading:!0,orderStatusList:[],orderStatus2CH:{1:"冻结",2:"结算",3:"退款"},orderType2CH:{1:"积分",2:"N币",3:"积分+N币"},goodType2CH:{1:"主题竞猜",2:"单选项赛事",3:"双选项赛事"}}},props:["id"],created:function(){var e=this;this.getDetail("orderDetail").then(function(t){e.orderDetail=t.data,e.orderLoading=!1},function(t){e.$message.error(t),e.orderLoading=!1}),this.getDetail("orderStatusList").then(function(t){e.orderChangeList=t.data,e.statusLoading=!1},function(t){e.orderChangeList=[],e.$message.error(t),e.statusLoading=!1})},methods:{getDetail:function(e){var t=this;return new Bo.a(function(a,i){t.$service(Oe[e],{method:"get",params:{orderId:t.id}}).then(function(e){200===e.code?a(e):i(e.message)},function(e){e&&i(qo()(e))})})}}},Ll={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"order-quiz-detail"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"payment-detail"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1)]),e._v(" "),a("div",[a("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:e.orderLoading,expression:"orderLoading"}],attrs:{label:"订单详细信息",name:"1"}},[e.orderDetail?a("table",{staticClass:"detail-table"},[a("colgroup",[a("col",{attrs:{width:"10%"}}),e._v(" "),a("col",{attrs:{width:"25%"}}),e._v(" "),a("col",{attrs:{width:"10%"}}),e._v(" "),a("col",{attrs:{width:"25%"}}),e._v(" "),a("col",{attrs:{width:"10%"}}),e._v(" "),a("col",{attrs:{width:"20%"}})]),e._v(" "),a("tr",[a("td",[e._v("订单ID")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.orderId))]),e._v(" "),a("td",[e._v("商品ID")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.subjectQuizId))]),e._v(" "),a("td",[e._v("订单冻结时间")]),e._v(" "),a("td",[e._v(e._s(e._f("dateFormat")([e.orderDetail.frozenTime,"yyyy.MM.dd hh:mm:ss"])))])]),e._v(" "),a("tr",[a("td",[e._v("用户账号")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.account))]),e._v(" "),a("td",[e._v("商品类型")]),e._v(" "),a("td",[e._v(e._s(e.goodType2CH[e.orderDetail.goodsTypeId]||""))]),e._v(" "),a("td",[e._v("订单结算时间")]),e._v(" "),a("td",[e._v(e._s(e._f("dateFormat")([e.orderDetail.updateTime,"yyyy-MM-dd hh:mm:ss"])))])]),e._v(" "),a("tr",[a("td",[e._v("订单金额（积分）")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.orderCredit))]),e._v(" "),a("td",[e._v("商品名称")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.goodsName))]),e._v(" "),a("td",[e._v("退款时间")]),e._v(" "),a("td",[e._v(e._s(e._f("dateFormat")([e.orderDetail.refundTime,"yyyy-MM-dd hh:mm:ss"])))])]),e._v(" "),a("tr",[a("td",[e._v("订单类型")]),e._v(" "),a("td",[e._v(e._s(e.orderType2CH[e.orderDetail.orderType]||"-"))]),e._v(" "),a("td",[e._v("投注项")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.orderSelectionName))]),e._v(" "),a("td",[e._v("退款金额")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.refundCredit))])]),e._v(" "),a("tr",[a("td",[e._v("订单状态")]),e._v(" "),a("td",[e._v(e._s(e.orderStatus2CH[e.orderDetail.orderStatus]||"-"))]),e._v(" "),a("td",[e._v("最终赔率")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.finalOdds))]),e._v(" "),a("td",[e._v("IP")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.ip||"-"))])]),e._v(" "),a("tr",[a("td",[e._v("订单创建时间")]),e._v(" "),a("td",[e._v(e._s(e._f("dateFormat")([e.orderDetail.createTime,"yyyy-MM-dd hh:mm:ss"])))]),e._v(" "),a("td",[e._v("选项结果")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.isWin?"赢":"输"))]),e._v(" "),a("td",[e._v("设备ID")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.deviceId))])]),e._v(" "),a("tr",[a("td",[e._v("返奖额(N币)")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.netReturn||"-"))]),e._v(" "),a("td",[e._v("购买数量")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.buyCount))]),e._v(" "),a("td",[e._v("终端")]),e._v(" "),a("td",[e._v(e._s(e.orderDetail.payTerminal))])]),e._v(" "),a("tr",[a("td",[e._v("备注")]),e._v(" "),a("td",[e._v("-")]),e._v(" "),a("td",[e._v("-")]),e._v(" "),a("td",[e._v("-")]),e._v(" "),a("td",[e._v("-")]),e._v(" "),a("td",[e._v("-")])])]):e._e()]),e._v(" "),a("el-tab-pane",{attrs:{label:"订单状态变更记录",name:"2"}},[e.orderDetail?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.statusLoading,expression:"statusLoading"}],staticStyle:{width:"100%"},attrs:{data:e.orderChangeList,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"订单ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderStatus",label:"订单状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.orderStatus2CH[t.row.orderStatus]))])]}}],null,!1,2361922361)}),e._v(" "),a("el-table-column",{attrs:{prop:"quizOrderStatusId",label:"交易ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n              ")]}}],null,!1,3506217864)})],1):e._e()],1)],1)],1)])])},staticRenderFns:[]},Dl=a("VU/8")(Sl,Ll,!1,null,null,null).exports,Pl={name:"ExpertDialog",props:{expertInfo:{type:Object,default:function(){return{}}},protocolList:{type:Array,default:function(){return[]}},visible:{type:Boolean,default:!1}},data:function(){var e=this;return{form:{eType:"",avatar:"",account:"",nickname:"",slogan:"",lotteryCategorys:[],region:"",accountType:"",selectedPrice:[],optionalNinePrice:[],winningColoursPrice:[],numLotteryPrice:[],isLimit:!1,postLimit:"",isSpotThreadLimit:!1,spotThreadLimit:"",realName:"",areaCode:"86",phone:"",idCard:"",descLink:"",description:"",divideRate:"",startTime:"",endTime:""},formRules:{eType:[{required:!0,message:"必填",trigger:"blur"}],avatar:[{required:!0,message:"头像不为空",trigger:"blur"}],account:[{required:!0,message:"账号不为空",trigger:["blur","change"]},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],nickname:[{required:!0,message:"昵称不为空",trigger:["blur","change"]},{max:10,message:"昵称最多10个字符",trigger:["blur","change"]}],slogan:[{required:!0,message:"认证不为空",trigger:["blur","change"]},{max:10,message:"认证最多5个字符",trigger:["blur","change"]}],lotteryCategorys:[{validator:function(e,t,a){t.length<1?a(new Error("彩种至少选择1种")):a()},trigger:["blur","change"]}],region:[{required:!0,message:"地区必选",trigger:["blur","change"]}],accountType:[{required:!0,message:"分类必选",trigger:["blur","change"]}],selectedPrice:[{validator:function(t,a,i){a.length<1&&(e.form.lotteryCategorys.indexOf(1)>-1||e.form.lotteryCategorys.indexOf(2)>-1)?i(new Error("足篮价格至少选择一项")):i()},trigger:["blur","change"]}],optionalNinePrice:[{validator:function(t,a,i){a.length<1&&e.form.lotteryCategorys.indexOf(4)>-1?i(new Error("任九价格至少选择一项")):i()},trigger:["blur","change"]}],winningColoursPrice:[{validator:function(t,a,i){a.length<1&&e.form.lotteryCategorys.indexOf(3)>-1?i(new Error("胜负彩价格至少选择一项")):i()},trigger:["blur","change"]}],numLotteryPrice:[{validator:function(t,a,i){a.length<1&&e.form.lotteryCategorys.indexOf(100)>-1?i(new Error("数字彩价格至少选择一项")):i()},trigger:["blur","change"]}],realName:[{required:!0,message:"姓名不为空",trigger:["blur","change"]},{max:99,message:"姓名最多99个字符",trigger:["blur","change"]}],phone:[{required:!0,message:"手机号不为空",trigger:["blur","change"]},{pattern:/^\d+$/,message:"手机号必须全为数字",trigger:["blur","change"]},{max:30,message:"手机号最多30个字符",trigger:["blur","change"]}],idCard:[{required:!0,message:"身份证号不为空",trigger:["blur","change"]},{max:50,message:"身份证号最多50个字符",trigger:["blur","change"]}],descLink:[{type:"url",message:"请输入正确的URL",trigger:["blur","change"]}],description:[{required:!0,message:"简介不为空",trigger:["blur","change"]},{max:75,message:"简介最多75个字符",trigger:["blur","change"]}]},postLimitRule:function(e,t,a){t&&-1!==t&&!/^\d{1,2}$/.test(t)?a(new Error("限制文章数为0-99整数")):a()},spotThreadLimitRule:function(e,t,a){t&&-1!==t&&!/^\d{1,2}$/.test(t)?a(new Error("限制文章数为0-99整数")):a()},priceList:{},updateLoading:!1,lotteryList:[]}},computed:{idCardAuth:function(){return!this.form.userId||mh([33,34],this.$store.state.userInfo.roleList)}},filters:{protocolStatus2CH:function(e){return{"-1":"待确认",1:"正常",0:"终止"}[e]||"-"}},mounted:function(){this.getLottery(),this.getPriceList()},methods:{divideRule:function(e,t,a){if(this.form.userId&&!this.form.showAddProtocol)a();else{var i=this.$refs.startTime.value,r=this.$refs.endTime.value;t?/^\d+$/.test(t)?t<0||t>99?a(new Error("分成比例0-99")):i?r?this.isMonthLastDay(r)?a():a(new Error("协议结束时间必须为当月最后一天")):a(new Error("协议结束时间不为空")):a(new Error("协议开始时间不为空")):a(new Error("分成比例必须为整数")):a(new Error("分成比例不为空"))}},handlerAreaCode:function(){this.form.areaCode=this.form.areaCode.replace(/[^0-9]/g,"")},isMonthLastDay:function(e){e=e.replace(/\.|\//g,"-");var t=new Date(e+" 00:00:00"),a=11===t.getMonth()?0:t.getMonth()+1,i=11===t.getMonth()?t.getFullYear()+1:t.getFullYear(),r=new Date(new Date(i,a,1).getTime()-864e5).getTime();return t.getTime()===r},getLottery:function(){var e=this;this.$service(h).then(function(t){200===t.code&&(e.lotteryList=t.data.sort(hh("cId")))})},getPriceList:function(){var e=this;this.$service(at[0].list).then(function(t){200===t.code&&t.data.forEach(function(t){0===t.status&&(e.priceList[t.threadPriceId]=t.redCurrency+"豆")})})},beforeAvatarUpload:function(e){if(e.size/1024/1024>5)return this.$message.error("上传头像图片大小不能超过 5MB!"),!1},uploadAvatar:function(e){var t=this;En(e.file,"user").then(function(e){t.form.avatar=e},function(e){e&&t.$message.error("上传头像失败，请稍后再传！")})},protocolButton:function(){this.$set(this.form,"showAddProtocol",!this.form.showAddProtocol),this.$refs.expertForm.clearValidate()},dataToForm:function(e){var t={userId:e.userId,eType:e.eType+"",avatar:e.avatar,account:e.account,nickname:e.nickname,slogan:e.slogan,lotteryCategorys:[],region:e.region+"",accountType:e.accountType+"",selectedPrice:[],optionalNinePrice:[],winningColoursPrice:[],numLotteryPrice:[],isLimit:-1!==e.postLimit,postLimit:-1===e.postLimit?"":e.postLimit,isSpotThreadLimit:-1!==e.spotThreadLimit,spotThreadLimit:-1!==e.spotThreadLimit?e.spotThreadLimit:"",realName:e.realName,areaCode:e.areaCode?e.areaCode+"":"86",phone:e.phone,idCard:e.idCard,descLink:e.descLink,description:e.description},a=[],i=[],r=[],o=[],n=[];return e.lotteryCategoryList&&e.lotteryCategoryList.length>0&&e.lotteryCategoryList.forEach(function(e){a.push(e.lotteryCategoryId)}),e.expertThreadPriceVoList&&e.expertThreadPriceVoList.length>0&&e.expertThreadPriceVoList.forEach(function(e){e.selected&&i.push(e.threadPriceId+"")}),e.optionalNinePriceList&&e.optionalNinePriceList.length>0&&e.optionalNinePriceList.forEach(function(e){e.selected&&r.push(e.threadPriceId+"")}),e.winningColoursPriceList&&e.winningColoursPriceList.length>0&&e.winningColoursPriceList.forEach(function(e){e.selected&&o.push(e.threadPriceId+"")}),e.numLotteryPriceList&&e.numLotteryPriceList.length>0&&e.numLotteryPriceList.forEach(function(e){e.selected&&n.push(e.threadPriceId+"")}),t.lotteryCategorys=a,t.selectedPrice=i,t.optionalNinePrice=r,t.winningColoursPrice=o,t.numLotteryPrice=n,t},submitExpert:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a={eType:t.form.eType,avatar:t.form.avatar,nickname:t.form.nickname,slogan:t.form.slogan,"lotteryCategoryId[]":t.form.lotteryCategorys.join(","),region:parseInt(t.form.region),accountType:parseInt(t.form.accountType),"threadPriceId[]":t.form.selectedPrice.join(","),"optionalNinePriceId[]":t.form.optionalNinePrice.join(","),"winningColoursPriceId[]":t.form.winningColoursPrice.join(","),"numLotteryPriceId[]":t.form.numLotteryPrice.join(","),postLimit:t.form.isLimit?t.form.postLimit:-1,descLink:t.form.descLink,description:t.form.description,realName:t.form.realName,spotThreadLimit:t.form.isSpotThreadLimit?t.form.spotThreadLimit:-1};if(t.form.userId||(a.account=t.form.account),t.form.userId&&!t.form.showAddProtocol||"0"!==t.form.eType||(a.divideRate=parseInt(t.form.divideRate)/100,a.startTime=t.form.startTime,a.endTime=t.form.endTime),t.idCardAuth&&(a.areaCode=t.form.areaCode||"86",a.phone=t.form.phone,a.idCard=t.form.idCard),t.updateLoading=!0,t.$service(t.form.userId?Ge:Ve,{method:"post",urlParams:t.form.userId?{userId:t.form.userId}:null,data:a}).then(function(e){200===e.code?(t.updateLoading=!1,t.$emit("closeExpertDialog"),t.$emit("success")):(t.updateLoading=!1,t.$message.error(e.code+":"+e.message))},function(e){t.updateLoading=!1,t.$message.error(qo()(e))}),t.form.userId)for(var i=t.protocolList.length,r=0;r<i;r++){var o=t.protocolList[r].divideRateNumber/100;0!==t.protocolList[r].protocolStatus&&o!==t.protocolList[r].divideRate&&t.updateDivideRate(t.protocolList[r].protocolId,o)}}})},updateDivideRate:function(e,t){var a=this;this.$service(et,{method:"post",urlParams:{protocolId:e},data:{divideRate:t}}).then(function(e){200===e.code||a.$message.error(e.code+":"+e.message)},function(e){a.$message.error(qo()(e))})}},watch:{visible:function(e){var t=this;e?(this.form=tn()({},this.expertInfo.userId?this.dataToForm(this.expertInfo):{eType:"",avatar:"",account:"",nickname:"",slogan:"",lotteryCategorys:[],region:"",accountType:"",selectedPrice:[],optionalNinePrice:[],winningColoursPrice:[],numLotteryPrice:[],isLimit:!1,postLimit:"",realName:"",areaCode:"86",phone:"",idCard:"",descLink:"",description:"",divideRate:"",startTime:"",endTime:""}),this.$nextTick(function(){t.$refs.expertForm.clearValidate()})):this.$emit("closeExpertDialog")}}},zl={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.form.userId?"修改专家":"新增专家",visible:e.visible,"close-on-click-modal":!1,width:"600px",center:""},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"expertForm",attrs:{model:e.form,rules:e.formRules,disabled:e.updateLoading,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:" ",prop:"eType"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.form.eType,callback:function(t){e.$set(e.form,"eType",t)},expression:"form.eType"}},[e._v("正式专家")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.form.eType,callback:function(t){e.$set(e.form,"eType",t)},expression:"form.eType"}},[e._v("预选专家")])],1),e._v(" "),a("el-form-item",{attrs:{label:"头像",prop:"avatar"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{accept:".jpeg,.jpg,.png,.gif","show-file-list":!1,"http-request":e.uploadAvatar,"before-upload":e.beforeAvatarUpload}},[e.form.avatar?a("img",{staticClass:"avatar",attrs:{src:e.form.avatar}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"账号",prop:"account"}},[a("el-input",{attrs:{autocomplete:"off",disabled:e.form.userId},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account",t)},expression:"form.account"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"认证",prop:"slogan"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.slogan,callback:function(t){e.$set(e.form,"slogan",t)},expression:"form.slogan"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"彩种",prop:"lotteryCategorys"}},[a("el-checkbox-group",{model:{value:e.form.lotteryCategorys,callback:function(t){e.$set(e.form,"lotteryCategorys",t)},expression:"form.lotteryCategorys"}},e._l(e.lotteryList,function(t){return a("el-checkbox",{key:t.cId,attrs:{label:t.cId}},[e._v(e._s(t.cName))])}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"地区",prop:"region"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}},[e._v("中国")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}},[e._v("外国")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}},[e._v("外国人中国卡")]),e._v(" "),a("el-radio",{attrs:{label:"3"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}},[e._v("机构")])],1),e._v(" "),a("el-form-item",{attrs:{label:"分类",prop:"accountType"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.form.accountType,callback:function(t){e.$set(e.form,"accountType",t)},expression:"form.accountType"}},[e._v("个人")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.form.accountType,callback:function(t){e.$set(e.form,"accountType",t)},expression:"form.accountType"}},[e._v("机构")])],1),e._v(" "),a("el-form-item",{attrs:{label:"足篮价格",prop:"selectedPrice"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.form.selectedPrice,callback:function(t){e.$set(e.form,"selectedPrice",t)},expression:"form.selectedPrice"}},e._l(e.priceList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.lotteryCategorys.indexOf(3)>-1,expression:"form.lotteryCategorys.indexOf(3) > -1"}],attrs:{label:"胜负彩价格",prop:"winningColoursPrice"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.form.winningColoursPrice,callback:function(t){e.$set(e.form,"winningColoursPrice",t)},expression:"form.winningColoursPrice"}},e._l(e.priceList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.lotteryCategorys.indexOf(100)>-1,expression:"form.lotteryCategorys.indexOf(100) > -1"}],attrs:{label:"数字彩价格",prop:"numLotteryPrice"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.form.numLotteryPrice,callback:function(t){e.$set(e.form,"numLotteryPrice",t)},expression:"form.numLotteryPrice"}},e._l(e.priceList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.lotteryCategorys.indexOf(4)>-1,expression:"form.lotteryCategorys.indexOf(4) > -1"}],attrs:{label:"任九价格",prop:"optionalNinePrice"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.form.optionalNinePrice,callback:function(t){e.$set(e.form,"optionalNinePrice",t)},expression:"form.optionalNinePrice"}},e._l(e.priceList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"非临场发文",prop:"postLimit",rules:[{required:e.form.isLimit,message:"限制发文数不为空",trigger:["blur","change"]},{validator:e.postLimitRule,trigger:["blur","change"]}]}},[a("el-checkbox",{model:{value:e.form.isLimit,callback:function(t){e.$set(e.form,"isLimit",t)},expression:"form.isLimit"}},[e._v("限制非临场发文数")]),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.form.isLimit,expression:"form.isLimit"}],staticStyle:{width:"100px"},attrs:{autocomplete:"off"},model:{value:e.form.postLimit,callback:function(t){e.$set(e.form,"postLimit",t)},expression:"form.postLimit"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"临场发文",prop:"spotThreadLimit",rules:[{required:e.form.isSpotThreadLimit,message:"限制发临场文数不为空",trigger:["blur","change"]},{validator:e.spotThreadLimitRule,trigger:["blur","change"]}]}},[a("el-checkbox",{model:{value:e.form.isSpotThreadLimit,callback:function(t){e.$set(e.form,"isSpotThreadLimit",t)},expression:"form.isSpotThreadLimit"}},[e._v("限制临场发文数")]),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.form.isSpotThreadLimit,expression:"form.isSpotThreadLimit"}],staticStyle:{width:"100px"},attrs:{autocomplete:"off"},model:{value:e.form.spotThreadLimit,callback:function(t){e.$set(e.form,"spotThreadLimit",t)},expression:"form.spotThreadLimit"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"realName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.realName,callback:function(t){e.$set(e.form,"realName",t)},expression:"form.realName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[e._v("\n      + "),a("el-input",{staticStyle:{width:"70px"},attrs:{disabled:!e.idCardAuth},nativeOn:{keyup:function(t){return e.handlerAreaCode(t)}},model:{value:e.form.areaCode,callback:function(t){e.$set(e.form,"areaCode",t)},expression:"form.areaCode"}}),e._v(" "),a("el-input",{staticStyle:{width:"300px"},attrs:{autocomplete:"off",disabled:!e.idCardAuth},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号",prop:"idCard"}},[a("el-input",{attrs:{autocomplete:"off",disabled:!e.idCardAuth},model:{value:e.form.idCard,callback:function(t){e.$set(e.form,"idCard",t)},expression:"form.idCard"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"简介URL",prop:"descLink"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.descLink,callback:function(t){e.$set(e.form,"descLink",t)},expression:"form.descLink"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"简介",prop:"description"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请填写简介"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),"0"===e.form.eType?a("el-form-item",{attrs:{label:"协议",prop:"divideRate",rules:[{validator:e.divideRule,trigger:["blur","change"]}]}},[a("table",{staticClass:"expert-form-table"},[a("colgroup",[a("col",{attrs:{width:"25%"}}),e._v(" "),a("col",{attrs:{width:"25%"}}),e._v(" "),a("col",{attrs:{width:"25%"}}),e._v(" "),a("col",{attrs:{width:"25%"}})]),e._v(" "),a("tr",[a("td",[e._v("状态")]),e._v(" "),a("td",[e._v("分成比例")]),e._v(" "),a("td",[e._v("开始时间")]),e._v(" "),a("td",[e._v("结束时间")])]),e._v(" "),e._l(e.protocolList,function(t){return a("tr",{key:t.protocolId},[a("td",[e._v(e._s(e._f("protocolStatus2CH")(t.protocolStatus)))]),e._v(" "),a("td",[0===t.protocolStatus?a("p",[e._v(e._s(e._f("toPercent")(t.divideRate)))]):a("el-input",{staticStyle:{width:"60px"},model:{value:t.divideRateNumber,callback:function(a){e.$set(t,"divideRateNumber",a)},expression:"item.divideRateNumber"}}),e._v("%\n          ")],1),e._v(" "),a("td",[e._v(e._s(t.startTime))]),e._v(" "),a("td",[e._v(e._s(t.endTime))])])}),e._v(" "),e.form.showAddProtocol||!e.form.userId?a("tr",[a("td",[e._v("待确认")]),e._v(" "),a("td",[a("el-input",{staticStyle:{width:"60px"},model:{value:e.form.divideRate,callback:function(t){e.$set(e.form,"divideRate",t)},expression:"form.divideRate"}}),e._v("%\n          ")],1),e._v(" "),a("td",[a("el-date-picker",{ref:"startTime",staticStyle:{width:"130px"},attrs:{type:"date","value-format":"yyyy.MM.dd",placeholder:"选择日期","picker-options":{disabledDate:function(t){return 0!==new Date(e.form.endTime).getTime()&&t.getTime()>new Date(e.form.endTime).getTime()}}},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}})],1),e._v(" "),a("td",[a("el-date-picker",{ref:"endTime",staticStyle:{width:"130px"},attrs:{type:"date","value-format":"yyyy.MM.dd",placeholder:"选择日期","picker-options":{disabledDate:function(t){return 0!==new Date(e.form.startTime).getTime()&&t.getTime()<new Date(e.form.startTime).getTime()}}},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1)]):e._e()],2)]):e._e(),e._v(" "),e.form.userId&&"0"===e.form.eType?a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.protocolButton()}}},[e._v(e._s(e.form.showAddProtocol?"取消协议":"增加协议")+"\n      ")])],1):e._e()],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitExpert("expertForm")}}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var Hl=a("VU/8")(Pl,zl,!1,function(e){a("ZMWB")},null,null).exports,Ml={name:"ExpertList",data:function(){return{listType:"filter",sortRrders:["descending","ascending",null],pageIndex:1,pageSize:25,pageCount:1,list:[],loading:!1,filterQuery:{categoryId:1},searchQuery:"",lotteryList:[],tableHeight:null,dialogAffiche:!1,formAffiche:{content:""},formAfficheRules:{content:[{required:!0,message:"公告内容必填",trigger:"blur"},{max:500,message:"公告字数不超过500字",trigger:"blur"}]},dialogAfficheList:!1,afficheLoading:!1,afficheListLoading:!1,afficheList:[],afficheOffset:0,afficheLimit:20,afficheTotal:1,dialogExpert:!1}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getLottery(),this.getExpertList(),this.setHeight()},filters:{expertStatus2CH:function(e){return{0:"正常",1:"下线"}[e]||"-"},eType2CH:function(e){return{0:"正式专家",1:"预选专家"}[e]||"-"},serviceStatus2CH:function(e){return{"-1":"待确认",1:"正常",0:"终止"}[e]||"-"}},components:{VExpertDialog:Hl},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getLottery:function(){var e=this;this.$service(h).then(function(t){200===t.code&&(e.lotteryList=t.data.sort(hh("cId")),e.setHeight())})},getExpertList:function(e,t){var a=this;if(!this.loading){this.loading=!0,this.listType="filter",this.searchQuery="",this.pageIndex=fh(e)?e:1,e&&"category"!==e||(this.filterQuery.sortField=null);var i={};i="eType"===this.filterQuery.categoryId?{pageIndex:this.pageIndex,pageSize:this.pageSize,lotteryCategoryId:1,eType:1}:{pageIndex:this.pageIndex,pageSize:this.pageSize,lotteryCategoryId:this.filterQuery.categoryId||1,eType:0},this.filterQuery.sortField&&(i=tn()(i,{sortField:this.filterQuery.sortField,sortDesc:this.filterQuery.sortDesc})),this.$service(Ae,{params:i}).then(function(t){a.loading=!1,200===t.code?(a.list=t.data.records||[],a.$refs.elTable.bodyWrapper.scrollTop=0,a.pageCount=t.data.page&&t.data.page.pageCount?t.data.page.pageCount:1,e&&"category"!==e||a.$refs.elTable.clearSort()):a.$message.error(t.code+":"+t.message)},function(e){e&&(a.loading=!1,a.$message.error(qo()(e)))})}},sortList:function(e,t,a){this.filterQuery.sortField=e.prop,"eStatus"===e.prop?this.filterQuery.sortDesc="ascending"===e.order||"descending"!==e.order&&null:this.filterQuery.sortDesc="ascending"!==e.order&&("descending"===e.order||null),this.getExpertList("sort")},searchExpertList:function(e){var t=this;if(!this.loading)if(this.searchQuery){if(this.searchQuery.length>50)return this.$message.warning("搜索条件不超过50字");this.loading=!0,this.listType="search",this.pageIndex=e||1,this.filterQuery.categoryId="",this.$service(Ue,{method:"post",data:{pageIndex:this.pageIndex,pageSize:this.pageSize,q:this.searchQuery}}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.records||[],t.$refs.elTable.bodyWrapper.scrollTop=0,t.pageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))})}else this.filterQuery.categoryId=1,this.getExpertList()},pageChange:function(e){switch(this.listType){case"filter":this.getExpertList(e);break;case"search":this.searchExpertList(e)}},changeWeightColumn:function(e,t){var a=this;this.$prompt("",2===t?"修改篮球权重":"修改足球权重",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^-?\d{1,3}$/,inputErrorMessage:"-999-999之间",closeOnClickModal:!1,inputValue:2===t?e.basketballWeight:e.weight}).then(function(i){var r=i.value;a.$service(qe,{method:"post",urlParams:{userId:e.userId},data:{lotteryCategoryId:t,weight:r}}).then(function(i){200===i.code?(2===t?e.basketballWeight=r:e.weight=r,a.$message.success("修改成功！")):a.$message.error(i.code+":"+i.message)},function(e){a.$message.error(qo()(e))})})},afficheAddPop:function(){var e=this;this.formAffiche={content:""},this.dialogAffiche=!0,this.$nextTick(function(){e.$refs.formAffiche.clearValidate()})},submitAffiche:function(e){var t=this;this.$refs[e].validate(function(e){e&&t.$service(je,{method:"post",data:{content:t.formAffiche.content}}).then(function(e){200===e.code?(t.dialogAffiche=!1,t.$message.success("公告发布成功！")):t.$message.error(e.code+":"+e.message)},function(e){t.$message.error(qo()(e))})})},afficheListPop:function(){this.dialogAfficheList=!0,this.afficheList=[],this.getAfficheList()},getAfficheList:function(e){var t=this;this.afficheLoading||(this.afficheListLoading=!0,this.afficheOffset=e?(e-1)*this.afficheLimit:0,this.$service(Qe,{urlParams:{offset:this.afficheOffset,limit:this.afficheLimit}}).then(function(e){t.afficheListLoading=!1,200===e.code?(t.afficheList=e.data.data||[],t.$refs.elAfficheTable.bodyWrapper.scrollTop=0,t.afficheTotal=e.data.total?e.data.total:1):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.afficheListLoading=!1,t.$message.error(qo()(e)))}))}},watch:{windowHeight:function(){this.setHeight()}}},Fl={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"expert-list"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.dialogExpert=!0}}},[e._v("添加专家")]),e._v(" "),a("el-input",{staticStyle:{width:"auto"},attrs:{placeholder:"专家名/专家ID/专家通行证","prefix-icon":"el-icon-search",clearable:"",size:"mini"},on:{change:function(t){return e.searchExpertList()}},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}})],1)]),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.filterQuery,size:"mini",disabled:e.loading}},[e.lotteryList.length>0?a("el-form-item",[a("el-radio-group",{on:{change:function(t){return e.getExpertList("category")}},model:{value:e.filterQuery.categoryId,callback:function(t){e.$set(e.filterQuery,"categoryId",t)},expression:"filterQuery.categoryId"}},[e._l(e.lotteryList,function(t){return a("el-radio-button",{key:t.cId,attrs:{label:t.cId}},[e._v(e._s(t.cName))])}),e._v(" "),a("el-radio-button",{attrs:{label:"eType"}},[e._v("预选专家")])],2)],1):e._e(),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.afficheAddPop()}}},[e._v("添加公告")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.afficheListPop()}}},[e._v("公告列表")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight},on:{"sort-change":e.sortList}},[a("el-table-column",{attrs:{label:"专家名称","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"ExpertDetail",params:{id:t.row.userId}}}},[e._v(e._s(t.row.nickname))]),e._v(" "),t.row.postLimit>-1?a("el-tag",{staticStyle:{color:"#fff"},attrs:{size:"mini",color:"#e62121"}},[e._v(e._s(t.row.postLimit))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"专家ID",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"ExpertDetail",params:{id:t.row.userId}}}},[e._v(e._s(t.row.userId))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"账号","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"ExpertDetail",params:{id:t.row.userId}}}},[e._v(e._s(t.row.account))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"eType",label:"类型","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("eType2CH")(t.row.eType))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"threadCount",label:"文章数",sortable:"filter"===e.listType&&"custom","sort-orders":e.sortRrders,width:"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"follower",label:"粉丝数",sortable:"filter"===e.listType&&"custom","sort-orders":e.sortRrders,width:"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalEarningRate",label:"总盈利率",sortable:"filter"===e.listType&&"custom","sort-orders":e.sortRrders,width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.totalEarningRate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"发布时间","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"lastLogintime",label:"最后登录时间","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.lastLogintime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"eStatus",label:"专家状态",sortable:"filter"===e.listType&&"custom","sort-orders":e.sortRrders,width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("expertStatus2CH")(t.row.eStatus))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"serviceStatus",label:"协议状态",sortable:"filter"===e.listType&&"custom","sort-orders":e.sortRrders,width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("serviceStatus2CH")(t.row.serviceStatus))+"\n      ")]}}])}),e._v(" "),1===e.filterQuery.categoryId||"search"===e.listType?a("el-table-column",{attrs:{prop:"weight",label:"search"===e.listType?"足球权重":"权重",sortable:"filter"===e.listType&&"custom","sort-orders":e.sortRrders,width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.changeWeightColumn(t.row,1)}}},[e._v(e._s(t.row.weight))])]}}],null,!1,1893260145)}):e._e(),e._v(" "),2===e.filterQuery.categoryId||"search"===e.listType?a("el-table-column",{attrs:{prop:"basketballWeight",label:"search"===e.listType?"篮球权重":"权重",sortable:"filter"===e.listType&&"custom","sort-orders":e.sortRrders,width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.changeWeightColumn(t.row,2)}}},[e._v(e._s(t.row.basketballWeight))])]}}],null,!1,3967718427)}):e._e(),e._v(" "),e.filterQuery.categoryId>2?a("el-table-column",{attrs:{prop:"weight",label:"权重",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"}},[e._v(e._s(t.row.weight))])]}}],null,!1,3588886801)}):e._e()],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.pageChange}}),e._v(" "),a("el-dialog",{attrs:{title:"添加公告","close-on-click-modal":!1,visible:e.dialogAffiche,width:"500px",center:""},on:{"update:visible":function(t){e.dialogAffiche=t}}},[a("el-form",{ref:"formAffiche",attrs:{model:e.formAffiche,rules:e.formAfficheRules,disabled:e.afficheLoading,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"公告内容",prop:"content"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"此公告会即时显示到专家后台，请谨慎填写"},model:{value:e.formAffiche.content,callback:function(t){e.$set(e.formAffiche,"content",t)},expression:"formAffiche.content"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogAffiche=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",loading:e.afficheLoading},on:{click:function(t){return e.submitAffiche("formAffiche")}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"公告列表","close-on-click-modal":!1,visible:e.dialogAfficheList,width:"700px",center:""},on:{"update:visible":function(t){e.dialogAfficheList=t}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.afficheListLoading,expression:"afficheListLoading"}],ref:"elAfficheTable",attrs:{data:e.afficheList,stripe:"","max-height":400}},[a("el-table-column",{attrs:{prop:"afficheId",label:"公告ID",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"afficheContent",label:"公告内容"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"发布时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"adminName",label:"发布人",width:"80"}})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":Math.floor(e.afficheOffset/e.afficheLimit)+1,total:e.afficheTotal,"page-size":e.afficheLimit},on:{"current-change":e.getAfficheList,"update:currentPage":function(t){e.$set(Math,"floor(afficheOffset/afficheLimit) + 1",t)},"update:current-page":function(t){e.$set(Math,"floor(afficheOffset/afficheLimit) + 1",t)}}})],1),e._v(" "),a("v-expert-dialog",{attrs:{visible:e.dialogExpert},on:{closeExpertDialog:function(t){e.dialogExpert=!1},success:function(t){return e.getExpertList()}}})],1)},staticRenderFns:[]},Nl=a("VU/8")(Ml,Fl,!1,null,null,null).exports,El={name:"ExpertDetail",data:function(){return{activeTab:"0",fromRouter:null,currentRouter:null,loading:!1,expertInfo:"",expertStat:"",dialogExpert:!1,protocolList:[],threadList:[],pageIndex:1,pageSize:10,pageCount:1,threadLoading:!1,numLotteryThreadList:[],numLotteryPageIndex:1,numLotteryPageSize:10,numLotteryPageCount:1,numLotteryThreadLoading:!1,numLotteryType:{101:"双色球",102:"3D",103:"大乐透",104:"排列3",105:"排列5"},isLottery:!1,isNumlottery:!1}},created:function(){this.initRouter(this.$route.params.id)},filters:{expertStatus2CH:function(e){return{0:"正常",1:"下线"}[e]||"-"},serviceStatus2CH:function(e){return{"-1":"待确认",1:"正常",0:"终止"}[e]||"-"},region2CH:function(e){return{0:"中国",1:"外国",2:"外国人中国卡",3:"机构"}[e]||"-"}},components:{VExpertDialog:Hl,TableScroll:Rs},methods:{initRouter:function(e){var t=this;this.getDetail(e).then(function(e){e&&(t.getStat(e.userId),t.getThreadList())})},getDetail:function(e){var t=this;if(!this.loading)return this.loading=!0,On(e).then(function(e){t.expertInfo=e,t.expertInfo.lotteryCategoryList.sort(hh("lotteryCategoryId"));var a=[];return t.expertInfo.lotteryCategoryList.forEach(function(e){a.push(e.lotteryCategoryName)}),t.expertInfo.lotteryCategoryNames=a.join("、"),t.loading=!1,Bo.a.resolve(e)}).catch(function(e){t.loading=!1,t.$message.error(qo()(e))})},getStat:function(e){var t=this;this.$service(Be,{method:"get",urlParams:{userId:e}}).then(function(e){200===e.code&&(t.expertStat=e.data)})},handleClickTabs:function(){"0"===this.activeTab&&this.threadList.length<1&&this.getThreadList(),"1"===this.activeTab&&this.numLotteryThreadList.length<1&&this.getNumLotteryList()},getThreadList:function(e){var t=this;this.threadLoading||(this.threadLoading=!0,this.pageIndex=e||1,this.$service(Xe,{urlParams:{userId:this.expertInfo.userId,pageIndex:this.pageIndex,pageSize:this.pageSize}}).then(function(e){t.threadLoading=!1,200===e.code?(t.threadList=e.data.records||[],t.pageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.threadLoading=!1,t.$message.error(qo()(e)))}))},getNumLotteryList:function(e){var t=this;this.numLotteryThreadLoading||(this.numLotteryThreadLoading=!0,this.numLotteryPageIndex=e||1,this.$service(Ke,{urlParams:{pageIndex:this.numLotteryPageIndex,pageSize:this.numLotteryPageSize},params:{userId:this.expertInfo.userId}}).then(function(e){t.numLotteryThreadLoading=!1,200===e.code?(t.numLotteryThreadList=e.data.records||[],t.numLotteryPageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.numLotteryThreadLoading=!1,t.$message.error(qo()(e)))}))},getProtocolList:function(e){var t=this;return this.$service(Ye,{urlParams:{userId:e}}).then(function(e){if(200===e.code)return t.protocolList=e.data||[],t.protocolList.forEach(function(e){t.$set(e,"divideRateNumber",(100*e.divideRate).toFixed(0))}),Bo.a.resolve(e.data);t.$message.error(e.code+":"+e.message)},function(e){t.$message.error(qo()(e))})},editorExpert:function(){var e=this;this.getProtocolList(this.$route.params.id).then(function(){e.dialogExpert=!0})},onOffLine:function(e){var t=this;this.$confirm("确定"+(e?"下线":"上线")+"专家？","",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){t.$service(e?Je:Ze,{urlParams:{userId:t.expertInfo.userId}}).then(function(a){200===a.code?(t.expertInfo.eStatus=e,t.$message.success((e?"下线":"上线")+"成功！")):t.$message.error(a.code+":"+a.message)},function(e){t.$message.error(qo()(e))})})}},beforeRouteUpdate:function(e,t,a){this.initRouter(e.params.id),a()},beforeRouteEnter:function(e,t,a){a(function(a){a.fromRouter=t&&t.name?t:null,a.currentRouter=e})}},Rl={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"expert-detail"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e.fromRouter?a("el-breadcrumb-item",{attrs:{to:{path:e.fromRouter.fullPath}}},[e._v(e._s(e.fromRouter.meta.title))]):e._e(),e._v(" "),e.currentRouter?a("el-breadcrumb-item",[e._v(e._s(e.currentRouter.meta.title))]):e._e()],1)],1)]),e._v(" "),a("table-scroll",[e.expertInfo?a("table",{staticClass:"expert-table",staticStyle:{"min-width":"800px"}},[a("tr",[a("td",{staticClass:"avatar",attrs:{rowspan:"5"}},[a("img",{attrs:{src:e.expertInfo.avatar+"?imageView&thumbnail=100y100&quality=85",alt:"expertInfo.nickname"}})]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("昵称：")]),e._v(" "),a("td",[e._v(e._s(e.expertInfo.nickname))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("姓名：")]),e._v(" "),a("td",[e._v(e._s(e.expertInfo.realName))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("创建时间：")]),e._v(" "),a("td",[e._v(e._s(e._f("dateFormat")([e.expertInfo.createTime,"yyyy-MM-dd hh:mm:ss"])))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("专家状态：")]),e._v(" "),a("td",[e._v(e._s(e._f("expertStatus2CH")(e.expertInfo.eStatus)))])]),e._v(" "),a("tr",[a("td",{staticClass:"bg-fa"},[e._v("认证：")]),e._v(" "),a("td",[e._v(e._s(e.expertInfo.slogan))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("手机：")]),e._v(" "),a("td",[e._v(e._s(e.expertInfo.phone))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("最后登录：")]),e._v(" "),a("td",[e._v(e._s(e._f("dateFormat")([e.expertInfo.lastLoginTime,"yyyy-MM-dd hh:mm:ss"])))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("协议状态：")]),e._v(" "),a("td",[e._v(e._s(e._f("serviceStatus2CH")(e.expertInfo.serviceStatus)))])]),e._v(" "),a("tr",[a("td",{staticClass:"bg-fa"},[e._v("账号：")]),e._v(" "),a("td",[e._v(e._s(e.expertInfo.account))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("彩种：")]),e._v(" "),a("td",[e._v(e._s(e.expertInfo.lotteryCategoryNames))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("擅长联赛：")]),e._v(" "),a("td",[e._v(e._s(e.expertInfo.beGoodAtLeague))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("地区：")]),e._v(" "),a("td",[e._v(e._s(e._f("region2CH")(e.expertInfo.region)))])]),e._v(" "),a("tr",[a("td",{staticClass:"bg-fa"},[e._v("简介：")]),e._v(" "),a("td",[e._v(e._s(e.expertInfo.description))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("简介URL：")]),e._v(" "),a("td",[e._v(e._s(e.expertInfo.descLink))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("分类：")]),e._v(" "),a("td",[e._v(e._s(e._f("accountType2CH")([e.expertInfo.accountType])))]),e._v(" "),a("td",{staticStyle:{"min-width":"130px"},attrs:{colspan:"2"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.editorExpert()}}},[e._v("修改")]),e._v(" "),0===e.expertInfo.eStatus?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.onOffLine(1)}}},[e._v("下线")]):e._e(),e._v(" "),1===e.expertInfo.eStatus?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.onOffLine(0)}}},[e._v("恢复")]):e._e()],1)]),e._v(" "),a("tr",[a("td",{staticClass:"bg-fa"},[e._v("最近连红数：")]),e._v(" "),a("td",{staticClass:"text-red"},[e._v(e._s(e.expertInfo.continuityWin))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("最大连红数：")]),e._v(" "),a("td",{staticClass:"text-red"},[e._v(e._s(e.expertInfo.maxContinuityWin))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("文章数：")]),e._v(" "),a("td",[e._v(e._s(e.expertInfo.threadCount))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("粉丝数：")]),e._v(" "),a("td",[e._v(e._s(e.expertInfo.follower))])])]):e._e()]),e._v(" "),a("table-scroll",[e.expertStat&&e.expertStat.commonStatDetailVo?a("table",{staticClass:"expert-table stat",staticStyle:{"min-width":"620px"}},[a("thead",[a("tr",[a("th",{attrs:{colspan:"5"}},[e._v("命中率")]),e._v(" "),a("th",{attrs:{colspan:"4"}},[e._v("盈利率")])]),e._v(" "),a("tr",[a("th",[e._v("类别")]),e._v(" "),a("th",[e._v("百分比")]),e._v(" "),a("th",[e._v("时间")]),e._v(" "),a("th",[e._v("X中X")]),e._v(" "),a("th",[e._v("百分比")]),e._v(" "),a("th",[e._v("类别")]),e._v(" "),a("th",[e._v("百分比")]),e._v(" "),a("th",[e._v("时间")]),e._v(" "),a("th",[e._v("百分比")])])]),e._v(" "),a("tbody",[a("tr",[a("td",{attrs:{rowspan:"3"}},[e._v("总命中率")]),e._v(" "),a("td",{attrs:{rowspan:"3"}},[e._v(e._s(e._f("toPercent")(e.expertStat.commonStatDetailVo.totalHitRate)))]),e._v(" "),a("td",[e._v("近3日")]),e._v(" "),a("td",[e._v(e._s(e.expertStat.commonStatDetailVo.threeDaysPOARate))]),e._v(" "),a("td",[e._v(e._s(e._f("toPercent")(e.expertStat.commonStatDetailVo.threeDaysHitRate)))]),e._v(" "),a("td",{attrs:{rowspan:"3"}},[e._v("盈利率")]),e._v(" "),a("td",{attrs:{rowspan:"3"}},[e._v(e._s(e._f("toPercent")(e.expertStat.commonStatDetailVo.totalEarningRate)))]),e._v(" "),a("td",[e._v("近3日")]),e._v(" "),a("td",[e._v(e._s(e._f("toPercent")(e.expertStat.commonStatDetailVo.threeDaysEarningRate)))])]),e._v(" "),a("tr",[a("td",[e._v("近7日")]),e._v(" "),a("td",[e._v(e._s(e.expertStat.commonStatDetailVo.sevenDaysPOARate))]),e._v(" "),a("td",[e._v(e._s(e._f("toPercent")(e.expertStat.commonStatDetailVo.sevenDaysHitRate)))]),e._v(" "),a("td",[e._v("近7日")]),e._v(" "),a("td",[e._v(e._s(e._f("toPercent")(e.expertStat.commonStatDetailVo.sevenDaysEarningRate)))])]),e._v(" "),a("tr",[a("td",[e._v("近30日")]),e._v(" "),a("td",[e._v(e._s(e.expertStat.commonStatDetailVo.thirtyDaysPOARate))]),e._v(" "),a("td",[e._v(e._s(e._f("toPercent")(e.expertStat.commonStatDetailVo.thirtyDaysHitRate)))]),e._v(" "),a("td",[e._v("近30日")]),e._v(" "),a("td",[e._v(e._s(e._f("toPercent")(e.expertStat.commonStatDetailVo.thirtyDaysEarningRate)))])])])]):e._e()]),e._v(" "),a("table-scroll",[e.expertStat&&e.expertStat.opWinNineStatDetailVo?a("table",{staticStyle:{width:"100%","min-width":"620px"}},[a("tr",[a("td",{staticStyle:{"vertical-align":"middle"}},[a("table",{staticClass:"expert-table stat"},[a("tr",[a("th"),e._v(" "),a("th",[e._v("历史全中次数")]),e._v(" "),a("th",[e._v("总奖金数")])]),e._v(" "),a("tr",[a("td",[e._v("胜负彩")]),e._v(" "),a("td",[e._v(e._s(e.expertStat.opWinNineStatDetailVo.winColoursHitDegreeCount))]),e._v(" "),a("td",[e._v(e._s(e.expertStat.opWinNineStatDetailVo.winColoursAward))])]),e._v(" "),a("tr",[a("td",[e._v("任九")]),e._v(" "),a("td",[e._v(e._s(e.expertStat.opWinNineStatDetailVo.optionalNineHitDegreeCount))]),e._v(" "),a("td",[e._v(e._s(e.expertStat.opWinNineStatDetailVo.optionalNineAward))])])])]),e._v(" "),a("td",{staticStyle:{"vertical-align":"middle"}},[e.expertStat.opWinNineStatDetailVo.latestDegreeHitList&&e.expertStat.opWinNineStatDetailVo.latestDegreeHitList.length>0?a("table",{staticClass:"expert-table stat"},e._l(e.expertStat.opWinNineStatDetailVo.latestDegreeHitList,function(t,i){return a("tr",{key:i},[0===i?a("td",{staticStyle:{"border-left":"0"},attrs:{rowspan:"3"}},[e._v("近三期")]):e._e(),e._v(" "),a("td",[e._v(e._s(t.lotteryCategoryName))]),e._v(" "),a("td",[e._v(e._s(t.hitInfo))])])}),0):e._e()])])]):e._e()]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"竞彩文章列表",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"数字彩文章列表",name:"1"}})],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"0"===e.activeTab,expression:"activeTab === '0'"},{name:"loading",rawName:"v-loading",value:e.threadLoading,expression:"threadLoading"}],attrs:{data:e.threadList,stripe:""}},[a("el-table-column",{attrs:{label:"连红",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.isWin&&3===t.row.plock&&3!==t.row.categoryId&&4!==t.row.categoryId?a("span",{staticClass:"text-red"},[e._v("√")]):e._e(),e._v(" "),0===t.row.isWin&&3===t.row.plock&&3!==t.row.categoryId&&4!==t.row.categoryId?a("span",[e._v("×")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"hitRateValue",label:"命中",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(3===t.row.plock?t.row.hitRateValue:"")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cName",label:"彩种",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"文章标题","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.refund?a("el-tag",{attrs:{size:"mini"}},[e._v("不中退")]):e._e(),e._v(" "),t.row.businessTypeId?a("el-tag",{attrs:{size:"mini"}},[e._v("临场")]):e._e(),e._v(" "),a("router-link",{attrs:{to:{name:"ArticleQuizDetail",params:{id:t.row.threadId}}}},[3==t.row.categoryId||4==t.row.categoryId?a("span",{staticStyle:{color:"#e62121"}},[e._v("【"+e._s(e._f("threadType2CH")(t.row.threadTypeId))+"】")]):e._e(),e._v(e._s(t.row.title))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"threadId",label:"文章ID","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"ArticleQuizDetail",params:{id:t.row.threadId}}}},[e._v(e._s(t.row.threadId))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"发布时间",width:"155"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"favCount",label:"收藏数",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.price>0?a("span",[e._v(e._s(t.row.price))]):a("span",{staticClass:"text-red"},[e._v("免费")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"buyCount",label:"购买数",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"plock",label:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("articleStatus2CH")(t.row.plock))+"\n      ")]}}])})],1),e._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:"0"===e.activeTab,expression:"activeTab === '0'"}],staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getThreadList}}),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"1"===e.activeTab,expression:"activeTab === '1'"},{name:"loading",rawName:"v-loading",value:e.numLotteryThreadLoading,expression:"numLotteryThreadLoading"}],attrs:{data:e.numLotteryThreadList,stripe:""}},[a("el-table-column",{attrs:{prop:"threadTypeId",label:"彩种",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.numLotteryType[t.row.threadTypeId]||"")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"文章标题","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.refund?a("el-tag",{attrs:{size:"mini"}},[e._v("不中退")]):e._e(),e._v(" "),t.row.businessTypeId?a("el-tag",{attrs:{size:"mini"}},[e._v("临场")]):e._e(),e._v(" "),a("router-link",{attrs:{to:{name:"ArticleQuizDetail",params:{id:t.row.threadId}}}},[3==t.row.categoryId||4==t.row.categoryId?a("span",{staticStyle:{color:"#e62121"}},[e._v("【"+e._s(e._f("threadType2CH")(t.row.threadTypeId))+"】")]):e._e(),e._v(e._s(t.row.title)+"\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"threadId",label:"文章ID","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"ArticleQuizDetail",params:{id:t.row.threadId}}}},[e._v(e._s(t.row.threadId))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"发布时间",width:"155"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"favCount",label:"收藏数",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.price>0?a("span",[e._v(e._s(t.row.price))]):a("span",{staticClass:"text-red"},[e._v("免费")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"buyCount",label:"购买数",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"plock",label:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("articleStatus2CH")(t.row.plock))+"\n      ")]}}])})],1),e._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:"1"===e.activeTab,expression:"activeTab === '1'"}],staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.numLotteryPageIndex,"page-count":e.numLotteryPageCount},on:{"current-change":e.getNumLotteryList}}),e._v(" "),a("v-expert-dialog",{attrs:{expertInfo:e.expertInfo,protocolList:e.protocolList,visible:e.dialogExpert},on:{closeExpertDialog:function(t){e.dialogExpert=!1},success:function(t){return e.getDetail(e.$route.params.id)}}})],1)},staticRenderFns:[]};var Ol=a("VU/8")(El,Rl,!1,function(e){a("Jmbc")},null,null).exports,Al={name:"ExpertQuestion",data:function(){return{loading:!1,filter:{status:"",query:""},questionStatus:on.questionStatus,list:[],pageIndex:1,pageSize:25,pageCount:1,tableHeight:null,visible:!1,questionDetail:null,rejectLoading:!1,titleLoading:!1,contentLoading:!1,vip2CH:{0:"小白",1:"银卡",2:"金卡",3:"钻石卡",4:"至尊VIP卡"}}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(e){var t=this;if(!this.loading){this.pageIndex=e||1;var a={pageIndex:this.pageIndex,pageSize:this.pageSize};this.filter.query&&(a.query=this.filter.query),""!==this.filter.status&&(a.status=this.filter.status),this.loading=!0,this.$service(zi,{method:"post",data:a}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.records||[],t.pageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))})}},getQuestionInfo:function(e){this.questionDetail=tn()({},e),this.visible=!0},questionReject:function(){var e=this;this.rejectLoading||(this.rejectLoading=!0,this.$service(Hi,{params:{topicId:this.questionDetail.questionAnsweringTopicId}}).then(function(t){e.rejectLoading=!1,200===t.code?(e.questionDetail.status=1,e.getList(e.pageIndex),e.$message.success("驳回成功")):e.$message.error(t.code+":"+t.message)},function(t){t&&(e.rejectLoading=!1,e.$message.error(qo()(t)))}))},updateQuestionTitle:function(){var e=this;return 0===this.questionDetail.titleTemp.length?this.$message.warning("用户问题不为空"):this.questionDetail.titleTemp.length>200?this.$message.warning("用户问题字数最多200字"):void(this.titleLoading||(this.titleLoading=!0,this.$service(Mi,{method:"post",data:{topicId:this.questionDetail.questionAnsweringTopicId,content:this.questionDetail.titleTemp}}).then(function(t){e.titleLoading=!1,200===t.code?(e.questionDetail.title=e.questionDetail.titleTemp,e.questionDetail.titleEditor=!1,e.getList(e.pageIndex),e.$message.success("修改问题成功")):e.$message.error(t.code+":"+t.message)},function(t){t&&(e.titleLoading=!1,e.$message.error(qo()(t)))})))},updateQuestionContent:function(){var e=this;return 0===this.questionDetail.replyContentTemp.length?this.$message.warning("专家回答不为空"):this.questionDetail.replyContentTemp.length>2e3?this.$message.warning("专家回答字数最多2000字"):void(this.contentLoading||(this.contentLoading=!0,this.$service(Fi,{method:"post",data:{topicId:this.questionDetail.questionAnsweringTopicId,content:this.questionDetail.replyContentTemp}}).then(function(t){e.contentLoading=!1,200===t.code?(e.questionDetail.replyContent=e.questionDetail.replyContentTemp,e.questionDetail.contentEditor=!1,e.getList(e.pageIndex),e.$message.success("修改专家回答成功")):e.$message.error(t.code+":"+t.message)},function(t){t&&(e.contentLoading=!1,e.$message.error(qo()(t)))})))}},watch:{windowHeight:function(){this.setHeight()}}},Ul={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"expert-question"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1)]),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.filter,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{staticStyle:{width:"105px"},model:{value:e.filter.status,callback:function(t){e.$set(e.filter,"status",t)},expression:"filter.status"}},[a("el-option",{attrs:{label:"全部",value:""}},[e._v("全部")]),e._v(" "),e._l(e.questionStatus,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)],1),e._v(" "),a("el-from-item",[a("el-input",{staticStyle:{width:"auto"},attrs:{placeholder:"专家名/专家ID/通行证","prefix-icon":"el-icon-search",clearable:"",size:"mini"},model:{value:e.filter.query,callback:function(t){e.$set(e.filter,"query",t)},expression:"filter.query"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.getList()}}},[e._v("搜索")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"questionAnsweringTopicId",label:"心愿ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"askTime",label:"发布时间",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.askTime,"yyyy-MM-dd hh:mm"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"心愿描述","min-width":"180","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"nickName",label:"用户昵称","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"UserDetail",params:{id:t.row.userId,source:0}}}},[e._v(e._s(t.row.nickName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"expertNickName",label:"专家","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"ExpertDetail",params:{id:t.row.expertId}}}},[e._v(e._s(t.row.expertNickName))]),e._v("("+e._s(t.row.xCount+"/"+t.row.yCount)+")\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("questionStatus2CH")(t.row.status))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"replyContent",label:"专家回复内容","min-width":"200","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"replyTime",label:"回复时间",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("dateFormat")([t.row.replyTime,"yyyy-MM-dd hh:mm"])))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.getQuestionInfo(t.row)}}},[e._v("详情")])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList}}),e._v(" "),a("el-dialog",{attrs:{title:"详情",visible:e.visible,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticClass:"question-detail"},[e.questionDetail?a("div",{staticClass:"title-detail"},[a("p",[a("span",[e._v(e._s(e.vip2CH[e.questionDetail.level])+"会员："+e._s(e.questionDetail.nickName.slice(0,1)+"***"+e.questionDetail.nickName.slice(-1)))]),e._v(" "),a("span",{staticClass:"time"},[a("span",[e._v("提问于："+e._s(e._f("dateFormat")([e.questionDetail.askTime,"yyyy-MM-dd hh:mm"])))]),e._v(" "),0===e.questionDetail.status?a("el-button",{attrs:{type:"primary",size:"mini",loading:e.rejectLoading},on:{click:function(t){return e.questionReject()}}},[e._v("驳回")]):e._e(),e._v(" "),1===e.questionDetail.status?a("el-button",{attrs:{type:"warning",size:"mini"}},[e._v("已驳回")]):e._e()],1)]),e._v(" "),e.questionDetail.titleEditor?e._e():a("p",[a("span",[e._v("问：")]),e._v(" "),1!==e.questionDetail.status?a("span",{on:{dblclick:function(t){e.$set(e.questionDetail,"titleEditor",!0),e.$set(e.questionDetail,"titleTemp",e.questionDetail.title)}}},[e._v(e._s(e.questionDetail.title))]):e._e(),e._v(" "),1===e.questionDetail.status?a("span",[e._v(e._s(e.questionDetail.title))]):e._e()]),e._v(" "),e.questionDetail.titleEditor?a("p",[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入新的问题"},model:{value:e.questionDetail.titleTemp,callback:function(t){e.$set(e.questionDetail,"titleTemp",t)},expression:"questionDetail.titleTemp"}}),e._v(" "),a("el-button",{staticStyle:{position:"absolute",right:"10px",bottom:"10px"},attrs:{loading:e.titleLoading,type:"primary",size:"mini"},on:{click:e.updateQuestionTitle}},[e._v("提交")])],1):e._e()]):e._e(),e._v(" "),e.questionDetail?a("div",{staticClass:"content-detail"},[a("p",[a("span",[e._v("专家："+e._s(e.questionDetail.expertNickName))]),e._v(" "),e.questionDetail.replyTime?a("span",{staticClass:"time"},[a("span",[e._v("回答于："+e._s(e._f("dateFormat")([e.questionDetail.replyTime,"yyyy-MM-dd hh:mm"])))])]):e._e()]),e._v(" "),e.questionDetail.replyContent&&!e.questionDetail.contentEditor?a("p",[a("span",[e._v("答：")]),e._v(" "),1!==e.questionDetail.status&&2!==e.questionDetail.status?a("span",{on:{dblclick:function(t){e.$set(e.questionDetail,"contentEditor",!0),e.$set(e.questionDetail,"replyContentTemp",e.questionDetail.replyContent)}}},[e._v(e._s(e.questionDetail.replyContent))]):e._e(),e._v(" "),1===e.questionDetail.status||2===e.questionDetail.status?a("span",[e._v(e._s(e.questionDetail.replyContent))]):e._e()]):e._e(),e._v(" "),e.questionDetail.contentEditor?a("p",[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入新的问题"},model:{value:e.questionDetail.replyContentTemp,callback:function(t){e.$set(e.questionDetail,"replyContentTemp",t)},expression:"questionDetail.replyContentTemp"}}),e._v(" "),a("el-button",{staticStyle:{position:"absolute",right:"10px",bottom:"10px"},attrs:{loading:e.contentLoading,type:"primary",size:"mini"},on:{click:e.updateQuestionContent}},[e._v("提交")])],1):e._e(),e._v(" "),0===e.questionDetail.status?a("p",{staticStyle:{color:"#999"}},[e._v("待回复")]):e._e(),e._v(" "),2===e.questionDetail.status?a("p",{staticStyle:{color:"#999"}},[e._v("已超时")]):e._e()]):e._e()])])],1)},staticRenderFns:[]};var Vl=a("VU/8")(Al,Ul,!1,function(e){a("GAzn")},null,null).exports,ql={name:"HeadSlideShow",data:function(){return{activeTab:0,loading:!1,list:[],tableHeight:null,dialogFormVisible:!1,typeList:{expert:"专家",match:"比赛",thread:"文章",url:"URL",celebrity:"红人榜"},dataTemp:null,redirectPreview:"",previewLoading:!1,updateLoading:!1,form:{status:!1,location:"",type:"",description:"",redirectUrl:"",imgUrl:"",group:"1"},formRules:{location:[{validator:function(e,t,a){t?/^[1-9][0-9]{0,1}$/.test(t)?a():a(new Error("权重必须为正数，且1-99")):a(new Error("权重必填"))},trigger:["blur","change"]}],type:[{required:!0,message:"跳转类型不为空",trigger:["blur","change"]}],description:[{required:!0,message:"请输入标题",trigger:["blur","change"]},{max:24,message:"长度不多于24个字符",trigger:["blur","change"]}],redirectUrl:[{validator:this.urlRules,trigger:["blur","change"]}],imgUrl:[{required:!0,message:"图片不为空",trigger:["blur","change"]}]}}},computed:u()({},Object(sn.d)(["windowHeight"])),filters:{group2CH:function(e){return{1:"主包",2:"马甲包"}[e]||""},typeToCh:function(e){return{expert:"专家",match:"比赛",thread:"文章",url:"URL",celebrity:"红人榜",1:"专家",2:"比赛",3:"文章",4:"URL",5:"红人榜"}[e]||""},statusToCh:function(e){return{1:"上线",2:"下线",online:"上线",offline:"下线"}[e]||""}},created:function(){this.getSlideshowList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-20})},urlRules:function(e,t,a){t?"url"!==this.form.type?/^\d+$/.test(t)||"1"===this.activeTab?a():a(new Error("ID必须为数字")):bh.url.test(t)?a():a(new Error("URL不合法")):a(new Error("跳转链接不为空"))},handleClickTabs:function(){var e=this;this.list=[],this.getSlideshowList(),this.$nextTick(function(){e.tableHeight=window.innerHeight-e.$refs.elTable.$el.offsetTop-20})},getSlideshowList:function(){var e=this;this.loading||(this.loading=!0,this.$service(nt[this.activeTab].list).then(function(t){e.loading=!1,200===t.code?(e.list=t.data,e.$refs.elTable.bodyWrapper.scrollTop=0):e.$message.error(t.code+":"+t.message)},function(t){e.loading=!1,e.$message.error(qo()(t))}))},beforeImgUpload:function(e){if(e.size/1024/1024>5)return this.$message.error("上传头像图片大小不能超过 5MB!"),!1},uploadSingleImg:function(e){var t=this;En(e.file,"thread").then(function(e){t.form.imgUrl=e},function(e){e&&t.$message.error("上传图片失败，请稍后再传！")})},slideshowPop:function(e){var t=this;switch(this.form=tn()({},e||{status:!1,location:"",type:"",description:"",redirectUrl:"",imgUrl:"",group:"1"}),this.form.type){case 1:this.form.type="expert";break;case 2:this.form.type="match";break;case 3:this.form.type="thread";break;case 4:this.form.type="url"}switch(this.form.status){case 1:this.form.status="online";break;case 2:this.form.status="offline"}this.form.status="online"===this.form.status,this.form.group=this.form.group+"",this.dataTemp=tn()({},this.form),this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.slideshowForm.clearValidate()})},dataFixToNum:function(e){var t=tn()({},e);switch(t.headImageType){case"expert":t.headImageType=1;break;case"match":t.headImageType=2;break;case"thread":t.headImageType=3;break;case"url":t.headImageType=4}switch(t.headImageStatus){case"online":t.headImageStatus=1;break;case"offline":t.headImageStatus=2}return t},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(t.updateLoading)return;var a=t.form.redirectUrl.match(/^(http|https):\/\/(hongcai|sports)\.163\.com(\/article)?\/\d{2}\/\d{4}\/\d{2}\/([a-zA-Z0-9]{16})\.html$/),i="";a&&(i="https://c.m.163.com/nc/qa/3g-expand/hc-article.html?docid="+a[4]+"#pcarticle="+t.form.redirectUrl);var r={description:t.form.description,headImageType:t.form.type,headImageStatus:t.form.status?"online":"offline",headImgLocation:t.form.location,imgUrl:t.form.imgUrl,redirectUrl:i||t.form.redirectUrl,headImgGroup:t.form.group};t.form.hId&&(r.headImgId=t.form.hId),t.updateLoading=!0,t.$service(t.form.hId?nt[t.activeTab].update:nt[t.activeTab].add,{method:"post",data:"1"!==t.activeTab?r:t.dataFixToNum(r)}).then(function(e){t.updateLoading=!1,200===e.code?(t.dialogFormVisible=!1,t.getSlideshowList(),t.$message.success((t.form.hId?"更新":"添加")+"成功")):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))}),0===parseInt(t.activeTab)&&(parseInt(t.dataTemp.location)===parseInt(r.headImgLocation)&&t.dataTemp.type===r.headImageType&&t.dataTemp.group===r.headImgGroup&&t.dataTemp.description===r.description&&t.dataTemp.redirectUrl===r.redirectUrl&&t.dataTemp.imgUrl===r.imgUrl||t.syncSlideshow(t.dataFixToNum(r)))}})},syncSlideshow:function(e){var t=this;this.$service(nt[1].sync,{method:"post",data:e}).then(function(e){200===e.code?t.$message.success("头图同步马甲包成功"):t.$message.error(e.code+":"+e.message)},function(e){this.$message.error(qo()(e))})},previewID:function(){var e=this;if(this.redirectPreview="","1"!==this.activeTab&&this.form.type&&"url"!==this.form.type&&/^\d+$/.test(this.form.redirectUrl)&&!this.previewLoading){var t=this.form.redirectUrl;switch(this.previewLoading=!0,this.form.type){case"thread":Rn(t).then(function(t){e.redirectPreview="提示：对应跳转文章["+t.title+"]",e.previewLoading=!1}).catch(function(t){t&&(e.previewLoading=!1,e.redirectPreview="提示：无对应跳转文章")});break;case"match":An(t).then(function(t){e.redirectPreview="提示：对应跳转赛事["+t.homeMatchTeam.teamName+"VS"+t.guestMatchTeam.teamName+"]",e.previewLoading=!1}).catch(function(t){t&&(e.previewLoading=!1,e.redirectPreview="提示：无对应跳转赛事")});break;case"expert":On(t).then(function(t){e.redirectPreview="提示：对应跳转专家["+t.nickname+"]",e.previewLoading=!1}).catch(function(t){t&&(e.previewLoading=!1,e.redirectPreview="提示：无对应跳转专家")})}}},slideshowDel:function(e){var t=this;this.$set(e,"loading",!0),this.$service(nt[this.activeTab].del,{method:"post",data:{headImgId:e.hId}}).then(function(a){e.loading=!1,200===a.code?(e.delPop=!1,t.$message.success("删除成功"),t.getSlideshowList()):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})}},watch:{windowHeight:function(){this.setHeight()}}},jl={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"slideshow"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},["1"===e.activeTab?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.slideshowPop()}}},[e._v("新建短链")]):e._e()],1)]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"红彩",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"精准比分",name:"1"}})],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"location",label:"权重",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"group",label:"分组",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("group2CH")(t.row.group))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"跳转类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("typeToCh")(t.row.type))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"标题","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"redirectUrl",label:"跳转链接","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("statusToCh")(t.row.status))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"imgUrl",label:"图片",width:"180"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:e.row.imgUrl+"?imageView&thumbnail=150y62&quality=85",alt:""}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.slideshowPop(t.row)}}}),e._v(" "),"1"===e.activeTab?a("el-popover",{attrs:{placement:"left"},model:{value:t.row.delPop,callback:function(a){e.$set(t.row,"delPop",a)},expression:"scope.row.delPop"}},[a("p",[e._v("确定删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.slideshowDel(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:"",size:"small"},slot:"reference"})],1):e._e()]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:e.form.hId?"修改头图":"新增头图","close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"slideshowForm",attrs:{model:e.form,rules:e.formRules,disabled:e.updateLoading,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"推荐"}},[a("el-checkbox",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[e._v(e._s(e.form.status?"是":"否"))])],1),e._v(" "),a("el-form-item",{attrs:{label:"权重",prop:"location"}},[a("el-input",{attrs:{type:"age",autocomplete:"off"},model:{value:e.form.location,callback:function(t){e.$set(e.form,"location",t)},expression:"form.location"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"标题",prop:"description"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"跳转类型",prop:"type"}},[a("el-select",{attrs:{disabled:"celebrity"===e.form.type,placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.typeList,function(t,i,r){return a("el-option",{key:r,attrs:{label:t,value:i,disabled:"celebrity"!==e.form.type&&"celebrity"===i}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"跳转"+(e.form.type?"url"===e.form.type?"URL":"ID":"链接"),prop:"redirectUrl"}},[a("el-input",{attrs:{autocomplete:"off","suffix-icon":e.previewLoading?"el-icon-loading":""},on:{change:e.previewID},model:{value:e.form.redirectUrl,callback:function(t){e.$set(e.form,"redirectUrl",t)},expression:"form.redirectUrl"}})],1),e._v(" "),e.redirectPreview?a("el-form-item",[a("span",[e._v(e._s(e.redirectPreview))])]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"分组"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:"disabled"},model:{value:e.form.group,callback:function(t){e.$set(e.form,"group",t)},expression:"form.group"}},[a("option",{attrs:{value:"1"}},[e._v("主包")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"图片",prop:"imgUrl"}},[a("el-upload",{staticClass:"single-uploader",attrs:{accept:".jpeg,.jpg,.png,.gif","show-file-list":!1,"http-request":e.uploadSingleImg,"before-upload":e.beforeImgUpload}},[e.form.imgUrl?a("img",{staticClass:"single-img",attrs:{src:e.form.imgUrl+"?imageView&thumbnail=98y98&quality=85"}}):a("i",{staticClass:"el-icon-plus single-uploader-icon"})])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("slideshowForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},Ql=a("VU/8")(ql,jl,!1,null,null,null).exports,Wl={name:"HeadRedRankList",data:function(){return{loading:!1,list:[],pageIndex:1,pageSize:25,pageCount:1,tableHeight:null,dialogFormVisible:!1,form:{},updateLoading:!1,previewData:null,previewVisible:!1,popupTimesList:[{text:"不弹",value:0},{text:"弹1次",value:1},{text:"弹2次",value:2}]}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},dateRule:function(e,t,a){var i=this.$refs.endTime.value;t?i?a():a(new Error("结束时间不为空")):a(new Error("开始时间不为空"))},getList:function(e){var t=this;this.loading||(this.pageIndex=e||1,this.loading=!0,this.$service(Ni,{params:{pageIndex:this.pageIndex,pageSize:this.pageSize}}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.records||[],t.pageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))}))},beforeImgUpload:function(e){if(e.size/1024/1024>5)return this.$message.error("上传图片大小不能超过 5MB!"),!1},uploadSingleImg:function(e){var t=this;En(e.file,"thread").then(function(e){t.$set(t.form,"imageUrl",e)},function(e){e&&t.$message.error("上传弹窗图片失败，请稍后再传！")})},uploadBannerImg:function(e){var t=this;En(e.file,"thread").then(function(e){t.$set(t.form,"bannerImageUrl",e)},function(e){e&&t.$message.error("上传Banner图片失败，请稍后再传！")})},switchStatus:function(e){var t=this;this.$set(e,"statusLoading",!0);var a={celebrityListId:e.celebrityListId,status:e.status};this.$service(Oi,{method:"post",data:a}).then(function(a){e.statusLoading=!1,200===a.code?t.$message.success("状态更新成功"):(t.$set(e,"status",e.status?0:1),t.$message.error(a.message))},function(a){e.statusLoading=!1,t.$set(e,"status",e.status?0:1),t.$message.error(qo()(a))})},redRankPop:function(e){var t=this;this.form={popupTimes:0,pushType:"2",footballDisplay:!0,footballWeight:60,footballArr:[{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""}],basketballDisplay:!0,basketballWeight:60,basketballArr:[{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""}],winningColoursDisplay:!0,winningColoursWeight:60,winningColoursArr:[{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""},{value:""}]},e?this.getPreview(e.celebrityListId).then(function(a){t.form=tn()({},e),t.form.pushType?t.form.pushType=t.form.pushType+"":t.form.pushType="0";var i=[],r=[],o=[];a.celebrityListElement.forEach(function(e){0===e.listType&&e.celebrityListExpert.forEach(function(e){i.push({avatar:e.avatar,nickname:e.nickname,value:e.userId+","+e.bAllRate})}),1===e.listType&&e.celebrityListExpert.forEach(function(e){r.push({avatar:e.avatar,nickname:e.nickname,value:e.userId+","+e.bAllRate})}),2===e.listType&&e.celebrityListExpert.forEach(function(e){o.push({avatar:e.avatar,nickname:e.nickname,value:e.userId+","+e.bAllRate})})}),t.$set(t.form,"footballArr",i.length>3?i:[].concat(i,[{value:""},{value:""},{value:""},{value:""}].slice(0,4-i.length))),t.$set(t.form,"basketballArr",r.length>3?r:[].concat(r,[{value:""},{value:""},{value:""},{value:""}].slice(0,4-r.length))),t.$set(t.form,"winningColoursArr",o.length>3?o:[].concat(o,[{value:""},{value:""},{value:""},{value:""}].slice(0,4-o.length))),t.form.footballDisplay=!!t.form.footballDisplay,t.form.basketballDisplay=!!t.form.basketballDisplay,t.form.winningColoursDisplay=!!t.form.winningColoursDisplay,t.form.startDateTime=gh(t.form.startDateTime,"yyyy-MM-dd hh:mm:ss"),t.form.endDateTime=gh(t.form.endDateTime,"yyyy-MM-dd hh:mm:ss"),t.dialogFormVisible=!0,t.$nextTick(function(){t.$refs.form.clearValidate()})}):(this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.form.clearValidate()}))},addInput:function(e){switch(e){case 0:for(var t=0;t<4;t++)this.form.footballArr.push({value:""});break;case 1:for(var a=0;a<4;a++)this.form.basketballArr.push({value:""});break;case 2:for(var i=0;i<4;i++)this.form.winningColoursArr.push({value:""})}},queryExpertInfo:function(e,t){var a=this;switch(e){case 0:if(this.form.footballArr[t].value=this.form.footballArr[t].value.replace(/,|，/g,","),!this.form.footballArr[t].value)return void this.$set(this.form.footballArr[t],"err",!1);if(!/^\d+$/.test(this.form.footballArr[t].value.split(",")[0]))return this.$set(this.form.footballArr[t],"err",!0),this.$message.error("专家格式不对");this.$set(this.form.footballArr[t],"err",!1),On(this.form.footballArr[t].value.split(",")[0]).then(function(e){a.$set(a.form.footballArr[t],"nickname",e.nickname),a.$set(a.form.footballArr[t],"avatar",e.avatar)}).catch(function(e){if(e)return a.$set(a.form.footballArr[t],"err",!0),a.$message.error(e)});break;case 1:if(this.form.basketballArr[t].value=this.form.basketballArr[t].value.replace(/,|，/g,","),!this.form.basketballArr[t].value)return void this.$set(this.form.basketballArr[t],"err",!1);if(!/^\d+$/.test(this.form.basketballArr[t].value.split(",")[0]))return this.$set(this.form.basketballArr[t],"err",!0),this.$message.error("专家格式不对");this.$set(this.form.basketballArr[t],"err",!1),On(this.form.basketballArr[t].value.split(",")[0]).then(function(e){a.$set(a.form.basketballArr[t],"nickname",e.nickname),a.$set(a.form.basketballArr[t],"avatar",e.avatar)}).catch(function(e){if(e)return a.$set(a.form.footballArr[t],"err",!0),a.$message.error(e)});break;case 2:if(this.form.winningColoursArr[t].value=this.form.winningColoursArr[t].value.replace(/,|，/g,","),this.form.winningColoursArr[t].value||this.$set(this.form.winningColoursArr[t],"err",!1),!/^\d+$/.test(this.form.winningColoursArr[t].value.split(",")[0]))return this.$set(this.form.winningColoursArr[t],"err",!0),this.$message.error("专家格式不对");this.$set(this.form.winningColoursArr[t],"err",!1),On(this.form.winningColoursArr[t].value.split(",")[0]).then(function(e){a.$set(a.form.winningColoursArr[t],"nickname",e.nickname),a.$set(a.form.winningColoursArr[t],"avatar",e.avatar)}).catch(function(e){if(e)return a.$set(a.form.footballArr[t],"err",!0),a.$message.error(e)})}},submitForm:function(e,t){var a=this;this.$refs[e].validate(function(e){if(e){var i=[],r=[],o=[];a.form.footballDisplay&&a.form.footballArr.forEach(function(e){e.value&&i.push(e.value)}),a.form.basketballDisplay&&a.form.basketballArr.forEach(function(e){e.value&&r.push(e.value)}),a.form.winningColoursDisplay&&a.form.winningColoursArr.forEach(function(e){e.value&&o.push(e.value)});var n={football:i.join(";"),footballDisplay:a.form.footballDisplay?1:0,footballWeight:a.form.footballWeight,basketball:r.join(";"),basketballDisplay:a.form.basketballDisplay?1:0,basketballWeight:a.form.basketballWeight,winningColours:o.join(";"),winningColoursDisplay:a.form.winningColoursDisplay?1:0,winningColoursWeight:a.form.winningColoursWeight,endDateTime:a.form.endDateTime,startDateTime:a.form.startDateTime,title:a.form.title,status:t||a.form.status?1:0,pushType:a.form.pushType,popupTimes:a.form.popupTimes};if(a.form.imageUrl&&(n.imageUrl=a.form.imageUrl),a.form.bannerImageUrl&&(n.bannerImageUrl=a.form.bannerImageUrl),a.form.celebrityListId&&(n.celebrityListId=a.form.celebrityListId),a.updateLoading)return;a.updateLoading=!0,a.$service(a.form.celebrityListId?Ri:Ei,{method:"post",data:n}).then(function(e){a.updateLoading=!1,200===e.code?(a.dialogFormVisible=!1,a.form.celebrityListId||(a.pageIndex=1),a.$message.success(a.form.celebrityListId?"更新成功":"新增成功"),a.getList(a.pageIndex)):a.$message.error(2100010===e.code?"该弹框展示时间段与已上线弹框时间段冲突，请重新调整。可以先保存本次配置，修改已上线弹框后再进行上线":e.message)},function(e){e&&(a.updateLoading=!1,a.$message.error(qo()(e)))})}})},redRankPreview:function(e){var t=this;if(e){if(e.loading)return;this.$set(e,"loading",!0),this.getPreview(e.celebrityListId).then(function(a){e.loading=!1,t.previewData=a,t.previewVisible=!0},function(a){e.loading=!1,t.$message.error(a)})}else{this.previewData={title:this.form.title,dateFormat:gh(this.form.updateTime||new Date,"MM-dd hh:mm"),celebrityListElement:[]};var a=[{type:1,weight:this.form.footballWeight,data:this.form.footballArr,name:"足球红人榜",show:this.form.footballDisplay},{type:2,weight:this.form.basketballWeight,data:this.form.basketballArr,name:"篮球红人榜",show:this.form.basketballDisplay},{type:3,weight:this.form.winningColoursWeight,data:this.form.winningColoursArr,name:"胜负彩红人榜",show:this.form.winningColoursDisplay}];a.sort(hh("weight",!0)),a.forEach(function(e){if(e.show){var a=[];e.data.forEach(function(e){e.value&&a.push({avatar:e.avatar,nickname:e.nickname,bAllRate:e.value.split(",")[1]})}),a.length>0&&t.previewData.celebrityListElement.push({listName:e.name,celebrityListExpert:a})}}),this.previewVisible=!0}},getPreview:function(e){return this.$service(Ai,{params:{celebrityListId:e}}).then(function(e){return 200===e.code?Bo.a.resolve(e.data):Bo.a.reject(e.message)},function(e){if(e)return Bo.a.reject(qo()(e))})}},watch:{windowHeight:function(){this.setHeight()}}},Bl={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"red-rank"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.redRankPop()}}},[e._v("新建红人榜")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"celebrityListId",label:"ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题","min-width":"140"}}),e._v(" "),a("el-table-column",{attrs:{label:"有效时段","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.startDateTime,"yyyy-MM-dd hh:mm"]))+" ~ "+e._s(e._f("dateFormat")([t.row.endDateTime,"yyyy-MM-dd hh:mm"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"推送范围",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(0===t.row.appType?"红彩":1===t.row.appType?"精准比分":"")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.status?"上线":"下线")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.redRankPop(t.row)}}}),e._v(" "),a("el-switch",{attrs:{disabled:t.row.statusLoading,"active-value":1,"inactive-value":0},nativeOn:{click:function(a){return e.switchStatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.redRankPreview(t.row)}}},[e._v("预览")])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList}}),e._v(" "),a("el-dialog",{attrs:{title:e.form.celebrityListId?"修改红人榜":"新增红人榜","close-on-click-modal":!1,visible:e.dialogFormVisible,width:"600px",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,disabled:e.updateLoading,"label-width":"110px",size:"small"}},[a("el-form-item",{attrs:{label:"推送范围"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.pushType,callback:function(t){e.$set(e.form,"pushType",t)},expression:"form.pushType"}},[a("el-option",{attrs:{label:"弹框&Banner",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"仅弹框",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"仅Banner",value:"1"}})],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"!==e.form.pushType,expression:"form.pushType!=='1'"}],attrs:{label:"弹框图片",prop:"imageUrl",rules:[{required:"1"!==e.form.pushType,message:"弹框图片必须添加",trigger:["blur","change"]}]}},[a("el-upload",{staticClass:"single-uploader",attrs:{accept:".jpeg,.jpg,.png,.gif","show-file-list":!1,"http-request":e.uploadSingleImg,"before-upload":e.beforeImgUpload}},[e.form.imageUrl?a("img",{staticClass:"single-img",attrs:{src:e.form.imageUrl+"?imageView&thumbnail=98y98&quality=85"}}):a("i",{staticClass:"el-icon-plus single-uploader-icon"})])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"!==e.form.pushType,expression:"form.pushType!=='1'"}],attrs:{label:"弹框频率"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.popupTimes,callback:function(t){e.$set(e.form,"popupTimes",t)},expression:"form.popupTimes"}},e._l(e.popupTimesList,function(e){return a("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"0"!==e.form.pushType,expression:"form.pushType!=='0'"}],attrs:{label:"Banner图片",prop:"bannerImageUrl",rules:[{required:"0"!==e.form.pushType,message:"Banner图片必须添加",trigger:["blur","change"]}]}},[a("el-upload",{staticClass:"single-uploader",attrs:{accept:".jpeg,.jpg,.png,.gif","show-file-list":!1,"http-request":e.uploadBannerImg,"before-upload":e.beforeImgUpload}},[e.form.bannerImageUrl?a("img",{staticClass:"single-img",attrs:{src:e.form.bannerImageUrl+"?imageView&thumbnail=98y98&quality=85"}}):a("i",{staticClass:"el-icon-plus single-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"展示时间",prop:"startDateTime",rules:[{validator:e.dateRule,trigger:["blur","change"]}]}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期","picker-options":{disabledDate:function(t){return t.getTime()<Date.now()-864e5||0!==new Date(e.form.endDateTime).getTime()&&t.getTime()>new Date(e.form.endDateTime).getTime()}}},model:{value:e.form.startDateTime,callback:function(t){e.$set(e.form,"startDateTime",t)},expression:"form.startDateTime"}}),e._v("\n        ~\n        "),a("el-date-picker",{ref:"endTime",staticStyle:{width:"200px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期","picker-options":{disabledDate:function(t){return t.getTime()<Date.now()-864e5||0!==new Date(e.form.startDateTime).getTime()&&t.getTime()<new Date(e.form.startDateTime).getTime()}}},model:{value:e.form.endDateTime,callback:function(t){e.$set(e.form,"endDateTime",t)},expression:"form.endDateTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"简介",prop:"title",rules:[{required:!0,message:"必填",trigger:["blur","change"]},{max:60,message:"最多60字",trigger:["blur","change"]}]}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请填写简介"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"足球红人榜",prop:"footballWeight",rules:[{required:!0,message:"权重必填",trigger:["blur","change"]},{pattern:/^[1-9]\d{0,1}$/,message:"整数且1-99",trigger:["blur","change"]}]}},[a("el-checkbox",{model:{value:e.form.footballDisplay,callback:function(t){e.$set(e.form,"footballDisplay",t)},expression:"form.footballDisplay"}}),e._v(" "),a("el-input",{staticStyle:{width:"60px"},attrs:{placeholder:"1-99",disabled:!e.form.footballDisplay},model:{value:e.form.footballWeight,callback:function(t){e.$set(e.form,"footballWeight",e._n(t))},expression:"form.footballWeight"}}),e._v(" "),a("span",{staticClass:"text-red"},[e._v("*示例：163,10中2")])],1),e._v(" "),a("el-form-item",[e._l(e.form.footballArr,function(t,i){return a("el-input",{key:i,class:{error:t.err},staticStyle:{width:"100px"},attrs:{disabled:!e.form.footballDisplay},on:{blur:function(t){return e.queryExpertInfo(0,i)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}})}),e._v(" "),e.form.footballDisplay?a("span",{staticClass:"el-icon-circle-plus",staticStyle:{"font-size":"24px",cursor:"pointer"},on:{click:function(t){return e.addInput(0)}}}):e._e()],2),e._v(" "),a("el-form-item",{attrs:{label:"篮球红人榜",prop:"basketballWeight",rules:[{required:!0,message:"权重必填",trigger:["blur","change"]},{pattern:/^[1-9]\d{0,1}$/,message:"整数且1-99",trigger:["blur","change"]}]}},[a("el-checkbox",{model:{value:e.form.basketballDisplay,callback:function(t){e.$set(e.form,"basketballDisplay",t)},expression:"form.basketballDisplay"}}),e._v(" "),a("el-input",{staticStyle:{width:"60px"},attrs:{placeholder:"1-99",disabled:!e.form.basketballDisplay},model:{value:e.form.basketballWeight,callback:function(t){e.$set(e.form,"basketballWeight",e._n(t))},expression:"form.basketballWeight"}})],1),e._v(" "),a("el-form-item",[e._l(e.form.basketballArr,function(t,i){return a("el-input",{key:i,class:{error:t.err},staticStyle:{width:"100px"},attrs:{disabled:!e.form.basketballDisplay},on:{blur:function(t){return e.queryExpertInfo(1,i)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}})}),e._v(" "),e.form.basketballDisplay?a("span",{staticClass:"el-icon-circle-plus",staticStyle:{"font-size":"24px",cursor:"pointer"},on:{click:function(t){return e.addInput(1)}}}):e._e()],2),e._v(" "),a("el-form-item",{attrs:{label:"胜负彩红人榜",prop:"winningColoursWeight",rules:[{required:!0,message:"权重必填",trigger:["blur","change"]},{pattern:/^[1-9]\d{0,1}$/,message:"整数且1-99",trigger:["blur","change"]}]}},[a("el-checkbox",{model:{value:e.form.winningColoursDisplay,callback:function(t){e.$set(e.form,"winningColoursDisplay",t)},expression:"form.winningColoursDisplay"}}),e._v(" "),a("el-input",{staticStyle:{width:"60px"},attrs:{placeholder:"1-99",disabled:!e.form.winningColoursDisplay},model:{value:e.form.winningColoursWeight,callback:function(t){e.$set(e.form,"winningColoursWeight",e._n(t))},expression:"form.winningColoursWeight"}})],1),e._v(" "),a("el-form-item",[e._l(e.form.winningColoursArr,function(t,i){return a("el-input",{key:i,class:{error:t.err},staticStyle:{width:"100px"},attrs:{disabled:!e.form.winningColoursDisplay},on:{blur:function(t){return e.queryExpertInfo(2,i)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}})}),e._v(" "),e.form.winningColoursDisplay?a("span",{staticClass:"el-icon-circle-plus",staticStyle:{"font-size":"24px",cursor:"pointer"},on:{click:function(t){return e.addInput(2)}}}):e._e()],2)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("保存")]),e._v(" "),e.form.status?e._e():a("el-button",{attrs:{size:"small",type:"danger",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form",!0)}}},[e._v("保存并上线")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.redRankPreview()}}},[e._v("预览")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"预览",visible:e.previewVisible,width:"500px",center:""},on:{"update:visible":function(t){e.previewVisible=t}}},[e.previewData?a("h2",{staticStyle:{"font-size":"18px",color:"#333","margin-bottom":"15px"}},[e._v(e._s(e.previewData.title))]):e._e(),e._v(" "),e.previewData?a("h3",{staticStyle:{"font-weight":"normal",color:"#666","margin-bottom":"15px"}},[e._v("网易红彩 "),e.previewData.dateFormat?a("span",[e._v(e._s(e.previewData.dateFormat))]):a("span",[e._v(e._s(e._f("dateFormat")([new Date,"MM-dd hh:mm"])))])]):e._e(),e._v(" "),e.previewData?a("el-form",{attrs:{"label-width":"140px",size:"small"}},e._l(e.previewData.celebrityListElement,function(t,i){return a("el-form-item",{key:i,attrs:{label:t.listName}},e._l(t.celebrityListExpert,function(t,i){return a("p",{key:i},[t.avatar?a("img",{attrs:{src:t.avatar+"?imageView&thumbnail=40y40&quality=85"}}):e._e(),e._v(" "),a("span",[e._v(e._s(t.nickname))]),e._v(" "),a("span",{staticClass:"text-red"},[e._v(e._s(t.bAllRate))])])}),0)}),1):e._e()],1)],1)},staticRenderFns:[]};var Gl=a("VU/8")(Wl,Bl,!1,function(e){a("u1o1")},null,null).exports,Yl={name:"MatchList",data:function(){return{listType:"filter",sortRrders:["descending","ascending",null],lotteryList:[],lottery2CH:{},filterQuery:{lotteryCategoryId:"",matchStatus:""},matchStatus:on.matchStatus,loading:!1,list:[],pageIndex:1,pageSize:25,pageCount:1,sfcList:[],sfcPageIndex:1,sfcPageSize:25,sfcPageCount:1,sfcDegreeList:[],sfcDegree:"",tableHeight:null,searchQuery:"",dialogFormVisible:!1,updateLoading:!1,form:{sportteryDegree:"",prizeTime:"",startTime:"",endTime:"",matchSFCDegree:"",year:"",isNowDegree:"0"}}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getFilterList(),this.getLottery(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-(3!==e.filterQuery.lotteryCategoryId?e.$refs.elTable.$el.offsetTop:e.$refs.elTableSfc.$el.offsetTop)-63})},getLottery:function(){var e=this;this.$service(h).then(function(t){200===t.code&&(t.data.forEach(function(t){e.lottery2CH[t.cId]=t.cName,100!==t.cId&&e.lotteryList.push(t)}),e.lotteryList.sort(hh("cId")),e.setHeight())})},getFilterList:function(e){var t=this;if(void 0===e&&(this.filterQuery.sortField=null),3!==this.filterQuery.lotteryCategoryId){if(this.loading)return;this.pageIndex=fh(e)?e:1;var a={};parseInt(this.filterQuery.lotteryCategoryId)&&(a.lotteryCategoryId=this.filterQuery.lotteryCategoryId),this.filterQuery.leagueMatchId&&(a.leagueMatchId=this.filterQuery.leagueMatchId),this.filterQuery.startTime&&(a.startTime=this.filterQuery.startTime),this.filterQuery.endTime&&(a.endTime=this.filterQuery.endTime),this.filterQuery.matchStatus&&(a.matchStatus=this.filterQuery.matchStatus),this.filterQuery.weight>=0&&this.filterQuery.weight<=999&&""!==this.filterQuery.weight&&(a.weight=this.filterQuery.weight),this.filterQuery.sortField&&(a=tn()(a,{sortField:this.filterQuery.sortField,sortDesc:this.filterQuery.sortDesc})),this.loading=!0,this.listType="filter",this.searchQuery="",this.$service(st,{urlParams:{pageIndex:this.pageIndex,pageSize:this.pageSize},params:a}).then(function(a){t.loading=!1,200===a.code?(t.$refs.elTable.bodyWrapper.scrollTop=0,t.list=a.data.records||[],t.pageCount=a.data.page&&a.data.page.pageCount?a.data.page.pageCount:1,e&&"category"!==e||t.$refs.elTable.clearSort()):t.$message.error(a.code+":"+a.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))})}else this.getSfcDegreeList(),this.getSfcList(e)},getSearchList:function(e){var t=this;this.loading||(this.searchQuery?(this.loading=!0,this.listType="search",this.pageIndex=fh(e)?e:1,this.filterQuery.lotteryCategoryId=null,this.$service(lt,{method:"post",urlParams:{pageIndex:this.pageIndex,pageSize:this.pageSize},data:{queryParam:this.searchQuery}}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.records||[],t.$refs.elTable.bodyWrapper.scrollTop=0,t.pageCount=e.data.page?e.data.page.pageCount:1):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))})):this.getFilterList())},pageChange:function(e){switch(this.listType){case"filter":this.getFilterList(e);break;case"search":this.getSearchList(e)}},sortList:function(e,t,a){this.filterQuery.sortField=e.prop,this.filterQuery.sortDesc="ascending"!==e.order&&("descending"===e.order||null),this.getFilterList("sort")},querySearchLeagueAsync:function(e,t){e&&this.$service(g,{params:{queryParam:e}}).then(function(e){200===e.code&&t(e.data)})},handleLeagueSelect:function(e){this.filterQuery.leagueMatchId=e.leagueId},handlerWeightSearch:function(){this.filterQuery.weight=this.filterQuery.weight.replace(/[^\d]/g,"")},getSfcDegreeList:function(){var e=this;this.sfcDegreeList.length>0||this.$service(ut).then(function(t){200===t.code?e.sfcDegreeList=t.data:e.$message.error(t.code+":"+t.message)},function(t){t&&e.$message.error(qo()(t))})},getSfcList:function(e){var t=this;this.loading||(this.sfcPageIndex=fh(e)?e:1,this.loading=!0,this.$service(dt,{params:{pageIndex:this.sfcPageIndex,pageSize:this.sfcPageSize}}).then(function(e){t.loading=!1,200===e.code?(t.$refs.elTableSfc.bodyWrapper.scrollTop=0,t.sfcList=e.data.records||[],t.sfcPageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))}))},getSfcListByDegree:function(){var e=this;if(this.sfcDegree){if(this.loading)return;this.loading=!0,this.sfcPageIndex=1,this.$service(mt,{params:{sportdtDegree:this.sfcDegree}}).then(function(t){e.loading=!1,200===t.code?(e.sfcList=[],e.sfcList.push(t.data),e.sfcPageCount=1):e.$message.error(t.code+":"+t.message)},function(t){t&&(e.loading=!1,e.$message.error(qo()(t)))})}else this.getSfcList(1)},changeWeightColumn:function(e){var t=this;this.$prompt("","修改权重",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,3}$/,inputErrorMessage:"0-999之间",closeOnClickModal:!1,inputValue:e.weight}).then(function(a){var i=a.value;t.$service(ct,{method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:qo()({matchInfoId:e.matchInfoId,weight:i})}).then(function(a){200===a.code?(e.weight=i,t.$message.success("修改成功！")):t.$message.error(a.code+":"+a.message)},function(e){t.$message.error(qo()(e))})})},setRefund:function(e){var t=this;this.$set(e,"loading",!0),this.$service(pt,{method:"post",data:{matchInfoId:e.matchInfoId}}).then(function(a){e.loading=!1,200===a.code?(e.refundPop=!1,t.$message.success("设置不中退成功"),t.pageChange(t.pageIndex)):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})},cancelRefund:function(e){var t=this;this.$set(e,"loading",!0),this.$service(ft,{method:"post",data:{matchInfoId:e.matchInfoId}}).then(function(a){e.loading=!1,200===a.code?(e.refundPop=!1,t.$message.success("取消不中退成功"),t.pageChange(t.pageIndex)):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})},SFCDegreePop:function(e,t){var a=this;this.form=tn()({},e||{sportteryDegree:"",prizeTime:"",startTime:"",endTime:"",matchSFCDegree:"",year:"",isNowDegree:"0"}),t&&(this.form.type=t,1===t&&(this.form.prizeTime=gh(this.form.prizeTime,"yyyy-MM-dd hh:mm:ss"),this.form.startTime=gh(this.form.startTime,"yyyy-MM-dd hh:mm:ss"),this.form.endTime=gh(this.form.endTime,"yyyy-MM-dd hh:mm:ss"),this.form.year=gh(new Date(this.form.year,"0","1"),"yyyy-MM-dd hh:mm:ss"))),this.dialogFormVisible=!0,this.$nextTick(function(){a.$refs.sfcDegreeForm.clearValidate()})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(t.updateLoading)return;t.updateLoading=!0,2===t.form.type?t.$service(gt,{method:"post",data:t.form}).then(function(e){t.updateLoading=!1,200===e.code?(t.dialogFormVisible=!1,t.$message.success("手动开奖成功！"),t.sfcDegree?t.getSfcListByDegree():t.getSfcList(t.sfcPageIndex)):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))}):(t.form.winningColoursInfoId&&(t.form.year=gh(t.form.year,"yyyy")),t.$service(t.form.winningColoursInfoId?bt:vt,{method:"post",data:t.form}).then(function(e){t.updateLoading=!1,200===e.code?(t.dialogFormVisible=!1,t.$message.success(t.form.winningColoursInfoId?"修改时间成功！":"添加成功！"),t.sfcDegree&&t.form.winningColoursInfoId?t.getSfcListByDegree():t.getSfcList(t.form.winningColoursInfoId?t.sfcPageIndex:1)):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))}))}})},fixSFCExpertStat:function(){var e=this;this.$prompt("期数","修复胜负彩专家数据",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+$/,inputErrorMessage:"胜负彩期数必须为数字",closeOnClickModal:!1,inputPlaceholder:"我方数据商编号，如2018008",inputValue:""}).then(function(t){var a=t.value;e.$service(ht,{params:{matchSFCDegree:a}}).then(function(t){200===t.code?e.$message.success("修复成功！"):e.$message.error(t.code+":"+t.message)},function(t){e.$message.error(qo()(t))})})},initPlay:function(e){var t=this,a=e.lotteryCategoryId,i=e.homeMatchTeam,r=e.guestMatchTeam,o=2!==a&&6!==a?i.teamName+"VS"+r.teamName:r.teamName+"VS"+i.teamName;this.$confirm("确定初始化【"+o+"】的赔率?",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){t.$service("/api/admin/matchInfo/initPlay",{params:{matchInfoId:e.matchInfoId}}).then(function(a){200===a.code?(t.$message.success("赛事赔率初始化成功"),e.status=0):t.$message.error(a.message)}).catch(function(e){e&&t.$message.error(qo()(e))})})}},watch:{windowHeight:function(){this.setHeight()}}},Xl={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"match-list"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title)+"\n        ")])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[3!==e.filterQuery.lotteryCategoryId?a("el-input",{staticStyle:{width:"auto"},attrs:{placeholder:"球队名/球队ID/赛事ID","prefix-icon":"el-icon-search",clearable:"",size:"small"},on:{change:function(t){return e.getSearchList("search")}},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}):e._e()],1)]),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.filterQuery,size:"mini",disabled:e.loading}},[a("el-form-item",[a("el-radio-group",{model:{value:e.filterQuery.lotteryCategoryId,callback:function(t){e.$set(e.filterQuery,"lotteryCategoryId",t)},expression:"filterQuery.lotteryCategoryId"}},[a("el-radio-button",{attrs:{label:""}},[e._v("全部")]),e._v(" "),e._l(e.lotteryList,function(t){return a("el-radio-button",{directives:[{name:"show",rawName:"v-show",value:4!==t.cId,expression:"item.cId!==4"}],key:t.cId,attrs:{label:t.cId}},[e._v("\n          "+e._s(t.cName))])})],2)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3!==e.filterQuery.lotteryCategoryId,expression:"filterQuery.lotteryCategoryId!==3"}],attrs:{label:"联赛筛选"}},[a("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchLeagueAsync,placeholder:"请输入联赛名称","trigger-on-focus":!1,debounce:30,"value-key":"leagueName",clearable:""},on:{select:e.handleLeagueSelect},model:{value:e.filterQuery.leagueName,callback:function(t){e.$set(e.filterQuery,"leagueName",t)},expression:"filterQuery.leagueName"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3!==e.filterQuery.lotteryCategoryId,expression:"filterQuery.lotteryCategoryId!==3"}],attrs:{label:"时间"}},[a("el-date-picker",{staticStyle:{width:"135px"},attrs:{type:"date",editable:"false",width:"100",placeholder:"开始日期","value-format":"yyyy-MM-dd 00:00:00","picker-options":{disabledDate:function(t){return 0!==new Date(e.filterQuery.endTime).getTime()&&t.getTime()>new Date(e.filterQuery.endTime).getTime()}}},model:{value:e.filterQuery.startTime,callback:function(t){e.$set(e.filterQuery,"startTime",t)},expression:"filterQuery.startTime"}}),e._v("\n      ~\n      "),a("el-date-picker",{staticStyle:{width:"135px"},attrs:{type:"date",editable:"false",width:"100",placeholder:"结束日期","value-format":"yyyy-MM-dd 23:59:59","picker-options":{disabledDate:function(t){return 0!==new Date(e.filterQuery.startTime).getTime()&&t.getTime()<new Date(e.filterQuery.startTime).getTime()}}},model:{value:e.filterQuery.endTime,callback:function(t){e.$set(e.filterQuery,"endTime",t)},expression:"filterQuery.endTime"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3!==e.filterQuery.lotteryCategoryId,expression:"filterQuery.lotteryCategoryId!==3"}],attrs:{label:"状态"}},[a("el-select",{staticStyle:{width:"105px"},model:{value:e.filterQuery.matchStatus,callback:function(t){e.$set(e.filterQuery,"matchStatus",t)},expression:"filterQuery.matchStatus"}},[a("el-option",{attrs:{label:"全部",value:""}},[e._v("全部")]),e._v(" "),e._l(e.matchStatus,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3!==e.filterQuery.lotteryCategoryId,expression:"filterQuery.lotteryCategoryId!==3"}],attrs:{label:"权重"}},[a("el-input",{staticStyle:{width:"102px"},attrs:{placeholder:"0~999",max:"999",min:"0",clearable:""},nativeOn:{keyup:function(t){return e.handlerWeightSearch(t)}},model:{value:e.filterQuery.weight,callback:function(t){e.$set(e.filterQuery,"weight",e._n(t))},expression:"filterQuery.weight"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3===e.filterQuery.lotteryCategoryId,expression:"filterQuery.lotteryCategoryId===3"}],attrs:{label:"状态"}},[a("el-select",{staticStyle:{width:"105px"},model:{value:e.sfcDegree,callback:function(t){e.sfcDegree=t},expression:"sfcDegree"}},[a("el-option",{attrs:{label:"全部",value:""}},[e._v("全部")]),e._v(" "),e._l(e.sfcDegreeList,function(e,t){return a("el-option",{key:t,attrs:{label:e+"期",value:e}})})],2)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getFilterList()}}},[e._v("查询")])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3===e.filterQuery.lotteryCategoryId,expression:"filterQuery.lotteryCategoryId===3"}]},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.SFCDegreePop()}}},[e._v("添加胜负彩期数")])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3===e.filterQuery.lotteryCategoryId,expression:"filterQuery.lotteryCategoryId===3"}]},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.fixSFCExpertStat()}}},[e._v("修复胜负彩专家数据")])],1)],1),e._v(" "),3!==e.filterQuery.lotteryCategoryId?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight},on:{"sort-change":e.sortList}},[a("el-table-column",{attrs:{prop:"matchInfoId",label:"赛事ID",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"MatchDetail",params:{id:t.row.matchInfoId}}}},[e._v("\n          "+e._s(t.row.matchInfoId||t.row.matchCode)+"\n        ")])]}}],null,!1,1687518503)}),e._v(" "),a("el-table-column",{attrs:{prop:"lotteryCategoryId",label:"彩种",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.lottery2CH[t.row.lotteryCategoryId]||"")+"\n      ")]}}],null,!1,4224572287)}),e._v(" "),a("el-table-column",{attrs:{prop:"leagueMatchName",label:"联赛类型",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"赛事对阵","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[2!==t.row.lotteryCategoryId&&6!==t.row.lotteryCategoryId?a("router-link",{attrs:{to:{name:"MatchDetail",params:{id:t.row.matchInfoId}}}},[e._v("\n          "+e._s(2===t.row.matchStatus||3===t.row.matchStatus?t.row.homeMatchTeam.teamName+" "+t.row.homeScore+"-"+t.row.guestScore+" "+t.row.guestMatchTeam.teamName:t.row.homeMatchTeam.teamName+" VS "+t.row.guestMatchTeam.teamName)+"\n        ")]):a("router-link",{attrs:{to:{name:"MatchDetail",params:{id:t.row.matchInfoId}}}},[e._v("\n          "+e._s(2==t.row.matchStatus||3==t.row.matchStatus?t.row.guestMatchTeam.teamName+" "+t.row.guestScore+"-"+t.row.homeScore+" "+t.row.homeMatchTeam.teamName:t.row.guestMatchTeam.teamName+" VS "+t.row.homeMatchTeam.teamName)+"\n        ")])]}}],null,!1,290325912)}),e._v(" "),a("el-table-column",{attrs:{label:"初始化赔率",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[0!==t.row.status?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.initPlay(t.row)}}},[e._v("初始化\n        ")]):e._e()]}}],null,!1,1331878822)}),e._v(" "),a("el-table-column",{attrs:{sortable:"filter"===e.listType&&"custom","sort-orders":e.sortRrders,prop:"threadCount",label:"文章数",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"filter"===e.listType&&"custom","sort-orders":e.sortRrders,prop:"targetThreadCount",label:"命中文章数",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"filter"===e.listType&&"custom","sort-orders":e.sortRrders,prop:"focusCount",label:"被关注数",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"filter"===e.listType&&"custom","sort-orders":e.sortRrders,prop:"analyzeCount",label:"解锁数",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"matchTime",label:"比赛时间",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"matchStatus",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("matchStatus2CH")(t.row.matchStatus)))]}}],null,!1,2331097917)}),e._v(" "),a("el-table-column",{attrs:{sortable:"filter"===e.listType&&"custom","sort-orders":e.sortRrders,prop:"weight",label:"权重",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.changeWeightColumn(t.row)}}},[e._v(e._s(t.row.weight))])]}}],null,!1,162087116)}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.refund?a("el-button",{attrs:{type:"text"}},[e._v("不中退款")]):e._e(),e._v(" "),t.row.refund||1!==t.row.matchStatus?e._e():a("el-popover",{attrs:{placement:"left"},model:{value:t.row.refundPop,callback:function(a){e.$set(t.row,"refundPop",a)},expression:"scope.row.refundPop"}},[a("p",[e._v("确定设置？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.refundPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.setRefund(t.row)}}},[e._v("确定\n            ")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",size:"small"},slot:"reference"},[e._v("设置不中退")])],1),e._v(" "),t.row.refund&&t.row.cancelRefund&&1===t.row.matchStatus?a("el-popover",{attrs:{placement:"left"},model:{value:t.row.refundPop,callback:function(a){e.$set(t.row,"refundPop",a)},expression:"scope.row.refundPop"}},[a("p",[e._v("取消不中退款？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.refundPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.cancelRefund(t.row)}}},[e._v("确定\n            ")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",size:"small"},slot:"reference"},[e._v("取消")])],1):e._e()]}}],null,!1,762821844)}),e._v(" "),a("el-table-column",{attrs:{prop:"tcmEventId",label:"竞猜赛事ID",width:"110"}})],1):e._e(),e._v(" "),3!==e.filterQuery.lotteryCategoryId?a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.pageChange}}):e._e(),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:3===e.filterQuery.lotteryCategoryId,expression:"filterQuery.lotteryCategoryId===3"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTableSfc",attrs:{data:e.sfcList,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"winningColoursInfoId",label:"胜负彩ID",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sportteryDegree",label:"竞彩网期数",width:"110"}}),e._v(" "),a("el-table-column",{attrs:{label:"开奖时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.prizeTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"开售时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.startTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"停售时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.endTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"wcFirstPrize",label:"胜负彩一等奖","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wcSecondPrice",label:"胜负彩二等奖","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"optionalNicePrice",label:"任九奖金","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.SFCDegreePop(t.row,1)}}},[e._v("修改时间")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.SFCDegreePop(t.row,2)}}},[e._v("手动开奖")])]}}])})],1),e._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:3===e.filterQuery.lotteryCategoryId,expression:"filterQuery.lotteryCategoryId===3"}],staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.sfcPageIndex,"page-count":e.sfcPageCount},on:{"current-change":e.getFilterList}}),e._v(" "),a("el-dialog",{attrs:{title:e.form.winningColoursInfoId?"修改开奖时间":"添加胜负彩期数",visible:e.dialogFormVisible,width:"500px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"sfcDegreeForm",attrs:{model:e.form,rules:e.formRules,disabled:e.updateLoading,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:(e.form.winningColoursInfoId?"":"竞彩网")+"期数",prop:"sportteryDegree",rules:[{required:!e.form.winningColoursInfoId,message:"竞彩网期数不为空",trigger:["blur","change"]},{pattern:/^\d+$/,message:"竞彩网期数必须为数字",trigger:["blur","change"]}]}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:!e.form.winningColoursInfoId,expression:"!form.winningColoursInfoId"}],attrs:{autocomplete:"off"},model:{value:e.form.sportteryDegree,callback:function(t){e.$set(e.form,"sportteryDegree",t)},expression:"form.sportteryDegree"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.form.winningColoursInfoId,expression:"form.winningColoursInfoId"}]},[e._v(e._s(e.form.sportteryDegree))])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.form.winningColoursInfoId||1===e.form.type,expression:"!form.winningColoursInfoId||form.type===1"}],attrs:{label:"开奖时间",prop:"prizeTime",rules:[{required:!e.form.winningColoursInfoId||1===e.form.type,message:"开奖时间不为空",trigger:["blur","change"]}]}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},model:{value:e.form.prizeTime,callback:function(t){e.$set(e.form,"prizeTime",t)},expression:"form.prizeTime"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.form.winningColoursInfoId||1===e.form.type,expression:"!form.winningColoursInfoId||form.type===1"}],attrs:{label:"开售时间",prop:"startTime",rules:[{required:!e.form.winningColoursInfoId||1===e.form.type,message:"开售时间不为空",trigger:["blur","change"]}]}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.form.winningColoursInfoId||1===e.form.type,expression:"!form.winningColoursInfoId||form.type===1"}],attrs:{label:"停售时间",prop:"endTime",rules:[{required:!e.form.winningColoursInfoId||1===e.form.type,message:"停售时间不为空",trigger:["blur","change"]}]}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2===e.form.type,expression:"form.type===2"}],attrs:{label:"一等奖奖金",prop:"wcFirstPrize",rules:[{required:2===e.form.type,message:"一等奖奖金不为空",trigger:["blur","change"]},{pattern:/^[0-9]+([.]{1}[0-9]+){0,1}$/,message:"奖金格式不正确",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.wcFirstPrize,callback:function(t){e.$set(e.form,"wcFirstPrize",t)},expression:"form.wcFirstPrize"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2===e.form.type,expression:"form.type===2"}],attrs:{label:"二等奖奖金",prop:"wcSecondPrice",rules:[{required:2===e.form.type,message:"二等奖奖金不为空",trigger:["blur","change"]},{pattern:/^[0-9]+([.]{1}[0-9]+){0,1}$/,message:"奖金格式不正确",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.wcSecondPrice,callback:function(t){e.$set(e.form,"wcSecondPrice",t)},expression:"form.wcSecondPrice"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2===e.form.type,expression:"form.type===2"}],attrs:{label:"任九奖金",prop:"optionalNicePrice",rules:[{required:2===e.form.type,message:"任九奖金不为空",trigger:["blur","change"]},{pattern:/^[0-9]+([.]{1}[0-9]+){0,1}$/,message:"奖金格式不正确",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.optionalNicePrice,callback:function(t){e.$set(e.form,"optionalNicePrice",t)},expression:"form.optionalNicePrice"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.form.winningColoursInfoId,expression:"!form.winningColoursInfoId"}],attrs:{label:"sportDT编号",prop:"matchSFCDegree",rules:[{required:!0,message:"sportDT编号不为空",trigger:["blur","change"]},{pattern:/^\d+$/,message:"sportDT编号必须为数字",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.matchSFCDegree,callback:function(t){e.$set(e.form,"matchSFCDegree",t)},expression:"form.matchSFCDegree"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.form.winningColoursInfoId,expression:"!form.winningColoursInfoId"}],attrs:{label:"年份",prop:"year",rules:[{required:!e.form.winningColoursInfoId,message:"年份不为空",trigger:["blur","change"]}]}},[a("el-date-picker",{attrs:{"value-format":"yyyy",type:"year",placeholder:"选择年"},model:{value:e.form.year,callback:function(t){e.$set(e.form,"year",t)},expression:"form.year"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.form.winningColoursInfoId,expression:"!form.winningColoursInfoId"}],attrs:{label:"是否当期"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.form.isNowDegree,callback:function(t){e.$set(e.form,"isNowDegree",t)},expression:"form.isNowDegree"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0"},model:{value:e.form.isNowDegree,callback:function(t){e.$set(e.form,"isNowDegree",t)},expression:"form.isNowDegree"}},[e._v("否")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("sfcDegreeForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},Kl=a("VU/8")(Yl,Xl,!1,null,null,null).exports,Jl={name:"MatchDetail",data:function(){return{fromRouter:null,currentRouter:null,lottery2CH:{},loading:!1,matchInfo:"",expertStat:"",threadList:[],pageIndex:1,pageSize:10,pageCount:1,threadLoading:!1}},created:function(){this.getLottery(),this.initRouter(this.$route.params.id)},beforeRouteEnter:function(e,t,a){a(function(a){a.fromRouter=t&&t.name?t:null,a.currentRouter=e})},methods:{initRouter:function(e){var t=this;this.getDetail(e).then(function(e){e&&t.getThreadList()})},getLottery:function(){var e=this;this.$service(h).then(function(t){200===t.code&&t.data.forEach(function(t){e.lottery2CH[t.cId]=t.cName})})},getDetail:function(e){var t=this;if(!this.loading)return this.loading=!0,An(e).then(function(e){return t.matchInfo=e,t.loading=!1,Bo.a.resolve(e)}).catch(function(e){t.loading=!1,t.$message.error(qo()(e))})},getThreadList:function(e){var t=this;this.threadLoading||(this.threadLoading=!0,this.pageIndex=e||1,this.$service(It,{urlParams:{matchInfoId:this.matchInfo.matchInfoId,pageIndex:this.pageIndex,pageSize:this.pageSize}}).then(function(e){t.threadLoading=!1,200===e.code?(t.threadList=e.data.records||[],t.pageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.threadLoading=!1,t.$message.error(qo()(e)))}))},changeWeightColumn:function(e){var t=this;this.$prompt("","修改权重",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,3}$/,inputErrorMessage:"0-999之间",closeOnClickModal:!1,inputValue:e.weight}).then(function(a){var i=a.value;t.$service(xt,{urlParams:{threadId:e.threadId,weight:i}}).then(function(a){200===a.code?(e.weight=i,t.$message.success("修改成功！")):t.$message.error(a.code+":"+a.message)},function(e){t.$message.error(qo()(e))})})}},beforeRouteUpdate:function(e,t,a){this.initRouter(e.params.id),a()}},Zl={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"match-detail"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e.fromRouter?a("el-breadcrumb-item",{attrs:{to:{path:e.fromRouter.fullPath}}},[e._v(e._s(e.fromRouter.meta.title))]):e._e(),e._v(" "),e.currentRouter?a("el-breadcrumb-item",[e._v(e._s(e.currentRouter.meta.title))]):e._e()],1)],1)]),e._v(" "),e.matchInfo?a("table",{staticClass:"match-table"},[a("tr",[a("td",[a("el-tag",[e._v(e._s(e.lottery2CH[e.matchInfo.lotteryCategoryId]))])],1),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("联赛类型：")]),e._v(" "),a("td",[e._v(e._s(e.matchInfo.leagueMatchName))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("赛事ID：")]),e._v(" "),a("td",[e._v(e._s(e.matchInfo.matchInfoId||e.matchInfo.matchCode))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("比赛时间：")]),e._v(" "),a("td",[e._v(e._s(e.matchInfo.matchTime))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("赛事状态：")]),e._v(" "),a("td",[e._v(e._s(e._f("matchStatus2CH")(e.matchInfo.matchStatus)))])]),e._v(" "),a("tr",[a("td",[e.matchInfo.refund?a("span",{staticClass:"text-red"},[a("b",[e._v("不中退")])]):e._e()]),e._v(" "),a("td",{attrs:{colspan:"4",align:"center"}},[2!==e.matchInfo.lotteryCategoryId&&6!==e.matchInfo.lotteryCategoryId?a("div",{staticClass:"info-vs-team"},[a("div",{staticClass:"team"},[a("p",[e._v(e._s(e.matchInfo.homeMatchTeam.teamName))]),e._v(" "),a("p",[e._v(e._s(e.matchInfo.homeMatchTeam.teamCode))])]),e._v(" "),e.matchInfo.homeMatchTeam.teamIcon?a("img",{attrs:{src:e.matchInfo.homeMatchTeam.teamIcon+"?imageView&thumbnail=60y60&quality=85"}}):e._e(),e._v("\n          "+e._s(2===e.matchInfo.matchStatus||3===e.matchInfo.matchStatus?e.matchInfo.homeScore+" - "+e.matchInfo.guestScore:" VS ")+"\n          "),e.matchInfo.guestMatchTeam.teamIcon?a("img",{attrs:{src:e.matchInfo.guestMatchTeam.teamIcon+"?imageView&thumbnail=60y60&quality=85"}}):e._e(),e._v(" "),a("div",{staticClass:"team"},[a("p",[e._v(e._s(e.matchInfo.guestMatchTeam.teamName))]),e._v(" "),a("p",[e._v(e._s(e.matchInfo.guestMatchTeam.teamCode))])])]):a("div",{staticClass:"info-vs-team"},[a("div",{staticClass:"team"},[a("p",[e._v(e._s(e.matchInfo.guestMatchTeam.teamName))]),e._v(" "),a("p",[e._v(e._s(e.matchInfo.guestMatchTeam.teamCode))])]),e._v(" "),e.matchInfo.guestMatchTeam.teamIcon?a("img",{attrs:{src:e.matchInfo.guestMatchTeam.teamIcon+"?imageView&thumbnail=60y60&quality=85"}}):e._e(),e._v("\n          "+e._s(2===e.matchInfo.matchStatus||3===e.matchInfo.matchStatus?e.matchInfo.guestScore+" - "+e.matchInfo.homeScore:" VS ")+"\n          "),e.matchInfo.homeMatchTeam.teamIcon?a("img",{attrs:{src:e.matchInfo.homeMatchTeam.teamIcon+"?imageView&thumbnail=60y60&quality=85"}}):e._e(),e._v(" "),a("div",{staticClass:"team"},[a("p",[e._v(e._s(e.matchInfo.homeMatchTeam.teamName))]),e._v(" "),a("p",[e._v(e._s(e.matchInfo.homeMatchTeam.teamCode))])])])]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("文章数：")]),e._v(" "),a("td",[e._v(e._s(e.matchInfo.threadCount))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("关注数：")]),e._v(" "),a("td",[e._v(e._s(e.matchInfo.focusCount))])])]):e._e(),e._v(" "),e.matchInfo?a("div",{staticClass:"match-odds"},e._l(e.matchInfo.playList,function(t,i){return a("div",{key:i,staticClass:"play-list",class:{two:2==t.playItemList.length}},[a("div",{staticClass:"odds-name"},[e._v(e._s(t.playName)+"("+e._s(t.concede)+")")]),e._v(" "),e._l(t.playItemList,function(i,r){return a("div",{key:r,staticClass:"odds-list",class:{hit:t.resultItemId===i.playItemId}},[a("span",[e._v(e._s(i.playItemName)+"("+e._s(i.odds)+")")]),e._v(" "),i.postExpertCount>0?a("el-popover",{attrs:{placement:"left",width:"300",trigger:"hover",content:i.postExperts.join("、")}},[a("el-button",{staticStyle:{position:"absolute","z-index":"2",bottom:"0",right:"0"},attrs:{slot:"reference",type:"primary",size:"mini"},slot:"reference"},[e._v(e._s(i.postExpertCount+"人"))])],1):e._e()],1)})],2)}),0):e._e(),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.threadLoading,expression:"threadLoading"}],attrs:{data:e.threadList,stripe:""}},[a("el-table-column",{attrs:{label:"连红",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.isWin&&3===t.row.plock&&t.row.threadTypeId<3?a("span",{staticClass:"text-red"},[e._v("√")]):e._e(),e._v(" "),0===t.row.isWin&&3===t.row.plock&&t.row.threadTypeId<3?a("span",[e._v("×")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"文章标题","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.refund?a("el-tag",{attrs:{size:"mini"}},[e._v("不中退")]):e._e(),e._v(" "),t.row.businessTypeId?a("el-tag",{attrs:{size:"mini"}},[e._v("临场")]):e._e(),a("router-link",{attrs:{to:{name:"ArticleQuizDetail",params:{id:t.row.threadId}}}},[3==t.row.categoryId||4==t.row.categoryId?a("span",{staticStyle:{color:"#e62121"}},[e._v("【"+e._s(e._f("threadType2CH")(t.row.threadTypeId))+"】")]):e._e(),e._v(e._s(t.row.title))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"专家","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"ExpertDetail",params:{id:t.row.userId}}}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"threadId",label:"文章ID",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"ArticleQuizDetail",params:{id:t.row.threadId}}}},[e._v(e._s(t.row.threadId))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"发布时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.createTime)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.price>0?a("span",[e._v(e._s(t.row.price))]):a("span",{staticClass:"text-red"},[e._v("免费")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"buyCount",label:"购买数",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"weight",label:"权重",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.changeWeightColumn(t.row)}}},[e._v(e._s(t.row.weight))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"plock",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("articleStatus2CH")(t.row.plock))+"\n      ")]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getThreadList}})],1)},staticRenderFns:[]};var ec=a("VU/8")(Jl,Zl,!1,function(e){a("m0ca")},null,null).exports,tc={name:"MatchBinding",data:function(){return{dataObj:[{loading:!1,filter:{sportType:"1"},form:{sportType:"1",jcType:"0",mapStatus:"0",leagueMatchId:"0",matchTime:""},league:[],list:[],height:null,total:1,pageChange:this.oldPage},{loading:!1,filter:{sportType:"1"},form:{sportType:"1",jcType:"0",mapStatus:"0",leagueMatchId:"0",matchTime:""},league:[],list:[],height:null,total:1,pageChange:this.newPage}],limit:25,offset:{0:0,1:0}}},computed:u()({},Object(sn.d)(["windowHeight"])),mounted:function(){this.setHeight(),this.getLeagueList(0),this.getLeagueList(1)},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.dataObj[0].height=e.windowHeight-e.getOffsetTop(e.$refs.table0[0].$el)-63,e.dataObj[1].height=e.windowHeight-e.getOffsetTop(e.$refs.table1[0].$el)-63})},getOffsetTop:function(e){for(var t=e,a=t.offsetTop;t=t.offsetParent;)a+=t.offsetTop,a-=t.scrollTop;return a},getMatchList:function(e,t){var a=this,i=tn()({},this.dataObj[e].form);o()(i).forEach(function(e){i[e]||delete i[e]}),this.dataObj[e].loading||(this.dataObj[e].loading=!0,this.dataObj[e].filter=i,this.offset[e]=t?(t-1)*this.limit:0,this.$service(e?Ir:Tr,{params:tn()(i,{offset:this.offset[e],limit:this.limit})}).then(function(t){200===t.code?(a.dataObj[e].list=t.data.data||[],a.dataObj[e].total=t.data.total||1,a.$refs["table"+e][0].bodyWrapper.scrollTop=0):a.$message.error(t.code+":"+t.message),a.dataObj[e].loading=!1}).catch(function(t){t&&(a.dataObj[e].loading=!1,t&&a.$message.error(qo()(t)))}))},getLeagueList:function(e){var t=this,a={sportType:this.dataObj[e].form.sportType,jcType:this.dataObj[e].form.jcType,mapStatus:this.dataObj[e].form.mapStatus};this.$service(e?kr:xr,{params:a}).then(function(a){200===a.code&&(t.dataObj[e].league=a.data||[])})},oldPage:function(e){this.getMatchList(0,e)},newPage:function(e){this.getMatchList(1,e)},bindingMatch:function(e){var t=this,a=e.input;return a?/^\d+$/.test(a)?void(e.loading||(this.$set(e,"loading",!1),this.$service($r,{params:{matchInfoId:e.id,nanoMatchId:a}}).then(function(i){200===i.code?(e.mapId=a,t.$message.success("绑定成功")):t.$message.error(i.code+":"+i.message),e.loading=!1}).catch(function(a){a&&(e.loading=!1,a&&t.$message.error(qo()(a)))}))):this.$message.error("新赛事ID必须全部为数字"):this.$message.error("新赛事ID不为空")},unbindingMatch:function(e){var t=this;e.loading||(this.$set(e,"loading",!1),this.$service(Cr,{params:{nanoMatchId:e.mapId}}).then(function(a){200===a.code?(e.mapId=null,t.$message.success("解绑成功")):t.$message.error(a.code+":"+a.message),e.loading=!1}).catch(function(a){a&&(e.loading=!1,a&&t.$message.error(qo()(a)))}))}},watch:{windowHeight:function(){this.setHeight()}}},ac={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"match-list"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1)]),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"10px","font-size":"16px","text-align":"center"},attrs:{gutter:10}},[a("el-col",{attrs:{span:"12"}},[e._v("旧数据商(sportsDT)")]),e._v(" "),a("el-col",{attrs:{span:"12"}},[e._v("新数据商(纳米)")])],1),e._v(" "),a("el-row",{attrs:{gutter:10}},e._l(e.dataObj,function(t,i){return a("el-col",{key:i,style:"border-right: "+(0===i?1:0)+"px solid #ccc",attrs:{span:"12"}},[a("el-form",{attrs:{inline:!0,model:t.form,size:"mini",disabled:t.loading}},[a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{staticStyle:{width:"90px"},on:{change:function(t){return e.getLeagueList(i)}},model:{value:t.form.sportType,callback:function(a){e.$set(t.form,"sportType",a)},expression:"item.form.sportType"}},[a("el-option",{attrs:{label:"足球",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"篮球",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-select",{staticStyle:{width:"90px"},on:{change:function(t){return e.getLeagueList(i)}},model:{value:t.form.jcType,callback:function(a){e.$set(t.form,"jcType",a)},expression:"item.form.jcType"}},[a("el-option",{attrs:{label:"全部",value:"0"}},[e._v("全部")]),e._v(" "),a("el-option",{attrs:{label:"竞彩",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"北单",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"其他",value:"3"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"匹配"}},[a("el-select",{staticStyle:{width:"90px"},on:{change:function(t){return e.getLeagueList(i)}},model:{value:t.form.mapStatus,callback:function(a){e.$set(t.form,"mapStatus",a)},expression:"item.form.mapStatus"}},[a("el-option",{attrs:{label:"未匹配",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"匹配",value:"1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"联赛"}},[a("el-select",{model:{value:t.form.leagueMatchId,callback:function(a){e.$set(t.form,"leagueMatchId",a)},expression:"item.form.leagueMatchId"}},[a("el-option",{attrs:{label:"全部",value:"0"}},[e._v("全部")]),e._v(" "),e._l(t.league,function(e){return a("el-option",{key:e.leagueMatchId,attrs:{label:e.leagueMatchName,value:e.leagueMatchId}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"时间"}},[a("el-date-picker",{staticStyle:{width:"190px"},attrs:{type:"datetime",editable:"false",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.form.matchTime,callback:function(a){e.$set(t.form,"matchTime",a)},expression:"item.form.matchTime"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.getMatchList(i)}}},[e._v("筛选")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"item.loading"}],ref:"table"+i,refInFor:!0,attrs:{data:t.list,stripe:"","max-height":t.height<400?400:t.height}},[a("el-table-column",{attrs:{prop:"id",label:"赛事id",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{label:"赛事对阵","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(i){return[a("p",[e._v(e._s("1"===t.filter.sportType?i.row.homeTeam.nameZh+" VS "+i.row.awayTeam.nameZh:i.row.awayTeam.nameZh+" vs "+i.row.homeTeam.nameZh))]),e._v(" "),a("p",[e._v(e._s("1"===t.filter.sportType?i.row.homeTeam.nameEn+" VS "+i.row.awayTeam.nameEn:i.row.awayTeam.nameEn+" vs "+i.row.homeTeam.nameEn))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"matchTime",label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("dateFormat")([t.row.matchTime,"yyyy-MM-dd hh:mm:ss"]))+"\n          ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"leagueMatchName",label:"联赛","min-width":"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"jcStatus",label:"类型",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s({1:"竞猜",2:"北单",3:"其他"}[t.row.jcStatus]||"-")+"\n          ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:0===i?"新ID匹配":"匹配情况"},scopedSlots:e._u([{key:"default",fn:function(t){return[0!==i||t.row.mapId?e._e():a("p",[a("el-input",{attrs:{placeholder:"填写新ID",size:"mini"},model:{value:t.row.input,callback:function(a){e.$set(t.row,"input",a)},expression:"scope.row.input"}})],1),e._v(" "),0===i&&t.row.mapId?a("p",[e._v("\n              "+e._s(t.row.mapId)+"\n            ")]):e._e(),e._v(" "),0===i?a("p",[t.row.mapId?e._e():a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.bindingMatch(t.row)}}},[e._v("\n                匹配\n              ")]),e._v(" "),t.row.mapId?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.unbindingMatch(t.row)}}},[e._v("\n                解绑\n              ")]):e._e()],1):e._e(),e._v(" "),1===i?a("p",[e._v(e._s(t.row.mapId?"已匹配("+t.row.mapId+")":"未匹配"))]):e._e()]}}],null,!0)})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",size:"mini",layout:"prev, pager, next","current-page":Math.floor(e.offset[i]/e.limit)+1,total:t.total,"page-size":e.limit},on:{"current-change":t.pageChange,"update:currentPage":function(t){e.$set(Math,"floor(offset[index] / limit) + 1",t)},"update:current-page":function(t){e.$set(Math,"floor(offset[index] / limit) + 1",t)}}})],1)}),1)],1)},staticRenderFns:[]},ic=a("VU/8")(tc,ac,!1,null,null,null).exports,rc=[{cName:"双色球",cId:101},{cName:"3D",cId:102},{cName:"大乐透",cId:103},{cName:"排列3",cId:104},{cName:"排列5",cId:105}],oc={},nc={};rc.map(function(e){oc[e.cId]=e.cName,nc[e.cName]=e.cId});var sc={name:"NumLottery",data:function(){return{sortRrders:["descending","ascending",null],offset:0,limit:20,numLotteryShow:!1,total:1,list:[],loading:!1,filterQuery:{gameType:"0"},form:{prizeTime:null,endTime:null,status:0,drawLottery:1},infoForm:{awardInfo:{testNum:0,poolMoney:{num:"",unit:"万"},sales:{num:"",unit:"万"},items:[{level:"",betNum:"",amount:""}]}},gameType:"0",lotteryList:rc,updateLoading:!1,tableHeight:null,numLotteryInfoShow:!1}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getNumLottery(),this.setHeight()},filters:{numLotteryId2CH:function(e){return oc[e]||""},status2CH:function(e){return{0:"正常",1:"停用"}[e]||"-"},drawLottery2CH:function(e){return{0:"未开奖",1:"已开奖"}[e]||"-"}},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},itemsRule:function(e,t,a){var i=this.$refs.level[this.infoForm.awardInfo.items.length-1].$refs.input.value,r=this.$refs.betNum[this.infoForm.awardInfo.items.length-1].$refs.input.value,o=this.$refs.amonut[this.infoForm.awardInfo.items.length-1].$refs.input.value;i?r?o?a():a(new Error("单注奖金不可为空")):a(new Error("中奖注数不可为空")):a(new Error("奖等信息不可为空"))},getNumLottery:function(e){var t=this;if(!this.loading){this.loading=!0,this.searchQuery="",this.offset="number"==typeof e&&e?(e-1)*this.limit:0;var a={offset:this.offset,limit:this.limit};"0"!==this.filterQuery.gameType&&(a.gameType=this.filterQuery.gameType),this.$service(_t,{params:a}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.data||[],e.data.data.forEach(function(e){e.awardInfo&&(e.awardInfo=JSON.parse(e.awardInfo))}),t.$refs.elTable.bodyWrapper.scrollTop=0,t.total=e.data.total||0):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))})}},filterBall:function(e){return e.split(",").filter(function(e){return""!==e})},addNumLottery:function(e){var t=this;this.gameType=e.gameType,this.form={gamesId:e.gamesId,red:e.red,blue:e.blue,sales:e.sales,poolMoney:e.poolMoney,status:e.status,drawLottery:e.drawLottery,prizeTime:e.prizeTime,endTime:e.endTime},e&&(this.form.status=e.status+"",this.form.drawLottery=e.drawLottery+"",e.prizeTime&&(this.form.prizeTime=this.dateFormat(e.prizeTime)),e.endTime&&(this.form.endTime=this.dateFormat(e.endTime)),this.form.gameType=oc[e.gameType]||"",this.form.degree=e.degree),this.numLotteryShow=!0,this.$nextTick(function(){t.$refs.form.clearValidate()})},dateFormat:function(e){return gh(e,"yyyy-MM-dd hh:mm:ss")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(t.updateLoading)return;t.updateLoading=!0;var a=u()({},t.form);delete a.gameType,a.red=t.filterBall(a.red.replace(/，/g,",")).join(","),a.blue=t.filterBall(a.blue.replace(/，/g,",")).join(","),t.$service(yt,{method:"post",data:a}).then(function(e){t.updateLoading=!1,200===e.code?(t.numLotteryShow=!1,t.$message.success("数字彩更新成功"),t.getNumLottery()):t.$message.error(e.message)},function(e){e&&(t.updateLoading=!1,t.$message.error(qo()(e)))})}})},protocolButton:function(){this.$set(this.infoForm.awardInfo.items,this.infoForm.awardInfo.items.length,{level:"",betNum:"",amount:""}),this.$refs.infoForm.clearValidate()},deleteItem:function(e){this.infoForm.awardInfo.items.splice(e,1)},numLotteryInfo:function(e){var t=this;this.gameType=e.gameType,this.infoForm={gamesId:e.gamesId,awardInfo:{poolMoney:{num:"",unit:"万"},sales:{num:"",unit:"万"},items:[{level:"",betNum:"",amount:""}]}},e&&(this.infoForm.degree=e.degree,this.infoForm.gameType=oc[e.gameType]||""),e.awardInfo.poolMoney&&(this.infoForm.awardInfo.poolMoney.num=e.awardInfo.poolMoney.num,this.infoForm.awardInfo.poolMoney.unit=e.awardInfo.poolMoney.unit),e.awardInfo.sales&&(this.infoForm.awardInfo.sales.num=e.awardInfo.sales.num,this.infoForm.awardInfo.sales.unit=e.awardInfo.sales.unit),e.awardInfo.items&&e.awardInfo.items.forEach(function(e,a){t.$set(t.infoForm.awardInfo.items,a,{level:"",betNum:"",amount:""}),t.infoForm.awardInfo.items[a].level=e.level,t.infoForm.awardInfo.items[a].betNum=e.betNum,t.infoForm.awardInfo.items[a].amount=e.amount}),e.awardInfo.testNum&&(this.infoForm.awardInfo.testNum=e.awardInfo.testNum),this.numLotteryInfoShow=!0,this.$nextTick(function(){t.$refs.infoForm.clearValidate()})},submitInfoForm:function(e){var t=this;this.$refs.infoForm.validate(function(e){if(e){if(t.updateLoading)return;t.updateLoading=!0;var a=u()({},t.infoForm);a.testNum||delete a.testNum,a.awardInfo=qo()(a.awardInfo),delete a.gamesId,a.gameType=nc[a.gameType],t.$service(wt,{method:"post",data:a}).then(function(e){t.updateLoading=!1,200===e.code?(t.numLotteryInfoShow=!1,t.$message.success("开奖信息更新成功"),t.getNumLottery()):t.$message.error(e.message)},function(e){e&&(t.updateLoading=!1,t.$message.error(qo()(e)))})}})}},watch:{windowHeight:function(){this.setHeight()}}},lc={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"numbersGames-list"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title)+"\n        ")])})],2)],1)]),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.filterQuery,size:"mini",disabled:e.loading}},[a("el-form-item",[a("el-radio-group",{on:{change:function(t){return e.getNumLottery("gameType")}},model:{value:e.filterQuery.gameType,callback:function(t){e.$set(e.filterQuery,"gameType",t)},expression:"filterQuery.gameType"}},[a("el-radio-button",{attrs:{label:"0"}},[e._v("全部")]),e._v(" "),e._l(e.lotteryList,function(t){return a("el-radio-button",{key:t.cId,attrs:{label:t.cId}},[e._v(e._s(t.cName)+"\n        ")])})],2)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight},on:{"sort-change":e.sortList}},[a("el-table-column",{attrs:{label:"ID",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.gamesId)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"彩种",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("numLotteryId2CH")(t.row.gameType))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"开奖结果","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(e.filterBall(t.row.red),function(i,r){return a("span",{directives:[{name:"show",rawName:"v-show",value:t.row.red,expression:"scope.row.red"}],key:r,staticClass:"num-lottery-red-ball"},[e._v(e._s(i))])}),e._v(" "),e._l(e.filterBall(t.row.blue),function(i,r){return a("span",{directives:[{name:"show",rawName:"v-show",value:t.row.blue,expression:"scope.row.blue"}],key:r,staticClass:"num-lottery-blue-ball"},[e._v(e._s(i))])})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"degree",label:"期数",width:"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"prizeTime",label:"开奖时间",width:"170","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.prizeTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"endTime",label:"售卖截止时间",width:"170","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.endTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"poolMoney",label:"奖金池","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sales",label:"售卖金额","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("status2CH")(t.row.status))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"drawLottery",label:"是否开奖",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("drawLottery2CH")(t.row.drawLottery))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.addNumLottery(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",disabled:0===t.row.drawLottery},on:{click:function(a){return e.numLotteryInfo(t.row)}}},[e._v("开奖信息")])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":Math.floor(e.offset/e.limit)+1,total:e.total,"page-size":e.limit},on:{"current-change":e.getNumLottery,"update:currentPage":function(t){e.$set(Math,"floor(offset/limit) + 1",t)},"update:current-page":function(t){e.$set(Math,"floor(offset/limit) + 1",t)}}}),e._v(" "),a("el-dialog",{directives:[{name:"show",rawName:"v-show",value:e.numLotteryShow,expression:"numLotteryShow"}],attrs:{title:"更新数字彩",visible:e.numLotteryShow,width:"500px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.numLotteryShow=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,disabled:e.updateLoading,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:"期数"}},[a("el-input",{attrs:{value:e.form.gameType+"第"+e.form.degree+"期",autocomplete:"off",disabled:e.form.gamesId}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开奖时间",prop:"prizeTime",rules:[{required:!0,message:"开奖时间不为空",trigger:["blur","change"]}]}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},model:{value:e.form.prizeTime,callback:function(t){e.$set(e.form,"prizeTime",t)},expression:"form.prizeTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"停售时间",prop:"endTime",rules:[{required:!0,message:"停售时间不为空",trigger:["blur","change"]}]}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"红球结果",prop:"red",rules:[{pattern:/^[0-9,，]+$/,message:"红球结果必须为数字加逗号",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.red,callback:function(t){e.$set(e.form,"red",t)},expression:"form.red"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"蓝球列表",prop:"blue",rules:[{pattern:/^[0-9,，]+$/,message:"蓝球结果必须为数字加逗号",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off",disabled:102===e.gameType||104===e.gameType||105===e.gameType},model:{value:e.form.blue,callback:function(t){e.$set(e.form,"blue",t)},expression:"form.blue"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"售卖金额",prop:"sales",rules:[{required:!0,message:"售卖金额不为空",trigger:["blur","change"]},{pattern:/^[0-9]+([.]{1}[0-9]+){0,1}$/,message:"金额格式不正确",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.sales,callback:function(t){e.$set(e.form,"sales",t)},expression:"form.sales"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"奖金池",prop:"poolMoney",rules:[{required:!0,message:"奖金池不为空",trigger:["blur","change"]},{pattern:/^[0-9]+([.]{1}[0-9]+){0,1}$/,message:"奖金池格式不正确",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.poolMoney,callback:function(t){e.$set(e.form,"poolMoney",t)},expression:"form.poolMoney"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否开奖",prop:"drawLottery",rules:[{required:!0}]}},[a("el-radio",{attrs:{label:"1"},model:{value:e.form.drawLottery,callback:function(t){e.$set(e.form,"drawLottery",t)},expression:"form.drawLottery"}},[e._v("已开奖")]),e._v(" "),a("el-radio",{attrs:{label:"0"},model:{value:e.form.drawLottery,callback:function(t){e.$set(e.form,"drawLottery",t)},expression:"form.drawLottery"}},[e._v("未开奖")])],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status",rules:[{required:!0}]}},[a("el-radio",{attrs:{label:"1"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[e._v("停用")]),e._v(" "),a("el-radio",{attrs:{label:"0"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[e._v("正常")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.numLotteryShow=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"开奖信息",visible:e.numLotteryInfoShow,width:"600px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.numLotteryInfoShow=t}}},[a("el-form",{ref:"infoForm",attrs:{disabled:e.updateLoading,model:e.infoForm,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:"期数"}},[a("el-input",{attrs:{value:e.infoForm.gameType+"第"+e.infoForm.degree+"期",autocomplete:"off",disabled:e.infoForm.gamesId}})],1),e._v(" "),a("el-form-item",{attrs:{label:"奖池积累",prop:"poolMoney"}},[a("el-input",{staticClass:"input-with-select",model:{value:e.infoForm.awardInfo.poolMoney.num,callback:function(t){e.$set(e.infoForm.awardInfo.poolMoney,"num",t)},expression:"infoForm.awardInfo.poolMoney.num"}},[a("el-select",{attrs:{slot:"append",autocomplete:"off",placeholder:""},slot:"append",model:{value:e.infoForm.awardInfo.poolMoney.unit,callback:function(t){e.$set(e.infoForm.awardInfo.poolMoney,"unit",t)},expression:"infoForm.awardInfo.poolMoney.unit"}},[a("el-option",{attrs:{label:"万",value:"万"}}),e._v(" "),a("el-option",{attrs:{label:"亿",value:"亿"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"本期销量",prop:"sales"}},[a("el-input",{staticClass:"input-with-select",attrs:{autocomplete:"off"},model:{value:e.infoForm.awardInfo.sales.num,callback:function(t){e.$set(e.infoForm.awardInfo.sales,"num",t)},expression:"infoForm.awardInfo.sales.num"}},[a("el-select",{attrs:{slot:"append",placeholder:""},slot:"append",model:{value:e.infoForm.awardInfo.sales.unit,callback:function(t){e.$set(e.infoForm.awardInfo.sales,"unit",t)},expression:"infoForm.awardInfo.sales.unit"}},[a("el-option",{attrs:{label:"万",value:"万"}}),e._v(" "),a("el-option",{attrs:{label:"亿",value:"亿"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"试机号",prop:"testNum"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.infoForm.awardInfo.testNum,callback:function(t){e.$set(e.infoForm.awardInfo,"testNum",t)},expression:"infoForm.awardInfo.testNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"具体信息",prop:"items",rules:[{validator:e.itemsRule,trigger:["blur","change"]}]}},[a("table",{staticClass:"expert-form-table"},[a("colgroup",[a("col",{attrs:{width:"25%"}}),e._v(" "),a("col",{attrs:{width:"25%"}}),e._v(" "),a("col",{attrs:{width:"25%"}}),e._v(" "),a("col",{attrs:{width:"15%"}})]),e._v(" "),a("tr",[a("td",[e._v("奖等")]),e._v(" "),a("td",[e._v("中奖注数（注）")]),e._v(" "),a("td",[e._v("单注奖金（元）")]),e._v(" "),a("td",[e._v("操作")])]),e._v(" "),e._l(e.infoForm.awardInfo.items,function(t,i){return a("tr",{key:i},[a("td",[a("el-input",{ref:"level",refInFor:!0,staticStyle:{width:"80px"},model:{value:t.level,callback:function(a){e.$set(t,"level",a)},expression:"item.level"}})],1),e._v(" "),a("td",[a("el-input",{ref:"betNum",refInFor:!0,staticStyle:{width:"80px"},model:{value:t.betNum,callback:function(a){e.$set(t,"betNum",a)},expression:"item.betNum"}})],1),e._v(" "),a("td",[a("el-input",{ref:"amonut",refInFor:!0,staticStyle:{width:"80px"},model:{value:t.amount,callback:function(a){e.$set(t,"amount",a)},expression:"item.amount"}})],1),e._v(" "),a("td",[0!=i?a("el-button",{staticStyle:{width:"60px"},attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.deleteItem(i)}}},[e._v("\n                删除\n              ")]):e._e()],1)])})],2)]),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.protocolButton()}}},[e._v("增加")])],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.numLotteryInfoShow=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitInfoForm("form")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var cc=a("VU/8")(sc,lc,!1,function(e){a("yh1w")},null,null).exports,dc={name:"ArticleReviewList",data:function(){return{filterQuery:{reviewStatus:"1"},lottery2CH:{},loading:!1,list:[],pageIndex:1,pageSize:25,pageCount:1,tableHeight:null}},computed:u()({},Object(sn.d)(["windowHeight"])),filters:{removeXSS:function(e){return e.replace(/<[^>]*>/g,"")}},created:function(){this.getList(),this.getLottery(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getLottery:function(){var e=this;this.$service(h).then(function(t){200===t.code&&t.data.forEach(function(t){e.lottery2CH[t.cId]=t.cName})})},getList:function(e){var t=this;this.loading||(this.loading=!0,this.pageIndex=e||1,this.queryParam="",this.$service(N,{urlParams:{pageIndex:this.pageIndex,pageSize:this.pageSize},params:{reviewStatus:this.filterQuery.reviewStatus}}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.records||[],t.pageCount=e.data.page?e.data.page.pageCount:1,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){t.$message.error(qo()(e))}))},getSearchList:function(e){var t=this;if(!this.loading){if(!this.queryParam)return this.filterQuery.reviewStatus="1",this.getList();this.loading=!0,this.pageIndex=e||1,this.filterQuery.reviewStatus=null,this.$service(E,{urlParams:{pageIndex:this.pageIndex,pageSize:this.pageSize},params:{queryParam:this.queryParam}}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.records||[],t.pageCount=e.data.page?e.data.page.pageCount:1,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){t.$message.error(qo()(e))})}},pageChange:function(e){this.queryParam?this.getSearchList(e):this.getList(e)}},watch:{windowHeight:function(){this.setHeight()}}},uc={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"review-list"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-input",{staticStyle:{width:"auto"},attrs:{placeholder:"标题/文章ID/专家名","prefix-icon":"el-icon-search",clearable:"",size:"small"},on:{change:function(t){return e.getSearchList()}},model:{value:e.queryParam,callback:function(t){e.queryParam=t},expression:"queryParam"}})],1)]),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.filterQuery,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"复盘状态"}},[a("el-select",{on:{change:function(t){return e.getList()}},model:{value:e.filterQuery.reviewStatus,callback:function(t){e.$set(e.filterQuery,"reviewStatus",t)},expression:"filterQuery.reviewStatus"}},[a("el-option",{attrs:{label:"已复盘",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"未复盘",value:"0"}})],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"lotteryCategoryId",label:"彩种",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.lottery2CH[t.row.lotteryCategoryId]||"")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"planReviewTime",label:"复盘时间",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"content",label:"复盘内容","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{"ne-if":"scope.row.content",to:{name:"ArticleQuizDetail",params:{id:t.row.threadId}}}},[e._v(e._s(e._f("removeXSS")(t.row.content)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"文章发布时间",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"文章标题","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"ArticleQuizDetail",params:{id:t.row.threadId}}}},[e._v(e._s(e._f("removeXSS")(t.row.title)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"threadId",label:"文章ID",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"ArticleQuizDetail",params:{id:t.row.threadId}}}},[e._v(e._s(t.row.threadId))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"专家",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"ExpertDetail",params:{id:t.row.userId}}}},[e._v(e._s(t.row.realName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"isWin",label:"方案结果",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{staticStyle:{color:"#fff"},attrs:{size:"mini",color:1===t.row.isWin?"#e62121":"#333"}},[e._v(e._s(t.row.hitRateValue))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.price>0?a("span",[e._v(e._s(t.row.price))]):a("span",{staticClass:"text-red"},[e._v("免费")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"buyCount",label:"购买数",width:"70"}})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.pageChange}})],1)},staticRenderFns:[]},mc=a("VU/8")(dc,uc,!1,null,null,null).exports,pc={name:"ArticleThreadList",data:function(){return{sortRrders:["descending","ascending",null],filterQuery:{},loading:!1,list:[],pageIndex:1,pageSize:25,pageCount:1,tableHeight:null}},computed:u()({},Object(sn.d)(["windowHeight"])),filters:{removeXSS:function(e){return e.replace(/<[^>]*>/g,"")}},created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(e){var t=this;this.loading||(this.loading=!0,this.pageIndex=e||1,this.$service(R,{urlParams:{pageIndex:this.pageIndex,pageSize:this.pageSize},params:this.filterQuery.sortField?{sortByWeight:this.filterQuery.sortDesc}:null}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.records||[],t.pageCount=e.data.page?e.data.page.pageCount:1,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){t.$message.error(qo()(e))}))},sortList:function(e,t,a){this.filterQuery.sortField=e.prop,this.filterQuery.sortDesc="ascending"!==e.order&&("descending"===e.order||null),this.getList(1)},changeWeight:function(e){var t=this;this.$prompt("","修改权重",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,3}$/,inputErrorMessage:"0-999之间",closeOnClickModal:!1,inputValue:e.appWeight}).then(function(a){var i=a.value;t.$service(O,{method:"post",urlParams:{id:e.id},data:{weight:i}}).then(function(e){200===e.code?(t.getList(t.pageIndex),t.$message.success("修改成功！")):t.$message.error(e.code+":"+e.message)},function(e){t.$message.error(qo()(e))})})},update:function(e){var t=this,a=e.status;e.loading||(this.$set(e,"loading",!0),this.$service(a?A:U,{method:"post",urlParams:{id:e.id}}).then(function(i){200===i.code?(e.status=a?0:1,t.$message.success("修改成功！")):t.$message.error(i.code+":"+i.message)},function(e){t.$message.error(qo()(e))}).finally(function(){e.loading=!1}))}},watch:{windowHeight:function(){this.setHeight()}}},fc={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"thread-list"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight},on:{"sort-change":e.sortList}},[a("el-table-column",{attrs:{prop:"docId",label:"DocId",width:"165"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题","min-width":"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"topicName",label:"标题",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"作者",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"source",label:"来源",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ptime",label:"发布时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.ptime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cmsWeight",label:"cms权重",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"custom","sort-orders":e.sortRrders,prop:"appWeight",label:"APP权重",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.changeWeight(t.row)}}},[e._v(e._s(t.row.appWeight))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",loading:t.row.loading,type:t.row.status?"primary":"text"},on:{click:function(a){return e.update(t.row)}}},[e._v(e._s(t.row.status?"隐藏":"展示"))])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList}})],1)},staticRenderFns:[]},hc=a("VU/8")(pc,fc,!1,null,null,null).exports,gc={name:"Push",data:function(){return{loading:!1,list:[],offset:1,limit:25,total:1,tableHeight:null,pushRangeType:{ALL:"红彩、精准比分",HONGCAI:"红彩",JZBF:"精准比分"},pushType:{expert:"专家",match:"赛事",URL:"URL",thread:"专家文章",TMESSAGEPUSH__H5_URL_REDIRECT_MODEL:"竞猜类型链接",MULTI_THREAD:"多方案"},redirectPreview:"",previewLoading:!1,dialogFormVisible:!1,formLoading:!1,form:{pushType:"expert",pushTitle:"",pushDesc:"",content:"",pushRange:"ALL"},formRules:{pushTitle:[{required:!0,message:"标题必填",trigger:["blur","change"]},{max:13,message:"标题最多13字",trigger:["blur","change"]}],pushDesc:[{required:!0,message:"简介必填",trigger:["blur","change"]},{max:56,message:"简介最多56字",trigger:["blur","change"]}],content:[{validator:this.urlRules,trigger:["blur","change"]}]},previewThreadData:[],previewThreadVisible:!1,previewThreadLoading:!1}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},urlRules:function(e,t,a){t?["expert","match","thread"].indexOf(this.form.pushType)>-1?/^\d+$/.test(t)?a():a(new Error("ID必须为数字")):["URL","TMESSAGEPUSH__H5_URL_REDIRECT_MODEL"].indexOf(this.form.pushType)>-1?bh.url.test(t)?a():a(new Error("URL不合法")):"MULTI_THREAD"===this.form.pushType?t?/^[0-9,]+$/.test(t)?t.split(",").length>8?a(new Error("最多8个方案ID")):a():a(new Error("必须为数字且英文(,)隔开")):a(new Error("不为空")):a():a(new Error("ID/URL必填"))},getList:function(e){var t=this;this.loading||(this.loading=!0,this.offset=e?(e-1)*this.limit:0,this.$service(Lt,{urlParams:{offset:this.offset,limit:this.limit}}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.records||[],t.total=e.data.size||1,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){t.$message.error(qo()(e))}))},previewID:function(){var e=this;if(this.redirectPreview="",-1!==["expert","match","thread"].indexOf(this.form.pushType)&&/^\d+$/.test(this.form.content)&&!this.previewLoading){var t=this.form.content;switch(this.previewLoading=!0,this.form.pushType){case"thread":Rn(t).then(function(t){e.redirectPreview="提示：对应跳转文章["+t.title+"]",e.previewLoading=!1}).catch(function(t){t&&(e.previewLoading=!1,e.redirectPreview="提示：无对应跳转文章")});break;case"match":An(t).then(function(t){e.redirectPreview="提示：对应跳转赛事["+t.homeMatchTeam.teamName+"VS"+t.guestMatchTeam.teamName+"]",e.previewLoading=!1}).catch(function(t){t&&(e.previewLoading=!1,e.redirectPreview="提示：无对应跳转赛事")});break;case"expert":On(t).then(function(t){e.redirectPreview="提示：对应跳转专家["+t.nickname+"]",e.previewLoading=!1}).catch(function(t){t&&(e.previewLoading=!1,e.redirectPreview="提示：无对应跳转专家")})}}},pushPop:function(){var e=this;this.form={pushType:"expert",pushTitle:"",pushDesc:"",content:"",pushRange:"ALL"},this.redirectPreview="",this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.pushForm.clearValidate()})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a=t.form.content.match(/^(http|https):\/\/(hongcai|sports)\.163\.com(\/article)?\/\d{2}\/\d{4}\/\d{2}\/([a-zA-Z0-9]{16})\.html$/),i="";if(a&&(i="https://c.m.163.com/nc/qa/3g-expand/hc-article.html?docid="+a[4]+"#pcarticle="+t.form.content),t.form.content=i||t.form.content,"MULTI_THREAD"===t.form.pushType&&"HONGCAI"!==t.form.pushRange)return t.$message.warning("PUSH类型为「多方案」时，推送范围只能是【红彩】");t.formLoading=!0,t.$service(St,{method:"post",data:t.form}).then(function(e){t.formLoading=!1,200===e.code?(t.dialogFormVisible=!1,t.$message.success("添加成功"),t.getList()):t.$message.error(e.code+":"+e.message)},function(e){t.formLoading=!1,t.$message.error(qo()(e))})}})},previewThread:function(){var e=this;/^[0-9,]+$/.test(this.form.content)&&(this.previewThreadLoading||(this.previewThreadLoading=!0,this.$service(Dt,{method:"get",params:{threadIds:this.form.content}}).then(function(t){e.previewThreadLoading=!1,200===t.code?(e.previewThreadData=t.data,e.previewThreadVisible=!0):e.$message.error("获取多方案预览失败")},function(t){t&&(e.previewThreadLoading=!1,e.$message.error("网络错误，获取多方案预览失败"))})))}},watch:{windowHeight:function(){this.setHeight()}}},vc={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"push-list"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.pushPop()}}},[e._v("新建PUSH")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"pushId",label:"pushId",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pushTitle",label:"标题","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pushDesc",label:"简介","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pushType",label:"类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.pushType[t.row.pushType]||"")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"content",label:"ID/URL","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pushRange",label:"推送范围","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.pushRangeType[t.row.pushRange])+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"155"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"operator",label:"操作人","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pushStatus",label:"状态",width:"60"}})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":Math.floor(e.pageStart/e.pageLimit)+1,"page-size":e.limit,total:e.total},on:{"current-change":e.getList,"update:currentPage":function(t){e.$set(Math,"floor(pageStart/pageLimit) + 1",t)},"update:current-page":function(t){e.$set(Math,"floor(pageStart/pageLimit) + 1",t)}}}),e._v(" "),a("el-dialog",{attrs:{title:"新建PUSH",visible:e.dialogFormVisible,width:"500px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"pushForm",attrs:{model:e.form,rules:e.formRules,disabled:e.formLoading,"label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"标题",prop:"pushTitle"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.pushTitle,callback:function(t){e.$set(e.form,"pushTitle",t)},expression:"form.pushTitle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"简介",prop:"pushDesc"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"简介"},model:{value:e.form.pushDesc,callback:function(t){e.$set(e.form,"pushDesc",t)},expression:"form.pushDesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"pushType"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.previewID},model:{value:e.form.pushType,callback:function(t){e.$set(e.form,"pushType",t)},expression:"form.pushType"}},e._l(e.pushType,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"ID/URL",prop:"content"}},[a("el-input",{attrs:{autocomplete:"off","suffix-icon":e.previewLoading?"el-icon-loading":""},on:{change:e.previewID},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),e._v(" "),e.redirectPreview?a("el-form-item",[a("span",[e._v(e._s(e.redirectPreview))])]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"推送范围",prop:"pushRange"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.pushRange,callback:function(t){e.$set(e.form,"pushRange",t)},expression:"form.pushRange"}},e._l(e.pushRangeType,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary",loading:e.formLoading},on:{click:function(t){return e.submitForm("pushForm")}}},[e._v("提交")]),e._v(" "),"MULTI_THREAD"===e.form.pushType?a("el-button",{attrs:{size:"mini",type:"danger",loading:e.previewThreadLoading},on:{click:function(t){return e.previewThread()}}},[e._v("预览")]):e._e()],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"多方案PUSH预览",visible:e.previewThreadVisible,width:"500px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.previewThreadVisible=t}}},[a("el-form",{attrs:{"label-width":"80px",size:"mini"}},e._l(e.previewThreadData,function(t,i){return a("el-form-item",{key:i,attrs:{label:"方案"+(i+1)+"："}},[a("p",[a("span",{staticClass:"text-red"},[e._v("专家昵称：")]),e._v(e._s(t.expertNickName))]),e._v(" "),a("p",[a("span",{staticClass:"text-red"},[e._v("方案名称：")]),e._v(e._s(t.title))])])}),1)],1)],1)},staticRenderFns:[]},bc=a("VU/8")(gc,vc,!1,null,null,null).exports,_c={name:"PriceRecharge",data:function(){return{activeTab:"0",goodsTab:2,iOSGoodsTab:2,goodsTabArr:{0:[{id:2,name:"iOS"},{id:1,name:"Android"},{id:3,name:"PC"},{id:4,name:"WAP"},{id:5,name:"PRVIP"},{id:9,name:"iOSWAP"},{id:12,name:"iOS套壳WAP"},{id:13,name:"套壳WAP"}],1:[{id:2,name:"iOS"},{id:1,name:"Android"},{id:3,name:"PC"},{id:4,name:"WAP"},{id:5,name:"iOSWAP"}]},loading:!1,list:[],tableHeight:null,priceTag:{0:"无",1:"HOT",2:"首冲特惠"},dialogFormVisible:!1,form:{goodsName:"",goodsPrice:"",redCurrency:"",realPrice:"",displayHot:"0",realRedCurrency:"",startTime:"",endTime:"",typeId:"",appleGoodsId:"",status:"0"},formRules:{appleChannelGroupId:[{required:!0,message:"类型必选",trigger:"blur"}],goodsName:[{required:!0,message:"必填",trigger:["blur","change"]},{max:15,message:"长度不多于15个字符",trigger:["blur","change"]}],goodsPrice:[{required:!0,message:"必填",trigger:["blur","change"]},{pattern:/^[1-9]\d{0,4}$/,message:"整数且1-99999",trigger:["blur","change"]}],redCurrency:[{required:!0,message:"必填",trigger:["blur","change"]},{pattern:/^[1-9]\d{0,4}$/,message:"整数且1-99999",trigger:["blur","change"]}],realPrice:[{required:!0,message:"必填",trigger:["blur","change"]},{pattern:/^[1-9]\d{0,4}$/,message:"整数且1-99999",trigger:["blur","change"]}],typeId:[{required:!0,message:"适用范围必选",trigger:["blur","change"]}],appleGoodsId:[]},updateLoading:!1}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-20})},handleClickTabs:function(e){0===e&&(this.goodsTab=2),1===e&&(this.iOSGoodsTab=2),this.getList(),this.setHeight()},getList:function(){var e=this;this.loading||(this.loading=!0,this.$service(tt[this.activeTab].list,{urlParams:{payTerminalId:"0"===this.activeTab&&2===this.goodsTab?this.iOSGoodsTab:this.goodsTab}}).then(function(t){e.loading=!1,200===t.code?(e.list=t.data||[],e.$refs.elTable.bodyWrapper.scrollTop=0,e.$refs.elTable.bodyWrapper.scrollLeft=0):e.$message.error(t.code+":"+t.message)},function(t){e.loading=!1,e.$message.error(qo()(t))}))},switchStatus:function(e){var t=this;this.$set(e,"statusLoading",!0);var a={goodsId:e.goodsId,status:e.status};this.$service(tt[this.activeTab].status,{method:"post",data:a}).then(function(a){e.statusLoading=!1,200===a.code?t.$message.success("状态更新成功"):(t.$set(e,"status",e.status?0:1),t.$message.error(a.code+":"+a.message))},function(a){e.statusLoading=!1,t.$set(e,"status",e.status?0:1),t.$message.error(qo()(a))})},changeWeight:function(e){var t=this;this.$prompt("","修改权重",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,2}$/,inputErrorMessage:"0-99之间",closeOnClickModal:!1,inputValue:e.weight}).then(function(a){var i=a.value;t.$service(tt[t.activeTab].weight,{method:"post",data:{goodsId:e.goodsId,weight:i}}).then(function(e){200===e.code?(t.getList(),t.$message.success("权重修改成功！")):t.$message.error(e.code+":"+e.message)},function(e){t.$message.error(qo()(e))})})},priceRechargePop:function(e){var t=this;this.form=tn()({goodsName:"",goodsPrice:"",redCurrency:"",realPrice:"",displayHot:"0",realRedCurrency:"",startTime:"",endTime:"",typeId:"",appleGoodsId:"",status:"0"},e||{}),this.form.displayHot=this.form.displayHot+"",this.form.status=this.form.status+"",this.form.startTime&&(this.form.startTime=gh(this.form.startTime,"yyyy-MM-dd hh:mm:ss")),this.form.endTime&&(this.form.endTime=gh(this.form.endTime,"yyyy-MM-dd hh:mm:ss")),e&&(this.form.realPrice=this.form.realGoodsPrice),this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.priceRechargeForm.clearValidate()})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(t.updateLoading)return;t.updateLoading=!0,t.form.goodsId||(t.form.payTerminalId=t.form.typeId),t.$service(t.form.goodsId?tt[t.activeTab].update:tt[t.activeTab].add,{method:"post",data:t.form}).then(function(e){t.updateLoading=!1,200===e.code?(t.dialogFormVisible=!1,t.getList(),t.$message.success((t.form.goodsId?"更新":"添加")+"成功")):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}})}},watch:{windowHeight:function(){this.setHeight()}}},yc={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"price-recharge"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.priceRechargePop()}}},[e._v("新建价格")])],1)]),e._v(" "),a("el-tabs",{on:{"tab-click":function(t){return e.handleClickTabs(0)}},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"红彩",disabled:e.loading,name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"精准比分",disabled:e.loading,name:"1"}})],1),e._v(" "),a("el-tabs",{on:{"tab-click":function(t){return e.handleClickTabs(1)}},model:{value:e.goodsTab,callback:function(t){e.goodsTab=t},expression:"goodsTab"}},e._l(e.goodsTabArr[e.activeTab],function(t,i){return a("el-tab-pane",{key:i,attrs:{label:t.name,disabled:e.loading,name:t.id}})}),1),e._v(" "),a("el-tabs",{directives:[{name:"show",rawName:"v-show",value:"0"===e.activeTab&&2===e.goodsTab,expression:"activeTab==='0'&&goodsTab===2"}],on:{"tab-click":function(t){return e.handleClickTabs(2)}},model:{value:e.iOSGoodsTab,callback:function(t){e.iOSGoodsTab=t},expression:"iOSGoodsTab"}},[a("el-tab-pane",{attrs:{label:"主包",disabled:e.loading,name:2}}),e._v(" "),a("el-tab-pane",{attrs:{label:"马甲包1",disabled:e.loading,name:6}}),e._v(" "),a("el-tab-pane",{attrs:{label:"马甲包2",disabled:e.loading,name:7}}),e._v(" "),a("el-tab-pane",{attrs:{label:"马甲包3",disabled:e.loading,name:8}})],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"goodsId",label:"商品ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsName",label:"商品名称","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"appleGoodsId",label:"产品码","min-width":"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsPrice",label:"商品定价(元)",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"redCurrency",label:"红豆数量(豆)",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"realGoodsPrice",label:"实际价格",width:"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"realRedCurrency",label:"实际红豆数",width:"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"displayHot",label:"标识",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.priceTag[t.row.displayHot]||"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"生效日期","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.startTime,"yyyy.MM.dd","--"]))+" ~ "+e._s(e._f("dateFormat")([t.row.endTime,"yyyy.MM.dd","--"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(0==t.row.status?"正常":"停用")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"weight",label:"权重",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.changeWeight(t.row)}}},[e._v(e._s(t.row.weight))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{disabled:t.row.statusLoading,"active-value":0,"inactive-value":1},nativeOn:{click:function(a){return e.switchStatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.priceRechargePop(t.row)}}})]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:e.form.goodsId?"修改价格":"新建价格",visible:e.dialogFormVisible,width:"500px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"priceRechargeForm",attrs:{model:e.form,rules:e.formRules,disabled:e.updateLoading,"label-width":"110px",size:"small"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"goodsName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.goodsName,callback:function(t){e.$set(e.form,"goodsName",t)},expression:"form.goodsName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品定价(元)",prop:"goodsPrice"}},[a("el-input",{attrs:{autocomplete:"off",disabled:e.form.goodsId},model:{value:e.form.goodsPrice,callback:function(t){e.$set(e.form,"goodsPrice",t)},expression:"form.goodsPrice"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"红豆数量(豆)",prop:"redCurrency"}},[a("el-input",{attrs:{autocomplete:"off",disabled:e.form.goodsId},model:{value:e.form.redCurrency,callback:function(t){e.$set(e.form,"redCurrency",t)},expression:"form.redCurrency"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实际价格(元)",prop:"realPrice"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.realPrice,callback:function(t){e.$set(e.form,"realPrice",t)},expression:"form.realPrice"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"标识",prop:"displayHot"}},e._l(e.priceTag,function(t,i){return a("el-radio",{key:i,attrs:{label:i},model:{value:e.form.displayHot,callback:function(t){e.$set(e.form,"displayHot",t)},expression:"form.displayHot"}},[e._v(e._s(t))])}),1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"2"===e.form.displayHot,expression:"form.displayHot === '2'"}],attrs:{label:"实际红豆数量",prop:"realRedCurrency",rules:[{required:"2"===this.form.displayHot,message:"必填",trigger:["blur","change"]},{pattern:/^\d{1,5}$/,message:"整数且1-99999",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.realRedCurrency,callback:function(t){e.$set(e.form,"realRedCurrency",t)},expression:"form.realRedCurrency"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"生效日期"}},[a("el-date-picker",{staticStyle:{width:"130px"},attrs:{type:"date","value-format":"yyyy-MM-dd 00:00:00",placeholder:"选择日期","picker-options":{disabledDate:function(t){return t.getTime()<Date.now()||0!==new Date(e.form.endTime).getTime()&&t.getTime()>new Date(e.form.endTime).getTime()}}},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}}),e._v("\n        ~\n        "),a("el-date-picker",{staticStyle:{width:"130px"},attrs:{type:"date","value-format":"yyyy-MM-dd 23:59:59",placeholder:"选择日期","picker-options":{disabledDate:function(t){return t.getTime()<Date.now()||0!==new Date(e.form.startTime).getTime()&&t.getTime()<new Date(e.form.startTime).getTime()}}},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"适用范围",prop:"typeId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.typeId,callback:function(t){e.$set(e.form,"typeId",t)},expression:"form.typeId"}},[e._l(e.goodsTabArr[e.activeTab],function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),e._v(" "),"0"===e.activeTab?a("el-option",{attrs:{label:"马甲包1",value:"6"}}):e._e(),e._v(" "),"0"===e.activeTab?a("el-option",{attrs:{label:"马甲包2",value:"7"}}):e._e(),e._v(" "),"0"===e.activeTab?a("el-option",{attrs:{label:"马甲包3",value:"8"}}):e._e()],2)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==parseInt(e.form.typeId)||"0"===e.activeTab&&(6==parseInt(e.form.typeId)||7==parseInt(e.form.typeId)||8==parseInt(e.form.typeId)),expression:"parseInt(form.typeId)==2||(activeTab==='0'&&(parseInt(form.typeId)==6||parseInt(form.typeId)==7||parseInt(form.typeId)==8))"}],attrs:{label:"产品码",prop:"appleGoodsId",rules:[{required:2==parseInt(e.form.typeId)||"0"===e.activeTab&&(6==parseInt(e.form.typeId)||7==parseInt(e.form.typeId)||8==parseInt(e.form.typeId)),message:"必填",trigger:["blur","change"]},{max:100,message:"最多100字符",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.appleGoodsId,callback:function(t){e.$set(e.form,"appleGoodsId",t)},expression:"form.appleGoodsId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-option",{attrs:{label:"正常",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"停用",value:"1"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("priceRechargeForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},wc=a("VU/8")(_c,yc,!1,null,null,null).exports,Tc={name:"ThreadDialog",props:{appTab:{default:0},data:{type:"Object",default:function(){return{}}},visible:{type:"Boolean",default:!1}},data:function(){return{form:{threadPriceName:"",threadPrice:"",redCurrency:"",status:"0"},formRules:{threadPriceName:[{required:!0,message:"不为空",trigger:["blur","change"]},{max:15,message:"最多15个字",trigger:["blur","change"]}],threadPrice:[{required:!0,message:"必填",trigger:["blur","change"]},{pattern:/^[1-9]\d{0,4}$/,message:"整数且1-99999",trigger:["blur","change"]}],redCurrency:[{required:!0,message:"必填",trigger:["blur","change"]},{pattern:/^[1-9]\d{0,4}$/,message:"整数且1-99999",trigger:["blur","change"]}]},updateLoading:!1}},computed:{queryApi:function(){return at[this.appTab]}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.updateLoading=!0,t.$service(t.form.threadPriceId?t.queryApi.update:t.queryApi.add,{method:"post",data:t.form}).then(function(e){200===e.code?(t.updateLoading=!1,t.$message.success(t.form.threadPriceId?"修改方案价格成功":"新增方案价格成功"),t.$emit("closeDialog"),t.$emit("success")):(t.updateLoading=!1,t.$message.error(e.code+":"+e.message))},function(e){t.updateLoading=!1,t.$message.error(qo()(e))}))})}},watch:{visible:function(e){var t=this;e?(this.form=tn()({},this.data.threadPriceId?this.data:{threadPriceName:"",threadPrice:"",redCurrency:"",status:"0"}),this.form.status=this.form.status+"",this.$nextTick(function(){t.$refs.form.clearValidate()})):this.$emit("closeDialog")}}},Ic={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"thread-dialog"},[a("el-dialog",{attrs:{title:e.form.threadPriceId?"修改价格":"新增价格",visible:e.visible,"close-on-click-modal":!1,width:"500px",center:""},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,disabled:e.updateLoading,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"商品全称",prop:"threadPriceName"}},[a("el-input",{attrs:{autocomplete:"off",disabled:e.form.userId},model:{value:e.form.threadPriceName,callback:function(t){e.$set(e.form,"threadPriceName",t)},expression:"form.threadPriceName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品定价(元)",prop:"threadPrice"}},[a("el-input",{attrs:{autocomplete:"off",disabled:e.form.threadPriceId},model:{value:e.form.threadPrice,callback:function(t){e.$set(e.form,"threadPrice",t)},expression:"form.threadPrice"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"红豆数量(豆)",prop:"redCurrency"}},[a("el-input",{attrs:{autocomplete:"off",disabled:e.form.threadPriceId},model:{value:e.form.redCurrency,callback:function(t){e.$set(e.form,"redCurrency",t)},expression:"form.redCurrency"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-option",{attrs:{value:"0",label:"正常"}}),e._v(" "),a("el-option",{attrs:{value:"1",label:"停用"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]},xc=a("VU/8")(Tc,Ic,!1,null,null,null).exports,kc={name:"SpDialog",props:{data:{type:"Object",default:function(){return{}}},type:{type:"String",default:null},visible:{type:"Boolean",default:!1},appTab:{default:0}},data:function(){return{form:{title:"",subTitle:"",freeSign:"1",dataCount:"",creditPresent:"",price:"",redCurrency:"",effectiveType:"1",days:"",appleGoodsId:"",payTerminalId:"0",status:"0"},updateLoading:!1}},computed:{queryApi:function(){return it[this.appTab]}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.updateLoading=!0,t.form.subscribeProductId?t.form.spId=t.form.subscribeProductId:t.form.typeId=t.type,t.$service(t.form.subscribeProductId?t.queryApi.update:t.queryApi.add,{method:"post",data:t.form}).then(function(e){200===e.code?(t.updateLoading=!1,t.$message.success(t.form.subscribeProductId?"修改价格成功":"新增价格成功"),t.$emit("closeDialog"),t.$emit("success")):(t.updateLoading=!1,t.$message.error(e.code+":"+e.message))},function(e){t.updateLoading=!1,t.$message.error(qo()(e))}))})}},watch:{visible:function(e){var t=this;e?(this.form=tn()({},this.data.subscribeProductId?this.data:{title:"",subTitle:"",freeSign:"1",dataCount:"",creditPresent:"",price:"",redCurrency:"",effectiveType:"1",days:"",appleGoodsId:"",payTerminalId:"0",status:"0"}),this.form.status=this.form.status+"",this.form.payTerminalId=this.form.payTerminalId+"",this.form.effectiveType=this.form.effectiveType+"",this.form.freeSign=this.form.freeSign+"","1"!==this.form.freeSign&&(0===this.form.price&&(this.form.price=""),0===this.form.redCurrency&&(this.form.redCurrency="")),this.$nextTick(function(){t.$refs.form.clearValidate()})):this.$emit("closeDialog")},type:function(e){this.type=parseInt(e)}}},$c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sp-dialog"},[a("el-dialog",{attrs:{title:e.form.subscribeProductId?"修改价格":"新增价格",visible:e.visible,"close-on-click-modal":!1,width:"500px",center:""},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,disabled:e.updateLoading,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"商品全称",prop:"title",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{max:20,message:"最多20个字",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品简称",prop:"subTitle",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{max:5,message:"最多5个字",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.subTitle,callback:function(t){e.$set(e.form,"subTitle",t)},expression:"form.subTitle"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2!==e.type&&11!==e.type&&!e.form.subscribeProductId,expression:"type!==2&&type!==11&&!form.subscribeProductId"}],attrs:{label:"付费类型",prop:"freeSign"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.form.freeSign,callback:function(t){e.$set(e.form,"freeSign",t)},expression:"form.freeSign"}},[e._v("普通")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.form.freeSign,callback:function(t){e.$set(e.form,"freeSign",t)},expression:"form.freeSign"}},[e._v("免费试用")]),e._v(" "),a("el-radio",{attrs:{label:"3"},model:{value:e.form.freeSign,callback:function(t){e.$set(e.form,"freeSign",t)},expression:"form.freeSign"}},[e._v("VIP免费试用")]),e._v(" "),a("el-radio",{attrs:{label:"4"},model:{value:e.form.freeSign,callback:function(t){e.$set(e.form,"freeSign",t)},expression:"form.freeSign"}},[e._v("彩票地推免费试用")])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2===e.type||11===e.type,expression:"type===2||type===11"}],attrs:{label:"可用场次数",prop:"dataCount",rules:[{required:2===e.type||11===e.type,message:"不为空",trigger:["blur","change"]},{pattern:/^\d{1,3}$/,message:"整数且0-999",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.dataCount,callback:function(t){e.$set(e.form,"dataCount",t)},expression:"form.dataCount"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2===e.type||11===e.type,expression:"type===2||type===11"}],attrs:{label:"赠送积分",prop:"creditPresent",rules:[{required:2===e.type||11===e.type,message:"不为空",trigger:["blur","change"]},{pattern:/^\d{1,8}$/,message:"整数且0-99999999",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.creditPresent,callback:function(t){e.$set(e.form,"creditPresent",t)},expression:"form.creditPresent"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===e.form.freeSign,expression:"form.freeSign==='1'"}],attrs:{label:"商品定价(元)",prop:"price",rules:[{required:"1"===e.form.freeSign,message:"必填",trigger:["blur","change"]},{pattern:/^[1-9]\d{0,4}$/,message:"整数且1-99999",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off",disabled:e.form.subscribeProductId},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===e.form.freeSign,expression:"form.freeSign==='1'"}],attrs:{label:"红豆数量(豆)",prop:"redCurrency",rules:[{required:"1"===e.form.freeSign,message:"必填",trigger:["blur","change"]},{pattern:/^[1-9]\d{0,4}$/,message:"整数且1-99999",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off",disabled:e.form.subscribeProductId},model:{value:e.form.redCurrency,callback:function(t){e.$set(e.form,"redCurrency",t)},expression:"form.redCurrency"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"有效期",prop:"effectiveType"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.form.effectiveType,callback:function(t){e.$set(e.form,"effectiveType",t)},expression:"form.effectiveType"}},[e._v("无")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.form.effectiveType,callback:function(t){e.$set(e.form,"effectiveType",t)},expression:"form.effectiveType"}},[e._v("相对")])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===e.form.effectiveType,expression:"form.effectiveType === '1'"}],attrs:{label:"相对天数",prop:"days",rules:[{required:"1"===e.form.effectiveType,message:"不为空",trigger:["blur","change"]},{pattern:/^[1-9]\d{0,2}$/,message:"整数且0-999",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.days,callback:function(t){e.$set(e.form,"days",t)},expression:"form.days"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"2"!==e.form.freeSign,expression:"form.freeSign !== '2'"}],attrs:{label:"iOS产品码",prop:"appleGoodsId",rules:[{required:"2"!==e.form.freeSign,message:"必填",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.appleGoodsId,callback:function(t){e.$set(e.form,"appleGoodsId",t)},expression:"form.appleGoodsId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"平台",prop:"payTerminalId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.payTerminalId,callback:function(t){e.$set(e.form,"payTerminalId",t)},expression:"form.payTerminalId"}},[a("el-option",{attrs:{value:"0",label:"其他"}}),e._v(" "),a("el-option",{attrs:{value:"4",label:"WAP"}}),e._v(" "),a("el-option",{attrs:{value:{0:"9",1:"5"}[e.appTab],label:"iOSWAP"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-option",{attrs:{value:"0",label:"正常"}}),e._v(" "),a("el-option",{attrs:{value:"1",label:"停用"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]},Cc=a("VU/8")(kc,$c,!1,null,null,null).exports,Sc={name:"SpDialog",props:{data:{type:"Object",default:function(){return{}}},type:{type:"String",default:null},appType:{type:"String",default:null},userLevel:{type:"Array",default:[]},visible:{type:"Boolean",default:!1},appTab:{default:0}},data:function(){return{form:{name:"",shortName:"",description:"",point:"",discount:"",pointCardData:"",price:"",redCurrency:"",productCode:"",validDay:"",hasLinkUrl:"1",newUserEnjoy:"0",userRestrict:"0",userLevelIds:[],tempUserIds:"",perCardCount:"",totalCount:"",dailyCount:"",timeRestrict:"0",timeStart:"",timeEnd:"",inUseStatus:"1",excel:""},singleUserId:null,updateLoading:!1}},computed:{queryApi:function(){return rt[this.appTab]}},methods:{dateRule:function(e,t,a){if("lottery"===this.type&&"1"===this.form.timeRestrict){var i=this.$refs.endTime.value;t?i?a():a(new Error("结束时间不为空")):a(new Error("开始时间不为空"))}else a()},userIdRule:function(e,t,a){"common"===this.type&&"0"===this.form.newUserEnjoy&&"1"===this.form.userRestrict&&this.form.userLevelIds.indexOf(this.singleUserId)>-1?this.form.excel?a():t?/^[0-9,]+$/.test(t)?t.split(",").length>200?a(new Error("最多200个用户ID")):a():a(new Error("必须为数字且英文(,)隔开")):a(new Error("不为空")):a()},cardCountRule:function(e,t,a){"common"!==this.type?t?/^\d+$/.test(t)?"vip"===this.type||"sharePullNew"===this.type||"vipSupply"===this.type||"chatRoomDraw"===this.type||"birthdayGift"===this.type?t>99&&t<501?a():a(new Error("100-500")):t>0&&t<200?a():a(new Error("1-199")):a(new Error("必须为正数")):a(new Error("不为空")):a()},handleFileExceed:function(){this.$message.warning("请先移除Excel文件。")},handleFileRemove:function(e){this.form.excel=null},handleFileChange:function(e,t){this.form.excel=e.raw},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){t.updateLoading=!0,t.form.timeStart&&(t.form.timeStart=gh(t.form.timeStart,"yyyy-MM-dd hh:mm:ss")),t.form.timeEnd&&(t.form.timeEnd=gh(t.form.timeEnd,"yyyy-MM-dd hh:mm:ss"));var a=tn()({},t.form);o()(a).forEach(function(e){a[e]||0===a[e]||delete a[e]}),a.userLevelIds&&(a.userLevelIds=a.userLevelIds.join(",")),a.tempUserIds&&(a.tempUserIds=a.tempUserIds.replace(/，/g,",").replace(/\r|\n/g,",").replace(/,,/g,",")),a.discount=a.discount/100,a.appPackageType=t.appType;var i=new FormData;a.excel&&o()(a).forEach(function(e){i.append(e,a[e])}),t.$service(t.form.pointCardId?t.queryApi.update:t.queryApi.add,{method:"post",urlParams:{type:t.type,pointCardId:t.form.pointCardId},headers:a.excel?{"Content-Type":"multipart/form-data"}:null,data:a.excel?i:a}).then(function(e){200===e.code?(t.updateLoading=!1,a.excel&&t.$refs.upload.clearFiles(),t.$message.success(t.form.pointCardId?"修改点卡成功":"新增点卡成功"),t.$emit("closeDialog"),t.$emit("success")):(t.updateLoading=!1,t.$message.error(e.code+":"+e.message))},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}})}},watch:{visible:function(e){var t=this;e?(this.form=tn()({name:"",shortName:"",description:"",point:"",discount:"",pointCardData:"",price:"",redCurrency:"",productCode:"",validDay:"",hasLinkUrl:"1",newUserEnjoy:"0",userRestrict:"0",userLevelIds:[],tempUserIds:"",perCardCount:"",totalCount:"",dailyCount:"",timeRestrict:"0",timeStart:"",timeEnd:"",inUseStatus:"1",excel:""},this.data||{}),this.data&&this.data.pointCardId&&(this.form.discount=100*this.form.discount,this.data.userLevelIdList&&(this.form.userLevelIds=this.data.userLevelIdList),this.data.tempUserIdList&&(this.form.tempUserIds=this.data.tempUserIdList),this.form.description=this.data.description.replace(/<br(\s)?(\/)?>/g,"\n"),this.form.inUseStatus=this.data.status?"1":"0"),this.form.hasLinkUrl=this.form.hasLinkUrl+"",this.form.inUseStatus=this.form.inUseStatus+"",this.form.newUserEnjoy=this.form.newUserEnjoy+"",this.form.userRestrict=this.form.userRestrict+"",this.form.timeRestrict=this.form.timeRestrict+"",this.form.noActiveValidDay="vipSupply"===this.type?this.form.noActiveValidDay:"",this.$nextTick(function(){t.$refs.form.clearValidate()})):this.$emit("closeDialog")},userLevel:function(e){var t=this;e.forEach(function(e){0===e.userGroupType&&(t.singleUserId=e.userLevelId)})}}},Lc={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"point-card-dialog"},[a("el-dialog",{attrs:{title:e.form.pointCardId?"修改价格":"新增价格",visible:e.visible,"close-on-click-modal":!1,width:"500px",center:""},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,disabled:e.updateLoading,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"商品全称",prop:"name",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{max:20,message:"最多20个字",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品简称",prop:"shortName",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{max:15,message:"最多15个字符",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.shortName,callback:function(t){e.$set(e.form,"shortName",t)},expression:"form.shortName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"特权说明",prop:"description",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{max:200,message:"最多200个字",trigger:["blur","change"]}]}},[a("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"可用点数",prop:"point",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{pattern:/^\d{1,3}$/,message:"整数且0-999",trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"135px"},attrs:{autocomplete:"off"},model:{value:e.form.point,callback:function(t){e.$set(e.form,"point",t)},expression:"form.point"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"折扣",prop:"discount",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{pattern:/^\d{1,2}$/,message:"整数且0-99",trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"135px"},attrs:{autocomplete:"off"},model:{value:e.form.discount,callback:function(t){e.$set(e.form,"discount",t)},expression:"form.discount"}}),e._v(" %\n      ")],1),e._v(" "),a("el-form-item",{attrs:{label:"价值"}},[a("el-input",{attrs:{value:e.form.point?28*e.form.point:"",autocomplete:"off",disabled:"disabled"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"卡片定价(元)",prop:"price",rules:[{required:!0,message:"必填",trigger:["blur","change"]},{pattern:/^\d{0,4}$/,message:"整数且0-9999",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off",disabled:e.form.pointCardId},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),e._v(" "),a("el-form-item",[a("span",[e._v("定价=点数×28×折扣;"+e._s(e.form.point&&e.form.discount?"约"+28*e.form.point*e.form.discount/100+"豆":""))])]),e._v(" "),a("el-form-item",{attrs:{label:"红豆数量(豆)",prop:"redCurrency",rules:[{required:!0,message:"必填",trigger:["blur","change"]},{pattern:/^\d{0,4}$/,message:"整数且0-9999",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off",disabled:e.form.pointCardId},model:{value:e.form.redCurrency,callback:function(t){e.$set(e.form,"redCurrency",t)},expression:"form.redCurrency"}})],1),e._v(" "),a("el-form-item",[a("span",[e._v("红豆=点数×28×折扣; "+e._s(e.form.point&&e.form.discount?"约"+28*e.form.point*e.form.discount/100+"元":""))])]),e._v(" "),a("el-form-item",{attrs:{label:"iOS产品码",prop:"productCode",rules:[{required:!0,message:"必填",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.productCode,callback:function(t){e.$set(e.form,"productCode",t)},expression:"form.productCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"有效期",prop:"validDay",rules:[{required:!0,message:"必填",trigger:["blur","change"]},{pattern:/^[1-9]\d{0,2}$/,message:"整数且1-999",trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"135px"},attrs:{autocomplete:"off"},model:{value:e.form.validDay,callback:function(t){e.$set(e.form,"validDay",t)},expression:"form.validDay"}}),e._v(" 天\n      ")],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"vipSupply"===e.type,expression:"type === 'vipSupply'"}],attrs:{label:"未激活有效期",prop:"noActiveValidDay",rules:[{required:"vipSupply"===e.type,message:"必填",trigger:["blur","change"]},{pattern:/^[1-9]\d{0,2}$/,message:"整数且1-999",trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"135px"},attrs:{autocomplete:"off"},model:{value:e.form.noActiveValidDay,callback:function(t){e.$set(e.form,"noActiveValidDay",t)},expression:"form.noActiveValidDay"}}),e._v(" 天\n      ")],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"common"===e.type,expression:"type === 'common'"}],attrs:{label:"生成链接"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.form.hasLinkUrl,callback:function(t){e.$set(e.form,"hasLinkUrl",t)},expression:"form.hasLinkUrl"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0"},model:{value:e.form.hasLinkUrl,callback:function(t){e.$set(e.form,"hasLinkUrl",t)},expression:"form.hasLinkUrl"}},[e._v("否")])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"common"===e.type,expression:"type === 'common'"}],attrs:{label:"新用户专享"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.form.newUserEnjoy,callback:function(t){e.$set(e.form,"newUserEnjoy",t)},expression:"form.newUserEnjoy"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0"},model:{value:e.form.newUserEnjoy,callback:function(t){e.$set(e.form,"newUserEnjoy",t)},expression:"form.newUserEnjoy"}},[e._v("否")])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"common"===e.type&&"0"===e.form.newUserEnjoy,expression:"type === 'common' && form.newUserEnjoy === '0'"}],attrs:{label:"指定用户可见"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.form.userRestrict,callback:function(t){e.$set(e.form,"userRestrict",t)},expression:"form.userRestrict"}},[e._v("不限制")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.form.userRestrict,callback:function(t){e.$set(e.form,"userRestrict",t)},expression:"form.userRestrict"}},[e._v("限制")])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"common"===e.type&&"0"===e.form.newUserEnjoy&&"1"===e.form.userRestrict,expression:"type === 'common' && form.newUserEnjoy === '0' && form.userRestrict === '1'"}],attrs:{prop:"userLevelIds"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.form.userLevelIds,callback:function(t){e.$set(e.form,"userLevelIds",t)},expression:"form.userLevelIds"}},e._l(e.userLevel,function(e,t){return a("el-option",{key:t,attrs:{label:e.levelName,value:e.userLevelId}})}),1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"common"===e.type&&"0"===e.form.newUserEnjoy&&"1"===e.form.userRestrict&&e.form.userLevelIds.indexOf(e.singleUserId)>-1,expression:"type === 'common' && form.newUserEnjoy === '0' && form.userRestrict === '1' && form.userLevelIds.indexOf(singleUserId) > -1"}],attrs:{label:"用户ID",prop:"tempUserIds",rules:[{validator:e.userIdRule,trigger:["blur","change"]}]}},[a("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.form.tempUserIds,callback:function(t){e.$set(e.form,"tempUserIds",t)},expression:"form.tempUserIds"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"common"===e.type&&"0"===e.form.newUserEnjoy&&"1"===e.form.userRestrict&&e.form.userLevelIds.indexOf(e.singleUserId)>-1,expression:"type === 'common' && form.newUserEnjoy === '0' && form.userRestrict === '1' && form.userLevelIds.indexOf(singleUserId) > -1"}]},[a("span",[e._v("*不为空&用,隔开，最多200个用户")])]),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"common"===e.type&&"0"===e.form.newUserEnjoy&&"1"===e.form.userRestrict&&e.form.userLevelIds.indexOf(e.singleUserId)>-1,expression:"type === 'common' && form.newUserEnjoy === '0' && form.userRestrict === '1' && form.userLevelIds.indexOf(singleUserId) > -1"}],attrs:{prop:"excel",rules:[{required:"common"===e.type&&"0"===e.form.newUserEnjoy&&"1"===e.form.userRestrict&&e.form.userLevelIds.indexOf(e.singleUserId)>-1&&!e.form.tempUserIds,message:"不为空",trigger:["blur","change"]}]}},[a("el-upload",{ref:"upload",attrs:{limit:"1",accept:".xls,.xlsx,.xlc,.xlm,.xlt,.xlw","on-remove":e.handleFileRemove,"on-change":e.handleFileChange,"on-exceed":e.handleFileExceed,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("*文件需为excel格式")])],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1!==e.type,expression:"type !== 1"}],attrs:{label:"每人最多激活",prop:"perCardCount",rules:[{validator:e.cardCountRule,trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"135px"},attrs:{autocomplete:"off"},model:{value:e.form.perCardCount,callback:function(t){e.$set(e.form,"perCardCount",t)},expression:"form.perCardCount"}}),e._v(" 张\n      ")],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"lottery"===e.type,expression:"type === 'lottery'"}],attrs:{label:"奖品总量",prop:"totalCount",rules:[{required:"lottery"===e.type,message:"必填",trigger:["blur","change"]},{pattern:/^\d{1,6}$/,message:"整数且0-999999",trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"135px"},attrs:{autocomplete:"off"},model:{value:e.form.totalCount,callback:function(t){e.$set(e.form,"totalCount",t)},expression:"form.totalCount"}}),e._v(" 张\n      ")],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"lottery"===e.type,expression:"type === 'lottery'"}],attrs:{label:"每日限量",prop:"dailyCount",rules:[{required:"lottery"===e.type,message:"必填",trigger:["blur","change"]},{pattern:/^\d{1,3}$/,message:"整数且0-999",trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"135px"},attrs:{autocomplete:"off"},model:{value:e.form.dailyCount,callback:function(t){e.$set(e.form,"dailyCount",t)},expression:"form.dailyCount"}}),e._v(" 张\n      ")],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"lottery"===e.type,expression:"type === 'lottery'"}],attrs:{label:"开放时间",prop:"timeRestrict"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.form.timeRestrict,callback:function(t){e.$set(e.form,"timeRestrict",t)},expression:"form.timeRestrict"}},[e._v("不限制")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.form.timeRestrict,callback:function(t){e.$set(e.form,"timeRestrict",t)},expression:"form.timeRestrict"}},[e._v("限制")])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"lottery"===e.type&&"1"===e.form.timeRestrict,expression:"type === 'lottery' && form.timeRestrict === '1'"}],attrs:{label:"生效日期",prop:"timeStart",rules:[{validator:e.dateRule,trigger:["blur","change"]}]}},[a("el-date-picker",{staticStyle:{width:"130px"},attrs:{type:"date","value-format":"yyyy-MM-dd 00:00:00",placeholder:"选择日期","picker-options":{disabledDate:function(t){return t.getTime()<Date.now()||0!==new Date(e.form.timeEnd).getTime()&&t.getTime()>new Date(e.form.timeEnd).getTime()}}},model:{value:e.form.timeStart,callback:function(t){e.$set(e.form,"timeStart",t)},expression:"form.timeStart"}}),e._v("\n        ~\n        "),a("el-date-picker",{ref:"endTime",staticStyle:{width:"130px"},attrs:{type:"date","value-format":"yyyy-MM-dd 23:59:59",placeholder:"选择日期","picker-options":{disabledDate:function(t){return t.getTime()<Date.now()||0!==new Date(e.form.timeStart).getTime()&&t.getTime()<new Date(e.form.timeStart).getTime()}}},model:{value:e.form.timeEnd,callback:function(t){e.$set(e.form,"timeEnd",t)},expression:"form.timeEnd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.inUseStatus,callback:function(t){e.$set(e.form,"inUseStatus",t)},expression:"form.inUseStatus"}},[a("el-option",{attrs:{value:"1",label:"正常"}}),e._v(" "),a("el-option",{attrs:{value:"0",label:"停用"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]},Dc=a("VU/8")(Sc,Lc,!1,null,null,null).exports,Pc={name:"levelDialog",props:{data:{type:"Object",default:function(){return{}}},visible:{type:"Boolean",default:!1},appTab:{default:0}},data:function(){return{form:{levelName:"",consumeDaysStart:"",consumeDaysEnd:"",consumeDaysStartEqual:"3",consumeDaysEndEqual:"3",weeklyConsumeTimesStart:"",weeklyConsumeTimesEnd:"",weeklyConsumeTimesStartEqual:"3",weeklyConsumeTimesEndEqual:"3",dailyConsumeStart:"",dailyConsumeEnd:"",dailyConsumeStartEqual:"3",dailyConsumeEndEqual:"3",maxWeekConsumeStart:"",maxWeekConsumeEnd:"",maxWeekConsumeStartEqual:"3",maxWeekConsumeEndEqual:"3",inUseStatus:"1"},updateLoading:!1}},computed:{queryApi:function(){return ot[this.appTab]}},methods:{consumeDaysRule:function(e,t,a){var i=this.$refs.consumeDaysEnd.value;""===t?a(new Error("左侧值不为空")):/^\d+$/.test(t)?t>=0&&t<=999?""===i?a(new Error("右侧值不为空")):/^\d+|-1$/.test(i)?i>=-1&&i<=999?!/^-1$/.test(i)&&i<t?a(new Error("右侧值不能小于左侧值")):a():a(new Error("右侧值0-999或-1")):a(new Error("右侧值必须为数字")):a(new Error("左侧值0-999")):a(new Error("左侧值必须为数字"))},weeklyConsumeRule:function(e,t,a){var i=this.$refs.weeklyConsumeTimesEnd.value;""===t?a(new Error("左侧值不为空")):/^\d+$/.test(t)?t>=0&&t<=200?""===i?a(new Error("右侧值不为空")):/^\d+|-1$/.test(i)?i>=-1&&i<=200?!/^-1$/.test(i)&&i<t?a(new Error("右侧值不能小于左侧值")):a():a(new Error("右侧值0-200或-1")):a(new Error("右侧值必须为数字")):a(new Error("左侧值0-200")):a(new Error("左侧值必须为数字"))},dailyConsumeRule:function(e,t,a){var i=this.$refs.dailyConsumeEnd.value;""===t?a(new Error("左侧值不为空")):/^\d+$/.test(t)?t>=0&&t<=999?""===i?a(new Error("右侧值不为空")):/^\d+|-1$/.test(i)?i>=-1&&i<=999?!/^-1$/.test(i)&&i<t?a(new Error("右侧值不能小于左侧值")):a():a(new Error("右侧值0-999或-1")):a(new Error("右侧值必须为数字")):a(new Error("左侧值0-999")):a(new Error("左侧值必须为数字"))},maxWeekConsumeRule:function(e,t,a){var i=this.$refs.maxWeekConsumeEnd.value;""===t?a(new Error("左侧值不为空")):/^\d+$/.test(t)?t>=0&&t<=99999?""===i?a(new Error("右侧值不为空")):/^\d+|-1$/.test(i)?i>=-1&&i<=99999?!/^-1$/.test(i)&&i<t?a(new Error("右侧值不能小于左侧值")):a():a(new Error("右侧值0-99999或-1")):a(new Error("右侧值必须为数字")):a(new Error("左侧值0-99999")):a(new Error("左侧值必须为数字"))},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.updateLoading=!0,t.$service(t.form.userLevelId?t.queryApi.update:t.queryApi.add,{method:"post",urlParams:{userLevelId:t.form.userLevelId},data:t.form}).then(function(e){200===e.code?(t.updateLoading=!1,t.$message.success(t.form.userLevelId?"修改用户级别成功":"新增用户级别成功"),t.$emit("closeDialog"),t.$emit("success")):(t.updateLoading=!1,t.$message.error(e.code+":"+e.message))},function(e){t.updateLoading=!1,t.$message.error(qo()(e))}))})}},watch:{visible:function(e){var t=this;e?(this.form={levelName:"",consumeDaysStart:"",consumeDaysEnd:"",consumeDaysStartEqual:"3",consumeDaysEndEqual:"3",weeklyConsumeTimesStart:"",weeklyConsumeTimesEnd:"",weeklyConsumeTimesStartEqual:"3",weeklyConsumeTimesEndEqual:"3",dailyConsumeStart:"",dailyConsumeEnd:"",dailyConsumeStartEqual:"3",dailyConsumeEndEqual:"3",maxWeekConsumeStart:"",maxWeekConsumeEnd:"",maxWeekConsumeStartEqual:"3",maxWeekConsumeEndEqual:"3",inUseStatus:"1"},this.data&&this.data.userLevelId&&(this.form={consumeDaysStartEqual:this.data.consumeDaysIntervalObject.includeStart?"2":"3",consumeDaysEndEqual:this.data.consumeDaysIntervalObject.includeEnd?"2":"3",weeklyConsumeTimesStartEqual:this.data.weeklyConsumeTimesIntervalObject.includeStart?"2":"3",weeklyConsumeTimesEndEqual:this.data.weeklyConsumeTimesIntervalObject.includeEnd?"2":"3",dailyConsumeStartEqual:this.data.dailyConsumeIntervalObject.includeStart?"2":"3",dailyConsumeEndEqual:this.data.dailyConsumeIntervalObject.includeEnd?"2":"3",maxWeekConsumeStartEqual:this.data.maxWeekConsumeIntervalObject.includeStart?"2":"3",maxWeekConsumeEndEqual:this.data.maxWeekConsumeIntervalObject.includeEnd?"2":"3",levelName:this.data.levelName,consumeDaysStart:this.data.consumeDaysIntervalObject.start,consumeDaysEnd:this.data.consumeDaysIntervalObject.end,weeklyConsumeTimesStart:this.data.weeklyConsumeTimesIntervalObject.start,weeklyConsumeTimesEnd:this.data.weeklyConsumeTimesIntervalObject.end,dailyConsumeStart:this.data.dailyConsumeIntervalObject.start,dailyConsumeEnd:this.data.dailyConsumeIntervalObject.end,maxWeekConsumeStart:this.data.maxWeekConsumeIntervalObject.start,maxWeekConsumeEnd:this.data.maxWeekConsumeIntervalObject.end,inUseStatus:this.data.status?"1":"0",userLevelId:this.data.userLevelId}),this.$nextTick(function(){t.$refs.form.clearValidate()})):this.$emit("closeDialog")}}},zc={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"level-dialog"},[a("el-dialog",{attrs:{title:e.form.userLevelId?"修改用户群":"新增用户群",visible:e.visible,"close-on-click-modal":!1,width:"500px",center:""},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,disabled:e.updateLoading,"label-width":"110px",size:"small"}},[a("el-form-item",{attrs:{label:"用户群等级",prop:"levelName",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{max:20,message:"最多20个字",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.levelName,callback:function(t){e.$set(e.form,"levelName",t)},expression:"form.levelName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"消费天数",prop:"consumeDaysStart",rules:[{validator:e.consumeDaysRule,trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"95px"},attrs:{autocomplete:"off"},model:{value:e.form.consumeDaysStart,callback:function(t){e.$set(e.form,"consumeDaysStart",e._n(t))},expression:"form.consumeDaysStart"}}),e._v(" "),a("el-select",{staticStyle:{width:"65px"},model:{value:e.form.consumeDaysStartEqual,callback:function(t){e.$set(e.form,"consumeDaysStartEqual",t)},expression:"form.consumeDaysStartEqual"}},[a("el-option",{attrs:{value:"3",label:">"}}),e._v(" "),a("el-option",{attrs:{value:"2",label:">="}})],1),e._v(" "),a("el-select",{staticStyle:{width:"65px"},model:{value:e.form.consumeDaysEndEqual,callback:function(t){e.$set(e.form,"consumeDaysEndEqual",t)},expression:"form.consumeDaysEndEqual"}},[a("el-option",{attrs:{value:"3",label:"<"}}),e._v(" "),a("el-option",{attrs:{value:"2",label:"<="}})],1),e._v(" "),a("el-input",{ref:"consumeDaysEnd",staticStyle:{width:"95px"},attrs:{autocomplete:"off"},model:{value:e.form.consumeDaysEnd,callback:function(t){e.$set(e.form,"consumeDaysEnd",e._n(t))},expression:"form.consumeDaysEnd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"周均消费次数",prop:"weeklyConsumeTimesStart",rules:[{validator:e.weeklyConsumeRule,trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"95px"},attrs:{autocomplete:"off"},model:{value:e.form.weeklyConsumeTimesStart,callback:function(t){e.$set(e.form,"weeklyConsumeTimesStart",e._n(t))},expression:"form.weeklyConsumeTimesStart"}}),e._v(" "),a("el-select",{staticStyle:{width:"65px"},model:{value:e.form.weeklyConsumeTimesStartEqual,callback:function(t){e.$set(e.form,"weeklyConsumeTimesStartEqual",t)},expression:"form.weeklyConsumeTimesStartEqual"}},[a("el-option",{attrs:{value:"3",label:">"}}),e._v(" "),a("el-option",{attrs:{value:"2",label:">="}})],1),e._v(" "),a("el-select",{staticStyle:{width:"65px"},model:{value:e.form.weeklyConsumeTimesEndEqual,callback:function(t){e.$set(e.form,"weeklyConsumeTimesEndEqual",t)},expression:"form.weeklyConsumeTimesEndEqual"}},[a("el-option",{attrs:{value:"3",label:"<"}}),e._v(" "),a("el-option",{attrs:{value:"2",label:"<="}})],1),e._v(" "),a("el-input",{ref:"weeklyConsumeTimesEnd",staticStyle:{width:"95px"},attrs:{autocomplete:"off"},model:{value:e.form.weeklyConsumeTimesEnd,callback:function(t){e.$set(e.form,"weeklyConsumeTimesEnd",e._n(t))},expression:"form.weeklyConsumeTimesEnd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"日均消费额",prop:"dailyConsumeStart",rules:[{validator:e.dailyConsumeRule,trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"95px"},attrs:{autocomplete:"off"},model:{value:e.form.dailyConsumeStart,callback:function(t){e.$set(e.form,"dailyConsumeStart",e._n(t))},expression:"form.dailyConsumeStart"}}),e._v(" "),a("el-select",{staticStyle:{width:"65px"},model:{value:e.form.dailyConsumeStartEqual,callback:function(t){e.$set(e.form,"dailyConsumeStartEqual",t)},expression:"form.dailyConsumeStartEqual"}},[a("el-option",{attrs:{value:"3",label:">"}}),e._v(" "),a("el-option",{attrs:{value:"2",label:">="}})],1),e._v(" "),a("el-select",{staticStyle:{width:"65px"},model:{value:e.form.dailyConsumeEndEqual,callback:function(t){e.$set(e.form,"dailyConsumeEndEqual",t)},expression:"form.dailyConsumeEndEqual"}},[a("el-option",{attrs:{value:"3",label:"<"}}),e._v(" "),a("el-option",{attrs:{value:"2",label:"<="}})],1),e._v(" "),a("el-input",{ref:"dailyConsumeEnd",staticStyle:{width:"95px"},attrs:{autocomplete:"off"},model:{value:e.form.dailyConsumeEnd,callback:function(t){e.$set(e.form,"dailyConsumeEnd",e._n(t))},expression:"form.dailyConsumeEnd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"周最高消费额",prop:"maxWeekConsumeStart",rules:[{validator:e.maxWeekConsumeRule,trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"95px"},attrs:{autocomplete:"off"},model:{value:e.form.maxWeekConsumeStart,callback:function(t){e.$set(e.form,"maxWeekConsumeStart",e._n(t))},expression:"form.maxWeekConsumeStart"}}),e._v(" "),a("el-select",{staticStyle:{width:"65px"},model:{value:e.form.maxWeekConsumeStartEqual,callback:function(t){e.$set(e.form,"maxWeekConsumeStartEqual",t)},expression:"form.maxWeekConsumeStartEqual"}},[a("el-option",{attrs:{value:"3",label:">"}}),e._v(" "),a("el-option",{attrs:{value:"2",label:">="}})],1),e._v(" "),a("el-select",{staticStyle:{width:"65px"},model:{value:e.form.consumeDaysEndEqual,callback:function(t){e.$set(e.form,"consumeDaysEndEqual",t)},expression:"form.consumeDaysEndEqual"}},[a("el-option",{attrs:{value:"3",label:"<"}}),e._v(" "),a("el-option",{attrs:{value:"2",label:"<="}})],1),e._v(" "),a("el-input",{ref:"maxWeekConsumeEnd",staticStyle:{width:"95px"},attrs:{autocomplete:"off"},model:{value:e.form.maxWeekConsumeEnd,callback:function(t){e.$set(e.form,"maxWeekConsumeEnd",e._n(t))},expression:"form.maxWeekConsumeEnd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"inUseStatus"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.inUseStatus,callback:function(t){e.$set(e.form,"inUseStatus",t)},expression:"form.inUseStatus"}},[a("el-option",{attrs:{value:"1",label:"正常"}}),e._v(" "),a("el-option",{attrs:{value:"0",label:"停用"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"提示"}},[a("span",[e._v("*输入框内填-1代表无穷")])])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]},Hc=a("VU/8")(Pc,zc,!1,null,null,null).exports,Mc={name:"relateCardDialog",props:{data:{type:"Object",default:function(){return{}}},cardList:{type:"Object",default:function(){return{}}},type:{type:"Number",default:0},visible:{type:"Boolean",default:!1},appTab:{default:0}},data:function(){return{form:{cardIds:[],relateList:{}},updateLoading:!1}},computed:{queryApi:function(){return ot[this.appTab]}},methods:{relateRule:function(e,t,a){var i=e.field,r=this.$refs["probability"+i][0].value,o=this.$refs["personWeekLottery"+i][0].value,n=this.$refs["personLottery"+i][0].value;r?/^\d+$/.test(r)?r>=0&&r<=100?o?/^\d+$/.test(o)?o>=0&&o<100?n?/^\d+$/.test(n)?n>=0&&n<1e4?a():a(new Error("每人最多数值为0-99")):a(new Error("每人最多数值必须为正整数")):a(new Error("每人最多数值不为空")):a(new Error("每人每周数值为0-99")):a(new Error("每人每周数值必须为正整数")):a(new Error("每人每周数值不为空")):a(new Error("概率为0-100")):a(new Error("概率必须为正整数")):a(new Error("概率不为空"))},changeSelect:function(){var e=this,t={};this.form.cardIds.forEach(function(a){e.form.relateList[a]?t[a]=e.form.relateList[a]:t[a]={personLottery:"",personWeekLottery:"",pointCardId:a,probability:"",shortName:e.cardList[a].shortName}}),this.form.relateList=t},removeCard:function(e){this.form.cardIds.splice(this.form.cardIds.indexOf(e),1),delete this.form.relateList[e]},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){t.updateLoading=!0;var a={appPackageType:t.type,relateCardList:[],userLevelId:t.data.userLevelId};o()(t.form.relateList).forEach(function(e){a.relateCardList.push({personLottery:t.form.relateList[e].personLottery,personWeekLottery:t.form.relateList[e].personWeekLottery,pointCardId:t.form.relateList[e].pointCardId,probability:t.form.relateList[e].probability/100})}),a.relateCardList=qo()(a.relateCardList),t.$service(t.data.packageRelateLotteryCardVos&&t.data.packageRelateLotteryCardVos.length>0?t.queryApi.addCardUpdate:t.queryApi.addCard,{method:"post",urlParams:{userLevelId:t.data.userLevelId},data:a}).then(function(e){200===e.code?(t.updateLoading=!1,t.$message.success("关联点卡成功"),t.$emit("closeDialog"),t.$emit("success")):(t.updateLoading=!1,t.$message.error(e.code+":"+e.message))},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}})}},watch:{visible:function(e){var t=this;e?this.$nextTick(function(){t.$refs.form.clearValidate()}):this.$emit("closeDialog")},data:function(e){var t=this;this.form={cardIds:[],relateList:{}},e.packageRelateLotteryCardVos&&e.packageRelateLotteryCardVos.length>0&&e.packageRelateLotteryCardVos.forEach(function(e){parseInt(e.appPackageType)===parseInt(t.type)&&e.relateLotteryCardList.forEach(function(e){t.form.cardIds.push(e.pointCardId+""),e.probability=Math.round(100*e.probability),t.form.relateList[e.pointCardId]=e})})}}},Fc={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"relate-card-dialog"},[a("el-dialog",{attrs:{title:"关联点卡",visible:e.visible,"close-on-click-modal":!1,width:"700px",center:""},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,disabled:e.updateLoading,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"选择点卡",prop:"cardIds",rules:{type:"array",required:!0,message:"点卡必须选",trigger:"change"}}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},on:{change:e.changeSelect},model:{value:e.form.cardIds,callback:function(t){e.$set(e.form,"cardIds",t)},expression:"form.cardIds"}},e._l(e.cardList,function(e,t){return a("el-option",{key:t,attrs:{label:e.shortName,value:t}})}),1)],1),e._v(" "),e._l(e.form.relateList,function(t,i){return a("el-form-item",{key:i,attrs:{label:t.shortName,prop:i+"",rules:{validator:e.relateRule,trigger:["blur","change"]}}},[a("el-input",{ref:"probability"+i,refInFor:!0,staticStyle:{width:"70px"},attrs:{placeholder:"0-100"},model:{value:t.probability,callback:function(a){e.$set(t,"probability",e._n(a))},expression:"item.probability"}}),e._v(" %概率，每人每周最多抢\n        "),a("el-input",{ref:"personWeekLottery"+i,refInFor:!0,staticStyle:{width:"70px"},attrs:{placeholder:"0-99"},model:{value:t.personWeekLottery,callback:function(a){e.$set(t,"personWeekLottery",e._n(a))},expression:"item.personWeekLottery"}}),e._v(" 次，每人最多可抢\n        "),a("el-input",{ref:"personLottery"+i,refInFor:!0,staticStyle:{width:"80px"},attrs:{placeholder:"0-9999"},model:{value:t.personLottery,callback:function(a){e.$set(t,"personLottery",e._n(a))},expression:"item.personLottery"}}),e._v(" 次\n        "),a("el-button",{attrs:{type:"primary",icon:"el-icon-delete",circle:"",size:"small"},on:{click:function(t){return e.removeCard(i)}}})],1)})],2),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]},Nc=a("VU/8")(Mc,Fc,!1,null,null,null).exports,Ec={name:"PriceProduct",data:function(){return{appTab:0,activeTab:"1",spGroupTab:"11",pointCardTab:"common",loading:!1,list:[],pageIndex:1,pageSize:25,pageCount:1,tableHeight:null,freeSign2CH:{1:"普通",2:"免费试用",3:"VIP免费试用",4:"彩票店地推免费试用"},pointCardCommonUserLevelList:[],dialogThread:!1,dialogThreadData:{},dialogSp:!1,dialogSpType:null,dialogSpData:{},dialogPointCard:!1,dialogPointCardType:null,appPackageType:null,dialogPointCardData:{},dialogUserLevel:!1,dialogUserLevelData:{},appPackageType2CH:{0:"主包",1:"马甲包1",2:"马甲包2",3:"马甲包3"},dialogRelateCard:!1,relateCardList:{},relateCardData:{},relateCardType:null}},computed:u()({},Object(sn.d)(["windowHeight"]),{PriceProductArticleApi:function(){return at[this.appTab]},PriceProductSpApi:function(){return it[this.appTab]},PriceProductPointCardApi:function(){return rt[this.appTab]},PriceProductPointCardUserLevelApi:function(){return ot[this.appTab]}}),components:{VThreadDialog:xc,VSpDialog:Cc,VPointCardDialog:Dc,VLevelDialog:Hc,VRelateCardDialog:Nc},created:function(){this.getList(),this.getPointCardCommonUserLevelList(),this.setHeight()},methods:{setClassName:function(e){var t=e.row;e.index;return t.packageRelateLotteryCardVos&&t.packageRelateLotteryCardVos.length>0?"":"expend-hidden"},setHeight:function(){var e=this;this.$nextTick(function(){var t=0;t="1"===e.activeTab?e.$refs.elTable.$el.offsetTop:"5"===e.activeTab?"userLevel"!==e.pointCardTab?e.$refs.elTablePC.$el.offsetTop:e.$refs.elTableUL.$el.offsetTop:e.$refs.elTableSP.$el.offsetTop,e.tableHeight=e.windowHeight-t-("1"!==e.activeTab?63:20)})},handleCommand:function(e){this.appTab.toString()!==e.toString()&&(this.appTab=e,this.handleClickTabs())},handleClickTabs:function(){this.list=[],this.getList(),this.setHeight()},getList:function(e){var t=this;this.loading||(this.loading=!0,this.pageIndex=e||1,"1"===this.activeTab?this.$service(this.PriceProductArticleApi.list).then(function(e){t.loading=!1,200===e.code?(t.list=e.data||[],t.$refs.elTable.bodyWrapper.scrollTop=0,t.$refs.elTable.bodyWrapper.scrollLeft=0):t.$message.error(e.code+":"+e.message)},function(e){t.loading=!1,t.$message.error(qo()(e))}):"5"===this.activeTab?"userLevel"!==this.pointCardTab?this.$service(this.PriceProductPointCardApi.list,{urlParams:{type:this.pointCardTab,pageIndex:this.pageIndex,pageSize:this.pageSize},params:{appPackageType:0}}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.records||[],t.pageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1,t.$refs.elTableUL.bodyWrapper.scrollTop=0,t.$refs.elTableUL.bodyWrapper.scrollLeft=0):t.$message.error(e.code+":"+e.message)},function(e){t.loading=!1,t.$message.error(qo()(e))}):this.$service(this.PriceProductPointCardUserLevelApi.list,{urlParams:{pageIndex:this.pageIndex,pageSize:this.pageSize}}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.records||[],t.pageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1,t.$refs.elTableUL.bodyWrapper.scrollTop=0,t.$refs.elTableUL.bodyWrapper.scrollLeft=0):t.$message.error(e.code+":"+e.message)},function(e){t.loading=!1,t.$message.error(qo()(e))}):this.$service(this.PriceProductSpApi.list,{params:{pageIndex:this.pageIndex,pageSize:this.pageSize,typeId:"2"===this.activeTab?this.spGroupTab:this.activeTab}}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.records||[],t.pageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1,t.$refs.elTableSP.bodyWrapper.scrollTop=0,t.$refs.elTableSP.bodyWrapper.scrollLeft=0):t.$message.error(e.code+":"+e.message)},function(e){t.loading=!1,t.$message.error(qo()(e))}))},changeWeight:function(e){var t=this;this.$prompt("","修改权重",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,2}$/,inputErrorMessage:"0-99之间",closeOnClickModal:!1,inputValue:e.weight}).then(function(a){var i={weight:a.value};"1"===t.activeTab?i.threadPriceId=e.threadPriceId:"5"===t.activeTab?i.pointCardId=e.pointCardId:i.spId=e.subscribeProductId,t.$service("1"===t.activeTab?t.PriceProductArticleApi.weight:"5"===t.activeTab?t.PriceProductPointCardApi.weight:t.PriceProductSpApi.weight,{method:"5"===t.activeTab?"get":"post",urlParams:"5"===t.activeTab?i:null,data:"5"===t.activeTab?null:i}).then(function(e){200===e.code?(t.getList(),t.$message.success("权重修改成功！")):t.$message.error(e.code+":"+e.message)},function(e){t.$message.error(qo()(e))})})},switchStatus:function(e){var t=this,a={status:e.status};"1"===this.activeTab?a.threadPriceId=e.threadPriceId:"5"===this.activeTab?"userLevel"===this.pointCardTab?a.userLevelId=e.userLevelId:(a.pointCardId=e.pointCardId,a.type=this.pointCardTab):a.spId=e.subscribeProductId,this.$set(e,"statusLoading",!0),this.$service("1"===this.activeTab?this.PriceProductArticleApi.status:"5"===this.activeTab?this.PriceProductPointCardApi.status:this.PriceProductSpApi.status,{method:"5"===this.activeTab?"get":"post",urlParams:"5"===this.activeTab?a:null,data:"5"===this.activeTab?null:a}).then(function(a){e.statusLoading=!1,200===a.code?t.$message.success("状态更新成功"):(t.$set(e,"status",e.status?0:1),t.$message.error(a.code+":"+a.message))},function(a){e.statusLoading=!1,t.$set(e,"status",e.status?0:1),t.$message.error(qo()(a))})},getPointCardCommonUserLevelList:function(){var e=this;this.$service(this.PriceProductPointCardApi.userList).then(function(t){200===t.code&&(e.pointCardCommonUserLevelList=t.data||[])})},userLevel2CH:function(e){var t=this;if(e&&0!==e.length){if(0===this.pointCardCommonUserLevelList.length)return e.join(",");var a=[];return e.forEach(function(e){t.pointCardCommonUserLevelList.forEach(function(t){e===t.userLevelId&&a.push(t.levelName)})}),a.join("、")}},userLevelDel:function(e){var t=this;this.$set(e,"loading",!0),this.$service(this.PriceProductPointCardUserLevelApi.del,{urlParams:{userLevelId:e.userLevelId}}).then(function(a){e.loading=!1,200===a.code?(e.delPop=!1,t.$message.success("删除成功"),t.getList()):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})},priceProductPop:function(e){"1"===this.activeTab?(this.dialogThread=!0,this.dialogThreadData=e||{}):"5"===this.activeTab?"userLevel"===this.pointCardTab?(this.dialogUserLevel=!0,this.dialogUserLevelData=e||{}):(this.dialogPointCard=!0,this.dialogPointCardType=this.pointCardTab,this.appPackageType=0,this.dialogPointCardData=e||{}):(this.dialogSp=!0,this.dialogSpType="2"===this.activeTab?this.spGroupTab:this.activeTab,this.dialogSpData=e||{})},relateCardPop:function(e,t){var a=this;this.$service(this.PriceProductPointCardUserLevelApi.addCardList,{params:{appPackageType:t}}).then(function(i){200===i.code?(i.data.forEach(function(e){a.relateCardList[e.pointCardId]=e}),a.relateCardData=e,a.relateCardType=t,a.dialogRelateCard=!0):a.$message.error(i.code+":"+i.message)},function(e){a.$message.error(qo()(e))})}},watch:{windowHeight:function(){this.setHeight()}}},Rc={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"price-product"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title)+"\n        ")])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-dropdown",{on:{command:e.handleCommand}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("\n          切换 - "+e._s({0:"红彩主包",1:"精准比分"}[e.appTab])+" "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"0"}},[e._v("红彩主包")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"1"}},[e._v("精准比分")])],1)],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.priceProductPop()}}},[e._v(e._s("5"===e.activeTab&&"userLevel"===e.pointCardTab?"新建用户组":"新建价格"))])],1)]),e._v(" "),a("el-tabs",{on:{"tab-click":function(t){return e.handleClickTabs()}},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"文章价格",disabled:e.loading,name:"1"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"交叉盘价格",disabled:e.loading,name:"2"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"五星指数价格",disabled:e.loading,name:"3"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"盘赔变动价格",disabled:e.loading,name:"4"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"点卡价格",disabled:e.loading,name:"5"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"红彩指数价格",disabled:e.loading,name:"6"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"VIP大会员",disabled:e.loading,name:"13"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"旋转矩阵价格",disabled:e.loading,name:"15"}})],1),e._v(" "),a("el-tabs",{directives:[{name:"show",rawName:"v-show",value:"2"===e.activeTab,expression:"activeTab==='2'"}],on:{"tab-click":function(t){return e.handleClickTabs()}},model:{value:e.spGroupTab,callback:function(t){e.spGroupTab=t},expression:"spGroupTab"}},[a("el-tab-pane",{attrs:{label:"主包(新)",disabled:e.loading,name:"11"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"主包(老)",disabled:e.loading,name:"2"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"马甲包1",disabled:e.loading,name:"8"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"马甲包2",disabled:e.loading,name:"9"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"马甲包3",disabled:e.loading,name:"10"}})],1),e._v(" "),a("el-tabs",{directives:[{name:"show",rawName:"v-show",value:"5"===e.activeTab,expression:"activeTab==='5'"}],on:{"tab-click":function(t){return e.handleClickTabs()}},model:{value:e.pointCardTab,callback:function(t){e.pointCardTab=t},expression:"pointCardTab"}},[a("el-tab-pane",{attrs:{label:"普通价位",disabled:e.loading,name:"common"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"抽卡价位",disabled:e.loading,name:"lottery"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"活动点卡",disabled:e.loading,name:"activity"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"VIP会员卡",disabled:e.loading,name:"vip"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"分享拉新点卡",disabled:e.loading,name:"sharePullNew"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"VIP补充卡",disabled:e.loading,name:"vipSupply"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"聊天室抽奖卡",disabled:e.loading,name:"chatRoomDraw"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"生日点卡",disabled:e.loading,name:"birthdayGift"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"点卡用户群",disabled:e.loading,name:"userLevel"}})],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"1"===e.activeTab,expression:"activeTab==='1'"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{fixed:"",prop:"threadPriceId",label:"商品ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"threadPriceName",label:"商品名称","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"threadPrice",label:"商品价格(元)","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"redCurrency",label:"红豆数量(豆)","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(0==t.row.status?"正常":"停用")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"weight",label:"权重",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.changeWeight(t.row)}}},[e._v(e._s(t.row.weight))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{disabled:t.row.statusLoading,"active-value":0,"inactive-value":1},nativeOn:{click:function(a){return e.switchStatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.priceProductPop(t.row)}}})]}}])})],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:[2,3,4,6,13,15].indexOf(parseInt(e.activeTab))>-1,expression:"[2, 3, 4, 6, 13, 15].indexOf(parseInt(activeTab)) > -1"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTableSP",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{fixed:"",prop:"subscribeProductId",label:"商品ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"商品全称","min-width":"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"subTitle",label:"商品简称","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"appleGoodsId",label:"iOS产品码","min-width":"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"freeSign",label:"付费类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.freeSign2CH[t.row.freeSign]||"-")+"\n      ")]}}])}),e._v(" "),"2"===e.activeTab?a("el-table-column",{attrs:{prop:"dataCount",label:"可用场次数",width:"100"}}):e._e(),e._v(" "),"2"===e.activeTab?a("el-table-column",{attrs:{prop:"creditPresent",label:"赠送积分",width:"100"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"定价(元)",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"redCurrency",label:"红豆(豆)",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"days",label:"有效期",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.effectiveType?t.row.days+"天":"无限期")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"平台",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===e.appTab.toString()?a("span",[e._v(e._s(9===t.row.payTerminalId?"iOSWAP":4===t.row.payTerminalId?"WAP":"其他"))]):e._e(),e._v(" "),"1"===e.appTab.toString()?a("span",[e._v(e._s(5===t.row.payTerminalId?"iOSWAP":4===t.row.payTerminalId?"WAP":"其他"))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(0==t.row.status?"正常":"停用")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"weight",label:"权重",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.changeWeight(t.row)}}},[e._v(e._s(t.row.weight))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{disabled:t.row.statusLoading,"active-value":0,"inactive-value":1},nativeOn:{click:function(a){return e.switchStatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.priceProductPop(t.row)}}})]}}])})],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"5"===e.activeTab&&"userLevel"!==e.pointCardTab,expression:"activeTab==='5'&&pointCardTab!=='userLevel'"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTablePC",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{fixed:"",prop:"pointCardId",label:"商品ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"shortName",label:"商品简称","min-width":"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productCode",label:"iOS产品码","min-width":"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"定价(元)",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"redCurrency",label:"红豆(豆)",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"point",label:"点数",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{label:"有效期",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.validDay?t.row.validDay+"天":"无限期")+"\n      ")]}}])}),e._v(" "),"vipSupply"===e.pointCardTab?a("el-table-column",{attrs:{prop:"noActiveValidDay",label:"未激活有效期",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.noActiveValidDay&&0!==t.row.noActiveValidDay?t.row.noActiveValidDay+"天":"无限期")+"\n      ")]}}],null,!1,733170531)}):e._e(),e._v(" "),"common"===e.pointCardTab?a("el-table-column",{attrs:{prop:"userLevelIdList",label:"用户组","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.userLevel2CH(t.row.userLevelIdList))+"\n      ")]}}],null,!1,981389578)}):e._e(),e._v(" "),"common"===e.pointCardTab?a("el-table-column",{attrs:{prop:"url",label:"链接","min-width":"120"}}):e._e(),e._v(" "),"lottery"===e.pointCardTab?a("el-table-column",{attrs:{prop:"totalCount",label:"卡总数",width:"80"}}):e._e(),e._v(" "),"lottery"===e.pointCardTab?a("el-table-column",{attrs:{prop:"totalFetchCount",label:"已发放数",width:"80"}}):e._e(),e._v(" "),"lottery"===e.pointCardTab?a("el-table-column",{attrs:{label:"开放时间","min-width":"115"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(1===t.row.timeRestrict?t.row.timeStart+" ~ "+t.row.timeEnd:"-")+"\n      ")]}}],null,!1,1429791329)}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(1==t.row.status?"正常":"停用")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"weight",label:"权重",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.changeWeight(t.row)}}},[e._v(e._s(t.row.weight))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{disabled:t.row.statusLoading,"active-value":1,"inactive-value":0},nativeOn:{click:function(a){return e.switchStatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.priceProductPop(t.row)}}})]}}])})],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"5"===e.activeTab&&"userLevel"===e.pointCardTab,expression:"activeTab==='5'&&pointCardTab==='userLevel'"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTableUL",attrs:{"row-class-name":e.setClassName,data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-table",{attrs:{"show-header":!1,stripe:"",data:t.row.packageRelateLotteryCardVos}},[a("el-table-column",{attrs:{width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e.appPackageType2CH[t.row.appPackageType]||"")+"\n            ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{"min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"relationCard",domProps:{innerHTML:e._s(t.row.relateLotteryCardDescList.join("<br />"))}})]}}],null,!0)})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userLevelId",label:"用户群ID",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"levelName",label:"用户群等级","min-width":"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"consumeDaysIntervalStr",label:"消费天数","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"weeklyConsumeTimesIntervalStr",label:"周消费天数","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dailyConsumeIntervalStr",label:"日均消费额","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"maxWeekConsumeIntervalStr",label:"周最高消费额","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"关联",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"left",trigger:"hover"}},[a("div",{staticStyle:{"text-align":"right",margin:"0"}},e._l(e.appPackageType2CH,function(i,r){return a("el-button",{key:r,attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.relateCardPop(t.row,r)}}},[e._v(e._s(i))])}),1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[e._v("关联")])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[1!==t.row.userGroupType?a("el-switch",{attrs:{disabled:t.row.statusLoading,"active-value":1,"inactive-value":0},nativeOn:{click:function(a){return e.switchStatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}}):e._e(),e._v(" "),1!==t.row.userGroupType?a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.priceProductPop(t.row)}}}):e._e(),e._v(" "),1!==t.row.userGroupType?a("el-popover",{attrs:{placement:"left"},model:{value:t.row.delPop,callback:function(a){e.$set(t.row,"delPop",a)},expression:"scope.row.delPop"}},[a("p",[e._v("确定删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.userLevelDel(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:"",size:"small"},slot:"reference"})],1):e._e()]}}])})],1),e._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:"1"!==e.activeTab,expression:"activeTab!=='1'"}],staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList}}),e._v(" "),a("v-thread-dialog",{attrs:{data:e.dialogThreadData,visible:e.dialogThread,appTab:e.appTab},on:{closeDialog:function(t){e.dialogThread=!1},success:function(t){return e.getList(e.pageIndex)}}}),e._v(" "),a("v-sp-dialog",{attrs:{data:e.dialogSpData,visible:e.dialogSp,type:e.dialogSpType,appTab:e.appTab},on:{closeDialog:function(t){e.dialogSp=!1},success:function(t){return e.getList(e.pageIndex)}}}),e._v(" "),a("v-point-card-dialog",{attrs:{data:e.dialogPointCardData,visible:e.dialogPointCard,type:e.dialogPointCardType,appType:e.appPackageType,userLevel:e.pointCardCommonUserLevelList,appTab:e.appTab},on:{closeDialog:function(t){e.dialogPointCard=!1},success:function(t){return e.getList(e.pageIndex)}}}),e._v(" "),a("v-level-dialog",{attrs:{data:e.dialogUserLevelData,visible:e.dialogUserLevel,appTab:e.appTab},on:{closeDialog:function(t){e.dialogUserLevel=!1},success:function(t){return e.getList(e.pageIndex)}}}),e._v(" "),a("v-relate-card-dialog",{attrs:{data:e.relateCardData,visible:e.dialogRelateCard,cardList:e.relateCardList,type:e.relateCardType,appTab:e.appTab},on:{closeDialog:function(t){e.dialogRelateCard=!1},success:function(t){return e.getList(e.pageIndex)}}})],1)},staticRenderFns:[]},Oc=a("VU/8")(Ec,Rc,!1,null,null,null).exports,Ac={name:"FinanceRecharge",data:function(){return{activeTab:"0",pageIndex:1,pageSize:25,pageCount:1,month:(new Date).getFullYear()+"-"+((new Date).getMonth()<9?"0"+((new Date).getMonth()+1):(new Date).getMonth()+1),startDay:gh(new Date((new Date).getFullYear(),(new Date).getMonth(),1),"yyyy-MM-dd"),endDay:gh(new Date,"yyyy-MM-dd"),loading:!1,tableHeight:null,sumGoodsCount:null,sumTradeAmount:null,list:[],testNumberShow:!1,form:[],updateLoading:!1,addShow:!0,accountList:[]}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.getTestList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},handleClickTabs:function(){this.getList(),this.getTestList(),this.setHeight()},getList:function(e){var t=this;this.loading||(this.loading=!0,this.pageIndex=e||1,this.$service(Pt[this.activeTab].list,{method:"get",urlParams:{month:this.month,pageIndex:this.pageIndex,pageSize:this.pageSize}}).then(function(e){t.loading=!1,200===e.code?(t.$refs.elTable.bodyWrapper.scrollTop=0,t.list=e.data.records||[],t.pageCount=e.data.page.pageCount||1,t.sumGoodsCount=e.data.sumGoodsCount||0,t.sumTradeAmount=e.data.sumTradeAmount||0):(t.list=[],t.$message.error(e.code+":"+e.message))},function(e){e&&(t.list=[],t.loading=!1,t.$message.error(qo()(e)))}))},exportList:function(){if(0===this.list.length)return this.$message("暂无相关数据");var e=location.origin+Pt[this.activeTab].export.replace(/{{month}}/,this.month);window.open(e)},exportDayList:function(){if(0===this.list.length)return this.$message("暂无相关数据");var e=location.origin+Pt[this.activeTab].exportDay.replace(/{{startDay}}/,this.startDay).replace(/{{endDay}}/,this.endDay);window.open(e)},getTestList:function(){var e=this;this.updateLoading||(this.updateLoading=!0,this.$service(Pt.listTestAccount,{}).then(function(t){e.updateLoading=!1,200===t.code?e.form=t.data.reverse()||[]:(e.form=[],e.$message.error(t.code+":"+t.message))},function(t){t&&(e.form=[],e.updateLoading=!1,e.$message.error(qo()(t)))}))},addTestAccount:function(e){var t=this;this.$service(Pt.addTestAccount,{method:"post",data:{account:e}}).then(function(e){200===e.code?(t.$message.success("添加成功！"),t.accountList=[{acconut:""}],t.getTestList()):t.$message.error(e.code+":"+e.message)},function(e){e&&t.$message.error(qo()(e))})},addButton:function(){this.accountList.splice(this.accountList.length,0,{acconut:""}),this.$refs.form.clearValidate(),this.addShow=!1},minButton:function(){this.accountList.splice(this.accountList.length-1,1),this.$refs.form.clearValidate(),this.addShow=!0}},watch:{windowHeight:function(){this.setHeight()}}},Uc={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"finance-recharge"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title)+"\n        ")])})],2)],1)]),e._v(" "),a("el-form",{attrs:{inline:!0,size:"mini",disabled:e.loading}},[a("el-form-item",[a("el-date-picker",{staticStyle:{width:"120px"},attrs:{type:"month",clearable:!1,"value-format":"yyyy-MM","picker-options":{disabledDate:function(e){return e.getTime()>Date.now()}}},on:{change:function(t){return e.getList()}},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.exportList}},[e._v("导出")])],1),e._v(" "),e.list.length?a("el-form-item",[e._v("\n      总计："),a("span",[e._v(e._s(e.sumGoodsCount)+"豆")]),e._v("；"),a("span",[e._v(e._s(e.sumTradeAmount)+"元")])]):e._e(),e._v(" "),a("el-form-item",[a("el-date-picker",{staticStyle:{width:"130px"},attrs:{type:"date",editable:"false",width:"100",placeholder:"开始日期","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd",clearable:!1,"picker-options":{disabledDate:function(t){return t.getTime()>Date.now()||0!==new Date(e.endTime).getTime()&&t.getTime()>new Date(e.endTime).getTime()}}},model:{value:e.startDay,callback:function(t){e.startDay=t},expression:"startDay"}}),e._v("\n      ~\n      "),a("el-date-picker",{staticStyle:{width:"130px"},attrs:{type:"date",editable:"false",placeholder:"结束日期","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd",clearable:!1,"picker-options":{disabledDate:function(t){return t.getTime()>Date.now()||0!==new Date(e.startTime).getTime()&&t.getTime()<new Date(e.startTime).getTime()}}},model:{value:e.endDay,callback:function(t){e.endDay=t},expression:"endDay"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.exportDayList}},[e._v("导出")])],1),e._v(" "),a("el-button",{staticStyle:{position:"absolute",right:"40px"},attrs:{type:"primary",size:"mini"},on:{click:function(t){e.testNumberShow=!0}}},[e._v("测试账号汇总")])],1),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"红彩",name:"0",disabled:e.loading}}),e._v(" "),a("el-tab-pane",{attrs:{label:"精准比分",name:"1",disabled:e.loading}})],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"orderId",label:"订单ID","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"订单创建时间","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.orderTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"订单成功时间","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.successTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"用户通行证","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"exOrderId",label:"渠道流水号","min-width":"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsCount",label:"购买数量","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tradeAmount",label:"购买金额(元)",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"appId",label:"支付终端",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("payTerminal2CH")([t.row.payTerminal,e.activeTab]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"payChannel",label:"支付通道",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("payChannel2CH")([t.row.payChannel,e.activeTab]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"channelRate",label:"通道费率",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.channelRate))+"\n      ")]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","page-size":"pageSize","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}}),e._v(" "),a("el-dialog",{attrs:{title:"测试账号汇总",visible:e.testNumberShow,center:"","close-on-click-modal":!1,width:"550px"},on:{"update:visible":function(t){e.testNumberShow=t}}},[a("el-form",{ref:"form",staticStyle:{"max-height":"620px",overflow:"auto","margin-bottom":"20px"},attrs:{"label-width":"100px",disabled:e.updateLoading}},[e._l(e.form,function(t,i){return a("el-form-item",{key:i,attrs:{label:i+1+"、账号:"}},[a("el-input",{staticStyle:{width:"250px","margin-right":"20px"},attrs:{disabled:t.data1},model:{value:t.data1,callback:function(a){e.$set(t,"data1",a)},expression:"item.data1"}}),e._v(" "),a("label",{attrs:{for:"date"}},[e._v(e._s(e._f("dateFormat")([t.createTime,"yyyy.MM.dd"])))])],1)}),e._v(" "),e._l(e.accountList,function(t,i){return a("el-form-item",{key:i,attrs:{label:"账号:"}},[a("el-input",{staticStyle:{width:"250px","margin-right":"20px"},model:{value:t.account,callback:function(a){e.$set(t,"account",a)},expression:"item.account"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return a.preventDefault(),e.addTestAccount(t.account)}}},[e._v("保存")])],1)}),e._v(" "),e.addShow?a("el-form-item",[a("el-button",{attrs:{size:"mini",icon:"el-icon-plus"},on:{click:function(t){return e.addButton()}}})],1):e._e(),e._v(" "),e.addShow?e._e():a("el-form-item",[a("el-button",{attrs:{size:"mini",icon:"el-icon-minus"},on:{click:function(t){return e.minButton()}}})],1)],2)],1)],1)},staticRenderFns:[]},Vc=a("VU/8")(Ac,Uc,!1,null,null,null).exports,qc={name:"FinanceOncePurchase",data:function(){return{appList:[],activeTab:"-1",pageIndex:1,pageSize:25,pageCount:1,month:(new Date).getFullYear()+"-"+((new Date).getMonth()<9?"0"+((new Date).getMonth()+1):(new Date).getMonth()+1),startDay:gh(new Date((new Date).getFullYear(),(new Date).getMonth(),1),"yyyy-MM-dd"),endDay:gh(new Date,"yyyy-MM-dd"),loading:!1,tableHeight:null,sumRedCurrency:null,list:[]}},computed:u()({},Object(sn.d)(["windowHeight"]),{isCooperation:function(){var e=this,t=!1;return this.appList.forEach(function(a){a.typeId===parseInt(e.activeTab)&&a.isOutCooperation&&(t=!0)}),t},requestUrl:function(){var e=this;if(0===this.appList.length)return Ht.hongcai;var t=null;return this.appList.forEach(function(a){a.typeId===parseInt(e.activeTab)&&(t=a.isOutCooperation)}),0===t?Ht.hongcai:Ht.cooperation}}),created:function(){this.getAPPlist(),this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getAPPlist:function(){var e=this;this.$service(zt).then(function(t){200===t.code?(e.appList=t.data,e.setHeight()):(e.appList=[],e.$message.error(t.message))},function(t){t&&(e.appList=[],e.$message.error(qo()(t)))})},getList:function(e){var t=this;this.loading||(this.pageIndex=e||1,this.loading=!0,this.$service(this.requestUrl.list,{method:"get",urlParams:{month:this.month,pageIndex:this.pageIndex,pageSize:this.pageSize},params:{appId:this.activeTab}}).then(function(e){t.loading=!1,200===e.code?(t.$refs.elTable.bodyWrapper.scrollTop=0,t.list=e.data.records||[],t.pageCount=e.data.page.pageCount||1,t.sumRedCurrency=e.data.sumRedCurrency||0):(t.list=[],t.$message.error(e.code+":"+e.message))},function(e){e&&(t.list=[],t.loading=!1,t.$message.error(qo()(e)))}))},exportList:function(){if(0===this.list.length)return this.$message("暂无相关数据");var e=location.origin+this.requestUrl.export.replace(/{{month}}/,this.month)+"?appId="+this.activeTab;window.open(e)},exportDayList:function(){if(0===this.list.length)return this.$message("暂无相关数据");var e=location.origin+this.requestUrl.exportDay.replace(/{{startDay}}/,this.startDay).replace(/{{endDay}}/,this.endDay)+"&appId="+this.activeTab;window.open(e)}},watch:{windowHeight:function(){this.setHeight()}}},jc={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"finance-purchase"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title)+"\n        ")])})],2)],1)]),e._v(" "),a("el-form",{attrs:{inline:!0,size:"mini",disabled:e.loading}},[a("el-form-item",[a("el-date-picker",{staticStyle:{width:"120px"},attrs:{type:"month",clearable:!1,"value-format":"yyyy-MM","picker-options":{disabledDate:function(e){return e.getTime()>Date.now()}}},on:{change:function(t){return e.getList()}},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.exportList}},[e._v("导出")])],1),e._v(" "),e.list.length?a("el-form-item",[e._v("\n      总计："),a("span",[e._v(e._s(e.sumRedCurrency)+" "+e._s(e.isCooperation?"鹅肝":"豆"))])]):e._e(),e._v(" "),a("el-form-item",[a("el-date-picker",{staticStyle:{width:"130px"},attrs:{type:"date",editable:"false",width:"100",placeholder:"开始日期","value-format":"yyyy-MM-dd",clearable:!1,"picker-options":{disabledDate:function(t){return t.getTime()>Date.now()||0!==new Date(e.endTime).getTime()&&t.getTime()>new Date(e.endTime).getTime()}}},model:{value:e.startDay,callback:function(t){e.startDay=t},expression:"startDay"}}),e._v("\n      ~\n      "),a("el-date-picker",{staticStyle:{width:"130px"},attrs:{type:"date",editable:"false",placeholder:"结束日期","value-format":"yyyy-MM-dd",clearable:!1,"picker-options":{disabledDate:function(t){return t.getTime()>Date.now()||0!==new Date(e.startTime).getTime()&&t.getTime()<new Date(e.startTime).getTime()}}},model:{value:e.endDay,callback:function(t){e.endDay=t},expression:"endDay"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.exportDayList}},[e._v("导出")])],1)],1),e._v(" "),e.appList.length?a("el-tabs",{on:{"tab-click":function(t){e.getList(),e.setHeight()}},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.appList,function(t){return a("el-tab-pane",{key:t.typeId,attrs:{label:t.name,name:t.typeId.toString(),disabled:e.loading}})}),1):e._e(),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"orderId",label:"订单ID","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"订单创建时间","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.orderTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"订单成功时间","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.successTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"用户通行证","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tradeId",label:"交易ID","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsId",label:"商品ID","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsType",label:"商品类型","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("goods2CH")([t.row.goodsType,"0"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsName",label:"商品名称","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"expertId",label:"专家ID",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"expertAccount",label:"专家网易宝",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsCount",label:"购买数量",width:"120"}}),e._v(" "),e.isCooperation?e._e():a("el-table-column",{attrs:{prop:"redCurrency",label:"消耗红豆",width:"120"}}),e._v(" "),e.isCooperation?e._e():a("el-table-column",{attrs:{prop:"channelRate",label:"通道费率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.channelRate))+"\n      ")]}}],null,!1,2637656357)}),e._v(" "),e.isCooperation?a("el-table-column",{attrs:{prop:"corperOrderPrice",label:"消耗鹅肝",width:"120"}}):e._e(),e._v(" "),e.isCooperation?a("el-table-column",{attrs:{prop:"factor",label:"代币系数",width:"120"}}):e._e(),e._v(" "),e.isCooperation?a("el-table-column",{attrs:{prop:"platformDivideRate",label:"红彩分成比例",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.platformDivideRate))+"\n      ")]}}],null,!1,3541071178)}):e._e(),e._v(" "),e.isCooperation?a("el-table-column",{attrs:{prop:"divideCurrency",label:"红彩分成金额",width:"120"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"payTerminal",label:"支付终端",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("payTerminal2CH")([t.row.payTerminal,"0"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"divideRate",label:"分成比例",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.divideRate))+"\n      ")]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","page-size":"pageSize","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}})],1)},staticRenderFns:[]};var Qc=a("VU/8")(qc,jc,!1,function(e){a("5cTz")},"data-v-6b83bc52",null).exports,Wc={name:"FinanceExpertIncome",data:function(){var e=new Date(0===(new Date).getMonth()?(new Date).getFullYear()-1:(new Date).getFullYear(),0===(new Date).getMonth()?11:(new Date).getMonth()-1);return{appList:[],activeTab:"-1",pageIndex:1,pageSize:25,pageCount:1,month:e.getFullYear()+"."+(e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1),loading:!1,tableHeight:null,list:[],totalIncome:null,depositRate:null}},computed:u()({},Object(sn.d)(["windowHeight"]),{isCooperation:function(){var e=this,t=!1;return this.appList.forEach(function(a){a.typeId===parseInt(e.activeTab)&&a.isOutCooperation&&(t=!0)}),t},depositRateAuth:function(){return mh([33,39],this.$store.state.userInfo.roleList)},requestUrl:function(){var e=this;if(0===this.appList.length)return Mt.hongcai;var t=null;return this.appList.forEach(function(a){a.typeId===parseInt(e.activeTab)&&(t=a.isOutCooperation)}),0===t?Mt.hongcai:Mt.cooperation}}),created:function(){this.getAPPlist(),this.getList()},filters:{protocolStatus2CH:function(e){return{"-1":"待确认",1:"正常",0:"终止"}[e]||"-"}},methods:{toPercent:function(e){return fh(e)?Math.round(1e4*e)/100+"%":""},setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getAPPlist:function(){var e=this;this.$service(zt).then(function(t){200===t.code&&(e.appList=t.data,e.setHeight())})},changeActiveTab:function(){this.list=[],this.totalIncome=null,this.getList()},getList:function(e){var t=this;this.loading||(this.loading=!0,this.pageIndex=e||1,this.$service(this.requestUrl.list,{method:"get",urlParams:{pageIndex:this.pageIndex,pageSize:this.pageSize},params:{month:this.month,appId:this.activeTab}}).then(function(e){t.loading=!1,200===e.code?(t.$refs.elTable.bodyWrapper.scrollTop=0,t.list=e.data.resultPage.records||[],t.totalIncome=e.data.monthTotalIncome||null,t.pageCount=e.data.resultPage.page.pageCount||1,t.setHeight()):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))}))},exportList:function(){if(0===this.list.length)return this.$message("暂无相关数据");var e=location.origin+this.requestUrl.export+"?appId="+this.activeTab+"&month="+this.month;window.open(e)},setDespositRate:function(){var e=this;this.$confirm("确定将当期滚动折扣率设置为"+this.depositRate+"%？",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.$service(e.requestUrl.setDespositRate,{method:"post",data:{month:e.month,depositRate:e.depositRate/100}}).then(function(t){200===t.code?(e.getList(),e.$message("设置成功")):e.$message.error(t.message)},function(t){t&&e.$message.error(qo()(t))})})}},watch:{windowHeight:function(){this.setHeight()}}},Bc={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"finance-expertIncome"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title)+"\n        ")])})],2)],1)]),e._v(" "),a("el-form",{attrs:{inline:!0,size:"mini",disabled:e.loading}},[a("el-form-item",[a("el-date-picker",{staticStyle:{width:"120px"},attrs:{type:"month",clearable:!1,"value-format":"yyyy.MM","picker-options":{disabledDate:function(e){var t=(new Date).getFullYear(),a=(new Date).getMonth();return e.getTime()>new Date(0===a?t-1:t,0===a?11:a-1)}}},on:{change:function(t){return e.getList()}},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.exportList}},[e._v("导出")])],1),e._v(" "),e.totalIncome&&!e.isCooperation?a("el-form-item",[e.totalIncome.redCurrency?a("p",{staticStyle:{"line-height":"1"}},[a("span",[a("b",[e._v(e._s(e.toPercent(e.totalIncome.redCurrency.androidChannelRate)||"2%")+"：")]),e._v(e._s(e.totalIncome.redCurrency.noIapTotalConsume||0)+"豆；")]),e._v(" "),a("span",[a("b",[e._v(e._s(e.toPercent(e.totalIncome.redCurrency.iosChannelRate)||"31.4%")+"：")]),e._v(e._s(e.totalIncome.redCurrency.iapTotalConsume||0)+"豆；")]),e._v(" "),a("span",[a("b",[e._v("合计：")]),e._v(e._s(e.totalIncome.redCurrency.totalConsume||0)+"豆")])]):e._e(),e._v(" "),e.totalIncome.cash?a("p",{staticStyle:{"line-height":"1","margin-top":"5px"}},[a("span",[a("b",[e._v(e._s(e.toPercent(e.totalIncome.cash.androidChannelRate)||"2%")+"：")]),e._v(e._s(e.totalIncome.cash.noIapTotalConsume||0)+"元；")]),e._v(" "),a("span",[a("b",[e._v(e._s(e.toPercent(e.totalIncome.cash.iosChannelRate)||"31.4%")+"：")]),e._v(e._s(e.totalIncome.cash.iapTotalConsume||0)+"元；")]),e._v(" "),a("span",[a("b",[e._v("合计：")]),e._v(e._s(e.totalIncome.cash.totalConsume||0)+"元")])]):e._e()]):e._e(),e._v(" "),e.totalIncome?a("el-form-item",{attrs:{label:"专家净收入"}},[a("span",[e._v(e._s(e.totalIncome.totalNetIncome||0)+"元；")])]):e._e(),e._v(" "),e.totalIncome?a("el-form-item",{attrs:{label:"当月彩票地推总CPS渠道费(元)"}},[a("span",[e._v(e._s(e.totalIncome.pushHandsDistributionFee||0)+"元；")])]):e._e(),e._v(" "),!e.totalIncome||!e.totalIncome.depositRate&&0!==e.totalIncome.depositRate||e.isCooperation?e._e():a("el-form-item",{attrs:{label:"当期滚动折扣率"}},[a("span",[e._v(e._s(e._f("toPercent")(e.totalIncome.depositRate)))])]),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.isCooperation&&e.totalIncome&&!e.totalIncome.depositRate&&0!==e.totalIncome.depositRate&&e.depositRateAuth,expression:"!isCooperation && totalIncome && !totalIncome.depositRate && totalIncome.depositRate !== 0 && depositRateAuth"}],attrs:{label:"当期滚动折扣率"}},[a("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:"输入滚动折扣率"},model:{value:e.depositRate,callback:function(t){e.depositRate=t},expression:"depositRate"}}),e._v(" %\n    ")],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.isCooperation&&e.totalIncome&&0!==e.totalIncome.depositRate&&!e.totalIncome.depositRate&&e.depositRateAuth,expression:"!isCooperation && totalIncome && totalIncome.depositRate !== 0 && !totalIncome.depositRate && depositRateAuth"}]},[a("el-button",{attrs:{type:"primary"},on:{click:e.setDespositRate}},[e._v("设置")])],1)],1),e._v(" "),e.appList.length?a("el-tabs",{on:{"tab-click":e.changeActiveTab},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.appList,function(t){return a("el-tab-pane",{key:t.typeId,attrs:{label:t.name,name:t.typeId.toString(),disabled:e.loading}})}),1):e._e(),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,border:"",stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"accountType",label:"专家类别","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("accountType2CH")([t.row.accountType]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"expertId",label:"专家ID","min-width":"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"expertName",label:"专家姓名","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"expertNickName",label:"专家昵称","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"region",label:"地区","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("region2CH")([t.row.region]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"neteaseAccount",label:"专家网易宝","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"divideRate",label:"分成比例","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.divideRate))+"\n      ")]}}])}),e._v(" "),e.isCooperation?e._e():a("el-table-column",{key:"2",attrs:{label:"当期可确认消耗","min-width":"100"}},[a("el-table-column",{attrs:{label:"一次性消耗红豆",width:"120"}},[a("el-table-column",{attrs:{label:(e.totalIncome&&e.totalIncome.redCurrency?e.toPercent(e.totalIncome.redCurrency.androidChannelRate):"2%")+"费率",prop:"typeConsumeRedCurrency.onceRedCurrency.noIapConsume",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:(e.totalIncome&&e.totalIncome.redCurrency?e.toPercent(e.totalIncome.redCurrency.iosChannelRate):"31.4%")+"费率",prop:"typeConsumeRedCurrency.onceRedCurrency.iapConsume",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"合计",prop:"typeConsumeRedCurrency.onceRedCurrency.totalConsume",width:"120"}})],1),e._v(" "),a("el-table-column",{attrs:{label:"点数消耗红豆",width:"120"}},[a("el-table-column",{attrs:{label:(e.totalIncome&&e.totalIncome.redCurrency?e.toPercent(e.totalIncome.redCurrency.androidChannelRate):"2%")+"费率",prop:"typeConsumeRedCurrency.cardRedCurrency.noIapConsume",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:(e.totalIncome&&e.totalIncome.redCurrency?e.toPercent(e.totalIncome.redCurrency.iosChannelRate):"31.4%")+"费率",prop:"typeConsumeRedCurrency.cardRedCurrency.iapConsume",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"合计",prop:"typeConsumeRedCurrency.cardRedCurrency.totalConsume",width:"120"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"typeConsumeRedCurrency.totalConsume",label:"合计",width:"120"}})],1),e._v(" "),e.isCooperation?e._e():a("el-table-column",{key:"1",attrs:{label:"当期可确认消耗现金"}},[e.isCooperation?e._e():a("el-table-column",{attrs:{prop:"typeConsumeCash.noIapConsume",label:(e.totalIncome&&e.totalIncome.cash?e.toPercent(e.totalIncome.cash.androidChannelRate):"2%")+"费率","min-width":"120"}}),e._v(" "),e.isCooperation?e._e():a("el-table-column",{attrs:{prop:"typeConsumeCash.iapConsume",label:(e.totalIncome&&e.totalIncome.cash?e.toPercent(e.totalIncome.cash.iosChannelRate):"31.4%")+"费率","min-width":"120"}}),e._v(" "),e.isCooperation?e._e():a("el-table-column",{attrs:{prop:"typeConsumeCash.totalConsume",label:"合计","min-width":"120"}})],1),e._v(" "),e.isCooperation?a("el-table-column",{key:"3",attrs:{prop:"totalDivideCurrency",label:"当期外部平台分成收入(元)","min-width":"200"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"cpsFeeType",label:"CPS渠道类型","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pushHandsDistributionFee",label:"CPS渠道费(元)","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"netIncome",label:"净收入","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"protocolStatus",label:"协议情况"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("protocolStatus2CH")(t.row.protocolStatus))+"\n      ")]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","page-size":"pageSize","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}})],1)},staticRenderFns:[]},Gc=a("VU/8")(Wc,Bc,!1,null,null,null).exports,Yc={name:"FinanceExpertProtocol",data:function(){return{pageIndex:1,pageSize:25,pageCount:1,loading:!1,tableHeight:null,list:[],updateLog:[],logLoading:!1,filter:{protocolStatus:"",expertName:"",protocolUserType:0},filterQuery:null}},computed:u()({},Object(sn.d)(["windowHeight"]),{protocolConfirmAuth:function(){return mh([33,39],this.$store.state.userInfo.roleList)}}),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},filterList:function(){var e={protocolUserType:this.filter.protocolUserType};""!==this.filter.protocolStatus&&(e.protocolStatus=this.filter.protocolStatus),this.filter.expertName&&(e.expertName=this.filter.expertName),this.filterQuery=e,this.getList()},getList:function(e){var t=this;this.loading||(this.loading=!0,this.pageIndex=e||1,this.$service(Ft,{method:"get",urlParams:{pageIndex:this.pageIndex,pageSize:this.pageSize},params:this.filterQuery}).then(function(e){t.loading=!1,200===e.code?(t.$refs.elTable.bodyWrapper.scrollTop=0,t.pageCount=e.data.page.pageCount||1,e.data.records.forEach(function(e){e.isEdit=!1,e.FormatterDivideRate=(100*e.divideRate).toFixed(0),e.FormatterProtocolStatus=-1===e.protocolStatus?"1":e.protocolStatus.toString()}),t.list=e.data.records||[]):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))}))},confirmProtocolList:function(e){var t=this;if(e.FormatterDivideRate>100)return this.$message.error("分成比例只能是0-100的整数");this.$service(Nt,{method:"post",urlParams:{protocolId:e.protocolId},params:{divideRate:e.FormatterDivideRate/100,endTime:e.endTime,protocolStatus:e.FormatterProtocolStatus,startTime:e.startTime}}).then(function(e){200===e.code?(t.$message("确认成功"),t.getList()):t.$message.error(e.code+":"+e.message)},function(e){e&&t.$message.error(qo()(e))})},editProtocol:function(e){e.isEdit?this.saveEdit(e):e.isEdit=!e.isEdit},cancelEdit:function(e){e.isEdit=!1},saveEdit:function(e){var t=this;this.$service(Et,{method:"post",urlParams:{protocolId:e.protocolId},params:{endTime:e.endTime,protocolStatus:e.FormatterProtocolStatus}}).then(function(e){200===e.code?t.getList():t.$message.error(e.code+":"+e.message)},function(e){e&&t.$message.error(qo()(e))})},getUpdateLog:function(e){var t=this;this.logLoading||(this.logLoading=!0,this.$service(Rt,{method:"get",urlParams:{protocolId:e.protocolId}}).then(function(e){t.logLoading=!1,200===e.code?t.updateLog=e.data:t.$message.error(e.code+":"+e.message)},function(e){t.logLoading=!1,e&&t.$message.error(qo()(e))}))},exportList:function(){if(0===this.list.length)return this.$message("暂无相关数据");var e="";for(var t in this.filterQuery)""!==this.filterQuery[t]&&(e=e+"&"+t+"="+this.filterQuery[t]);e.length&&(e="?"+e.slice(1));var a=location.origin+Ot+e;window.open(a)}},watch:{windowHeight:function(){this.setHeight()}}},Xc={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"finance-exportProtocol"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title)+"\n        ")])})],2)],1)]),e._v(" "),a("el-form",{ref:"form",attrs:{size:"mini",inline:!0,disabled:e.loading}},[a("el-form-item",{attrs:{label:"专家姓名"}},[a("el-input",{staticStyle:{width:"140px"},attrs:{clearable:""},model:{value:e.filter.expertName,callback:function(t){e.$set(e.filter,"expertName",t)},expression:"filter.expertName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"协议状态"}},[a("el-select",{staticStyle:{width:"90px"},model:{value:e.filter.protocolStatus,callback:function(t){e.$set(e.filter,"protocolStatus",t)},expression:"filter.protocolStatus"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"终止",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"待确认",value:"-1"}})],1)],1),e._v(" "),a("el-form-item",[a("el-select",{staticStyle:{width:"120px"},model:{value:e.filter.protocolUserType,callback:function(t){e.$set(e.filter,"protocolUserType",t)},expression:"filter.protocolUserType"}},[a("el-option",{attrs:{label:"红彩专家",value:0}}),e._v(" "),a("el-option",{attrs:{label:"彩票站地推",value:1}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.filterList}},[e._v("筛选")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.exportList}},[e._v("导出")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"expertName",label:"专家姓名","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"expertNickName",label:"专家昵称","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"idCard",label:"身份证号","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"neteaseAccount",label:"网易宝账号","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"divideRate",label:"分成比例",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{directives:[{name:"show",rawName:"v-show",value:-1==t.row.protocolStatus,expression:"scope.row.protocolStatus==-1"}],staticStyle:{width:"60px"},attrs:{size:"mini",maxlength:"3"},model:{value:t.row.FormatterDivideRate,callback:function(a){e.$set(t.row,"FormatterDivideRate",a)},expression:"scope.row.FormatterDivideRate"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:-1==t.row.protocolStatus,expression:"scope.row.protocolStatus==-1"}]},[e._v("%")]),e._v(" "),-1!==t.row.protocolStatus?a("span",[e._v(e._s(e._f("toPercent")(t.row.divideRate)))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"startTime",label:"协议起始日",width:"155"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:-1==t.row.protocolStatus,expression:"scope.row.protocolStatus==-1"}],staticClass:"date-input",staticStyle:{width:"135px"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy.MM.dd",size:"small"},model:{value:t.row.startTime,callback:function(a){e.$set(t.row,"startTime",a)},expression:"scope.row.startTime"}}),e._v(" "),-1!==t.row.protocolStatus?a("span",[e._v(e._s(t.row.startTime))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"endTime",label:"协议终止日",width:"155"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:-1==t.row.protocolStatus||t.row.isEdit,expression:"scope.row.protocolStatus==-1 || scope.row.isEdit"}],staticClass:"date-input",staticStyle:{width:"135px"},attrs:{type:"date","value-format":"yyyy.MM.dd",placeholder:"选择日期",size:"mini"},model:{value:t.row.endTime,callback:function(a){e.$set(t.row,"endTime",a)},expression:"scope.row.endTime"}}),e._v(" "),-1===t.row.protocolStatus||t.row.isEdit?e._e():a("span",[e._v(e._s(t.row.endTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"protocolStatus",label:"协议状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{directives:[{name:"show",rawName:"v-show",value:-1==t.row.protocolStatus||t.row.isEdit,expression:"scope.row.protocolStatus==-1 || scope.row.isEdit"}],staticStyle:{width:"90px"},attrs:{size:"mini",placeholder:"请选择"},model:{value:t.row.FormatterProtocolStatus,callback:function(a){e.$set(t.row,"FormatterProtocolStatus",a)},expression:"scope.row.FormatterProtocolStatus"}},[a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"终止",value:"0"}})],1),e._v(" "),-1===t.row.protocolStatus||t.row.isEdit?e._e():a("span",[e._v(e._s(1===t.row.protocolStatus?"正常":0===t.row.protocolStatus?"终止":"待确认"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"protocolStatus",label:"财务确认","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[-1===t.row.protocolStatus?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.confirmProtocolList(t.row)}}},[e._v("确认")]):e._e(),e._v(" "),-1!==t.row.protocolStatus?a("span",[e._v(e._s(t.row.financeName))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"financeTime",label:"确认时间","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(-1!==t.row.protocolStatus?t.row.financeTime:"")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"财务修改",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[-1!==t.row.protocolStatus?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.editProtocol(t.row)}}},[e._v("\n          "+e._s(t.row.isEdit?"保存":"修改"))]):e._e(),e._v(" "),t.row.isEdit?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.cancelEdit(t.row)}}},[e._v("取消")]):e._e(),e._v(" "),-1!==t.row.protocolStatus?a("el-popover",{attrs:{placement:"left",width:"500"},model:{value:t.row.bindPop,callback:function(a){e.$set(t.row,"bindPop",a)},expression:"scope.row.bindPop"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.logLoading,expression:"logLoading"}],attrs:{data:e.updateLog,size:"mini"}},[a("el-table-column",{attrs:{prop:"operationTime",width:"90px;",label:"操作时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"divideRate",width:"80px;",label:"分成比例"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("toPercent")(t.row.divideRate))+"\n              ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"endTime",width:"110px;",label:"协议终止时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"protocolStatus",width:"80px;",label:"协议状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(-1===t.row.protocolStatus?"待确认":1===t.row.protocolStatus?"正常":"终止")+"\n              ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"操作人"}})],1),e._v(" "),a("i",{staticClass:"el-icon-info",staticStyle:{"font-size":"20px","vertical-align":"middle"},attrs:{slot:"reference"},on:{click:function(a){return e.getUpdateLog(t.row)}},slot:"reference"})],1):e._e()]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","page-size":"pageSize","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}})],1)},staticRenderFns:[]},Kc=a("VU/8")(Yc,Xc,!1,null,null,null).exports,Jc=new Date(0===(new Date).getMonth()?(new Date).getFullYear()-1:(new Date).getFullYear(),0===(new Date).getMonth()?11:(new Date).getMonth()-1),Zc={name:"FinanceMonthlyOfSp",data:function(){return{appTab:0,pageIndex:1,pageSize:25,pageCount:1,loading:!1,tableHeight:null,list:[],total:0,sumMonthCredit:0,sumCredit:0,filter:{month:Jc.getFullYear()+"-"+(Jc.getMonth()<9?"0"+(Jc.getMonth()+1):Jc.getMonth()+1),goodsTypeId:"3",orderTypeId:"1"},filterTemp:{goodsTypeId:"3",orderTypeId:"1"}}},computed:u()({},Object(sn.d)(["windowHeight"]),{financeMonthlyOfSpApi:function(){return At[this.appTab]},hiddenColumn:function(){return"13"!==this.filterTemp.goodsTypeId&&"15"!==this.filterTemp.goodsTypeId}}),created:function(){this.getList(),this.setHeight()},methods:{handleCommand:function(e){this.appTab.toString()!==e.toString()&&(this.appTab=e,this.list=[],this.getList())},setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},resetFilter:function(){var e={month:this.filter.month.split("-")[1],year:this.filter.month.split("-")[0]};return this.filter.goodsTypeId&&(e.goodsTypeId=this.filter.goodsTypeId),this.filter.orderTypeId&&(e.orderTypeId=this.filter.orderTypeId),e},getList:function(e){var t=this;this.loading||(this.loading=!0,this.pageIndex=e||1,this.$service(this.financeMonthlyOfSpApi.list,{method:"get",params:tn()({pageIndex:this.pageIndex,pageSize:this.pageSize},this.resetFilter())}).then(function(e){t.loading=!1,200===e.code?(t.filterTemp=u()({},t.filter),t.$refs.elTable.bodyWrapper.scrollTop=0,t.list=e.data.resultPage&&e.data.resultPage.records?e.data.resultPage.records:[],t.pageCount=e.data.resultPage&&e.data.resultPage.page&&e.data.resultPage.page.pageCount?e.data.resultPage.page.pageCount:1,t.total=e.data.total,t.sumCredit=e.data.sumCredit,t.sumMonthCredit=e.data.sumMonthCredit):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))}))},exportList:function(){if(0===this.list.length)return this.$message("暂无相关数据");var e=[],t=this.resetFilter();t&&o()(t).forEach(function(a){t[a]&&e.push(a+"="+t[a])}),window.open(location.origin+this.financeMonthlyOfSpApi.export+"?"+e.join("&"))}},watch:{windowHeight:function(){this.setHeight()}}},ed={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"finance-monthlyOfSp"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title)+"\n        ")])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-dropdown",{on:{command:e.handleCommand}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("\n          切换 - "+e._s({0:"红彩主包",1:"精准比分"}[e.appTab])+" "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"0"}},[e._v("红彩主包")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"1"}},[e._v("精准比分")])],1)],1)],1)]),e._v(" "),a("el-form",{attrs:{inline:!0,size:"mini",disabled:e.loading}},[a("el-form-item",[a("el-date-picker",{staticStyle:{width:"120px"},attrs:{type:"month",clearable:!1,"value-format":"yyyy-MM","picker-options":{disabledDate:function(e){var t=(new Date).getFullYear(),a=(new Date).getMonth();return e.getTime()>new Date(0===a?t-1:t,0===a?11:a-1)}}},model:{value:e.filter.month,callback:function(t){e.$set(e.filter,"month",t)},expression:"filter.month"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品类型"}},[a("el-select",{staticStyle:{width:"130px"},model:{value:e.filter.goodsTypeId,callback:function(t){e.$set(e.filter,"goodsTypeId",t)},expression:"filter.goodsTypeId"}},[a("el-option",{attrs:{value:"2",label:"交叉盘"}}),e._v(" "),a("el-option",{attrs:{value:"3",label:"澳彩五星"}}),e._v(" "),a("el-option",{attrs:{value:"4",label:"盘赔变动"}}),e._v(" "),a("el-option",{attrs:{value:"6",label:"红彩指数"}}),e._v(" "),a("el-option",{attrs:{value:"11",label:"新版交叉盘"}}),e._v(" "),a("el-option",{attrs:{value:"13",label:"VIP大会员"}}),e._v(" "),a("el-option",{attrs:{value:"15",label:"旋转矩阵付费"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"订单类型"}},[a("el-select",{staticStyle:{width:"80px"},model:{value:e.filter.orderTypeId,callback:function(t){e.$set(e.filter,"orderTypeId",t)},expression:"filter.orderTypeId"}},[a("el-option",{attrs:{value:"1",label:{0:"红豆",1:"金币"}[e.appTab]}}),e._v(" "),a("el-option",{attrs:{value:"2",label:"现金"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getList()}}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.exportList}},[e._v("导出")])],1),e._v(" "),a("el-form-item",[a("span",[e._v("当月总计新增金额："),a("b",[e._v(e._s(e.total||0))]),e._v("；")]),e._v(" "),e.hiddenColumn?a("span",[e._v("当月总计赠送积分："),a("b",[e._v(e._s(e.sumMonthCredit||0))]),e._v("；")]):e._e(),e._v(" "),e.hiddenColumn?a("span",[e._v("累积赠送积分总数："),a("b",[e._v(e._s(e.sumCredit||0))])]):e._e()])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"orderId",label:"订单Id","min-width":"170"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"订单创建时间","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"successTime",label:"订单成功时间","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.successTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"用户通行证","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"threadTradeId",label:"交易ID","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsId",label:"商品ID","min-width":"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsType",label:"商品类型","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsName",label:"商品名称","min-width":"150"}}),e._v(" "),e.hiddenColumn?a("el-table-column",{attrs:{prop:"dataCount",label:"总场次数","min-width":"80"}}):e._e(),e._v(" "),e.hiddenColumn?a("el-table-column",{attrs:{prop:"expertId",label:"合作商户ID","min-width":"90"}}):e._e(),e._v(" "),e.hiddenColumn?a("el-table-column",{attrs:{prop:"buyCount",label:"购买数量","min-width":"80"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"orderPrice",label:"购买金额","min-width":"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.orderPrice)+e._s("1"===e.filterTemp.orderTypeId?"豆":"元")+"\n      ")]}}])}),e._v(" "),e.hiddenColumn?a("el-table-column",{attrs:{prop:"pricePerData",label:"场次单价","min-width":"80"}}):e._e(),e._v(" "),e.hiddenColumn?a("el-table-column",{attrs:{prop:"creditPresent",label:"赠送积分","min-width":"80"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"serviceStartTime",label:"服务开始日期","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.serviceStartTime,"yyyy-MM-dd"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"serviceEndTime",label:"服务结束日期","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.serviceEndTime,"yyyy-MM-dd"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"serviceTotalDays",label:"总服务天数","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.serviceTotalDays)+"天\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"payTerminal",label:"支付终端","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("payTerminal2CH")([t.row.payTerminal,e.appTab]))+"\n      ")]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","page-size":"pageSize","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}})],1)},staticRenderFns:[]},td=a("VU/8")(Zc,ed,!1,null,null,null).exports,ad=new Date(0===(new Date).getMonth()?(new Date).getFullYear()-1:(new Date).getFullYear(),0===(new Date).getMonth()?11:(new Date).getMonth()-1),id={name:"FinanceMonthlyConfirmedOfSp",data:function(){return{appTab:0,pageIndex:1,pageSize:25,pageCount:1,loading:!1,tableHeight:null,list:[],total:0,usingRedCurrency:0,filter:{month:ad.getFullYear()+"-"+(ad.getMonth()<9?"0"+(ad.getMonth()+1):ad.getMonth()+1),goodsTypeId:"3",orderTypeId:"1"},filterTemp:{goodsTypeId:"3",orderTypeId:"1"}}},computed:u()({},Object(sn.d)(["windowHeight"]),{financeMonthlyConfirmedOfSpApi:function(){return Ut[this.appTab]},hiddenColumn:function(){return"13"!==this.filterTemp.goodsTypeId&&"15"!==this.filterTemp.goodsTypeId}}),created:function(){this.getList(),this.setHeight()},methods:{handleCommand:function(e){this.appTab.toString()!==e.toString()&&(this.appTab=e,this.list=[],this.getList())},setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},resetFilter:function(){var e={month:this.filter.month.split("-")[1],year:this.filter.month.split("-")[0]};return this.filter.goodsTypeId&&(e.goodsTypeId=this.filter.goodsTypeId),this.filter.orderTypeId&&(e.orderTypeId=this.filter.orderTypeId),e},getList:function(e){var t=this;this.loading||(this.loading=!0,this.pageIndex=e||1,this.$service(this.financeMonthlyConfirmedOfSpApi.list,{params:tn()({pageIndex:this.pageIndex,pageSize:this.pageSize},this.resetFilter())}).then(function(e){t.loading=!1,200===e.code?(t.filterTemp=u()({},t.filter),t.$refs.elTable.bodyWrapper.scrollTop=0,t.list=e.data.resultPage&&e.data.resultPage.records?e.data.resultPage.records:[],t.pageCount=e.data.resultPage&&e.data.resultPage.page&&e.data.resultPage.page.pageCount?e.data.resultPage.page.pageCount:1,t.total=e.data.total||0,t.usingRedCurrency=e.data.usingRedCurrency||0):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))}))},exportList:function(){if(0===this.list.length)return this.$message("暂无相关数据");var e=[],t=this.resetFilter();t&&o()(t).forEach(function(a){t[a]&&e.push(a+"="+t[a])}),window.open(location.origin+this.financeMonthlyConfirmedOfSpApi.export+"?"+e.join("&"))}},watch:{windowHeight:function(){this.setHeight()}}},rd={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"finance-monthlyOfSp"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title)+"\n        ")])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-dropdown",{on:{command:e.handleCommand}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("\n          切换 - "+e._s({0:"红彩主包",1:"精准比分"}[e.appTab])+" "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"0"}},[e._v("红彩主包")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"1"}},[e._v("精准比分")])],1)],1)],1)]),e._v(" "),a("el-form",{attrs:{inline:!0,size:"mini",disabled:e.loading}},[a("el-form-item",[a("el-date-picker",{staticStyle:{width:"120px"},attrs:{type:"month",clearable:!1,"value-format":"yyyy-MM","picker-options":{disabledDate:function(e){var t=(new Date).getFullYear(),a=(new Date).getMonth();return e.getTime()>new Date(0===a?t-1:t,0===a?11:a-1)}}},model:{value:e.filter.month,callback:function(t){e.$set(e.filter,"month",t)},expression:"filter.month"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品类型"}},[a("el-select",{staticStyle:{width:"130px"},model:{value:e.filter.goodsTypeId,callback:function(t){e.$set(e.filter,"goodsTypeId",t)},expression:"filter.goodsTypeId"}},[a("el-option",{attrs:{value:"2",label:"交叉盘"}}),e._v(" "),a("el-option",{attrs:{value:"3",label:"澳彩五星"}}),e._v(" "),a("el-option",{attrs:{value:"4",label:"盘赔变动"}}),e._v(" "),a("el-option",{attrs:{value:"6",label:"红彩指数"}}),e._v(" "),a("el-option",{attrs:{value:"11",label:"新版交叉盘"}}),e._v(" "),a("el-option",{attrs:{value:"13",label:"VIP大会员"}}),e._v(" "),a("el-option",{attrs:{value:"15",label:"旋转矩阵付费"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"订单类型"}},[a("el-select",{staticStyle:{width:"80px"},model:{value:e.filter.orderTypeId,callback:function(t){e.$set(e.filter,"orderTypeId",t)},expression:"filter.orderTypeId"}},[a("el-option",{attrs:{value:"1",label:{0:"红豆",1:"金币"}[e.appTab]}}),e._v(" "),a("el-option",{attrs:{value:"2",label:"现金"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getList()}}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.exportList}},[e._v("导出")])],1),e._v(" "),a("el-form-item",[a("span",[e._v("当月总计消耗："),a("b",[e._v(e._s(e.total||0)+e._s("1"===e.filterTemp.orderTypeId?"豆":"元"))]),e._v("；")]),e._v(" "),e.hiddenColumn?a("span",[e._v("当月可确认消耗："),a("b",[e._v(e._s(e.usingRedCurrency||0)+e._s("1"===e.filterTemp.orderTypeId?"豆":"元"))])]):e._e()])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"orderId",label:"订单Id","min-width":"170"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"订单创建时间","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"successTime",label:"订单成功时间","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.successTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"用户通行证","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"threadTradeId",label:"交易ID","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsId",label:"商品ID","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsType",label:"商品类型","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsName",label:"商品名称","min-width":"180"}}),e._v(" "),e.hiddenColumn?a("el-table-column",{attrs:{prop:"dataCount",label:"总场次数","min-width":"80"}}):e._e(),e._v(" "),e.hiddenColumn?a("el-table-column",{attrs:{prop:"expertId",label:"合作商户ID","min-width":"90"}}):e._e(),e._v(" "),e.hiddenColumn?a("el-table-column",{attrs:{prop:"buyCount",label:"购买数量","min-width":"80"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"orderPrice",label:"购买金额","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.orderPrice)+e._s("1"===e.filterTemp.orderTypeId?"豆":"元")+"\n      ")]}}])}),e._v(" "),e.hiddenColumn?a("el-table-column",{attrs:{prop:"pricePerData",label:"场次单价","min-width":"80"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"serviceStartTime",label:"服务开始日期","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.serviceStartTime,"yyyy-MM-dd"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"serviceEndTime",label:"服务结束日期","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.serviceEndTime,"yyyy-MM-dd"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"serviceTotalDays",label:"总服务天数","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.serviceTotalDays)+"天\n      ")]}}])}),e._v(" "),e.hiddenColumn?a("el-table-column",{attrs:{prop:"dataUsingCount",label:"已使用场次","min-width":"90"}},[e._v(">\n    ")]):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"serviceUsingDays",label:"当月服务天数","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.serviceUsingDays)+"天\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"serviceTotalDays",label:"可确认消耗","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.serviceUsingRedCurrency)+e._s("1"===e.filterTemp.orderTypeId?"豆":"元")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"payTerminal",label:"支付终端","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("payTerminal2CH")([t.row.payTerminal,e.appTab]))+"\n      ")]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","page-size":"pageSize","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}})],1)},staticRenderFns:[]},od=a("VU/8")(id,rd,!1,null,null,null).exports,nd={name:"FinancePointCardAdd",data:function(){return{pageIndex:1,pageSize:25,pageCount:1,loading:!1,tableHeight:null,list:[],pointCardAddTotal:0,discountList:[],filter:{month:(new Date).getFullYear()+"-"+((new Date).getMonth()<9?"0"+((new Date).getMonth()+1):(new Date).getMonth()+1),orderType:"",discount:""}}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getDiscountList(),this.search(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},resetFilter:function(){var e={month:this.filter.month.split("-")[1],year:this.filter.month.split("-")[0]};return""!==this.filter.orderType&&(e.orderType=this.filter.orderType),""!==this.filter.discount&&(e.discount=this.filter.discount),e},getDiscountList:function(){var e=this;this.$service(qt,{method:"get"}).then(function(t){200===t.code&&(e.discountList=t.data||[])})},search:function(){this.getList(),this.getTotal()},getList:function(e){var t=this;this.loading||(this.loading=!0,this.pageIndex=e||1,this.$service(Vt,{method:"post",data:tn()({pageIndex:this.pageIndex,pageSize:this.pageSize},this.resetFilter())}).then(function(e){t.loading=!1,200===e.code?(t.$refs.elTable.bodyWrapper.scrollTop=0,t.list=e.data.records||[],t.pageCount=e.data.page.pageCount||1):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))}))},getTotal:function(){var e=this;this.$service(jt,{method:"post",data:this.resetFilter()}).then(function(t){200===t.code?e.pointCardAddTotal="number"==typeof t.data?t.data:0:e.$message.error(t.code+":"+t.message)},function(t){t&&e.$message.error(qo()(t))})},exportList:function(){if(0===this.list.length)return this.$message("暂无相关数据");var e=[],t=this.resetFilter();t&&o()(t).forEach(function(a){t[a]&&e.push(a+"="+t[a])}),window.open(location.origin+Qt+"?"+e.join("&"))}},watch:{windowHeight:function(){this.setHeight()}}},sd={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"finance-monthlyOfSp"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title)+"\n        ")])})],2)],1)]),e._v(" "),a("el-form",{attrs:{inline:!0,size:"mini",disabled:e.loading}},[a("el-form-item",[a("el-date-picker",{staticStyle:{width:"120px"},attrs:{type:"month",clearable:!1,"value-format":"yyyy-MM","picker-options":{disabledDate:function(e){return e.getTime()>Date.now()}}},model:{value:e.filter.month,callback:function(t){e.$set(e.filter,"month",t)},expression:"filter.month"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"折扣"}},[a("el-select",{staticStyle:{width:"130px"},model:{value:e.filter.discount,callback:function(t){e.$set(e.filter,"discount",t)},expression:"filter.discount"}},[a("el-option",{attrs:{value:"",label:"全部"}}),e._v(" "),e._l(e.discountList,function(t){return a("el-option",{key:t,attrs:{value:t,label:e._f("toPercent")(t)}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"订单类型"}},[a("el-select",{staticStyle:{width:"100px"},model:{value:e.filter.orderType,callback:function(t){e.$set(e.filter,"orderType",t)},expression:"filter.orderType"}},[a("el-option",{attrs:{value:"",label:"全部"}}),e._v(" "),a("el-option",{attrs:{value:"1",label:"红豆"}}),e._v(" "),a("el-option",{attrs:{value:"2",label:"现金"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.exportList}},[e._v("导出")])],1),e._v(" "),a("el-form-item",[e._v("\n      总计："),a("b",[e._v(e._s(e.pointCardAddTotal||0)+e._s("1"===e.filter.orderType?"豆":"2"===e.filter.orderType?"元":""))])])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"orderId",label:"订单Id","min-width":"170"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"订单创建时间","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"successTime",label:"订单成功时间","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.successTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"用户通行证","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsId",label:"商品ID","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsType",label:"商品类型","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsName",label:"商品名称","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"expertId",label:"合作商户ID","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"point",label:"总点数","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"discount",label:"点卡折扣率","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.discount))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"buyCount",label:"购买数量","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderPrice",label:"购买金额","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.orderPrice)+e._s("1"===e.filter.orderType?"豆":"元")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"orderType",label:"订单类型","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("productPayType2CH")([t.row.orderType,0]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"serviceStartTime",label:"服务开始日期","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.serviceStartTime,"yyyy-MM-dd"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"serviceEndTime",label:"服务结束日期","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.serviceEndTime,"yyyy-MM-dd"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"serviceTotalDays",label:"总服务天数","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.serviceTotalDays)+"天\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"validDay",label:"当月服务天数","min-width":"108"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.validDay)+"天\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"payTerminal",label:"支付终端","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("payTerminal2CH")([t.row.payTerminal,"0"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"channelRate",label:"通道费率","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.channelRate))+"\n      ")]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","page-size":"pageSize","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}})],1)},staticRenderFns:[]},ld=a("VU/8")(nd,sd,!1,null,null,null).exports,cd={name:"FinancePointCardConfirmed",data:function(){return{pageIndex:1,pageSize:25,pageCount:1,loading:!1,tableHeight:null,list:[],pointCardAddTotal:0,pointConfirmedTotal:0,discountList:[],filter:{month:(new Date).getFullYear()+"-"+((new Date).getMonth()<9?"0"+((new Date).getMonth()+1):(new Date).getMonth()+1),orderType:"",discount:""}}},computed:u()({},Object(sn.d)(["windowHeight"])),mounted:function(){this.getDiscountList(),this.search(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},resetFilter:function(){var e={month:this.filter.month.split("-")[1],year:this.filter.month.split("-")[0]};return""!==this.filter.orderType&&(e.orderType=this.filter.orderType),""!==this.filter.discount&&(e.discount=this.filter.discount),e},getDiscountList:function(){var e=this;this.$service(Bt,{method:"get"}).then(function(t){200===t.code&&(e.discountList=t.data||[])})},search:function(){this.getList(),this.getPointCardAddTotal(),this.getPointConfirmedTotal()},getList:function(e){var t=this;this.loading||(this.loading=!0,this.pageIndex=e||1,this.$service(Wt,{method:"post",data:tn()({pageIndex:this.pageIndex,pageSize:this.pageSize},this.resetFilter())}).then(function(e){t.loading=!1,200===e.code?(t.$refs.elTable.bodyWrapper.scrollTop=0,t.list=e.data.records||[],t.pageCount=e.data.page.pageCount||1):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))}))},getPointCardAddTotal:function(){var e=this;this.$service(Gt,{method:"post",data:this.resetFilter()}).then(function(t){200===t.code?e.pointCardAddTotal="number"==typeof t.data?t.data:0:e.$message.error(t.code+":"+t.message)},function(t){t&&e.$message.error(qo()(t))})},getPointConfirmedTotal:function(){var e=this;this.$service(Yt,{method:"post",data:this.resetFilter()}).then(function(t){200===t.code&&(e.pointConfirmedTotal=t.data)})},exportList:function(){if(0===this.list.length)return this.$message("暂无相关数据");var e=[],t=this.resetFilter();t&&o()(t).forEach(function(a){t[a]&&e.push(a+"="+t[a])}),window.open(location.origin+Xt+"?"+e.join("&"))}},watch:{windowHeight:function(){this.setHeight()}}},dd={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"finance-monthlyOfSp"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title)+"\n        ")])})],2)],1)]),e._v(" "),a("el-form",{attrs:{inline:!0,size:"mini",disabled:e.loading}},[a("el-form-item",[a("el-date-picker",{staticStyle:{width:"120px"},attrs:{type:"month",clearable:!1,"value-format":"yyyy-MM","picker-options":{disabledDate:function(e){return e.getTime()>Date.now()}}},model:{value:e.filter.month,callback:function(t){e.$set(e.filter,"month",t)},expression:"filter.month"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"折扣"}},[a("el-select",{staticStyle:{width:"130px"},model:{value:e.filter.discount,callback:function(t){e.$set(e.filter,"discount",t)},expression:"filter.discount"}},[a("el-option",{attrs:{value:"",label:"全部"}}),e._v(" "),e._l(e.discountList,function(t){return a("el-option",{key:t,attrs:{value:t,label:e._f("toPercent")(t)}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"订单类型"}},[a("el-select",{staticStyle:{width:"100px"},model:{value:e.filter.orderType,callback:function(t){e.$set(e.filter,"orderType",t)},expression:"filter.orderType"}},[a("el-option",{attrs:{value:"",label:"全部"}}),e._v(" "),a("el-option",{attrs:{value:"1",label:"红豆"}}),e._v(" "),a("el-option",{attrs:{value:"2",label:"现金"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.exportList}},[e._v("导出")])],1),e._v(" "),a("el-form-item",[e._v("\n      当月消耗总计："),a("b",[e._v(e._s(e.pointCardAddTotal||0)+e._s("1"===e.filter.orderType?"豆":"2"===e.filter.orderType?"元":""))]),e._v("\n      当月可确认消耗："),a("b",[e._v(e._s(e.pointConfirmedTotal||0)+e._s("1"===e.filter.orderType?"豆":"2"===e.filter.orderType?"元":""))])])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"orderId",label:"订单Id","min-width":"170"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"订单创建时间","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"successTime",label:"订单成功时间","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.successTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"用户通行证","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsId",label:"商品ID","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsType",label:"商品类型","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsName",label:"商品名称","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"discount",label:"点卡折扣率","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.discount))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"buyCount",label:"购买数量","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderPrice",label:"购买金额","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.orderPrice)+e._s("1"===e.filter.orderType?"豆":"元")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"orderType",label:"订单类型","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("productPayType2CH")([t.row.orderType,0]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"serviceStartTime",label:"服务开始日期","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.serviceStartTime,"yyyy-MM-dd"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"serviceEndTime",label:"服务结束日期","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.serviceEndTime,"yyyy-MM-dd"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"serviceTotalDays",label:"总服务天数","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.serviceTotalDays)+"天\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"monthserviceDays",label:"当月服务天数","min-width":"108"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.monthserviceDays)+"天\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"confirmedPoint",label:"当月可确认消耗点数","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"confirmedPrice",label:"当月可确认消耗","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.confirmedPrice)+e._s("1"===e.filter.orderType?"豆":"元")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"payTerminal",label:"支付终端","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("payTerminal2CH")([t.row.payTerminal,"0"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"channelRate",label:"通道费率","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.channelRate))+"\n      ")]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","page-size":"pageSize","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}})],1)},staticRenderFns:[]},ud=a("VU/8")(cd,dd,!1,null,null,null).exports,md={name:"FinancePointConfirmed",data:function(){return{activeTab:"0",loading:!1,pageIndex:1,pageSize:25,pageCount:1,list:[],tableHeight:null,filter:{0:{month:(new Date).getFullYear()+"-"+((new Date).getMonth()<9?"0"+((new Date).getMonth()+1):(new Date).getMonth()+1)},1:{month:(new Date).getFullYear()+"-"+((new Date).getMonth()<9?"0"+((new Date).getMonth()+1):(new Date).getMonth()+1)}},total:null}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(e){var t=this;this.loading||(this.loading=!0,this.pageIndex=e||1,this.$service(Kt[this.activeTab].list,{method:"post",data:{pageIndex:this.pageIndex,pageSize:this.pageSize,month:this.filter[this.activeTab].month.split("-")[1],year:this.filter[this.activeTab].month.split("-")[0]}}).then(function(e){t.loading=!1,200===e.code?(t.$refs.elTable.bodyWrapper.scrollTop=0,t.list=e.data.records||[],t.pageCount=e.data.page.pageCount||1):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))}),"0"!==this.activeTab||e||this.$service(Kt[0].sum,{method:"post",data:{month:this.filter[this.activeTab].month.split("-")[1],year:this.filter[this.activeTab].month.split("-")[0]}}).then(function(e){200===e.code&&(t.total=e.data)}))},exportList:function(){if(0===this.list.length)return this.$message("暂无相关数据");var e="?month="+this.filter[this.activeTab].month.split("-")[1]+"&year="+this.filter[this.activeTab].month.split("-")[0],t=location.origin+Kt[this.activeTab].export+e;window.open(t)}},watch:{windowHeight:function(){this.setHeight()}}},pd={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"finance-monthlyOfSp"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1)]),e._v(" "),a("el-tabs",{on:{"tab-click":function(t){return e.getList()}},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"点数消耗",name:"0",disabled:e.loading}}),e._v(" "),a("el-tab-pane",{attrs:{label:"过期卡记录",name:"1",disabled:e.loading}})],1),e._v(" "),a("el-form",{attrs:{inline:!0,size:"mini",disabled:e.loading}},[a("el-form-item",[a("el-date-picker",{staticStyle:{width:"120px"},attrs:{type:"month",clearable:!1,"value-format":"yyyy-MM","picker-options":{disabledDate:function(e){return e.getTime()>Date.now()}}},on:{change:function(t){return e.getList()}},model:{value:e.filter[e.activeTab].month,callback:function(t){e.$set(e.filter[e.activeTab],"month",t)},expression:"filter[activeTab].month"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.exportList}},[e._v("导出")])],1),e._v(" "),"0"===e.activeTab&&null!==e.total?a("el-form-item",[e._v("\n      总计："),a("span",[e._v(e._s(e.total||0)+"点")])]):e._e()],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"orderId",label:"订单Id","min-width":"170"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"订单创建时间","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"successTime",label:"订单成功时间","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.successTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"用户通行证","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"threadTradeId",label:"交易ID","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsId",label:"商品ID","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsType",label:"商品类型","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsName",label:"商品名称","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pointCardOrderId",label:"点卡订单ID","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"点卡名称","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"discount",label:"点卡折扣率","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.discount))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"shareRate",label:"分成比例","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.shareRate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"expertId",label:"专家ID","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"expertEpay",label:"专家网易宝","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"buyCount",label:"购买数量","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderPrice",label:"消耗点数","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payTerminal",label:"支付终端","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("payTerminal2CH")([t.row.payTerminal,"0"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"channelRate",label:"通道费率","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.channelRate))+"\n      ")]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","page-size":"pageSize","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getPointList,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}})],1)},staticRenderFns:[]},fd=a("VU/8")(md,pd,!1,null,null,null).exports,hd={name:"FinanceTcmConsum",data:function(){return{activeTab:"0",pullNew:{pageIndex:1,pageSize:25,pageCount:1,list:[],tableHeight:null,loading:!0,quizDivideCredit:null,date:new Date},tcm:{pageIndex:1,pageSize:25,pageCount:1,list:[],tableHeight:null,loading:!0,orderCredit:null,orderNCoin:null,date:new Date((new Date).getFullYear(),(new Date).getMonth()-1)},pickerOptions:{disabledDate:function(e){var t=new Date;return e.getTime()>new Date(t.getFullYear(),t.getMonth())}}}},computed:u()({},Object(sn.d)(["windowHeight"]),{tcmMonth:function(){var e=this.tcm.date.getMonth()+1;return e.toString().length<2?"0"+e:e},pullNewMonth:function(){var e=this.pullNew.date.getMonth()+1;return e.toString().length<2?"0"+e:e}}),created:function(){var e=this;this.getTcmList(),this.getTcmAddTotal(),this.getPullNewList(),this.getPullNewTotal(),this.$nextTick(function(){e.setHeight()})},methods:{handleClickTabs:function(){this.setHeight()},setHeight:function(){var e=this;this.$nextTick(function(){e.tcm.tableHeight=e.windowHeight-e.$refs.elTcmTable.$el.offsetTop-195,e.pullNew.tableHeight=e.windowHeight-e.$refs.elPullpullNewTable.$el.offsetTop-195})},searchTcm:function(){this.getTcmList(1),this.getTcmAddTotal()},getTcmList:function(e,t){var a=this;this.tcm.loading=!0,this.$service(Jt[0].list,{method:"get",params:{pageIndex:e||this.tcm.pageIndex,pageSize:t||this.tcm.pageSize,month:this.tcmMonth,year:this.tcm.date.getFullYear()}}).then(function(e){a.tcm.loading=!1,200===e.code?(a.$refs.elTcmTable.bodyWrapper.scrollTop=0,a.tcm.list=e.data.records||[],a.tcm.pageCount=e.data.page.pageCount,a.tcm.pageIndex=e.data.page.pageIndex):(a.tcm.list=[],a.$message.error(e.code+":"+e.message))},function(e){e&&(a.tcm.list=[],a.tcm.loading=!1,a.$message.error(qo()(e)))})},getTcmAddTotal:function(){var e=this;this.$service(Jt[0].sum,{method:"get",params:{month:this.tcmMonth,year:this.tcm.date.getFullYear()}}).then(function(t){200===t.code?(e.tcm.orderCredit="number"==typeof t.data.orderCredit?t.data.orderCredit:0,e.tcm.orderNCoin="number"==typeof t.data.orderNCoin?t.data.orderNCoin:0):e.$message.error(t.code+":"+t.message)},function(t){t&&e.$message.error(qo()(t))})},searchPullNew:function(){this.getPullNewList(1),this.getPullNewTotal()},getPullNewList:function(e,t){var a=this;this.pullNew.loading=!0,this.$service(Jt[1].list,{method:"get",params:{pageIndex:e||this.pullNew.pageIndex,pageSize:t||this.pullNew.pageSize,month:this.pullNewMonth,year:this.pullNew.date.getFullYear()}}).then(function(e){a.pullNew.loading=!1,200===e.code?(a.$refs.elPullpullNewTable.bodyWrapper.scrollTop=0,a.pullNew.list=e.data.records||[],a.pullNew.pageCount=e.data.page.pageCount,a.pullNew.pageIndex=e.data.page.pageIndex):(a.pullNew.list=[],a.$message.error(e.code+":"+e.message))},function(e){e&&(a.pullNew.list=[],a.pullNew.loading=!1,a.$message.error(qo()(e)))})},getPullNewTotal:function(){var e=this;this.$service(Jt[1].sum,{method:"get",params:{month:this.pullNewMonth,year:this.pullNew.date.getFullYear()}}).then(function(t){200===t.code?e.pullNew.quizDivideCredit="number"==typeof t.data?t.data:0:e.$message.error(t.code+":"+t.message)},function(t){t&&e.$message.error(qo()(t))})},exportList:function(){var e="";if("0"===this.activeTab){if(0===this.tcm.list.length)return this.$message("暂无相关数据");e="?month="+this.tcmMonth+"&year="+this.tcm.date.getFullYear()}else{if(0===this.pullNew.list.length)return this.$message("暂无相关数据");e="?month="+this.pullNewMonth+"&year="+this.pullNew.date.getFullYear()}var t=location.origin+Jt[this.activeTab].export+e;window.open(t)}}},gd={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"finance-monthlyOfSp"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1)]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"TCM竞猜订单",name:"0"}},[a("div",{staticClass:"filter"},[a("el-date-picker",{staticStyle:{width:"130px"},attrs:{type:"month",placeholder:"选择月",clearable:!1,size:"small",format:"yyyy-MM","picker-options":e.pickerOptions},on:{change:function(t){return e.searchTcm()}},model:{value:e.tcm.date,callback:function(t){e.$set(e.tcm,"date",t)},expression:"tcm.date"}}),e._v(" "),a("el-button",{staticClass:"export-btn",attrs:{type:"primary",size:"mini"},on:{click:e.exportList}},[e._v("导出")]),e._v(" "),a("label",[e._v("当月总计消耗积分：")]),e._v(" "+e._s(e.tcm.orderCredit||0)+" 元\n        "),a("label",[e._v("当月总计消耗N币：")]),e._v(" "+e._s(e.tcm.orderNCoin||0)+" 元\n      ")],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tcm.loading,expression:"tcm.loading"}],ref:"elTcmTable",staticStyle:{width:"100%"},attrs:{data:e.tcm.list,stripe:"","max-height":e.tcm.tableHeight<400?400:e.tcm.tableHeight}},[a("el-table-column",{attrs:{prop:"orderId",label:"竞猜订单ID","min-width":"170"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"订单创建时间","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"successTime",label:"订单成功时间","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("dateFormat")([t.row.successTime,"yyyy-MM-dd hh:mm:ss"]))+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"用户通行证","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderCredit",label:"消耗积分数量","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderNCoin",label:"消耗牛币数量","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"netReturn",label:"返奖额(N币)","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"govOrg",label:"分成机构","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"proportions",label:"分成比例","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"proportionsAmount",label:"分成金额","min-width":"120"}})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","page-size":"tcm.pageSize","current-page":e.tcm.pageIndex,"page-count":e.tcm.pageCount},on:{"current-change":e.getTcmList,"update:currentPage":function(t){return e.$set(e.tcm,"pageIndex",t)},"update:current-page":function(t){return e.$set(e.tcm,"pageIndex",t)}}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"拉新竞猜订单",name:"1"}},[a("div",{staticClass:"filter"},[a("el-date-picker",{staticStyle:{width:"130px"},attrs:{type:"month",placeholder:"选择月",clearable:!1,size:"small",format:"yyyy-MM","picker-options":e.pickerOptions},on:{change:function(t){return e.searchPullNew(1)}},model:{value:e.pullNew.date,callback:function(t){e.$set(e.pullNew,"date",t)},expression:"pullNew.date"}}),e._v(" "),a("el-button",{staticClass:"export-btn",attrs:{type:"primary",size:"mini"},on:{click:e.exportList}},[e._v("导出")]),e._v(" "),a("label",[e._v("当月总计消耗积分：")]),e._v(" "+e._s(e.pullNew.quizDivideCredit||0)+" 元\n      ")],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.pullNew.loading,expression:"pullNew.loading"}],ref:"elPullpullNewTable",staticStyle:{width:"100%"},attrs:{data:e.pullNew.list,stripe:"","max-height":e.pullNew.tableHeight<400?400:e.pullNew.tableHeight}},[a("el-table-column",{attrs:{prop:"orderId",label:"竞猜订单ID","min-width":"170"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"订单创建时间","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"successTime",label:"订单结算时间","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("dateFormat")([t.row.successTime,"yyyy-MM-dd hh:mm:ss"]))+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"用户通行证","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderCredit",label:"消耗积分数量","min-width":"180"}})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","page-size":"pullNew.pageSize","current-page":e.pullNew.pageIndex,"page-count":e.pullNew.pageCount},on:{"current-change":e.getPullNewList,"update:currentPage":function(t){return e.$set(e.pullNew,"pageIndex",t)},"update:current-page":function(t){return e.$set(e.pullNew,"pageIndex",t)}}})],1)],1)],1)},staticRenderFns:[]},vd=a("VU/8")(hd,gd,!1,null,null,null).exports,bd={name:"TcmDetailCreditAdd",data:function(){return{filterQuery:{month:gh(new Date,"yyyy.MM"),typeId:""},loading:!1,pageIndex:1,pageSize:25,pageCount:1,list:[],sumMonthCredit:0,sumCredit:0,remainCredit:0,tableHeight:null}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(e){var t=this;if(!this.loading){this.loading=!0,this.pageIndex=fh(e)?e:1;var a={pageIndex:this.pageIndex,pageSize:this.pageSize,month:this.filterQuery.month};this.filterQuery.typeId&&(a.typeId=this.filterQuery.typeId),this.$service(Zt,{params:a}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.creditList&&e.data.creditList.records?e.data.creditList.records:[],t.pageCount=e.data.creditList&&e.data.creditList.page?e.data.creditList.page.pageCount:1,t.sumMonthCredit=e.data.sumMonthCredit||0,t.sumCredit=e.data.sumCredit||0,t.remainCredit=e.data.remainCredit||0,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){t.$message.error(qo()(e))})}},exportExcel:function(){var e=this;if(0===this.list.length)return this.$message.warning("暂无数据");var t=[];o()(this.filterQuery).forEach(function(a){e.filterQuery[a]&&t.push(a+"="+e.filterQuery[a])}),window.open(window.location.origin+ea+"?"+t.join("&"))}},watch:{windowHeight:function(){this.setHeight()}}},_d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tcm-credit-add"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title)+"\n        ")])})],2)],1)]),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.filterQuery,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"月份"}},[a("el-date-picker",{staticStyle:{width:"110px"},attrs:{clearable:!1,type:"month",editable:"false",width:"100","value-format":"yyyy.MM","picker-options":{disabledDate:function(e){return e.getTime()>Date.now()}}},model:{value:e.filterQuery.month,callback:function(t){e.$set(e.filterQuery,"month",t)},expression:"filterQuery.month"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{staticStyle:{width:"130px"},model:{value:e.filterQuery.typeId,callback:function(t){e.$set(e.filterQuery,"typeId",t)},expression:"filterQuery.typeId"}},[a("el-option",{attrs:{value:"",label:"全部"}}),e._v(" "),a("el-option",{attrs:{value:"1",label:"购买数据服务"}}),e._v(" "),a("el-option",{attrs:{value:"2",label:"任务"}}),e._v(" "),a("el-option",{attrs:{value:"5",label:"购买竞猜失败"}}),e._v(" "),a("el-option",{attrs:{value:"9",label:"退单返回"}}),e._v(" "),a("el-option",{attrs:{value:"12",label:"下单返积分"}}),e._v(" "),a("el-option",{attrs:{value:"14",label:"拉新竞猜退单"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getList()}}},[e._v("查询")])],1),e._v(" "),a("el-form-item",{attrs:{label:"当月总计新增积分"}},[e._v("\n      "+e._s(e.sumMonthCredit)+"\n    ")]),e._v(" "),a("el-form-item",{attrs:{label:"累计新增积分"}},[e._v("\n      "+e._s(e.sumCredit)+"\n    ")]),e._v(" "),a("el-form-item",{attrs:{label:"当前总计剩余积分"}},[e._v("\n      "+e._s(e.remainCredit)+"\n    ")]),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.exportExcel}},[e._v("导出")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"userCreditId",label:"积分新增ID",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"订单ID","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"用户ID","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"successTime",label:"成功时间","min-width":"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"flowClassName",label:"积分新增类型","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"logTypeName",label:"商品名称","min-width":"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"creditNCoinChange",label:"新增积分数",width:"140"}})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList}})],1)},staticRenderFns:[]},yd=a("VU/8")(bd,_d,!1,null,null,null).exports,wd={name:"tcmCreditConsume",data:function(){return{filterQuery:{month:gh(new Date,"yyyy.MM"),typeId:""},loading:!1,pageIndex:1,pageSize:25,pageCount:1,list:[],sumMonthCredit:0,sumCredit:0,remainCredit:0,tableHeight:null}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(e){var t=this;if(!this.loading){this.loading=!0,this.pageIndex=fh(e)?e:1;var a={pageIndex:this.pageIndex,pageSize:this.pageSize,month:this.filterQuery.month};this.filterQuery.typeId&&(a.typeId=this.filterQuery.typeId),this.$service(ta,{params:a}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.creditList&&e.data.creditList.records?e.data.creditList.records:[],t.pageCount=e.data.creditList&&e.data.creditList.page?e.data.creditList.page.pageCount:1,t.sumMonthCredit=e.data.sumMonthCredit||0,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){t.$message.error(qo()(e))})}},exportExcel:function(){var e=this;if(0===this.list.length)return this.$message.warning("暂无数据");var t=[];o()(this.filterQuery).forEach(function(a){e.filterQuery[a]&&t.push(a+"="+e.filterQuery[a])}),window.open(window.location.origin+aa+"?"+t.join("&"))}},watch:{windowHeight:function(){this.setHeight()}}},Td={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tcm-credit-consume"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title)+"\n        ")])})],2)],1)]),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.filterQuery,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"月份"}},[a("el-date-picker",{staticStyle:{width:"110px"},attrs:{clearable:!1,type:"month",editable:"false",width:"100","value-format":"yyyy.MM","picker-options":{disabledDate:function(e){return e.getTime()>Date.now()}}},model:{value:e.filterQuery.month,callback:function(t){e.$set(e.filterQuery,"month",t)},expression:"filterQuery.month"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{staticStyle:{width:"130px"},model:{value:e.filterQuery.typeId,callback:function(t){e.$set(e.filterQuery,"typeId",t)},expression:"filterQuery.typeId"}},[a("el-option",{attrs:{value:"",label:"全部"}}),e._v(" "),a("el-option",{attrs:{value:"3",label:"购买竞猜"}}),e._v(" "),a("el-option",{attrs:{value:"11",label:"重新结算扣款"}}),e._v(" "),a("el-option",{attrs:{value:"13",label:"拉新竞猜扣积分"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getList()}}},[e._v("查询")])],1),e._v(" "),a("el-form-item",{attrs:{label:"当月总计消耗积分"}},[e._v("\n      "+e._s(e.sumMonthCredit)+"\n    ")]),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.exportExcel}},[e._v("导出")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"userCreditId",label:"积分新增ID",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"订单ID","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"用户ID","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"successTime",label:"成功时间","min-width":"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"flowClassName",label:"积分新增类型","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"logTypeName",label:"商品名称","min-width":"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"creditNCoinChange",label:"新增积分数",width:"140"}})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList}})],1)},staticRenderFns:[]},Id=a("VU/8")(wd,Td,!1,null,null,null).exports,xd={name:"tcmNAdd",data:function(){return{filterQuery:{month:gh(new Date,"yyyy.MM"),typeId:""},loading:!1,pageIndex:1,pageSize:25,pageCount:1,list:[],sumMonthNCoin:0,sumNCoin:0,tableHeight:null}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(e){var t=this;if(!this.loading){this.loading=!0,this.pageIndex=fh(e)?e:1;var a={pageIndex:this.pageIndex,pageSize:this.pageSize,month:this.filterQuery.month};this.filterQuery.typeId&&(a.typeId=this.filterQuery.typeId),this.$service(ia,{params:a}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.nCoinList&&e.data.nCoinList.records?e.data.nCoinList.records:[],t.pageCount=e.data.nCoinList&&e.data.nCoinList.page?e.data.nCoinList.page.pageCount:1,t.sumMonthNCoin=e.data.sumMonthNCoin||0,t.sumNCoin=e.data.sumNCoin||0,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){t.$message.error(qo()(e))})}},exportExcel:function(){var e=this;if(0===this.list.length)return this.$message.warning("暂无数据");var t=[];o()(this.filterQuery).forEach(function(a){e.filterQuery[a]&&t.push(a+"="+e.filterQuery[a])}),window.open(window.location.origin+ra+"?"+t.join("&"))}},watch:{windowHeight:function(){this.setHeight()}}},kd={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tcm-n-add"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title)+"\n        ")])})],2)],1)]),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.filterQuery,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"月份"}},[a("el-date-picker",{staticStyle:{width:"110px"},attrs:{clearable:!1,type:"month",editable:"false",width:"100","value-format":"yyyy.MM","picker-options":{disabledDate:function(e){return e.getTime()>Date.now()}}},model:{value:e.filterQuery.month,callback:function(t){e.$set(e.filterQuery,"month",t)},expression:"filterQuery.month"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{staticStyle:{width:"130px"},model:{value:e.filterQuery.typeId,callback:function(t){e.$set(e.filterQuery,"typeId",t)},expression:"filterQuery.typeId"}},[a("el-option",{attrs:{value:"",label:"全部"}}),e._v(" "),a("el-option",{attrs:{value:"4",label:"提前结算"}}),e._v(" "),a("el-option",{attrs:{value:"5",label:"购买竞猜失败"}}),e._v(" "),a("el-option",{attrs:{value:"6",label:"竞猜赢得"}}),e._v(" "),a("el-option",{attrs:{value:"8",label:"奖品退款"}}),e._v(" "),a("el-option",{attrs:{value:"9",label:"退单返回"}}),e._v(" "),a("el-option",{attrs:{value:"10",label:"重新结算退款"}}),e._v(" "),a("el-option",{attrs:{value:"14",label:"拉新竞猜赢得"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getList()}}},[e._v("查询")])],1),e._v(" "),a("el-form-item",{attrs:{label:"当月总计新增N币"}},[e._v("\n      "+e._s(e.sumMonthNCoin)+"\n    ")]),e._v(" "),a("el-form-item",{attrs:{label:"累计新增N币"}},[e._v("\n      "+e._s(e.sumNCoin)+"\n    ")]),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.exportExcel}},[e._v("导出")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"userNCoinId",label:"N币新增ID",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"订单ID","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"successTime",label:"成功时间","min-width":"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"flowClassName",label:"N币新增类型","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"logTypeName",label:"商品名称","min-width":"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"creditNCoinChange",label:"新增N币数",width:"140"}})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList}})],1)},staticRenderFns:[]},$d=a("VU/8")(xd,kd,!1,null,null,null).exports,Cd={name:"tcmNConsume",data:function(){return{filterQuery:{month:gh(new Date,"yyyy.MM"),typeId:""},loading:!1,pageIndex:1,pageSize:25,pageCount:1,list:[],sumMonthNCoin:0,sumNCoin:0,tableHeight:null}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(e){var t=this;if(!this.loading){this.loading=!0,this.pageIndex=fh(e)?e:1;var a={pageIndex:this.pageIndex,pageSize:this.pageSize,month:this.filterQuery.month};this.filterQuery.typeId&&(a.typeId=this.filterQuery.typeId),this.$service(oa,{params:a}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.nCoinList&&e.data.nCoinList.records?e.data.nCoinList.records:[],t.pageCount=e.data.nCoinList&&e.data.nCoinList.page?e.data.nCoinList.page.pageCount:1,t.sumMonthNCoin=e.data.sumMonthNCoin||0,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){t.$message.error(qo()(e))})}},exportExcel:function(){var e=this;if(0===this.list.length)return this.$message.warning("暂无数据");var t=[];o()(this.filterQuery).forEach(function(a){e.filterQuery[a]&&t.push(a+"="+e.filterQuery[a])}),window.open(window.location.origin+na+"?"+t.join("&"))}},watch:{windowHeight:function(){this.setHeight()}}},Sd={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tcm-n-consume"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title)+"\n        ")])})],2)],1)]),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.filterQuery,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"月份"}},[a("el-date-picker",{staticStyle:{width:"110px"},attrs:{clearable:!1,type:"month",editable:"false",width:"100","value-format":"yyyy.MM","picker-options":{disabledDate:function(e){return e.getTime()>Date.now()}}},model:{value:e.filterQuery.month,callback:function(t){e.$set(e.filterQuery,"month",t)},expression:"filterQuery.month"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{staticStyle:{width:"130px"},model:{value:e.filterQuery.typeId,callback:function(t){e.$set(e.filterQuery,"typeId",t)},expression:"filterQuery.typeId"}},[a("el-option",{attrs:{value:"",label:"全部"}}),e._v(" "),a("el-option",{attrs:{value:"3",label:"购买竞猜"}}),e._v(" "),a("el-option",{attrs:{value:"7",label:"兑换奖品"}}),e._v(" "),a("el-option",{attrs:{value:"11",label:"重新结算扣款"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getList()}}},[e._v("查询")])],1),e._v(" "),a("el-form-item",{attrs:{label:"当月总计消耗N币"}},[e._v("\n      "+e._s(e.sumMonthNCoin)+"\n    ")]),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.exportExcel}},[e._v("导出")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"userNCoinId",label:"N币消耗ID",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"订单ID","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"exchangeOrderId",label:"兑奖订单ID","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"shippingTime",label:"兑奖订单发货时间","min-width":"160"}}),e._v(" "),a("el-table-column",{attrs:{label:"收货时间/成功时间","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.exchangeOrderId?t.row.receivedTime:t.row.successTime)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"flowClassName",label:"N币消耗类型","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"logTypeName",label:"商品名称","min-width":"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"creditNCoinChange",label:"消耗N币数",width:"140"}})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList}})],1)},staticRenderFns:[]},Ld=a("VU/8")(Cd,Sd,!1,null,null,null).exports,Dd={name:"messageSystem",data:function(){return{loading:!1,pageIndex:1,pageSize:25,pageCount:1,list:[],urlRedirectType:on.urlRedirectType,queryParam:"",redirectPreview:"",previewLoading:!1,form:{title:"",content:[],linkType:"EXPERT",linkUrl:"",optionPushAlert:"",sendType:["message"],timeType:"0",fixSendPushTime:"",useStatus:"USE_IN"},updateLoading:!1,dialogFormVisible:!1,codeList:[],keywordList:[],tableHeight:null}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},linkRules:function(e,t,a){["EXPERT","MATCH","THREAD","URL","MACAUS_MATCHPAGE","H5_URL_REDIRECT_MODEL"].indexOf(this.form.linkType)>-1?["URL","H5_URL_REDIRECT_MODEL"].indexOf(this.form.linkType)>-1?t&&!bh.url.test(t)?a(new Error("URL不合法")):a():t&&!/^\d+$/.test(t)?a(new Error("ID必须为数字")):a():a()},contentRule:function(e,t,a){var i=e.field;if("key"===this.form.content[i].type){var r=this.$refs["nameKey"+i][0].value,o=this.$refs["keyword"+i][0].value;r?r.length>5?a(new Error("名称不超5个字符")):o?a():a(new Error("关键词不为空")):a(new Error("名称不为空"))}else{var n=this.$refs["nameString"+i][0].value;n?n.length>300?a(new Error("文本内容不超300个字符")):a():a(new Error("文本内容不为空"))}},getList:function(e){var t=this;if(!this.loading){this.loading=!0;var a=null;fh(e)?this.pageIndex=e||1:(this.pageIndex=1,this.queryParam&&(a={queryParam:this.queryParam})),this.$service(sa,{urlParams:{pageIndex:this.pageIndex,pageSize:this.pageSize},params:a}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.records||[],t.pageCount=e.data.page?e.data.page.pageCount:1,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){t.$message.error(qo()(e))})}},switchStatus:function(e){var t=this;this.$set(e,"statusLoading",!0);var a={templetId:e.templetId,useStatus:e.useStatus};this.$service(ca,{method:"post",urlParams:a}).then(function(a){e.statusLoading=!1,200===a.code?(e.status="USE_STOP"===e.useStatus?"NOT_NORMAL":"NORMAL",t.$message.success("状态更新成功")):(t.$set(e,"useStatus","USE_STOP"===e.useStatus?"USE_IN":"USE_STOP"),t.$message.error(a.code+":"+a.message))},function(a){e.statusLoading=!1,t.$set(e,"useStatus","USE_STOP"===e.useStatus?"USE_IN":"USE_STOP"),t.$message.error(qo()(a))})},systemDel:function(e){var t=this;this.$set(e,"loading",!0),this.$service(da,{method:"post",urlParams:{templetId:e.templetId}}).then(function(a){e.loading=!1,200===a.code?(e.delPop=!1,t.$message.success("删除成功"),t.getList(t.pageIndex)):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})},systemPop:function(e){var t=this;if(this.form=tn()({title:"",content:[],linkType:"EXPERT",linkUrl:"",optionPushAlert:"",sendType:e?[]:["message"],timeType:"0",fixSendPushTime:"",useStatus:"USE_IN"},e||{}),e&&(e.isMessage&&this.form.sendType.push("message"),e.isPush&&this.form.sendType.push("push"),this.form.timeType=this.form.fixSendPushTime?"1":"0",JSON.parse(e.content))){var a=JSON.parse(e.content);a.forEach(function(e){e.type=e.name&&e.keywords?"key":"string"}),this.form.content=a}this.getkeywordList().then(function(){t.dialogFormVisible=!0,t.$nextTick(function(){t.$refs.form.clearValidate()})})},addContentInput:function(e){var t={type:e,name:"",keywords:""};this.form.content.push(t)},removeContentInput:function(e){this.form.content.splice(e,1)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a=tn()({},t.form),i=[];if(t.form.content.forEach(function(e){i.push({name:e.name.replace(/:|：|\r|\n/gi,"")+(e.keywords?":":""),keywords:e.keywords})}),i.length<1)return t.$message.error("模板内容不能为空");if(a.content=qo()(i),a.isMessage=a.sendType.indexOf("message")>-1,a.sendType.indexOf("push")>-1){if(a.isPush=!0,/\$\{\(userk/gi.test(a.optionPushAlert))return t.$message.error("PUSH可选内容内不允许有涉及用户的关键词");if(a.optionPushAlert&&/\$\{\(userk/gi.test(a.content))return t.$message.error("PUSH可选内容为空时，模板内容内不允许有涉及用户的关键词")}else a.isPush=!1,a.optionPushAlert="";if(a.optionPushAlert&&a.optionPushAlert.replace(/\r|\n/gi,""),-1===["EXPERT","MATCH","THREAD","URL","MACAUS_MATCHPAGE","H5_URL_REDIRECT_MODEL"].indexOf(t.form.linkType)&&(a.linkUrl=""),["URL","H5_URL_REDIRECT_MODEL"].indexOf(t.form.linkType)>-1){var r=a.linkUrl.match(/^(http|https):\/\/(hongcai|sports)\.163\.com(\/article)?\/\d{2}\/\d{4}\/\d{2}\/([a-zA-Z0-9]{16})\.html$/),o="";r&&(o="https://c.m.163.com/nc/qa/3g-expand/hc-article.html?docid="+r[4]+"#pcarticle="+t.form.linkUrl),t.form.linkUrl=o}t.updateLoading=!0,t.$service(t.form.templetId?ua:la,{method:"post",urlParams:t.form.templetId?{templetId:t.form.templetId}:null,data:a}).then(function(e){t.updateLoading=!1,200===e.code?(t.dialogFormVisible=!1,t.$message.success((t.form.templetId?"修改":"添加")+"成功"),t.getList(t.form.templetId?t.pageIndex:1)):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}})},getkeywordList:function(){var e=this;return this.keywordList.length>0?Bo.a.resolve():this.$service(ma).then(function(t){if(200===t.code)return e.keywordList=t.data||[],Bo.a.resolve();e.$message.error("获取消息模板失败，请稍后再试")},function(t){t&&e.$message.error("获取消息模板失败，请稍后再试")})},previewID:function(){var e=this;if(this.redirectPreview="",-1!==["EXPERT","MATCH","THREAD"].indexOf(this.form.linkType)&&/^\d+$/.test(this.form.linkUrl)&&!this.previewLoading){var t=this.form.linkUrl;switch(this.previewLoading=!0,this.form.linkType){case"THREAD":Rn(t).then(function(t){e.redirectPreview="提示：对应跳转文章["+t.title+"]",e.previewLoading=!1}).catch(function(t){t&&(e.previewLoading=!1,e.redirectPreview="提示：无对应跳转文章")});break;case"MATCH":An(t).then(function(t){e.redirectPreview="提示：对应跳转赛事["+t.homeMatchTeam.teamName+"VS"+t.guestMatchTeam.teamName+"]",e.previewLoading=!1}).catch(function(t){t&&(e.previewLoading=!1,e.redirectPreview="提示：无对应跳转赛事")});break;case"EXPERT":On(t).then(function(t){e.redirectPreview="提示：对应跳转专家["+t.nickname+"]",e.previewLoading=!1}).catch(function(t){t&&(e.previewLoading=!1,e.redirectPreview="提示：无对应跳转专家")})}}}},watch:{windowHeight:function(){this.setHeight()}}},Pd={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"message-system"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-input",{staticStyle:{width:"auto"},attrs:{placeholder:"模板名/模板ID","prefix-icon":"el-icon-search",clearable:"",size:"small"},on:{change:function(t){return e.getList("search")},clear:function(t){return e.getList("search")}},model:{value:e.queryParam,callback:function(t){e.queryParam=t},expression:"queryParam"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.systemPop()}}},[e._v("新建模板")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"templetId",label:"模板ID",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"模板标题","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"模板内容","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[JSON.parse(t.row.content)&&JSON.parse(t.row.content).length>0?a("div",e._l(JSON.parse(t.row.content),function(t,i){return a("p",{key:i},[a("span",[e._v(e._s(t.name))]),a("span",{staticStyle:{color:"#333"}},[e._v(e._s(t.keywords))])])}),0):a("span",[e._v(e._s(t.row.content))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"optionPushAlert",label:"PUSH固定文案","min-width":"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"linkType",label:"跳转类型","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("urlRedirect2CH")(t.row.linkType))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"linkUrl",label:"跳转链接","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"conditionName",label:"关联触发条件","min-width":"90"}}),e._v(" "),a("el-table-column",{attrs:{label:"推送范围",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.isMessage?"消息":"")+e._s(t.row.isMessage&&t.row.isPush?"、":"")+e._s(t.row.isPush?"PUSH":"")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"推送时间",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.fixSendPushTime?t.row.fixSendPushTime:"即时")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"useStatus",label:"状态",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s("USE_IN"===t.row.useStatus?"启用":"停用")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.systemPop(t.row)}}}),e._v(" "),a("el-popover",{attrs:{placement:"left"},model:{value:t.row.delPop,callback:function(a){e.$set(t.row,"delPop",a)},expression:"scope.row.delPop"}},[a("p",[e._v("确定删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.systemDel(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",icon:"el-icon-delete",circle:"",size:"small"},slot:"reference"})],1),e._v(" "),a("el-switch",{attrs:{disabled:t.row.statusLoading,"active-value":"USE_IN","inactive-value":"USE_STOP"},nativeOn:{click:function(a){return e.switchStatus(t.row)}},model:{value:t.row.useStatus,callback:function(a){e.$set(t.row,"useStatus",a)},expression:"scope.row.useStatus"}})]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList}}),e._v(" "),a("el-dialog",{attrs:{title:e.form.templetId?"修改模板":"新建模板",visible:e.dialogFormVisible,width:"530px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,disabled:e.updateLoading,size:"small","label-width":"70px"}},[a("el-form-item",{attrs:{label:"标题",prop:"title",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{max:15,message:"最多15个字符",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off",disabled:e.form.templetId},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),e._l(e.form.content,function(t,i){return a("el-form-item",{key:i,attrs:{label:0===i?"推荐内容":"",prop:i+"",rules:{validator:e.contentRule,trigger:["blur","change"]}}},["key"===t.type?a("el-input",{ref:"nameKey"+i,refInFor:!0,staticStyle:{width:"130px"},attrs:{placeholder:"名称",disabled:e.form.templetId},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}}):e._e(),e._v(" "),"key"===t.type?a("span",[e._v("=")]):e._e(),e._v(" "),"key"===t.type?a("el-select",{ref:"keyword"+i,refInFor:!0,attrs:{filterable:"",placeholder:"请选择关键词"},model:{value:t.keywords,callback:function(a){e.$set(t,"keywords",a)},expression:"item.keywords"}},e._l(e.keywordList,function(e){return a("el-option",{key:e.keywordId,attrs:{label:e.keywordName,value:e.keywordCode}})}),1):e._e(),e._v(" "),"key"!==t.type?a("el-input",{ref:"nameString"+i,refInFor:!0,staticStyle:{width:"360px"},attrs:{type:"textarea",maxlength:"100",rows:2,placeholder:"文本内容",disabled:e.form.templetId},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}}):e._e(),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-delete",circle:"",size:"small"},on:{click:function(t){return e.removeContentInput(i)}}})],1)}),e._v(" "),e.form.templetId?e._e():a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.addContentInput("key")}}},[e._v("添加关键词参数")]),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return e.addContentInput("string")}}},[e._v("添加文本")])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.sendType.indexOf("push")>-1,expression:"form.sendType.indexOf('push') > -1"}],attrs:{label:"Push可选内容",prop:"optionPushAlert"}},[a("el-input",{attrs:{type:"textarea",maxlength:"200",rows:2,placeholder:"push内容"},model:{value:e.form.optionPushAlert,callback:function(t){e.$set(e.form,"optionPushAlert",t)},expression:"form.optionPushAlert"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"推送",prop:"sendType",rules:{type:"array",required:!0,message:"不为空",trigger:["blur","change"]}}},[a("el-checkbox-group",{model:{value:e.form.sendType,callback:function(t){e.$set(e.form,"sendType",t)},expression:"form.sendType"}},[a("el-checkbox",{attrs:{label:"message"}},[e._v("消息")]),e._v(" "),a("el-checkbox",{attrs:{label:"push"}},[e._v("PUSH")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"推送时间",prop:"timeType"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.form.timeType,callback:function(t){e.$set(e.form,"timeType",t)},expression:"form.timeType"}},[e._v("即时")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.form.timeType,callback:function(t){e.$set(e.form,"timeType",t)},expression:"form.timeType"}},[e._v("固定时间")])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===e.form.timeType,expression:"form.timeType === '1'"}],attrs:{label:"",prop:"fixSendPushTime",rules:{required:"1"===e.form.timeType,message:"不为空",trigger:["blur","change"]}}},[a("el-time-picker",{attrs:{"arrow-control":"","value-format":"HH:mm",placeholder:"选择时间"},model:{value:e.form.fixSendPushTime,callback:function(t){e.$set(e.form,"fixSendPushTime",t)},expression:"form.fixSendPushTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"跳转类型",prop:"linkType"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:e.form.templetId},on:{change:e.previewID},model:{value:e.form.linkType,callback:function(t){e.$set(e.form,"linkType",t)},expression:"form.linkType"}},e._l(e.urlRedirectType,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.type}})}),1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:["EXPERT","MATCH","THREAD","URL","MACAUS_MATCHPAGE","H5_URL_REDIRECT_MODEL"].indexOf(e.form.linkType)>-1,expression:"['EXPERT', 'MATCH', 'THREAD', 'URL', 'MACAUS_MATCHPAGE', 'H5_URL_REDIRECT_MODEL'].indexOf(form.linkType) > -1"}],attrs:{label:"ID/URL",prop:"linkUrl",rules:{validator:e.linkRules,trigger:["blur","change"]}}},[a("el-input",{attrs:{autocomplete:"off","suffix-icon":e.previewLoading?"el-icon-loading":"",disabled:e.form.templetId},on:{change:e.previewID},model:{value:e.form.linkUrl,callback:function(t){e.$set(e.form,"linkUrl",t)},expression:"form.linkUrl"}})],1),e._v(" "),e.redirectPreview?a("el-form-item",[a("span",[e._v(e._s(e.redirectPreview))])]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"useStatus"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:e.form.templetId},model:{value:e.form.useStatus,callback:function(t){e.$set(e.form,"useStatus",t)},expression:"form.useStatus"}},[a("el-option",{attrs:{label:"启用",value:"USE_IN"}}),e._v(" "),a("el-option",{attrs:{label:"停用",value:"USE_STOP"}})],1)],1)],2),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("提交")]),e._v(" "),e.form.title&&(e.form.msgImage||e.form.msgAbstract)?a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:e.previewForm}},[e._v("预览")]):e._e()],1)],1)],1)},staticRenderFns:[]},zd=a("VU/8")(Dd,Pd,!1,null,null,null).exports,Hd={name:"messageOperating",data:function(){return{loading:!1,start:0,limit:25,total:1,list:[],urlRedirectType:on.urlRedirectType,form:{msgTypeId:"",userGroupCode:"",groupUser:"",excel:null,msgTitle:"",msgAbstract:"",msgImage:"",redirectType:"2",msgLink:"",pushType:["1"],pushContent:"",pushStatus:"1",pushTime:""},redirectPreview:"",previewLoading:!1,updateLoading:!1,dialogFormVisible:!1,categoryList:[],userGroupList:[],tableHeight:null,previewVisible:!1,fileList:[]}},computed:u()({},Object(sn.d)(["windowHeight"])),filters:{msgStatus2CH:function(e){return{0:"未发送",1:"正在发送",2:"已发送",3:"消息异常"}[e]||"-"}},created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},userIdRule:function(e,t,a){"002"===this.form.userGroupCode?t?/^[0-9,]+$/.test(t)?t.split(",").length>200?a(new Error("最多200个用户ID")):a():a(new Error("必须为数字且英文(,)隔开")):a(new Error("不为空")):a()},linkRules:function(e,t,a){parseInt(this.form.redirectType)<5||23===parseInt(this.form.redirectType)||28===parseInt(this.form.redirectType)||34===parseInt(this.form.redirectType)?1===parseInt(this.form.redirectType)||34===parseInt(this.form.redirectType)?t?bh.url.test(t)?a():a(new Error("URL不合法")):a(new Error("URL不为空")):t?/^\d+$/.test(t)?a():a(new Error("ID必须为数字")):a(new Error("ID不为空")):a()},getList:function(e){var t=this;this.loading||(this.loading=!0,this.start=e?(e-1)*this.limit:0,this.$service(pa,{urlParams:{start:this.start,limit:this.limit}}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.data||[],t.total=e.data.total||1,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){t.$message.error(qo()(e))}))},beforeMsgImageUpload:function(e){if(e.size/1024/1024>5)return this.$message.error("上传图片大小不能超过 5MB!"),!1},uploadMsgImage:function(e){var t=this;En(e.file,"thread").then(function(e){t.form.msgImage=e},function(e){e&&t.$message.error("上传失败，请稍后再传！")})},handleFileExceed:function(){this.$message.warning("请先移除Excel文件。")},handleFileRemove:function(e){this.form.excel=null},handleFileChange:function(e,t){this.form.excel=e.raw},operatingPop:function(e){var t=this;this.form={msgTypeId:"",userGroupCode:"",groupUser:"",excel:null,msgTitle:"",msgAbstract:"",msgImage:"",redirectType:2,msgLink:"",pushType:["1"],pushContent:"",pushStatus:"1",pushTime:""},this.fileList=[],this.getCategoryList().then(function(){t.getUerGroupList().then(function(){t.form.msgTypeId=t.categoryList[0].msgTypeId,t.form.userGroupCode=t.userGroupList[0].userGroupCode,t.dialogFormVisible=!0,t.$nextTick(function(){t.$refs.form.clearValidate()})})})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){t.updateLoading=!0;var a=tn()({},t.form);a.msgAbstract=a.msgAbstract.replace(/\r|\n/g,""),a.pushContent=a.pushContent?a.pushContent.replace(/\r|\n/g,""):a.pushContent;var i=a.msgLink.match(/^(http|https):\/\/(hongcai|sports)\.163\.com(\/article)?\/\d{2}\/\d{4}\/\d{2}\/([a-zA-Z0-9]{16})\.html$/),r="";i&&(r="https://c.m.163.com/nc/qa/3g-expand/hc-article.html?docid="+i[4]+"#pcarticle="+t.form.msgLink),a.pushType=t.sum(a.pushType),a.msgLink=r||a.msgLink,parseInt(a.redirectType)>4&&23!==parseInt(a.redirectType)&&28!==parseInt(a.redirectType)&&34!==parseInt(a.redirectType)&&(a.msgLink=""),o()(a).forEach(function(e){a[e]||delete a[e]});var n=new FormData;a.excel&&o()(a).forEach(function(e){n.append(e,a[e])}),t.$service(ga,{method:"post",headers:a.excel?{"Content-Type":"multipart/form-data"}:null,data:a.excel?n:a}).then(function(e){t.updateLoading=!1,200===e.code?(t.dialogFormVisible=!1,t.$message.success("添加成功"),t.getList()):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}})},sum:function(e){var t=0;return e.forEach(function(e){t+=parseInt(e)}),t},msgDel:function(e){var t=this;this.$set(e,"loading",!0),this.$service(va,{method:"post",data:{isDel:1,msgLogId:e.msgLogId}}).then(function(a){e.loading=!1,200===a.code?(e.delPop=!1,e.isDel=!0,t.$message.success("删除成功")):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})},getCategoryList:function(){var e=this;return this.categoryList.length>0?Bo.a.resolve():this.$service(fa).then(function(t){if(200===t.code)return e.categoryList=t.data,Bo.a.resolve();e.$message.error("获取消息类型列表失败")},function(t){t&&e.$message.error("获取消息类型列表失败")})},getUerGroupList:function(){var e=this;return this.userGroupList.length>0?Bo.a.resolve():this.$service(ha).then(function(t){if(200===t.code)return e.userGroupList=t.data,Bo.a.resolve();e.$message.error("获取用户群体列表失败")},function(t){t&&e.$message.error("获取用户群体列表失败")})},previewID:function(){var e=this;if(this.redirectPreview="",-1!==[2,3,4,23,28].indexOf(parseInt(this.form.redirectType))&&/^\d+$/.test(this.form.msgLink)&&!this.previewLoading){this.previewLoading=!0;var t=this.form.msgLink;switch(parseInt(this.form.redirectType)){case 4:Rn(t).then(function(t){e.redirectPreview="提示：对应跳转文章["+t.title+"]",e.previewLoading=!1}).catch(function(t){t&&(e.previewLoading=!1,e.redirectPreview="提示：无对应跳转文章")});break;case 3:case 23:case 28:An(t).then(function(t){e.redirectPreview="提示：对应跳转赛事["+t.homeMatchTeam.teamName+"VS"+t.guestMatchTeam.teamName+"]",e.previewLoading=!1}).catch(function(t){t&&(e.previewLoading=!1,e.redirectPreview="提示：无对应跳转赛事")});break;case 2:On(t).then(function(t){e.redirectPreview="提示：对应跳转专家["+t.nickname+"]",e.previewLoading=!1}).catch(function(t){t&&(e.previewLoading=!1,e.redirectPreview="提示：无对应跳转专家")})}}},previewForm:function(){this.previewVisible=!0}},watch:{windowHeight:function(){this.setHeight()}}},Md={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"message-operating"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.operatingPop()}}},[e._v("新建类别")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"msgLogId",label:"消息ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"msgTypeName",label:"消息类型",width:"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"msgTitle",label:"消息标题","min-width":"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"msgAbstract",label:"消息摘要","min-width":"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"msgImage",label:"消息配图",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.msgImage?a("img",{attrs:{src:t.row.msgImage+"?imageView&thumbnail=120y45&quality=85"}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"groupUser",label:"用户群","min-width":"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"redirectType",label:"跳转类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("urlRedirect2CH")(t.row.redirectType))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"msgLink",label:"链接","min-width":"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"消息发布时间",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isDel",label:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("msgStatus2CH")(t.row.status))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isDel?a("span",[e._v("已删除")]):a("el-popover",{attrs:{placement:"left"},model:{value:t.row.delPop,callback:function(a){e.$set(t.row,"delPop",a)},expression:"scope.row.delPop"}},[a("p",[e._v("确定删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.msgDel(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",icon:"el-icon-delete",circle:"",size:"small"},slot:"reference"})],1)]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":Math.floor(e.start/e.limit)+1,total:e.total,"page-size":e.limit},on:{"current-change":e.getList,"update:currentPage":function(t){e.$set(Math,"floor(start/limit) + 1",t)},"update:current-page":function(t){e.$set(Math,"floor(start/limit) + 1",t)}}}),e._v(" "),a("el-dialog",{attrs:{title:"新建消息","close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,disabled:e.updateLoading,size:"small","label-width":"110px"}},[a("el-form-item",{attrs:{label:"类型",prop:"msgTypeId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.msgTypeId,callback:function(t){e.$set(e.form,"msgTypeId",t)},expression:"form.msgTypeId"}},e._l(e.categoryList,function(e,t){return a("el-option",{key:t,attrs:{label:e.msgTypeName,value:e.msgTypeId}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"用户群体",prop:"userGroupCode"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.userGroupCode,callback:function(t){e.$set(e.form,"userGroupCode",t)},expression:"form.userGroupCode"}},e._l(e.userGroupList,function(e,t){return a("el-option",{key:t,attrs:{label:e.groupName,value:e.userGroupCode}})}),1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"002"==e.form.userGroupCode,expression:"form.userGroupCode=='002'"}],attrs:{label:"用户ID",prop:"groupUser",rules:[{validator:e.userIdRule,trigger:["blur","change"]}]}},[a("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.form.groupUser,callback:function(t){e.$set(e.form,"groupUser",t)},expression:"form.groupUser"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"002"==e.form.userGroupCode,expression:"form.userGroupCode=='002'"}]},[a("span",[e._v("*不为空&用,隔开，最多200个用户")])]),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"003"==e.form.userGroupCode,expression:"form.userGroupCode=='003'"}],attrs:{prop:"excel",rules:[{required:"003"==e.form.userGroupCode,message:"请选择Excel",trigger:["blur","change"]}]}},[a("el-upload",{ref:"upload",attrs:{limit:"1",accept:".xls,.xlsx,.xlc,.xlm,.xlt,.xlw","on-remove":e.handleFileRemove,"on-change":e.handleFileChange,"on-exceed":e.handleFileExceed,"auto-upload":!1,"file-list":e.fileList}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("*文件需为excel格式")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"标题",prop:"msgTitle",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{max:15,message:"最多15个字符",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.msgTitle,callback:function(t){e.$set(e.form,"msgTitle",t)},expression:"form.msgTitle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"简介",prop:"msgAbstract",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{max:50,message:"最多50个字符",trigger:["blur","change"]}]}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"简介"},model:{value:e.form.msgAbstract,callback:function(t){e.$set(e.form,"msgAbstract",t)},expression:"form.msgAbstract"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"配图",prop:"msgImage"}},[a("el-upload",{staticClass:"msgImage-uploader",attrs:{accept:".jpeg,.jpg,.png,.gif","show-file-list":!1,"http-request":e.uploadMsgImage,"before-upload":e.beforeMsgImageUpload}},[e.form.msgImage?a("img",{staticClass:"msgImage",attrs:{src:e.form.msgImage+"?imageView&thumbnail=340y128&quality=85"}}):a("i",{staticClass:"el-icon-plus msgImage-uploader-icon"}),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("图片尺寸：690×260")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"跳转类型",prop:"redirectType"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.previewID},model:{value:e.form.redirectType,callback:function(t){e.$set(e.form,"redirectType",t)},expression:"form.redirectType"}},e._l(e.urlRedirectType,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:parseInt(e.form.redirectType)<5||23===parseInt(e.form.redirectType)||28===parseInt(e.form.redirectType)||34===parseInt(e.form.redirectType),expression:"parseInt(form.redirectType) < 5 || parseInt(form.redirectType) === 23 || parseInt(form.redirectType) === 28 || parseInt(form.redirectType) === 34"}],attrs:{label:"ID/URL",prop:"msgLink",rules:{validator:e.linkRules,trigger:["blur","change"]}}},[a("el-input",{attrs:{autocomplete:"off","suffix-icon":e.previewLoading?"el-icon-loading":""},on:{change:e.previewID},model:{value:e.form.msgLink,callback:function(t){e.$set(e.form,"msgLink",t)},expression:"form.msgLink"}})],1),e._v(" "),e.redirectPreview&&parseInt(e.form.redirectType)>1&&parseInt(e.form.redirectType)<5?a("el-form-item",[a("span",[e._v(e._s(e.redirectPreview))])]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"推送",prop:"pushType",rules:{type:"array",required:!0,message:"不为空",trigger:["blur","change"]}}},[a("el-checkbox-group",{model:{value:e.form.pushType,callback:function(t){e.$set(e.form,"pushType",t)},expression:"form.pushType"}},[a("el-checkbox",{attrs:{label:"1"}},[e._v("消息")]),e._v(" "),a("el-checkbox",{attrs:{label:"2"}},[e._v("PUSH")])],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.pushType.indexOf("2")>-1,expression:"form.pushType.indexOf('2') > -1"}],attrs:{label:"Push可选内容",prop:"pushContent",rules:{required:e.form.pushType.indexOf("2")>-1,message:"不为空",trigger:["blur","change"]}}},[a("el-input",{attrs:{type:"textarea",maxlength:"30",rows:2,placeholder:"push内容"},model:{value:e.form.pushContent,callback:function(t){e.$set(e.form,"pushContent",t)},expression:"form.pushContent"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"推送时间",prop:"pushStatus"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.form.pushStatus,callback:function(t){e.$set(e.form,"pushStatus",t)},expression:"form.pushStatus"}},[e._v("即时")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.form.pushStatus,callback:function(t){e.$set(e.form,"pushStatus",t)},expression:"form.pushStatus"}},[e._v("固定时间")])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"2"===e.form.pushStatus,expression:"form.pushStatus === '2'"}],attrs:{label:"",prop:"pushTime",rules:{required:"2"===e.form.pushStatus,message:"不为空",trigger:["blur","change"]}}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期","picker-options":{disabledDate:function(e){return e.getTime()<Date.now()}}},model:{value:e.form.pushTime,callback:function(t){e.$set(e.form,"pushTime",t)},expression:"form.pushTime"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("提交")]),e._v(" "),e.form.msgTitle&&(e.form.msgImage||e.form.msgAbstract)?a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:e.previewForm}},[e._v("预览")]):e._e()],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.previewVisible,width:"500px",center:""},on:{"update:visible":function(t){e.previewVisible=t}}},[a("el-form",{attrs:{size:"small","label-width":"0px"}},[e.form.msgTitle?a("el-form-item",[a("span",{staticStyle:{"font-size":"22px","font-weight":"bold",color:"#000"}},[e._v(e._s(e.form.msgTitle))])]):e._e(),e._v(" "),e.form.msgImage?a("el-form-item",[a("img",{attrs:{src:e.form.msgImage+"?imageView&thumbnail=450y170&quality=85"}})]):e._e(),e._v(" "),e.form.msgAbstract?a("el-form-item",[a("span",[e._v(e._s(e.form.msgAbstract))])]):e._e()],1)],1)],1)},staticRenderFns:[]};var Fd=a("VU/8")(Hd,Md,!1,function(e){a("z54z")},null,null).exports,Nd={name:"messageCategory",data:function(){return{loading:!1,start:0,limit:25,total:1,list:[],form:{msgTypeName:"",icon:"",isDel:"0"},updateLoading:!1,dialogFormVisible:!1,tableHeight:null}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(e){var t=this;this.loading||(this.loading=!0,this.start=e?(e-1)*this.limit:0,this.$service(ba,{urlParams:{start:this.start,limit:this.limit}}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.data||[],t.total=e.data.total||1,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){t.$message.error(qo()(e))}))},switchStatus:function(e){var t=this;this.$set(e,"statusLoading",!0);var a={msgTypeId:e.msgTypeId,isDel:e.isDel?1:0};this.$service(ya,{method:"post",data:a}).then(function(a){e.statusLoading=!1,200===a.code?t.$message.success("状态更新成功"):(t.$set(e,"isDel",!e.isDel),t.$message.error(a.code+":"+a.message))},function(a){e.statusLoading=!1,t.$set(e,"isDel",!e.isDel),t.$message.error(qo()(a))})},beforeIconUpload:function(e){if(e.size/1024/1024>5)return this.$message.error("上传头像图片大小不能超过 5MB!"),!1},uploadIcon:function(e){var t=this;En(e.file,"user").then(function(e){t.form.icon=e},function(e){e&&t.$message.error("上传头像失败，请稍后再传！")})},categoryPop:function(e){var t=this;this.form=tn()({msgTypeName:"",icon:"",isDel:"0"},e||{}),e&&(this.form.isDel=this.form.isDel?"1":"0"),this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.form.clearValidate()})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.updateLoading=!0,t.$service(t.form.msgTypeId?wa:_a,{method:"post",data:t.form}).then(function(e){t.updateLoading=!1,200===e.code?(t.dialogFormVisible=!1,t.$message.success((t.form.msgTypeId?"修改":"添加")+"成功"),t.getList()):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))}))})}},watch:{windowHeight:function(){this.setHeight()}}},Ed={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"message-category"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.categoryPop()}}},[e._v("新建类别")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"msgTypeId",label:"ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"msgTypeName",label:"名称","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"icon",label:"icon","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.icon?a("img",{attrs:{src:t.row.icon+"?imageView&thumbnail=36y36&quality=85"}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"isDel",label:"状态","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.isDel?"停用":"启用")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.categoryPop(t.row)}}}),e._v(" "),1!=t.row.msgTypeId?a("el-switch",{attrs:{disabled:t.row.statusLoading,"active-value":!1,"inactive-value":!0},nativeOn:{click:function(a){return e.switchStatus(t.row)}},model:{value:t.row.isDel,callback:function(a){e.$set(t.row,"isDel",a)},expression:"scope.row.isDel"}}):e._e()]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":Math.floor(e.start/e.limit)+1,total:e.total,"page-size":e.limit},on:{"current-change":e.getList,"update:currentPage":function(t){e.$set(Math,"floor(start/limit) + 1",t)},"update:current-page":function(t){e.$set(Math,"floor(start/limit) + 1",t)}}}),e._v(" "),a("el-dialog",{attrs:{title:e.form.msgTypeId?"修改类别":"新建类别",visible:e.dialogFormVisible,width:"500px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,disabled:e.updateLoading,size:"small","label-width":"80px"}},[a("el-form-item",{attrs:{label:"名称",prop:"msgTypeName",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{max:15,message:"最多15个字符",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.msgTypeName,callback:function(t){e.$set(e.form,"msgTypeName",t)},expression:"form.msgTypeName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图标",prop:"icon",rules:{required:!0,message:"不为空",trigger:"blur"}}},[a("el-upload",{staticClass:"icon-uploader",attrs:{accept:".jpeg,.jpg,.png,.gif","show-file-list":!1,"http-request":e.uploadIcon,"before-upload":e.beforeIconUpload}},[e.form.icon?a("img",{staticClass:"icon",attrs:{src:e.form.icon+"?imageView&thumbnail=64y64&quality=85"}}):a("i",{staticClass:"el-icon-plus icon-uploader-icon"}),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("图片尺寸：36×36")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"isDel"}},[a("el-select",{model:{value:e.form.isDel,callback:function(t){e.$set(e.form,"isDel",t)},expression:"form.isDel"}},[a("el-option",{attrs:{label:"启用",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"停用",value:"1"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]};var Rd=a("VU/8")(Nd,Ed,!1,function(e){a("tTEB")},null,null).exports,Od={name:"messageCondition",data:function(){return{loading:!1,pageIndex:1,pageSize:25,pageCount:1,list:[],form:{conditionName:"",conditionDesc:"",newConditionCode:"1",conditionCode:"",relateTempletId:"",useStatus:"USE_IN"},updateLoading:!1,dialogFormVisible:!1,codeList:[],templateList:[],codeListLoading:!1,templateListLoading:!1,tableHeight:null}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(e){var t=this;this.loading||(this.loading=!0,this.pageIndex=e||1,this.$service(Ta,{urlParams:{pageIndex:this.pageIndex,pageSize:this.pageSize}}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.records||[],t.pageCount=e.data.page?e.data.page.pageCount:1,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){t.$message.error(qo()(e))}))},switchStatus:function(e){var t=this;this.$set(e,"statusLoading",!0);var a={conditionId:e.conditionId,useStatus:e.useStatus};this.$service(Ca,{method:"post",urlParams:a}).then(function(a){e.statusLoading=!1,200===a.code?(e.status="USE_STOP"===e.useStatus?"NOT_NORMAL":"NORMAL",e.relateTempletTitle="",e.relateTempletId="",t.$message.success("状态更新成功")):(t.$set(e,"useStatus","USE_STOP"===e.useStatus?"USE_IN":"USE_STOP"),t.$message.error(a.code+":"+a.message))},function(a){e.statusLoading=!1,t.$set(e,"useStatus","USE_STOP"===e.useStatus?"USE_IN":"USE_STOP"),t.$message.error(qo()(a))})},conditionDel:function(e){var t=this;this.$set(e,"loading",!0),this.$service(Sa,{method:"post",urlParams:{conditionId:e.conditionId}}).then(function(a){e.loading=!1,200===a.code?(e.delPop=!1,t.$message.success("删除成功"),t.getList()):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})},conditionPop:function(e){var t=this;this.codeListLoading=!1,this.codeList=[],this.templateListLoading=!1,this.templateList=[],this.form=tn()({conditionName:"",conditionDesc:"",newConditionCode:"1",conditionCode:"",relateTempletId:"",useStatus:"USE_IN"},e||{}),e&&""===e.relateTempletTitle&&(this.form.relateTempletId=""),e&&"USE_STOP"===e.useStatus?(this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.form.clearValidate()})):this.getTemplateList().then(function(){e&&e.relateTempletId&&t.templateList.splice(0,0,{templetId:e.relateTempletId,title:e.relateTempletTitle}),t.dialogFormVisible=!0,t.$nextTick(function(){t.$refs.form.clearValidate()})})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.updateLoading=!0,t.$service(t.form.conditionId?$a:ka,{method:"post",urlParams:t.form.conditionId?{conditionId:t.form.conditionId}:null,data:t.form}).then(function(e){t.updateLoading=!1,200===e.code?(t.dialogFormVisible=!1,t.$message.success((t.form.conditionId?"修改":"添加")+"成功"),t.getList()):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))}))})},getCodeList:function(){var e=this;this.codeList.length>0||"1"===this.form.newConditionCode||(this.codeListLoading=!0,this.$service(xa).then(function(t){200===t.code?(0===t.data.length?(e.form.newConditionCode="1",e.$message.warning("没有可用的条件码")):e.codeList=t.data,e.codeListLoading=!1):(e.form.newConditionCode="1",e.$message.error("获取条件码失败"))},function(t){t&&(e.codeListLoading=!1,e.form.newConditionCode="1",e.$message.error("获取条件码失败"))}))},getTemplateList:function(){var e=this;if(!(this.templateList.length>0))return this.templateListLoading=!0,this.$service(Ia).then(function(t){if(e.templateListLoading=!1,200===t.code)return e.templateList=t.data||[],Bo.a.resolve();e.$message.error("获取消息模板失败，请稍后再试")},function(t){e.templateListLoading=!1,t&&e.$message.error("获取消息模板失败，请稍后再试")})}},watch:{windowHeight:function(){this.setHeight()}}},Ad={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"message-condition"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.conditionPop()}}},[e._v("新建触发条件")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"conditionId",label:"条件ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"conditionCode",label:"条件码","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"conditionName",label:"条件名称","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"conditionDesc",label:"条件描述","min-width":"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"relateTempletTitle",label:"关联消息模板","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s("NORMAL"===t.row.status?"正常":"失效")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.conditionPop(t.row)}}}),e._v(" "),a("el-popover",{attrs:{placement:"left"},model:{value:t.row.delPop,callback:function(a){e.$set(t.row,"delPop",a)},expression:"scope.row.delPop"}},[a("p",[e._v("确定删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.conditionDel(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",icon:"el-icon-delete",circle:"",size:"small"},slot:"reference"})],1),e._v(" "),a("el-switch",{directives:[{name:"show",rawName:"v-show",value:"USE_IN"===t.row.useStatus,expression:"scope.row.useStatus==='USE_IN'"}],attrs:{disabled:t.row.statusLoading,"active-value":"USE_IN","inactive-value":"USE_STOP"},nativeOn:{click:function(a){return e.switchStatus(t.row)}},model:{value:t.row.useStatus,callback:function(a){e.$set(t.row,"useStatus",a)},expression:"scope.row.useStatus"}})]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList}}),e._v(" "),a("el-dialog",{attrs:{title:e.form.conditionId?"修改触发条件":"新建触发条件",visible:e.dialogFormVisible,width:"500px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.codeListLoading||e.templateListLoading,expression:"codeListLoading||templateListLoading"}],ref:"form",attrs:{model:e.form,disabled:e.updateLoading,size:"small","label-width":"110px","element-loading-text":e.codeListLoading?"条件码列表加载中...":e.templateListLoading?"消息模板加载中...":"","element-loading-spinner":"el-icon-loading"}},[a("el-form-item",{attrs:{label:"条件名称",prop:"conditionName",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{max:15,message:"最多15个字符",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.conditionName,callback:function(t){e.$set(e.form,"conditionName",t)},expression:"form.conditionName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"条件描述",prop:"conditionDesc",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{max:50,message:"最多50个字符",trigger:["blur","change"]}]}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"条件描述"},model:{value:e.form.conditionDesc,callback:function(t){e.$set(e.form,"conditionDesc",t)},expression:"form.conditionDesc"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.form.conditionId,expression:"!form.conditionId"}],attrs:{label:"关联条件码",prop:"newConditionCode"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.form.newConditionCode,callback:function(t){e.$set(e.form,"newConditionCode",t)},expression:"form.newConditionCode"}},[e._v("生成新条件码")]),e._v(" "),a("el-radio",{attrs:{label:"0"},on:{change:e.getCodeList},model:{value:e.form.newConditionCode,callback:function(t){e.$set(e.form,"newConditionCode",t)},expression:"form.newConditionCode"}},[e._v("使用已有条件码")])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"0"===e.form.newConditionCode&&!e.codeListLoading,expression:"form.newConditionCode === '0'&&!codeListLoading"}],attrs:{label:"选择条件码",prop:"conditionCode",rules:{required:"0"===e.form.newConditionCode,message:"不为空",trigger:["blur","change"]}}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.conditionCode,callback:function(t){e.$set(e.form,"conditionCode",t)},expression:"form.conditionCode"}},e._l(e.codeList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"USE_IN"===e.form.useStatus,expression:"form.useStatus === 'USE_IN'"}],attrs:{label:"关联消息模板",prop:"relateTempletId",rules:{required:"USE_IN"===e.form.useStatus,message:"不为空",trigger:["blur","change"]}}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.relateTempletId,callback:function(t){e.$set(e.form,"relateTempletId",t)},expression:"form.relateTempletId"}},e._l(e.templateList,function(e,t){return a("el-option",{key:t,attrs:{label:e.title,value:e.templetId}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"useStatus"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.getTemplateList},model:{value:e.form.useStatus,callback:function(t){e.$set(e.form,"useStatus",t)},expression:"form.useStatus"}},[a("el-option",{attrs:{label:"启用",value:"USE_IN"}}),e._v(" "),a("el-option",{attrs:{label:"停用",value:"USE_STOP"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},Ud=a("VU/8")(Od,Ad,!1,null,null,null).exports,Vd={name:"blacklist",data:function(){return{loading:!1,keyWord:"",list:[],tableHeight:null}},computed:u()({},Object(sn.d)(["windowHeight"])),filters:{status2CH:function(e){return{0:"正常",1:"黑名单",2:"白名单"}[e]||"-"},type2CH:function(e){return{1:"URS风控"}[e]||"-"}},created:function(){this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(){var e=this;this.keyWord?this.loading||(this.loading=!0,this.$service(La,{params:{keyWord:this.keyWord}}).then(function(t){e.loading=!1,200===t.code?(e.list=t.data||[],e.$refs.elTable.bodyWrapper.scrollTop=0):e.$message.error(t.code+":"+t.message)},function(t){e.$message.error(qo()(t))})):this.list=[]},blackToWhite:function(e){var t=this;this.$set(e,"loading",!0),this.$service(Da,{params:{blackListId:e.blackListId}}).then(function(a){e.loading=!1,200===a.code?(e.delPop=!1,t.$message.success("添加白名单成功"),t.getList()):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})}},watch:{windowHeight:function(){this.setHeight()}}},qd={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"blacklist"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-input",{staticStyle:{width:"auto"},attrs:{placeholder:"用户ID/通行证","prefix-icon":"el-icon-search",clearable:"",size:"small"},model:{value:e.keyWord,callback:function(t){e.keyWord=t},expression:"keyWord"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.getList}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"userId",label:"用户ID",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"用户账号","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"昵称","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"registerTime",label:"注册时间",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"IP",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"listType",label:"黑名单类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("type2CH")(t.row.listType))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"黑名单状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("status2CH")(t.row.status))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"left"},model:{value:t.row.delPop,callback:function(a){e.$set(t.row,"delPop",a)},expression:"scope.row.delPop"}},[a("p",[e._v("确定添至白名单送500积分？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.blackToWhite(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",size:"small"},slot:"reference"},[e._v("添至白名单送500积分")])],1)]}}])})],1)],1)},staticRenderFns:[]},jd=a("VU/8")(Vd,qd,!1,null,null,null).exports,Qd={name:"TcmMatch",data:function(){return{activeTab:"1",loading:!1,matchStatus:on.tcmMatchStatus,sortRrders:["descending","ascending",null],list1:[],list0:[],matchClosing:!1,activeObj:{1:{listType:"filter",offset:0,limit:10,page:1,total:1,filters:{status:""},selection:[]},0:{offset:0,limit:10,page:1,total:1,filters:{status:""},selection:[]}},tableHeight:null}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getSwitch(),this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs["elTable"+e.activeTab].$el.offsetTop-63})},handleClickTabs:function(){this.getList(),this.setHeight()},handlerWeightSearch:function(){this.activeObj[1].filters.weight=this.activeObj[1].filters.weight.replace(/[^0-9]/g,"")},getList:function(e){var t=this;if(!this.loading){this.activeObj[this.activeTab].page=fh(e)?e:1,this.activeObj[this.activeTab].offset=(this.activeObj[this.activeTab].page-1)*this.activeObj[this.activeTab].limit;var a={offset:this.activeObj[this.activeTab].offset,limit:this.activeObj[this.activeTab].limit,bettingStatus:this.activeTab};if("search"===e){if(!this.activeObj[this.activeTab].filters.keyWord)return this.$message.warning("搜索条件不能为空");this.activeObj[this.activeTab].listType&&(this.activeObj[this.activeTab].listType="search"),a.keyWord=this.activeObj[this.activeTab].filters.keyWord}else this.activeObj[this.activeTab].listType&&(this.activeObj[this.activeTab].listType="filter"),this.activeObj[this.activeTab].filters.competitionName&&(a.competitionName=this.activeObj[this.activeTab].filters.competitionName),this.activeObj[this.activeTab].filters.startTime&&(a.startTime=this.activeObj[this.activeTab].filters.startTime),this.activeObj[this.activeTab].filters.endTime&&(a.endTime=this.activeObj[this.activeTab].filters.endTime),this.activeObj[this.activeTab].filters.status&&(a.status=this.activeObj[this.activeTab].filters.status),this.activeObj[this.activeTab].filters.weight&&(a.weight=this.activeObj[this.activeTab].filters.weight),this.activeObj[this.activeTab].filters.countOrder&&(a.countOrder=this.activeObj[this.activeTab].filters.countOrder);this.loading=!0,this.$service(Pa,{method:"post",data:a}).then(function(a){t.loading=!1,200===a.code?(t["list"+t.activeTab]=a.data.data||[],t.activeObj[t.activeTab].total=a.data.total||1,t.$refs["elTable"+t.activeTab].bodyWrapper.scrollTop=0,t.$refs["elTable"+t.activeTab].bodyWrapper.scrollLeft=0,"1"===t.activeTab&&"search"===e&&t.$refs.elTable1.clearSort()):t.$message.error(a.code+":"+a.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))})}},sortList:function(e,t,a){if(this.activeObj[this.activeTab].filters.countOrder=0,null!==e.order){var i="ascending"===e.order?1:"descending"===e.order?2:0,r=0;"userNum"===e.prop&&(r=2),"totalFlowAmount"===e.prop&&(r=4),this.activeObj[this.activeTab].filters.countOrder=i+r}this.getList("sort")},handleSelectionChange:function(e){this.activeObj[this.activeTab].selection=e},getSwitch:function(){var e=this;this.$service(Ea).then(function(t){200===t.code&&(e.matchClosing=t.data)})},setSwitch:function(){var e=this;this.$service(Ra,{params:{switchStatus:!this.matchClosing}}).then(function(t){200===t.code?(e.$message.success("一键"+(e.matchClosing?"开":"封")+"盘成功"),e.matchClosing=!e.matchClosing):e.$message.error(t.code+":"+t.message)},function(t){t&&(e.loading=!1,e.$message.error(qo()(t)))})},changeWeight:function(e){var t=this;this.$prompt("","修改权重",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,3}$/,inputErrorMessage:"0-999之间",closeOnClickModal:!1,inputValue:e.weight}).then(function(a){var i=a.value;t.$service(za,{params:{tcmEventId:e.tcmEventId,weight:i}}).then(function(a){200===a.code?(e.weight=i,t.$message.success("权重修改成功！")):t.$message.error(a.code+":"+a.message)},function(e){t.$message.error(qo()(e))})})},setChoiceness:function(e){var t=this;this.$set(e,"loading",!0),this.$service(Ha,{method:"post",data:{choiceness:e.choiceness?0:1,tcmEventId:e.tcmEventId}}).then(function(a){e.loading=!1,200===a.code?(e.choicenessPop=!1,e.choiceness=e.choiceness?0:1):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})},setBet:function(e){var t=this;this.$set(e,"loading",!0),this.$service(Ma,{method:"post",data:{allowBetting:e.allowBetting?0:1,tcmEventId:e.tcmEventId}}).then(function(a){e.loading=!1,200===a.code?(e.betPop=!1,e.allowBetting=e.allowBetting?0:1):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})},matchUpdate:function(){var e=this;if(0===this.activeObj[this.activeTab].selection.length)return this.$message.warning("您还未选中比赛，请先选择比赛！");this.$confirm("确定将选中的比赛，"+("1"===this.activeTab?"移出":"移入")+"竞猜赛事列表？","",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var t=[];e.activeObj[e.activeTab].selection.forEach(function(e){t.push(e.tcmEventId)}),e.$service(Fa,{params:{tcmEventId:t.join(","),betting:"1"===e.activeTab?0:1}}).then(function(t){200===t.code?(e.getList(e.activeObj[e.activeTab].page),e.$message.success(("1"===e.activeTab?"移出":"移入")+"成功")):e.$message.error(t.code+":"+t.message)},function(t){e.$message.error(qo()(t))})})},setExtraOdd:function(){var e=this;if(0===this.activeObj[this.activeTab].selection.length)return this.$message.warning("您还未选中比赛，请先选择比赛！");this.$prompt("设置加奖百分比","加奖",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^([1-9]|1[0-9]|20)$/,inputErrorMessage:"1-20之间",closeOnClickModal:!1,inputValue:5}).then(function(t){var a=t.value;e.$confirm("确认为勾选的赛事进行加奖"+a+"%？","",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var t=[];e.activeObj[e.activeTab].selection.forEach(function(e){t.push(e.tcmEventId)}),e.$service(Na,{method:"post",data:{tcmEventId:t.join(","),extraOdds:a}}).then(function(t){200===t.code?(e.getList(e.activeObj[e.activeTab].page),e.$message.success("加奖成功")):e.$message.error(t.code+":"+t.message)},function(t){e.$message.error(qo()(t))})})})}},watch:{windowHeight:function(){this.setHeight()}}},Wd={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tcm-match-list"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-input",{staticStyle:{width:"auto"},attrs:{placeholder:"球队名/球队ID/赛事ID/竞猜赛事ID","prefix-icon":"el-icon-search",clearable:"",size:"mini"},model:{value:e.activeObj[e.activeTab].filters.keyWord,callback:function(t){e.$set(e.activeObj[e.activeTab].filters,"keyWord",t)},expression:"activeObj[activeTab].filters.keyWord"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.getList("search")}}},[e._v("搜索")])],1)]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"竞猜池比赛",name:"1",disabled:e.loading}}),e._v(" "),a("el-tab-pane",{attrs:{label:"非竞猜池比赛",name:"0",disabled:e.loading}})],1),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.activeObj[e.activeTab].filters,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"联赛"}},[a("el-input",{staticStyle:{width:"auto"},attrs:{placeholder:"联赛名",clearable:""},model:{value:e.activeObj[e.activeTab].filters.competitionName,callback:function(t){e.$set(e.activeObj[e.activeTab].filters,"competitionName",t)},expression:"activeObj[activeTab].filters.competitionName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发布时间"}},[a("el-date-picker",{staticStyle:{width:"135px"},attrs:{type:"date",editable:"false",width:"100",placeholder:"开始日期","value-format":"yyyy-MM-dd 00:00:00","picker-options":{disabledDate:function(t){return 0!==new Date(e.activeObj[e.activeTab].filters.endTime).getTime()&&t.getTime()>new Date(e.activeObj[e.activeTab].filters.endTime).getTime()}}},model:{value:e.activeObj[e.activeTab].filters.startTime,callback:function(t){e.$set(e.activeObj[e.activeTab].filters,"startTime",t)},expression:"activeObj[activeTab].filters.startTime"}}),e._v("\n      ~\n      "),a("el-date-picker",{staticStyle:{width:"135px"},attrs:{type:"date",editable:"false",placeholder:"结束日期","value-format":"yyyy-MM-dd 23:59:59","picker-options":{disabledDate:function(t){return 0!==new Date(e.activeObj[e.activeTab].filters.startTime).getTime()&&t.getTime()<new Date(e.activeObj[e.activeTab].filters.startTime).getTime()}}},model:{value:e.activeObj[e.activeTab].filters.endTime,callback:function(t){e.$set(e.activeObj[e.activeTab].filters,"endTime",t)},expression:"activeObj[activeTab].filters.endTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{staticStyle:{width:"105px"},model:{value:e.activeObj[e.activeTab].filters.status,callback:function(t){e.$set(e.activeObj[e.activeTab].filters,"status",t)},expression:"activeObj[activeTab].filters.status"}},[a("el-option",{attrs:{label:"全部",value:""}},[e._v("全部")]),e._v(" "),e._l(e.matchStatus,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===e.activeTab,expression:"activeTab==='1'"}],attrs:{label:"权重"}},[a("el-input",{staticStyle:{width:"102px"},attrs:{placeholder:"0~999",max:"999",min:"0",clearable:""},nativeOn:{keyup:function(t){return e.handlerWeightSearch(t)}},model:{value:e.activeObj[e.activeTab].filters.weight,callback:function(t){e.$set(e.activeObj[e.activeTab].filters,"weight",t)},expression:"activeObj[activeTab].filters.weight"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.getList()}}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.matchUpdate()}}},[e._v(e._s("1"===e.activeTab?"移出竞猜池":"移入竞猜池"))]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"1"===e.activeTab,expression:"activeTab==='1'"}],attrs:{type:"primary",plain:e.matchClosing,size:"mini"},on:{click:function(t){return e.setSwitch()}}},[e._v("一键"+e._s(e.matchClosing?"开":"封")+"盘")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"1"===e.activeTab,expression:"activeTab==='1'"}],attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.setExtraOdd()}}},[e._v("设置竞猜加奖")])],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"1"===e.activeTab,expression:"activeTab==='1'"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable1",attrs:{data:e.list1,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight},on:{"sort-change":e.sortList,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tcmEventId",label:"竞猜赛事ID",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"TcmMatchDetail",params:{id:t.row.tcmEventId}}}},[e._v(e._s(t.row.tcmEventId))]),e._v(" "),t.row.choiceness?a("el-tag",{staticStyle:{color:"#fff"},attrs:{size:"mini",color:"#e62121"}},[e._v("精")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"matchInfoId",label:"赛事ID(老)",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"competitionName",label:"联赛","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelIds",label:"赛事对阵","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"TcmMatchDetail",params:{id:t.row.tcmEventId}}}},[e._v(e._s(t.row.homeName+" VS "+t.row.awayName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"比分",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(2===t.row.status||3===t.row.status?t.row.homeTeamScore+" - "+t.row.awayTeamScore:"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"比赛时间",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.eventDay+" "+t.row.eventTime)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"赔率",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.selectionList&&t.row.selectionList[0]?t.row.selectionList[0].selectionName+t.row.selectionList[0].backOdds:"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"赔率",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.selectionList&&t.row.selectionList[1]?t.row.selectionList[1].selectionName+t.row.selectionList[1].backOdds:"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"赔率",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.selectionList&&t.row.selectionList[2]?t.row.selectionList[2].selectionName+t.row.selectionList[2].backOdds:"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"filter"===e.activeObj[e.activeTab].listType&&"custom","sort-orders":e.sortRrders,prop:"totalNum",label:"总下单量",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"filter"===e.activeObj[e.activeTab].listType&&"custom","sort-orders":e.sortRrders,prop:"userNum",label:"总下单用户数",width:"130"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"filter"===e.activeObj[e.activeTab].listType&&"custom","sort-orders":e.sortRrders,prop:"totalFlowAmount",label:"总流水(积分+N币)",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"netprofitorloss",label:"红彩盈亏(积分+N币)",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"risk",label:"红彩盈亏风险",width:"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"extraOdds",label:"加奖百分比",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.extraOdds))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("tcmMatchStatus2CH")(t.row.status))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"weight",label:"权重",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.changeWeight(t.row)}}},[e._v(e._s(t.row.weight))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"left"},model:{value:t.row.choicenessPop,callback:function(a){e.$set(t.row,"choicenessPop",a)},expression:"scope.row.choicenessPop"}},[a("p",[e._v("确定"+e._s(t.row.choiceness?"取消精选":"设置精选")+"？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.choicenessPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.setChoiceness(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",plain:t.row.choiceness,size:"mini"},slot:"reference"},[e._v(e._s(t.row.choiceness?"取消精选":"设置精选"))])],1),e._v(" "),a("el-popover",{attrs:{placement:"left",width:"150"},model:{value:t.row.betPop,callback:function(a){e.$set(t.row,"betPop",a)},expression:"scope.row.betPop"}},[a("p",[e._v("确定"+e._s(t.row.allowBetting?"开":"封")+"盘？"+e._s(t.row.allowBetting?"开":"封")+"盘后，该比赛"+e._s(t.row.allowBetting?"可":"不可")+"在客户端提交投注订单！")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.betPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.setBet(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"danger",plain:t.row.allowBetting,size:"mini"},slot:"reference"},[e._v(e._s(t.row.allowBetting?"开":"封"))])],1)]}}])})],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"0"===e.activeTab,expression:"activeTab==='0'"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable0",attrs:{data:e.list0,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tcmEventId",label:"竞猜赛事ID",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"TcmMatchDetail",params:{id:t.row.tcmEventId}}}},[e._v(e._s(t.row.tcmEventId))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"matchInfoId",label:"赛事ID(老)",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"competitionName",label:"联赛","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{label:"赛事对阵","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"TcmMatchDetail",params:{id:t.row.tcmEventId}}}},[e._v(e._s(t.row.homeName+" VS "+t.row.awayName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"比分",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(2===t.row.status||3===t.row.status?t.row.homeTeamScore+" - "+t.row.awayTeamScore:"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"赔率",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.selectionList&&t.row.selectionList[0]?t.row.selectionList[0].selectionName+t.row.selectionList[0].backOdds:"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"赔率",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.selectionList&&t.row.selectionList[1]?t.row.selectionList[1].selectionName+t.row.selectionList[1].backOdds:"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"赔率",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.selectionList&&t.row.selectionList[2]?t.row.selectionList[2].selectionName+t.row.selectionList[2].backOdds:"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"比赛时间",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.eventDay+" "+t.row.eventTime)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("tcmMatchStatus2CH")(t.row.status))+"\n      ")]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.activeObj[e.activeTab].page,total:e.activeObj[e.activeTab].total,"page-size":e.activeObj[e.activeTab].limit},on:{"current-change":e.getList,"update:currentPage":function(t){return e.$set(e.activeObj[e.activeTab],"page",t)},"update:current-page":function(t){return e.$set(e.activeObj[e.activeTab],"page",t)}}})],1)},staticRenderFns:[]},Bd=a("VU/8")(Qd,Wd,!1,null,null,null).exports,Gd={name:"TcmMatchDetail",data:function(){return{loading:!1,loadingType:!1,matchInfo:{},filters:{playType:""},tcmTypeList:[]}},created:function(){this.getDetail(this.$route.params.id)},methods:{getDetail:function(e){var t=this;if(!this.loading&&!this.loadingType){var a={tcmEventId:e};this.filters.playType?(this.loadingType=!0,a.playType=this.filters.playType):this.loading=!0,this.$service(Oa,{method:"get",params:a}).then(function(e){t.loadingType=!1,t.loading=!1,200===e.code?(t.matchInfo=e.data,!a.playType&&e.data.marketListVo&&e.data.marketListVo.length>0&&e.data.marketListVo.forEach(function(e){t.tcmTypeList.push({playType:e.playType,playName:e.playName})})):t.$message.error(e.code+":"+e.message)},function(e){t.loadingType=!1,t.loading=!1,t.$message.error(qo()(e))})}}},beforeRouteUpdate:function(e,t,a){this.getDetail(e.params.id),a()}},Yd={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"tcm-match-detail"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/tcmmatch"}}},[e._v("竞猜赛事列表")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1)]),e._v(" "),e.matchInfo&&e.matchInfo.tcmEventId?a("table",{staticClass:"match-table"},[a("tr",[a("td",{staticClass:"bg-fa"},[e._v("联赛：")]),e._v(" "),a("td",[e._v(e._s(e.matchInfo.competitionName))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("赛事ID：")]),e._v(" "),a("td",[e._v(e._s(e.matchInfo.tcmEventId))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("比赛时间：")]),e._v(" "),a("td",[e._v(e._s(e.matchInfo.eventDay+" "+e.matchInfo.eventTime))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("比赛对阵：")]),e._v(" "),a("td",[e._v(e._s(2===e.matchInfo.status||3===e.matchInfo.status?e.matchInfo.homeName+" "+e.matchInfo.homeTeamScore+"-"+e.matchInfo.awayTeamScore+" "+e.matchInfo.awayName:e.matchInfo.homeName+" VS "+e.matchInfo.awayName))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("赛事状态：")]),e._v(" "),a("td",[e._v(e._s(e._f("tcmMatchStatus2CH")(e.matchInfo.status)))])]),e._v(" "),a("tr",[a("td",{staticClass:"bg-fa"},[e._v("总投注用户数：")]),e._v(" "),a("td",{staticClass:"text-red",attrs:{colspan:"2"}},[a("b",[e._v(e._s(e.matchInfo.totalUserNum))])]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("总投注下单数：")]),e._v(" "),a("td",{staticClass:"text-red",attrs:{colspan:"2"}},[a("b",[e._v(e._s(e.matchInfo.totalNum))])]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("总投注金额：")]),e._v(" "),a("td",{staticClass:"text-red"},[a("b",[e._v(e._s(e.matchInfo.totalFlowAmount))])]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("总盈亏金额：")]),e._v(" "),a("td",{staticClass:"text-red"},[a("b",[e._v(e._s(e.matchInfo.totalNetprofitorloss))])])])]):e._e(),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.matchInfo&&e.matchInfo.tcmEventId,expression:"matchInfo && matchInfo.tcmEventId"}],attrs:{inline:!0,model:e.filters,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"各玩法投注情况"}},[a("el-select",{on:{change:function(t){return e.getDetail(e.$route.params.id)}},model:{value:e.filters.playType,callback:function(t){e.$set(e.filters,"playType",t)},expression:"filters.playType"}},[a("el-option",{attrs:{label:"全部",value:""}},[e._v("全部")]),e._v(" "),e._l(e.tcmTypeList,function(e){return a("el-option",{key:e.playType,attrs:{label:e.playName,value:e.playType}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"总投注用户数"}},[a("span",{staticClass:"text-red"},[a("b",[e._v(e._s(e.matchInfo.playTypeUserNum))])])]),e._v(" "),a("el-form-item",{attrs:{label:"总投注下单数"}},[a("span",{staticClass:"text-red"},[a("b",[e._v(e._s(e.matchInfo.playTypeNum))])])]),e._v(" "),a("el-form-item",{attrs:{label:"总投注金额"}},[a("span",{staticClass:"text-red"},[a("b",[e._v(e._s(e.matchInfo.playTypeFlowAmount))])])]),e._v(" "),a("el-form-item",{attrs:{label:"总盈亏金额"}},[a("span",{staticClass:"text-red"},[a("b",[e._v(e._s(e.matchInfo.playTypeNetprofitorloss))])])])],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingType,expression:"loadingType"}],staticClass:"playType"},[a("table",{staticClass:"playType-table"},[e._m(0),e._v(" "),e._m(1),e._v(" "),e._l(e.matchInfo.marketListVo,function(t,i){return a("tbody",{key:i},e._l(t.selectionList,function(i,r){return a("tr",{key:r},[0===r?a("td",{attrs:{rowspan:t.selectionList.length}},[e._v(e._s(t.playName))]):e._e(),e._v(" "),a("td",[e._v(e._s(i.selectionName))]),e._v(" "),a("td",[e._v(e._s(i.backOdds))]),e._v(" "),a("td",[e._v(e._s(i.userNum))]),e._v(" "),a("td",[e._v(e._s(i.totalNum))]),e._v(" "),a("td",[e._v(e._s(i.totalFlowAmount))]),e._v(" "),a("td",[e._v(e._s(i.totalCredit))]),e._v(" "),a("td",[e._v(e._s(i.totalNCoin))]),e._v(" "),a("td",[e._v(e._s(i.risk||"-"))]),e._v(" "),a("td",[e._v(e._s(i.netprofitorloss))])])}),0)}),e._v(" "),e.matchInfo.marketListVo&&0!==e.matchInfo.marketListVo.length||e.loading||e.loadingType?e._e():a("tbody",[e._m(2)])],2)])],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("colgroup",[a("col",{attrs:{width:"10%"}}),e._v(" "),a("col",{attrs:{width:"10%"}}),e._v(" "),a("col",{attrs:{width:"10%"}}),e._v(" "),a("col",{attrs:{width:"10%"}}),e._v(" "),a("col",{attrs:{width:"10%"}}),e._v(" "),a("col",{attrs:{width:"10%"}}),e._v(" "),a("col",{attrs:{width:"10%"}}),e._v(" "),a("col",{attrs:{width:"10%"}}),e._v(" "),a("col",{attrs:{width:"10%"}}),e._v(" "),a("col",{attrs:{width:"10%"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("玩法")]),e._v(" "),a("th",[e._v("选项")]),e._v(" "),a("th",[e._v("赔率")]),e._v(" "),a("th",[e._v("总投注用户数")]),e._v(" "),a("th",[e._v("总投注下单量")]),e._v(" "),a("th",[e._v("总投注金额(积分+N币)")]),e._v(" "),a("th",[e._v("总投注积分")]),e._v(" "),a("th",[e._v("总投注N币")]),e._v(" "),a("th",[e._v("红彩盈亏风险")]),e._v(" "),a("th",[e._v("红彩盈亏金额")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"10"}},[this._v("暂无数据")])])}]};var Xd=a("VU/8")(Gd,Yd,!1,function(e){a("io1K")},null,null).exports,Kd=a("d7EF"),Jd=a.n(Kd),Zd=function(e){var t=Jd()(e,2),a=t[0],i=t[1];return ph("goodsType",a,"-",i)},eu=function(e){var t=Jd()(e,2),a=t[0],i=t[1];return ph("payTerminal",parseInt(a),"-",i)},tu=function(e){return ph("urlRedirectType",e,"-")},au=function(e){return ph("articleStatus",e,"-")},iu=function(e){return ph("matchStatus",e,"-")},ru=function(e){return ph("tcmMatchStatus",e,"-")},ou=function(e){return ph("tcmMallType",e,"-")},nu=function(e){return ph("tcmMallOrderStatus",e,"-")},su=function(e){return ph("tcmOrderStatus",e,"-")},lu=function(e){return ph("rechargeOrderStatus",parseInt(e),"-")},cu=function(e){return ph("productOrderStatus",parseInt(e),"-")},du=function(e){var t=Jd()(e,2),a=t[0],i=t[1];return ph("productPayType",parseInt(a),"-",i)},uu=function(e){return ph("threadType",e,"-")},mu=function(e,t){return fh(e)?Math.round(1e4*e)/100+"%":t||""},pu=function(e){var t=Jd()(e,3),a=t[0],i=t[1],r=t[2];return gh(a,i,r)},fu=function(e){var t=Jd()(e,1)[0];return ph("payChannel",t,"-")},hu=function(e){var t=Jd()(e,1)[0];return ph("accountType",t,"-")},gu=function(e){var t=Jd()(e,1)[0];return ph("region",t,"-")},vu=function(e){return ph("questionStatus",e,"-")},bu=function(e){return ph("couponType",e,"-")},_u=function(e){return ph("vipLevel",e,"-")},yu={name:"appleFlow",data:function(){return{appTab:"0",activeTab:"2",loading:!1,list:[],pageIndex:1,pageSize:25,pageCount:1,tableHeight:null,logLoading:!1,logData:[],imgVisible:!1,imgFull:"",imgWidth:"100px",dialogFormVisible:!1,form:{imgUrls:[]},updateLoading:!1,orderPreview:"",previewLoading:!1}},computed:u()({operationAuth:function(){return mh([35,36],this.$store.state.userInfo.roleList)},supervisorAuth:function(){return mh([33,34],this.$store.state.userInfo.roleList)}},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},timeRule:function(e,t,a){t?this.$refs.endTime.value?a():a(new Error("预计掉单结束时间不为空")):a(new Error("预计掉单开始时间不为空"))},handleClickTabs:function(){this.list=[],this.getList(),this.setHeight()},getList:function(e){var t=this;this.loading||(this.loading=!0,this.pageIndex=e||1,this.$service(Aa[this.appTab].list,{params:{pageIndex:this.pageIndex,pageSize:this.pageSize,type:this.activeTab}}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.records||[],t.pageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){t.loading=!1,t.$message.error(qo()(e))}))},getLogList:function(e){var t=this;this.logData=[],this.logLoading=!0,this.$service(Aa[this.appTab].log,{params:{appleOrderFlowId:e}}).then(function(e){t.logLoading=!1,200===e.code&&(t.logData=e.data)},function(e){e&&(t.logLoading=!1)})},appleFlowPop:function(){var e=this;this.form={imgUrls:[]},this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.flowForm.clearValidate()})},showImg:function(e){var t=this,a=new Image;a.src=e,a.onload=function(){t.imgWidth=a.width>1e3?"1000px":a.width+"px",t.imgVisible=!0,t.imgFull=e}},beforeImgUpload:function(e){if(e.size/1024/1024>5)return this.$message.error("上传头像图片大小不能超过 5MB!"),!1},uploadImg:function(e){var t=this;En(e.file,"thread").then(function(e){t.form.imgUrls.push({url:e})},function(e){e&&t.$message.error("上传图片失败，请稍后再传！")})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a=[];t.form.imgUrls.forEach(function(e){a.push(e.url)});var i={account:t.form.account,nickname:t.form.nickname,appleOrderId:t.form.appleOrderId,probablyTradeId:t.form.probablyTradeId,probablyTime:t.form.startTime+"~"+t.form.endTime,"imgUrls[]":a.join(",")};t.updateLoading=!0,t.$service(Aa[t.appTab].add,{method:"post",data:i}).then(function(e){t.updateLoading=!1,200===e.code?(t.dialogFormVisible=!1,t.activeTab="2",t.getList(),t.$message.success("添加成功")):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}})},removeImg:function(e,t){this.form.imgUrls=t},asyncOrder:function(e){return this.$service(Aa[this.appTab].searchTradeId,{method:"post",data:{query:e}}).then(function(e){return 200===e.code&&e.data.length>0?Bo.a.resolve(e.data):Bo.a.reject(e.message)},function(e){return Bo.a.reject(e)})},previewOrder:function(){var e=this;this.form.probablyTradeId&&!this.previewLoading&&(this.orderPreview="",this.previewLoading=!0,this.asyncOrder(this.form.probablyTradeId).then(function(t){e.previewLoading=!1,e.orderPreview="订单"+lu(t[0].tradeStatus)},function(){e.previewLoading=!1,e.orderPreview="订单不存在"}))},rejectedSubmit:function(e){var t=this,a={0:Aa[this.appTab].leaderCheck,1:Aa[this.appTab].devCheck,2:Aa[this.appTab].finalCheck};this.$set(e,"loading",!0);var i={appleOrderFlowId:e.appleOrderFlowId,status:1};e.rejectedContent&&(i.remark=e.rejectedContent.replace(/\r|\n/g,"")),this.$service(a[e.nodeStatus],{params:i}).then(function(a){e.loading=!1,200===a.code?(e.rejectedPop=!1,t.$message.success("驳回成功"),t.getList(t.pageIndex)):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})},resolveNativeClick:function(e){var t=this;0===e.nodeStatus&&(e.resolveContent=""),1===e.nodeStatus&&(this.$set(e,"orderId",""),this.$set(e,"tradeList",[])),2===e.nodeStatus&&(this.$set(e,"tradeList",[]),this.$set(e,"tradeLoading",!0),this.getFinalOrder(e.tradeId).then(function(a){t.$set(e,"tradeLoading",!1),e.tradeList.push(a)},function(a){t.$set(e,"tradeLoading",!1),t.$message.error(a)}))},getFinalOrder:function(e){return this.$service(Aa[this.appTab].finalTradeId,{params:{tradeId:e}}).then(function(e){return 200===e.code?Bo.a.resolve(e.data):Bo.a.reject(e.message)},function(e){return Bo.a.reject(qo()(e))})},leaderCheckSubmit:function(e){var t=this;this.$set(e,"loading",!0);var a={appleOrderFlowId:e.appleOrderFlowId,status:0};e.resolveContent&&(a.remark=e.resolveContent.replace(/\r|\n/g,"")),this.$service(Aa[this.appTab].leaderCheck,{params:a}).then(function(a){e.loading=!1,200===a.code?(e.resolvePop=!1,t.$message.success("审批成功"),t.getList(t.pageIndex)):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})},popSearchOrder:function(e){var t=this;e.orderId&&!e.tradeLoading&&(this.$set(e,"tradeLoading",!0),e.tradeList=[],this.asyncOrder(e.orderId).then(function(a){t.$set(e,"tradeLoading",!1),e.tradeList=a}).catch(function(a){a&&t.$set(e,"tradeLoading",!1)}))},devFinalSubmit:function(e,t){var a=this;this.$prompt("","确认为掉单",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:"备注，不超过30字"}).then(function(i){var r=i.value,o={appleOrderFlowId:e.appleOrderFlowId,remark:r,status:0};1===e.nodeStatus&&(o.channelTradeId=t),a.$set(e,"loading",!0),a.$service(1===e.nodeStatus?Aa[a.appTab].devCheck:Aa[a.appTab].finalCheck,{params:o}).then(function(t){e.loading=!1,200===t.code?(e.resolvePop=!1,a.$message.success("确认掉单成功"),a.getList(a.pageIndex)):a.$message.error(t.code+":"+t.message)},function(t){e.loading=!1,a.$message.error(qo()(t))})})},tradeNativeClick:function(e){var t=this;this.$set(e,"tradeList",[]),this.$set(e,"tradeLoading",!0),this.getFinalOrder(e.tradeId).then(function(a){t.$set(e,"tradeLoading",!1),e.tradeList.push(a)},function(a){t.$set(e,"tradeLoading",!1),t.$message.error(a)})}},watch:{windowHeight:function(){this.setHeight()}}},wu={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"apple-flow"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[e.operationAuth?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.appleFlowPop()}}},[e._v("新建掉单")]):e._e()],1)]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.appTab,callback:function(t){e.appTab=t},expression:"appTab"}},[a("el-tab-pane",{attrs:{label:"红彩",name:"0",disabled:e.loading}}),e._v(" "),a("el-tab-pane",{attrs:{label:"精准比分",name:"1",disabled:e.loading}})],1),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"待处理",name:"2",disabled:e.loading}}),e._v(" "),a("el-tab-pane",{attrs:{label:"已完结",name:"1",disabled:e.loading}})],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],key:"aTable",ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"appleOrderFlowId",label:"流程ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"用户账号","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"用户昵称","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"probablyTradeId",label:"相关订单",width:"170"}}),e._v(" "),a("el-table-column",{attrs:{prop:"appleOrderId",label:"苹果订单",width:"170"}}),e._v(" "),a("el-table-column",{attrs:{prop:"probablyTime",label:"预计掉单时间",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{label:"截图证明",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.screenshot.split("||"),function(t,i){return a("img",{key:i,staticStyle:{cursor:"pointer"},attrs:{src:t+"?imageView&thumbnail=72y36&quality=85"},on:{click:function(a){return e.showImg(t)}}})})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"提出时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"nodeStatusDesc",label:"当前节点",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s("2"===e.activeTab?t.row.nodeStatusDesc:"完结")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"2"===e.activeTab?110:170},scopedSlots:e._u([{key:"header",fn:function(t){return[e._v("\n        "+e._s("2"===e.activeTab?"下一节点":"确认掉单订单")+"\n      ")]}},{key:"default",fn:function(t){return["2"===e.activeTab?a("span",[e._v(e._s(t.row.nextNodeStatusDesc))]):e._e(),e._v(" "),"1"===e.activeTab&&t.row.tradeId?a("el-popover",{attrs:{placement:"left",width:"680"},model:{value:t.row.tradePop,callback:function(a){e.$set(t.row,"tradePop",a)},expression:"scope.row.tradePop"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.row.tradeLoading,expression:"scope.row.tradeLoading"}],attrs:{data:t.row.tradeList,size:"mini"}},[a("el-table-column",{attrs:{width:"90",property:"orderId",label:"订单ID"}}),e._v(" "),a("el-table-column",{attrs:{width:"90",property:"tradeId",label:"交易ID"}}),e._v(" "),a("el-table-column",{attrs:{width:"90",property:"createTime",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n              ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{width:"70",property:"tradeStatus",label:"支付状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("rechargeOrder2CH")(t.row.tradeStatus))+"\n              ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{width:"100",property:"account",label:"用户账号"}}),e._v(" "),a("el-table-column",{attrs:{width:"70",property:"tradePrice",label:"订单价格"}}),e._v(" "),a("el-table-column",{attrs:{width:"70",property:"channelName",label:"支付通道"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("payTerminal2CH")([t.row.payTerminal,e.appTab]))+"\n              ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{width:"100",property:"loginName",label:"线上确认人"}})],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"text",size:"small"},nativeOn:{click:function(a){return e.tradeNativeClick(t.row)}},slot:"reference"},[e._v(e._s(t.row.tradeId))])],1):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"===e.activeTab&&e.supervisorAuth?a("el-popover",{attrs:{placement:"left",width:0===t.row.nodeStatus?250:680},model:{value:t.row.resolvePop,callback:function(a){e.$set(t.row,"resolvePop",a)},expression:"scope.row.resolvePop"}},[0===t.row.nodeStatus?a("p",[e._v("确认审批")]):e._e(),e._v(" "),0===t.row.nodeStatus?a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"添加备注，最多30字",maxlength:"30"},model:{value:t.row.resolveContent,callback:function(a){e.$set(t.row,"resolveContent",a)},expression:"scope.row.resolveContent"}}):e._e(),e._v(" "),0===t.row.nodeStatus?a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.resolvePop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.leaderCheckSubmit(t.row)}}},[e._v("确定")])],1):e._e(),e._v(" "),1===t.row.nodeStatus?a("div",[a("el-input",{staticStyle:{width:"180px"},attrs:{size:"mini",placeholder:"通行证、tradeId或orderId"},model:{value:t.row.orderId,callback:function(a){e.$set(t.row,"orderId",a)},expression:"scope.row.orderId"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.searchOrderloading},on:{click:function(a){return e.popSearchOrder(t.row)}}},[e._v("搜索")])],1):e._e(),e._v(" "),0!==t.row.nodeStatus?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.row.tradeLoading,expression:"scope.row.tradeLoading"}],attrs:{data:t.row.tradeList,size:"mini"}},[a("el-table-column",{attrs:{width:"90",property:"orderId",label:"订单ID"}}),e._v(" "),a("el-table-column",{attrs:{width:"90",property:"tradeId",label:"交易ID"}}),e._v(" "),a("el-table-column",{attrs:{width:"90",property:"createTime",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n              ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{width:"70",property:"tradeStatus",label:"支付状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("rechargeOrder2CH")(t.row.tradeStatus))+"\n              ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{width:"100",property:"account",label:"用户账号"}}),e._v(" "),a("el-table-column",{attrs:{width:"70",property:"tradePrice",label:"订单价格"}}),e._v(" "),a("el-table-column",{attrs:{width:"70",property:"channelName",label:"支付通道"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("payTerminal2CH")([t.row.payTerminal,e.appTab]))+"\n              ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{width:"100",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(i){return[a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.devFinalSubmit(t.row,i.row.channelTradeId)}}},[e._v(e._s(1===t.row.nodeStatus?"确认掉单":"线上确认"))])]}}],null,!0)})],1):e._e(),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",icon:"el-icon-check",circle:"",size:"small"},nativeOn:{click:function(a){return e.resolveNativeClick(t.row)}},slot:"reference"})],1):e._e(),e._v(" "),"2"===e.activeTab&&e.supervisorAuth?a("el-popover",{attrs:{placement:"left",width:"250"},model:{value:t.row.rejectedPop,callback:function(a){e.$set(t.row,"rejectedPop",a)},expression:"scope.row.rejectedPop"}},[a("p",[e._v("不予通过")]),e._v(" "),a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"添加备注，最多30字",maxlength:"30"},model:{value:t.row.rejectedContent,callback:function(a){e.$set(t.row,"rejectedContent",a)},expression:"scope.row.rejectedContent"}}),e._v(" "),a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.rejectedPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.rejectedSubmit(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-close",circle:"",size:"small"},nativeOn:{click:function(e){t.row.rejectedContent=""}},slot:"reference"})],1):e._e(),e._v(" "),e._v("\n        "+e._s("2"===e.activeTab?"":"归档")+"\n        "),a("el-popover",{attrs:{placement:"left-end",width:"530",trigger:"click"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.logLoading,expression:"logLoading"}],attrs:{data:e.logData,size:"mini"}},[a("el-table-column",{attrs:{width:"100",property:"nodeStatusDesc",label:"节点"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"60",property:"adminAccount",label:"操作人"}}),e._v(" "),a("el-table-column",{attrs:{width:"100",property:"nextNodeStatusDesc",label:"下一节点"}}),e._v(" "),a("el-table-column",{attrs:{width:"140",property:"address",label:"操作时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("dateFormat")([t.row.updateTime,"yyyy-MM-dd hh:mm:ss"]))+"\n              ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{width:"50",property:"address",label:"结果"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(0===t.row.nodeStatus?"提交":t.row.status?"驳回":"批准")+"\n              ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{width:"80",property:"remark",label:"备注"}})],1),e._v(" "),a("el-button",{staticStyle:{padding:"5px"},attrs:{slot:"reference",size:"mini",type:"info"},nativeOn:{click:function(a){return e.getLogList(t.row.appleOrderFlowId)}},slot:"reference"},[e._v("日志")])],1)]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList}}),e._v(" "),a("el-dialog",{attrs:{visible:e.imgVisible,center:"",width:e.imgWidth},on:{"update:visible":function(t){e.imgVisible=t}}},[e.imgFull?a("div",{staticClass:"img-full"},[a("img",{staticStyle:{"max-width":"100%",display:"block"},attrs:{src:e.imgFull}})]):e._e()]),e._v(" "),a("el-dialog",{attrs:{title:"新建掉单","close-on-click-modal":!1,visible:e.dialogFormVisible,width:"540px",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"flowForm",attrs:{model:e.form,disabled:e.updateLoading,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:"用户账号",prop:"account",rules:{required:!0,message:"必填",trigger:["blur","change"]}}},[a("el-input",{attrs:{maxlength:"99",autocomplete:"off"},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account",t)},expression:"form.account"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户昵称",prop:"nickname",rules:{required:!0,message:"必填",trigger:["blur","change"]}}},[a("el-input",{attrs:{maxlength:"20",autocomplete:"off"},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"苹果掉单ID",prop:"appleOrderId",rules:[{required:!0,message:"必填",trigger:["blur","change"]}]}},[a("el-input",{attrs:{maxlength:"30",autocomplete:"off"},model:{value:e.form.appleOrderId,callback:function(t){e.$set(e.form,"appleOrderId",t)},expression:"form.appleOrderId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"红彩掉单ID",prop:"probablyTradeId",rules:[{required:!0,message:"必填",trigger:["blur","change"]},{pattern:/^\d+$/,message:"掉单ID必须为数字",trigger:["blur","change"]}]}},[a("el-input",{attrs:{maxlength:"30",autocomplete:"off","suffix-icon":e.previewLoading?"el-icon-loading":""},on:{change:e.previewOrder},model:{value:e.form.probablyTradeId,callback:function(t){e.$set(e.form,"probablyTradeId",t)},expression:"form.probablyTradeId"}})],1),e._v(" "),e.orderPreview?a("el-form-item",[a("span",[e._v(e._s(e.orderPreview))])]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"预计掉单时间",prop:"startTime",rules:[{validator:e.timeRule,trigger:["blur","change"]}]}},[a("el-date-picker",{staticStyle:{width:"185px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择日期","picker-options":{disabledDate:function(t){return 0!==new Date(e.form.endTime).getTime()&&t.getTime()>new Date(e.form.endTime).getTime()}}},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}}),e._v("\n        ~\n        "),a("el-date-picker",{ref:"endTime",staticStyle:{width:"185px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择日期","picker-options":{disabledDate:function(t){return 0!==new Date(e.form.startTime).getTime()&&t.getTime()<new Date(e.form.startTime).getTime()}}},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"配图",prop:"imgUrls",rules:{type:"array",required:!0,message:"配图至少上传1张",trigger:["blur","change"]}}},[a("el-upload",{attrs:{"file-list":e.form.imgUrls,"list-type":"picture-card",accept:".jpeg,.jpg,.png,.gif","on-remove":e.removeImg,"http-request":e.uploadImg,"before-upload":e.beforeImgUpload}},[a("i",{staticClass:"el-icon-plus"})])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("flowForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},Tu=a("VU/8")(yu,wu,!1,null,null,null).exports,Iu={name:"marketChannelGroup",data:function(){return{activeTab:0,loading:!1,pageIndex:1,pageSize:25,pageCount:1,list:[],tableHeight:null,dialogFormVisible:!1,form:{channelGroupName:""},formRules:{channelGroupName:[{required:!0,message:"请输入渠道号",trigger:["blur","change"]},{max:20,message:"长度不多于20个字符",trigger:["blur","change"]}]},updateLoading:!1}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},handleClickTabs:function(){this.list=[],this.getList()},getList:function(e){var t=this;this.loading||(this.loading=!0,this.pageIndex=e||this.pageIndex,this.$service(de[this.activeTab].list,{urlParams:{pageIndex:this.pageIndex,pageSize:this.pageSize}}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.records||[],t.pageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){t.loading=!1,t.$message.error(qo()(e))}))},channelGroupPop:function(e){var t=this;this.form=tn()({},e||{channelGroupName:""}),this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.channelGroupForm.clearValidate()})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(t.updateLoading)return;t.updateLoading=!0,t.$service(t.form.appleChannelGroupId?de[t.activeTab].update:de[t.activeTab].add,{method:"post",urlParams:t.form.appleChannelGroupId?{appleChannelGroupId:t.form.appleChannelGroupId}:null,data:t.form}).then(function(e){t.updateLoading=!1,200===e.code?(t.dialogFormVisible=!1,t.getList(t.pageIndex),t.$message.success((t.form.appleChannelGroupId?"更新":"添加")+"成功")):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}})},channelGroupDel:function(e){var t=this;this.$set(e,"loading",!0),this.$service(de[this.activeTab].del,{method:"post",urlParams:{appleChannelGroupId:e.appleChannelGroupId}}).then(function(a){e.loading=!1,200===a.code?(e.delPop=!1,t.$message.success("删除成功"),t.getList()):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})}},watch:{windowHeight:function(){this.setHeight()}}},xu={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"market-channel-group"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.channelGroupPop()}}},[e._v("新建渠道组")])],1)]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"红彩",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"精准比分",name:"1"}})],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"appleChannelGroupId",label:"渠道组ID","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelGroupName",label:"渠道组名称","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.channelGroupPop(t.row)}}}),e._v(" "),a("el-popover",{attrs:{placement:"left"},model:{value:t.row.delPop,callback:function(a){e.$set(t.row,"delPop",a)},expression:"scope.row.delPop"}},[a("p",[e._v("确定删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.channelGroupDel(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:"",size:"small"},slot:"reference"})],1)]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList}}),e._v(" "),a("el-dialog",{attrs:{title:e.form.appleChannelGroupId?"修改渠道组":"添加渠道组","close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"channelGroupForm",attrs:{model:e.form,rules:e.formRules,disabled:e.updateLoading,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"渠道号",prop:"channelGroupName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.channelGroupName,callback:function(t){e.$set(e.form,"channelGroupName",t)},expression:"form.channelGroupName"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("channelGroupForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},ku=a("VU/8")(Iu,xu,!1,null,null,null).exports,$u={name:"marketWapCoupon",data:function(){return{loading:!1,offset:0,limit:25,total:1,list:[],tableHeight:null,dialogFormVisible:!1,form:{partnerName:"",updatePartnerCode:"",switchValue:"1"},formRules:{partnerName:[{required:!0,message:"不为空",trigger:["blur","change"]}],updatePartnerCode:[{required:!0,message:"请输入渠道号",trigger:["blur","change"]},{pattern:/^[0-9a-zA-Z_-]{1,}$/,message:"仅支持字母、数字及_或-",trigger:["blur","change"]}]},updateLoading:!1}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(e){var t=this;this.loading||(this.loading=!0,this.offset=e?(e-1)*this.limit:0,this.$service(ue,{params:{offset:this.offset,limit:this.limit}}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.data||[],t.total=e.data.total||1,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){t.loading=!1,t.$message.error(qo()(e))}))},wapCouponPop:function(e){var t=this;this.form=tn()({},e||{partnerName:"",updatePartnerCode:"",switchValue:"1"}),this.form.switchValue=this.form.switchValue+"",e&&(this.form.updatePartnerCode=e.partnerCode),this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.form.clearValidate()})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(t.updateLoading)return;t.updateLoading=!0,t.form.createTime||(t.form.partnerCode=t.form.updatePartnerCode,delete t.form.updatePartnerCode),t.$service(t.form.createTime?pe:me,{method:"post",data:t.form}).then(function(e){t.updateLoading=!1,200===e.code?(t.dialogFormVisible=!1,t.getList(Math.floor(t.offset/t.limit)+1),t.$message.success((t.form.createTime?"更新":"添加")+"成功")):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}})}},watch:{windowHeight:function(){this.setHeight()}}},Cu={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"market-wap-coupon"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.wapCouponPop()}}},[e._v("新建WAP优惠券渠道开关")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"partnerName",label:"渠道名称","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"partnerCode",label:"渠道号","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"partnerName",label:"状态","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.switchValue?"上线":"下线")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.wapCouponPop(t.row)}}})]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":Math.floor(e.offset/e.limit)+1,total:e.total,"page-size":e.limit},on:{"current-change":e.getList,"update:currentPage":function(t){e.$set(Math,"floor(offset/limit) + 1",t)},"update:current-page":function(t){e.$set(Math,"floor(offset/limit) + 1",t)}}}),e._v(" "),a("el-dialog",{attrs:{title:e.form.createTime?"修改WAP优惠券渠道开关":"新建WAP优惠券渠道开关",visible:e.dialogFormVisible,width:"500px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,disabled:e.updateLoading,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"渠道名",prop:"partnerName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.partnerName,callback:function(t){e.$set(e.form,"partnerName",t)},expression:"form.partnerName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"渠道号",prop:"updatePartnerCode"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.updatePartnerCode,callback:function(t){e.$set(e.form,"updatePartnerCode",t)},expression:"form.updatePartnerCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开关控制"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.form.switchValue,callback:function(t){e.$set(e.form,"switchValue",t)},expression:"form.switchValue"}},[e._v("上线")]),e._v(" "),a("el-radio",{attrs:{label:"0"},model:{value:e.form.switchValue,callback:function(t){e.$set(e.form,"switchValue",t)},expression:"form.switchValue"}},[e._v("下线")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},Su=a("VU/8")($u,Cu,!1,null,null,null).exports,Lu={name:"markeCooperationCompany",data:function(){return{loading:!1,offset:0,limit:25,total:1,list:[],tableHeight:null,dialogFormVisible:!1,form:{name:""},formRules:{name:[{required:!0,message:"不为空",trigger:["blur","change"]},{max:20,message:"长度不超过20字",trigger:["blur","change"]}]},updateLoading:!1}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(e){var t=this;this.loading||(this.loading=!0,this.offset=e?(e-1)*this.limit:0,this.$service(fe,{params:{offset:this.offset,limit:this.limit}}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.data||[],t.total=e.data.total||1,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){t.loading=!1,t.$message.error(qo()(e))}))},companyPop:function(e){var t=this;this.form=tn()({},e||{name:""}),this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.form.clearValidate()})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(t.updateLoading)return;t.updateLoading=!0,t.$service(t.form.vendorId?ve:ge,{method:"post",data:t.form}).then(function(e){t.updateLoading=!1,200===e.code?(t.dialogFormVisible=!1,t.getList(Math.floor(t.offset/t.limit)+1),t.$message.success((t.form.vendorId?"更新":"添加")+"成功")):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}})},companyDel:function(e){var t=this;this.$set(e,"loading",!0),this.$service(he,{method:"post",data:{vendorId:e.vendorId}}).then(function(a){e.loading=!1,200===a.code?(e.delPop=!1,t.$message.success("删除成功"),t.getList(Math.floor(t.offset/t.limit)+1)):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})}},watch:{windowHeight:function(){this.setHeight()}}},Du={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"market-cooperation-company"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.companyPop()}}},[e._v("新建合作公司")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"vendorId",label:"合作公司ID","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"合作公司名称","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"appListName",label:"关联子应用","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.updateTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.companyPop(t.row)}}}),e._v(" "),a("el-popover",{attrs:{placement:"left"},model:{value:t.row.delPop,callback:function(a){e.$set(t.row,"delPop",a)},expression:"scope.row.delPop"}},[a("p",[e._v("确定删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.companyDel(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:"",size:"small"},slot:"reference"})],1)]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":Math.floor(e.offset/e.limit)+1,total:e.total,"page-size":e.limit},on:{"current-change":e.getList,"update:currentPage":function(t){e.$set(Math,"floor(offset/limit) + 1",t)},"update:current-page":function(t){e.$set(Math,"floor(offset/limit) + 1",t)}}}),e._v(" "),a("el-dialog",{attrs:{title:e.form.vendorId?"修改合作公司":"新建合作公司","close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,disabled:e.updateLoading,"label-width":"80px",size:"small"}},[e.form.vendorId?a("el-form-item",{attrs:{label:"公司ID"}},[e._v("\n        "+e._s(e.form.vendorId)+"\n      ")]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"公司名称",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},Pu=a("VU/8")(Lu,Du,!1,null,null,null).exports,zu={name:"markeCooperationApp",data:function(){return{loading:!1,offset:0,limit:25,total:1,list:[],tableHeight:null,dialogFormVisible:!1,form:{},companyList:[],updateLoading:!1}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(e){var t=this;this.loading||(this.loading=!0,this.offset=e?(e-1)*this.limit:0,this.$service(be,{params:{offset:this.offset,limit:this.limit}}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.data||[],t.total=e.data.total||1,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){t.loading=!1,t.$message.error(qo()(e))}))},getCompanyList:function(){var e=this;return this.companyList.length>0?Bo.a.resolve():this.$service(fe,{params:{offset:0,limit:1e3}}).then(function(t){if(200===t.code&&t.data.data&&t.data.data.length>0)return e.companyList=t.data.data,Bo.a.resolve(t.data.data);e.$message.warning("获取不到合作母公司列表，请稍后再试")},function(t){t&&e.$message.warning("获取不到合作母公司列表，请稍后再试")})},appPop:function(e,t){var a=this;this.getCompanyList().then(function(){a.form=tn()({},e||{}),e||(a.form.vendorId=a.companyList[0].vendorId),t&&(a.form.look=!0),a.dialogFormVisible=!0,a.$nextTick(function(){a.$refs.form.clearValidate()})})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(t.updateLoading)return;t.updateLoading=!0,t.$service(t.form.appId?ye:_e,{method:"post",data:t.form}).then(function(e){t.updateLoading=!1,200===e.code?(t.dialogFormVisible=!1,t.form.appId||(t.offset=0),t.getList(Math.floor(t.offset/t.limit)+1),t.$message.success((t.form.createTime?"更新":"添加")+"成功")):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}})},appDel:function(e){var t=this;this.$set(e,"loading",!0),this.$service(we,{method:"post",data:{appId:e.appId}}).then(function(a){e.loading=!1,200===a.code?(e.delPop=!1,t.$message.success("删除成功"),t.getList(Math.floor(t.offset/t.limit)+1)):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})},switchStatus:function(e){var t=this;this.$set(e,"statusLoading",!0);var a={appId:e.appId,status:e.status};this.$service(Te,{method:"post",data:a}).then(function(a){e.loading=!1,200===a.code?(e.statusLoading=!1,t.$message.success("状态更新成功")):(e.statusLoading=!1,t.$set(e,"status",e.status?0:1),t.$message.error(a.code+":"+a.message))},function(a){e.statusLoading=!1,t.$set(e,"status",e.status?0:1),t.$message.error(qo()(a))})}},watch:{windowHeight:function(){this.setHeight()}}},Hu={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"market-cooperation-app"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.appPop()}}},[e._v("新建合作方应用")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"appId",label:"合作方应用ID","min-width":"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"合作方应用名称","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"identify",label:"应用唯一标示","min-width":"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"vendorName",label:"关联母公司","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"factor",label:"货币兑换比例","min-width":"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.appPop(t.row,!0)}}},[e._v("详情")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.appPop(t.row)}}}),e._v(" "),a("el-popover",{attrs:{placement:"left"},model:{value:t.row.delPop,callback:function(a){e.$set(t.row,"delPop",a)},expression:"scope.row.delPop"}},[a("p",[e._v("确定删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.appDel(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:"",size:"small"},slot:"reference"})],1),e._v(" "),a("el-switch",{attrs:{disabled:t.row.statusLoading,"active-value":0,"inactive-value":1},nativeOn:{click:function(a){return e.switchStatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":Math.floor(e.offset/e.limit)+1,total:e.total,"page-size":e.limit},on:{"current-change":e.getList,"update:currentPage":function(t){e.$set(Math,"floor(offset/limit) + 1",t)},"update:current-page":function(t){e.$set(Math,"floor(offset/limit) + 1",t)}}}),e._v(" "),a("el-dialog",{attrs:{title:(e.form.look?"查看":e.form.appId?"修改":"新建")+"合作方应用信息",visible:e.dialogFormVisible,width:"500px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,disabled:e.updateLoading||e.form.look,"label-width":"110px",size:"small"}},[a("el-form-item",{attrs:{label:"渠道名",prop:"name",rules:{required:!0,message:"不为空",trigger:["blur","change"]}}},[a("el-input",{attrs:{maxlength:"50",autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"渠道号",prop:"identify",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{pattern:/^[a-zA-Z0-9_-]{1,}$/,message:"必须为数字大小写字母或_-组成",trigger:["blur","change"]}]}},[a("el-input",{attrs:{maxlength:"50",autocomplete:"off"},model:{value:e.form.identify,callback:function(t){e.$set(e.form,"identify",t)},expression:"form.identify"}})],1),e._v(" "),e.form.look?e._e():a("el-form-item",[e._v("*该标识作为与合作方联合开发的唯一标识，填后不可更改，不可与已有应用标识重复")]),e._v(" "),a("el-form-item",{attrs:{label:"合作母公司",rules:{required:!0,message:"不为空",trigger:["blur","change"]}}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.vendorId,callback:function(t){e.$set(e.form,"vendorId",t)},expression:"form.vendorId"}},e._l(e.companyList,function(e){return a("el-option",{key:e.vendorId,attrs:{label:e.name,value:e.vendorId}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"应用公钥",prop:"publicKey"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"如果不填写，会自动生成"},model:{value:e.form.publicKey,callback:function(t){e.$set(e.form,"publicKey",t)},expression:"form.publicKey"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用私钥",prop:"privateKey"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"如果不填写，会自动生成"},model:{value:e.form.privateKey,callback:function(t){e.$set(e.form,"privateKey",t)},expression:"form.privateKey"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"合作公司公钥",prop:"cooperationPublicKey",rules:{required:!0,message:"不为空",trigger:["blur","change"]}}},[a("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.form.cooperationPublicKey,callback:function(t){e.$set(e.form,"cooperationPublicKey",t)},expression:"form.cooperationPublicKey"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"IP白名单",prop:"ipWhiteList",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{pattern:/^[0-9,.]{1,}$/,message:"不符合IP格式",trigger:["blur","change"]}]}},[a("el-input",{attrs:{type:"textarea",rows:3,maxlength:"500"},model:{value:e.form.ipWhiteList,callback:function(t){e.$set(e.form,"ipWhiteList",t)},expression:"form.ipWhiteList"}})],1),e._v(" "),e.form.look?e._e():a("el-form-item",[e._v("*多个IP白名单时，中间用英文逗号分隔")]),e._v(" "),a("el-form-item",{attrs:{label:"Push回调地址",prop:"pushUrl",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{type:"url",message:"不符合url格式,",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.pushUrl,callback:function(t){e.$set(e.form,"pushUrl",t)},expression:"form.pushUrl"}})],1),e._v(" "),e.form.look?e._e():a("el-form-item",[e._v("*设地址格式必须为http://或https://开头")]),e._v(" "),a("el-form-item",{attrs:{label:"商品价格系数",prop:"factor",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{pattern:/^\d+$/,message:"必须为数字",trigger:["blur","change"]}]}},[e._v("\n        1 : "),a("el-input",{staticStyle:{width:"200px"},attrs:{maxlength:"20",autocomplete:"off"},model:{value:e.form.factor,callback:function(t){e.$set(e.form,"factor",t)},expression:"form.factor"}})],1),e._v(" "),e.form.look?e._e():a("el-form-item",[e._v("*系数1:N是指，在红彩平台售价为1元的方案，在外部应用售价为N元；若乘N得出的外部平台方案单价不是整数，则进一取整显示。")]),e._v(" "),a("el-form-item",{attrs:{label:"外部货币单位",prop:"unit",rules:{required:!0,message:"不为空",trigger:["blur","change"]}}},[a("el-input",{attrs:{maxlength:"30",autocomplete:"off"},model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"下单地址",prop:"orderUrl",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{type:"url",message:"不符合url格式,",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.orderUrl,callback:function(t){e.$set(e.form,"orderUrl",t)},expression:"form.orderUrl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"可访问专家",prop:"expertIds",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{pattern:/^[0-9,]{1,}$/,message:"仅支持数字及英文,",trigger:["blur","change"]}]}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"专家ID用逗号分隔"},model:{value:e.form.expertIds,callback:function(t){e.$set(e.form,"expertIds",t)},expression:"form.expertIds"}})],1)],1),e._v(" "),e.form.look?e._e():a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},Mu=a("VU/8")(zu,Hu,!1,null,null,null).exports,Fu={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"activity-tcm-mall-list"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"})])])},staticRenderFns:[]},Nu=a("VU/8")({name:"activityTcmMallList"},Fu,!1,null,null,null).exports,Eu={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"activity-tcm-mall-order"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"})])])},staticRenderFns:[]},Ru=a("VU/8")({name:"activityTcmMallOrder"},Eu,!1,null,null,null).exports,Ou={name:"activityQuizForNew",data:function(){return{loading:!1,offset:0,limit:20,total:1,quizTopCount:{},list:[],quizType:{1:"题目式竞猜",2:"单选项赛事竞猜",3:"双选项赛事竞猜"},quizStatus:{1:"售卖中",2:"截止",3:"结算",4:"退豆"},quizSettlementCH:{0:"未开奖",1:"中",2:"未中"},tableHeight:null,dialogFormVisible:!1,form:{},updateLoading:!1,matchPreview:"",quizMatch:{homeMatchTeam:{teamId:""},guestMatchTeam:{teamId:""}},previewLoading:!1,expands:[]}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getQuizCount(),this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getRowKeys:function(e){return e.subjectQuizId},getQuizCount:function(){var e=this;this.$service(Va).then(function(t){200===t.code&&(e.quizTopCount=t.data)})},getList:function(e,t){var a=this;this.loading||(this.loading=!0,this.offset=e?(e-1)*this.limit:0,this.$service(Ua,{params:{offset:this.offset,limit:this.limit}}).then(function(e){a.loading=!1,200===e.code?(a.expands=[],a.list=e.data.data||[],a.total=e.data.total||1,!t&&(a.$refs.elTable.bodyWrapper.scrollTop=0)):a.$message.error(e.code+":"+e.message)},function(e){a.loading=!1,a.$message.error(qo()(e))}))},countExpand:function(e,t){var a=this;0!==t.length?this.expands.indexOf(e.subjectQuizId)>-1||(this.expands=[e.subjectQuizId],this.$set(e,"countLoading",!0),this.$set(e,"count",[]),this.$service(Xa,{params:{subjectQuizId:e.subjectQuizId}}).then(function(t){if(e.countLoading=!1,200===t.code){var i=[];2===t.data.length?((i=[t.data[0]])[0].currentOdds=t.data[1].currentOdds,i[0].maxOdds=t.data[1].currentOdds,i[0].settlementStr=t.data[1].settlementStr):i=t.data,a.$set(e,"count",i)}})):this.expands=[]},previewID:function(){var e=this;return this.matchPreview="",this.quizMatch={homeMatchTeam:{teamId:""},guestMatchTeam:{teamId:""}},1===parseInt(this.form.quizType)||!/^\d+$/.test(this.form.matchInfoId)||this.previewLoading?Bo.a.resolve():(this.previewLoading=!0,An(this.form.matchInfoId).then(function(t){return e.previewLoading=!1,e.matchPreview=t.homeMatchTeam.teamName+"VS"+t.guestMatchTeam.teamName,e.quizMatch=t,Bo.a.resolve()}).catch(function(t){t&&(e.previewLoading=!1,e.$message.error(t))}))},quizPop:function(e){var t=this;this.matchPreview="",this.form=tn()({lotteryTime:"",matchInfoId:"",maxCredit:"",newUserRatio:"",quizName:"",settlement:"",validTime:"",quizType:"2",showStatus:"0",selectionName:"",selectionTeamId:"",initialOdds:"",maxOdds:"",maxUser:"",quizSelectionId:"",away_selectionName:"",away_initialOdds:"",away_maxOdds:"",away_maxUser:"",away_quizSelectionId:""},e||{}),e?this.previewID().then(function(){t.form.quizType=e.quizType+"",t.form.showStatus=e.showStatus+"",t.form.newUserRatio=Math.round(100*e.newUserRatio);var a=e.selectionVoList;a.length<=1?(t.form.selectionName=a[0].selectionName,t.form.selectionTeamId=a[0].teamId,t.form.initialOdds=a[0].initialOdds,t.form.maxOdds=a[0].maxOdds,t.form.maxUser=a[0].maxUser,t.form.quizSelectionId=a[0].quizSelectionId,a[0].settlement&&(t.form.settlement=a[0].settlement+"")):t.quizMatch.homeMatchTeam.teamId===a[0].teamId?(t.form.selectionName=a[0].selectionName,t.form.initialOdds=a[0].initialOdds,t.form.maxOdds=a[0].maxOdds,t.form.maxUser=a[0].maxUser,t.form.quizSelectionId=a[0].quizSelectionId,t.form.away_selectionName=a[1].selectionName,t.form.away_initialOdds=a[1].initialOdds,t.form.away_maxOdds=a[1].maxOdds,t.form.away_maxUser=a[1].maxUser,t.form.away_quizSelectionId=a[1].quizSelectionId):(t.form.selectionName=a[1].selectionName,t.form.initialOdds=a[1].initialOdds,t.form.maxOdds=a[1].maxOdds,t.form.maxUser=a[1].maxUser,t.form.quizSelectionId=a[1].quizSelectionId,t.form.away_selectionName=a[0].selectionName,t.form.away_initialOdds=a[0].initialOdds,t.form.away_maxOdds=a[0].maxOdds,t.form.away_maxUser=a[0].maxUser,t.form.away_quizSelectionId=a[0].quizSelectionId),t.dialogFormVisible=!0,t.$nextTick(function(){t.$refs.form.clearValidate()})}):(this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.form.clearValidate()}))},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a={lotteryTime:t.form.lotteryTime+":00",matchInfoId:t.form.matchInfoId||"",maxCredit:t.form.maxCredit,newUserRatio:t.form.newUserRatio,quizName:t.form.quizName||"",quizType:t.form.quizType,settlement:t.form.settlement||"",showStatus:t.form.showStatus,validTime:t.form.validTime+":00"};if(t.form.subjectQuizId&&(a.subjectQuizId=t.form.subjectQuizId),"3"===t.form.quizType?a.selectionList=qo()([{selectionName:t.form.selectionName,initialOdds:t.form.initialOdds,maxOdds:t.form.maxOdds,maxUser:t.form.maxUser,teamId:t.quizMatch.homeMatchTeam.teamId,quizSelectionId:t.form.quizSelectionId||""},{selectionName:t.form.away_selectionName,initialOdds:t.form.away_initialOdds,maxOdds:t.form.away_maxOdds,maxUser:t.form.away_maxUser,teamId:t.quizMatch.guestMatchTeam.teamId,quizSelectionId:t.form.away_quizSelectionId||""}]):a.selectionList=qo()([{selectionName:t.form.selectionName,initialOdds:t.form.initialOdds,maxOdds:t.form.maxOdds,maxUser:t.form.maxUser,teamId:t.form.selectionTeamId,quizSelectionId:t.form.quizSelectionId||""}]),t.updateLoading)return;t.updateLoading=!0,t.$service(t.form.subjectQuizId?Qa:ja,{method:"post",data:a}).then(function(e){t.updateLoading=!1,200===e.code?(t.dialogFormVisible=!1,t.form.subjectQuizId&&(t.offset=0),t.getList(Math.floor(t.offset/t.limit)+1,!!t.form.subjectQuizId),t.$message.success((t.form.subjectQuizId?"更新":"添加")+"成功")):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}})},settlement:function(e){var t=this;this.$set(e,"loading",!0),this.$service(Ga,{method:"post",data:{subjectQuizId:e.subjectQuizId}}).then(function(a){e.loading=!1,200===a.code?(e.settlementPop=!1,t.$message.success("结算成功"),t.getList(Math.floor(t.offset/t.limit)+1,!0)):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})},refund:function(e){var t=this;this.$set(e,"loading",!0),this.$service(Ka,{method:"post",data:{subjectQuizId:e.subjectQuizId}}).then(function(a){e.loading=!1,200===a.code?(e.refundPop=!1,t.$message.success("退单成功"),t.getList(Math.floor(t.offset/t.limit)+1,!0)):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})},quizDel:function(e){var t=this;this.$set(e,"loading",!0),this.$service(qa,{method:"post",data:{subjectQuizId:e.subjectQuizId}}).then(function(a){e.loading=!1,200===a.code?(e.delPop=!1,t.$message.success("删除成功"),t.getList(Math.floor(t.offset/t.limit)+1,!0)):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})},switchStatus:function(e){var t=this;this.$set(e,"statusLoading",!0);var a={subjectQuizId:e.subjectQuizId,showStatus:e.showStatus};this.$service(Wa,{method:"post",data:a}).then(function(a){e.loading=!1,200===a.code?(e.statusLoading=!1,t.$message.success("状态更新成功")):(e.statusLoading=!1,t.$set(e,"showStatus",e.showStatus?0:1),t.$message.error(a.code+":"+a.message))},function(a){e.statusLoading=!1,t.$set(e,"showStatus",e.showStatus?0:1),t.$message.error(qo()(a))})},changeWeight:function(e){var t=this;this.$prompt("","修改权重",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,3}$/,inputErrorMessage:"0-999之间",closeOnClickModal:!1,inputValue:e.weight}).then(function(a){var i=a.value;t.$service(Ba,{method:"post",data:{subjectQuizId:e.subjectQuizId,weight:i}}).then(function(e){200===e.code?(t.getList(Math.floor(t.offset/t.limit)+1,!0),t.$message.success("权重修改成功")):t.$message.error(e.code+":"+e.message)},function(e){t.$message.error(qo()(e))})})},robot:function(e,t){var a=this;this.$prompt("",e.selectionName+"添加("+(t?"新用户":"老用户")+")机器人",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^[1-9]\d{0,7}$/,inputErrorMessage:"1-99999999之间",closeOnClickModal:!1,inputValue:""}).then(function(i){var r=i.value;a.$service(Ya,{method:"post",data:{isNewUser:t,quizSelectionId:e.quizSelectionId,robot:r}}).then(function(e){200===e.code?a.$message.success("机器人添加成功"):a.$message.error(e.code+":"+e.message)},function(e){a.$message.error(qo()(e))})})}},watch:{windowHeight:function(){this.setHeight()}}},Au={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"activity-quiz"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.quizPop()}}},[e._v("新建场次")])],1)]),e._v(" "),a("table",{staticClass:"quiz-table"},[a("tr",[a("td",{staticClass:"bg-fa"},[e._v("拉新总数：")]),e._v(" "),a("td",[e._v(e._s(e.quizTopCount.totalNewUser||0))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("拉新总成本：")]),e._v(" "),a("td",[e._v(e._s(e.quizTopCount.totalCost||0))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("上周拉新总数：")]),e._v(" "),a("td",[e._v(e._s(e.quizTopCount.lastWeekNewUser||0))])]),e._v(" "),a("tr",[a("td",{staticClass:"bg-fa"},[e._v("上周拉新总成本：")]),e._v(" "),a("td",[e._v(e._s(e.quizTopCount.lastWeekCount||0))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("上月拉新总数：")]),e._v(" "),a("td",[e._v(e._s(e.quizTopCount.lastMonthNewUser||0))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("上月拉新总成本：")]),e._v(" "),a("td",[e._v(e._s(e.quizTopCount.lastMonthCost||0))])])]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","row-key":e.getRowKeys,"expand-row-keys":e.expands,"max-height":e.tableHeight<400?400:e.tableHeight},on:{"row-click":e.countExpand,"expand-change":e.countExpand}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.row.countLoading,expression:"props.row.countLoading"}],attrs:{data:t.row.count,"show-header":!1}},[a("el-table-column",{attrs:{prop:""},scopedSlots:e._u([{key:"default",fn:function(i){return[0===i.$index?a("span",[e._v("当前投注总用户数(含机器人)："+e._s(i.row.currentUser))]):a("span",[e._v(e._s(3===t.row.count.length?1===i.$index?"主胜 | ":"客胜 | ":"")+"当前机器人数："+e._s(i.row.robot))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:""},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.$index?a("span",[e._v("当前总机器人数："+e._s(t.row.robot))]):a("span",[e._v("当前投注老用户数："+e._s(t.row.oldUser))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:""},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.$index?a("span",[e._v("当前总投注老用户数："+e._s(t.row.oldUser))]):a("span",[e._v("当前投注新用户数："+e._s(t.row.newUser))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:""},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.$index?a("span",[e._v("当前总投注新用户数："+e._s(t.row.newUser))]):a("span",[e._v("当前奖励倍数："+e._s(t.row.currentOdds))])]}}],null,!0)}),e._v(" "),1===t.row.count.length?a("el-table-column",{attrs:{prop:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("当前奖励倍数："+e._s(t.row.currentOdds))])]}}],null,!0)}):e._e(),e._v(" "),1===t.row.count.length?a("el-table-column",{attrs:{prop:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("最终奖励倍数： "+e._s(t.row.maxOdds))])]}}],null,!0)}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:""},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.$index?a("span",[e._v("最终结果："+e._s(t.row.settlementStr))]):a("span",[e._v("最终奖励倍数："+e._s(t.row.maxOdds))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:""},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.$index?a("span",[e._v("投注总额："+e._s(t.row.totalFlowAmount))]):a("span",[e._v("最终结果："+e._s(t.row.settlementStr))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:""},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.$index?a("span",[e._v("返奖总额： "+e._s(t.row.totalNetReturn))]):e._e()]}}],null,!0)})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"subjectQuizId",label:"拉新竞猜ID",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"quizType",label:"类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.quizType[t.row.quizType]||"-"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"quizName",label:"题目名/赛事对阵","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{label:"选项名",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.selectionVoList,function(t,i){return a("span",{key:i},[0!==i?a("b",[e._v(" | ")]):e._e(),e._v(e._s(t.selectionName))])})}}])}),e._v(" "),a("el-table-column",{attrs:{label:"初始倍数",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.selectionVoList,function(t,i){return a("span",{key:i},[0!==i?a("b",[e._v(" | ")]):e._e(),e._v(e._s(t.initialOdds))])})}}])}),e._v(" "),a("el-table-column",{attrs:{label:"最高倍数",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.selectionVoList,function(t,i){return a("span",{key:i},[0!==i?a("b",[e._v(" | ")]):e._e(),e._v(e._s(t.maxOdds))])})}}])}),e._v(" "),a("el-table-column",{attrs:{label:"新用户占比",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.newUserRatio))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"最高投注人数",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.selectionVoList,function(t,i){return a("span",{key:i},[0!==i?a("b",[e._v(" | ")]):e._e(),e._v(e._s(t.maxUser))])})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"maxCredit",label:"最高投注限额",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"validTime",label:"投注截止时间",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lotteryTime",label:"开奖时间",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.quizStatus[t.row.status]||"-"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"settlement",label:"开奖结果",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.selectionVoList,function(t,i){return a("span",{key:i},[0!==i?a("b",[e._v(" | ")]):e._e(),e._v(e._s(1===t.status?"未开奖":e.quizSettlementCH[t.settlement]))])})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"weight",label:"权重",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.changeWeight(t.row)}}},[e._v(e._s(t.row.weight))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"+人","min-width":"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.status?a("div",e._l(t.row.selectionVoList,function(i,r){return a("div",{key:r},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return t.stopPropagation(),e.robot(i,1)}}},[e._v(e._s(t.row.selectionVoList.length>1?i.selectionName:"")+"+新")]),a("i"),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return t.stopPropagation(),e.robot(i,1)}}},[e._v(e._s(t.row.selectionVoList.length>1?i.selectionName:"")+"+老")])],1)}),0):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"230"},scopedSlots:e._u([{key:"default",fn:function(t){return[2===t.row.status?a("el-popover",{attrs:{placement:"left"},model:{value:t.row.settlementPop,callback:function(a){e.$set(t.row,"settlementPop",a)},expression:"scope.row.settlementPop"}},[a("p",[e._v("确定结算？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.settlementPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.settlement(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",size:"mini"},on:{click:function(e){e.stopPropagation()}},slot:"reference"},[e._v("结算")])],1):e._e(),e._v(" "),t.row.status<3?a("el-popover",{attrs:{placement:"left"},model:{value:t.row.refundPop,callback:function(a){e.$set(t.row,"refundPop",a)},expression:"scope.row.refundPop"}},[a("p",[e._v("确定退单？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.refundPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.refund(t.row)}}},[e._v("确定")])],1),e._v(" "),t.row.status<3?a("el-button",{attrs:{slot:"reference",type:"primary",size:"mini"},on:{click:function(e){e.stopPropagation()}},slot:"reference"},[e._v("退单")]):e._e()],1):e._e(),e._v(" "),1===t.row.status?a("el-button",{attrs:{type:"danger",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return a.stopPropagation(),e.quizPop(t.row)}}}):e._e(),e._v(" "),a("el-popover",{attrs:{placement:"left"},model:{value:t.row.delPop,callback:function(a){e.$set(t.row,"delPop",a)},expression:"scope.row.delPop"}},[a("p",[e._v("确定删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.quizDel(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:"",size:"small"},on:{click:function(e){e.stopPropagation()}},slot:"reference"})],1),e._v(" "),a("el-switch",{attrs:{disabled:t.row.statusLoading,"active-value":0,"inactive-value":1},nativeOn:{click:function(a){return a.stopPropagation(),e.switchStatus(t.row)}},model:{value:t.row.showStatus,callback:function(a){e.$set(t.row,"showStatus",a)},expression:"scope.row.showStatus"}})]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":Math.floor(e.offset/e.limit)+1,total:e.total,"page-size":e.limit},on:{"current-change":e.getList,"update:currentPage":function(t){e.$set(Math,"floor(offset/limit) + 1",t)},"update:current-page":function(t){e.$set(Math,"floor(offset/limit) + 1",t)}}}),e._v(" "),a("el-dialog",{attrs:{title:e.form.subjectQuizId?"修改活动":"新建活动","close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,disabled:e.updateLoading,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"活动类型",prop:"quizType"}},[a("el-select",{attrs:{disabled:e.form.subjectQuizId},model:{value:e.form.quizType,callback:function(t){e.$set(e.form,"quizType",t)},expression:"form.quizType"}},e._l(e.quizType,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1===parseInt(e.form.quizType),expression:"parseInt(form.quizType)===1"}],attrs:{label:"题目名",prop:"quizName",rules:[{required:1===parseInt(e.form.quizType),message:"不为空",trigger:["blur","change"]},{max:30,message:"最多30个字符,",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.quizName,callback:function(t){e.$set(e.form,"quizName",t)},expression:"form.quizName"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1!==parseInt(e.form.quizType),expression:"parseInt(form.quizType)!==1"}],attrs:{label:"赛事ID",prop:"matchInfoId",rules:[{required:1!==parseInt(e.form.quizType),message:"不为空",trigger:["blur","change"]},{pattern:/^\d+$/,message:"ID必须为数字,",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off","suffix-icon":e.previewLoading?"el-icon-loading":"",disabled:e.form.subjectQuizId},on:{change:e.previewID},model:{value:e.form.matchInfoId,callback:function(t){e.$set(e.form,"matchInfoId",t)},expression:"form.matchInfoId"}})],1),e._v(" "),e.matchPreview?a("el-form-item",[a("span",[e._v(e._s(e.matchPreview))])]):e._e(),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2===parseInt(e.form.quizType)&&e.matchPreview,expression:"parseInt(form.quizType)===2 && matchPreview"}],attrs:{label:"选择项",prop:"selectionTeamId",rules:{required:2===parseInt(e.form.quizType),message:"不为空",trigger:["blur","change"]}}},[a("el-radio",{attrs:{label:e.quizMatch.homeMatchTeam.teamId,disabled:e.form.subjectQuizId},model:{value:e.form.selectionTeamId,callback:function(t){e.$set(e.form,"selectionTeamId",t)},expression:"form.selectionTeamId"}},[e._v("主胜")]),e._v(" "),a("el-radio",{attrs:{label:e.quizMatch.guestMatchTeam.teamId,disabled:e.form.subjectQuizId},model:{value:e.form.selectionTeamId,callback:function(t){e.$set(e.form,"selectionTeamId",t)},expression:"form.selectionTeamId"}},[e._v("客胜")])],1),e._v(" "),a("el-form-item",{attrs:{label:(3===parseInt(e.form.quizType)?"主胜":"")+"选项名",prop:"selectionName",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{max:10,message:"最多10个字符,",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.selectionName,callback:function(t){e.$set(e.form,"selectionName",t)},expression:"form.selectionName"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3===parseInt(e.form.quizType),expression:"parseInt(form.quizType)===3"}],attrs:{label:"客胜选项名",prop:"away_selectionName",rules:[{required:3===parseInt(e.form.quizType),message:"不为空",trigger:["blur","change"]},{max:10,message:"最多10个字符,",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.away_selectionName,callback:function(t){e.$set(e.form,"away_selectionName",t)},expression:"form.away_selectionName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:(3===parseInt(e.form.quizType)?"主胜":"")+"初始倍数",prop:"initialOdds",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{pattern:/^(\d|10|\d\.\d{1,2})$/,message:"0-10数字，最多2位小数,",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off",disabled:e.form.subjectQuizId},model:{value:e.form.initialOdds,callback:function(t){e.$set(e.form,"initialOdds",t)},expression:"form.initialOdds"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3===parseInt(e.form.quizType),expression:"parseInt(form.quizType)===3"}],attrs:{label:"客胜初始倍数",prop:"away_initialOdds",rules:[{required:3===parseInt(e.form.quizType),message:"不为空",trigger:["blur","change"]},{pattern:/^(\d|10|\d\.\d{1,2})$/,message:"0-10数字，最多2位小数,",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off",disabled:e.form.subjectQuizId},model:{value:e.form.away_initialOdds,callback:function(t){e.$set(e.form,"away_initialOdds",t)},expression:"form.away_initialOdds"}})],1),e._v(" "),a("el-form-item",{attrs:{label:(3===parseInt(e.form.quizType)?"主胜":"")+"最高倍数",prop:"maxOdds",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{pattern:/^(\d|10)$/,message:"0-10内整数,",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off",disabled:e.form.subjectQuizId},model:{value:e.form.maxOdds,callback:function(t){e.$set(e.form,"maxOdds",t)},expression:"form.maxOdds"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3===parseInt(e.form.quizType),expression:"parseInt(form.quizType)===3"}],attrs:{label:"客胜最高倍数",prop:"away_maxOdds",rules:[{required:3===parseInt(e.form.quizType),message:"不为空",trigger:["blur","change"]},{pattern:/^(\d|10)$/,message:"0-10内整数,",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off",disabled:e.form.subjectQuizId},model:{value:e.form.away_maxOdds,callback:function(t){e.$set(e.form,"away_maxOdds",t)},expression:"form.away_maxOdds"}})],1),e._v(" "),a("el-form-item",{attrs:{label:(3===parseInt(e.form.quizType)?"主胜":"")+"最高投注数",prop:"maxUser",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{pattern:/^\d{1,9}$/,message:"0-999999999内整数,",trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"150px"},attrs:{autocomplete:"off"},model:{value:e.form.maxUser,callback:function(t){e.$set(e.form,"maxUser",t)},expression:"form.maxUser"}}),e._v(" 人\n      ")],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3===parseInt(e.form.quizType),expression:"parseInt(form.quizType)===3"}],attrs:{label:"客胜最高投注数",prop:"away_maxUser",rules:[{required:3===parseInt(e.form.quizType),message:"不为空",trigger:["blur","change"]},{pattern:/^\d{1,9}$/,message:"0-999999999内整数,",trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"150px"},attrs:{autocomplete:"off"},model:{value:e.form.away_maxUser,callback:function(t){e.$set(e.form,"away_maxUser",t)},expression:"form.away_maxUser"}}),e._v(" 人\n      ")],1),e._v(" "),a("el-form-item",{attrs:{label:"新用户占比",prop:"newUserRatio",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{pattern:/^(\d{1,2}|100)$/,message:"0-100内整数,",trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"150px"},attrs:{autocomplete:"off"},model:{value:e.form.newUserRatio,callback:function(t){e.$set(e.form,"newUserRatio",t)},expression:"form.newUserRatio"}}),e._v(" %\n      ")],1),e._v(" "),a("el-form-item",{attrs:{label:"最高投注限额",prop:"maxCredit",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{pattern:/^(\d{1,4}|10000)$/,message:"0-10000内整数,",trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"150px"},attrs:{autocomplete:"off"},model:{value:e.form.maxCredit,callback:function(t){e.$set(e.form,"maxCredit",t)},expression:"form.maxCredit"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"投注截止",prop:"validTime",rules:{required:!0,message:"不为空",trigger:["blur","change"]}}},[a("el-date-picker",{staticStyle:{width:"185px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择日期","picker-options":{disabledDate:function(e){return e.getTime()<Date.now()}}},model:{value:e.form.validTime,callback:function(t){e.$set(e.form,"validTime",t)},expression:"form.validTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开奖时间",prop:"lotteryTime",rules:{required:!0,message:"不为空",trigger:["blur","change"]}}},[a("el-date-picker",{staticStyle:{width:"185px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择日期","picker-options":{disabledDate:function(e){return e.getTime()<Date.now()}}},model:{value:e.form.lotteryTime,callback:function(t){e.$set(e.form,"lotteryTime",t)},expression:"form.lotteryTime"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1===parseInt(e.form.quizType),expression:"parseInt(form.quizType)===1"}],attrs:{label:"开奖结果",prop:"settlement",rules:{required:1===parseInt(e.form.quizType),message:"不为空",trigger:["blur","change"]}}},[a("el-radio",{attrs:{label:"1"},model:{value:e.form.settlement,callback:function(t){e.$set(e.form,"settlement",t)},expression:"form.settlement"}},[e._v("中")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.form.settlement,callback:function(t){e.$set(e.form,"settlement",t)},expression:"form.settlement"}},[e._v("不中")])],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"showStatus"}},[a("el-select",{model:{value:e.form.showStatus,callback:function(t){e.$set(e.form,"showStatus",t)},expression:"form.showStatus"}},[a("el-option",{attrs:{label:"上线",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"下线",value:"1"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]};var Uu=a("VU/8")(Ou,Au,!1,function(e){a("FRoK")},null,null).exports,Vu={name:"activityApp",data:function(){return{loading:!1,offset:0,limit:20,total:1,list:[],tableHeight:null,dialogFormVisible:!1,form:{},updateLoading:!1,redirectPreview:"",previewLoading:!1}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},timeRule:function(e,t,a){"1"===this.form.validType?t?this.$refs.validEndTime.value?a():a(new Error("结束时间不为空")):a(new Error("开始时间不为空")):a()},dateFormat:function(e){return gh(e,"yyyy-MM-dd hh:mm:ss")},getList:function(e,t){var a=this;this.loading||(this.loading=!0,this.offset=e?(e-1)*this.limit:0,this.$service(Ja,{params:{offset:this.offset,limit:this.limit}}).then(function(e){a.loading=!1,200===e.code?(a.list=e.data.data||[],a.total=e.data.total||1,!t&&(a.$refs.elTable.bodyWrapper.scrollTop=0)):a.$message.error(e.code+":"+e.message)},function(e){a.loading=!1,a.$message.error(qo()(e))}))},beforeImgUpload:function(e){if(e.size/1024/1024>5)return this.$message.error("上传头像图片大小不能超过 5MB!"),!1},uploadSingleImg:function(e){var t=this;En(e.file,"thread").then(function(e){t.form.imgUrl=e},function(e){e&&t.$message.error("上传图片失败，请稍后再传！")})},previewID:function(){var e=this;if(this.redirectPreview="",!(parseInt(this.form.redirectType)<2||parseInt(this.form.redirectType)>4||!/^\d+$/.test(this.form.redirectLink)||this.previewLoading)){this.previewLoading=!0;var t=this.form.redirectLink;switch(this.form.redirectType){case"4":Rn(t).then(function(t){e.redirectPreview="提示：对应跳转文章["+t.title+"]",e.previewLoading=!1}).catch(function(t){t&&(e.previewLoading=!1,e.redirectPreview="提示：无对应跳转文章")});break;case"3":An(t).then(function(t){e.redirectPreview="提示：对应跳转赛事["+t.homeMatchTeam.teamName+"VS"+t.guestMatchTeam.teamName+"]",e.previewLoading=!1}).catch(function(t){t&&(e.previewLoading=!1,e.redirectPreview="提示：无对应跳转赛事")});break;case"2":On(t).then(function(t){e.redirectPreview="提示：对应跳转专家["+t.nickname+"]",e.previewLoading=!1}).catch(function(t){t&&(e.previewLoading=!1,e.redirectPreview="提示：无对应跳转专家")})}}},appPop:function(e){var t=this;this.form=tn()({redirectType:"1",validType:"0",imgUrl:"",status:"0"},e||{}),e&&(this.form.redirectType=e.redirectType+"",this.form.validType=e.validType+"",this.form.status=e.status+"",e.validStartTime&&(this.form.validStartTime=this.dateFormat(e.validStartTime)),e.validEndTime&&(this.form.validEndTime=this.dateFormat(e.validEndTime))),this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.form.clearValidate()})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a={title:t.form.title,redirectType:t.form.redirectType,validType:t.form.validType,imgUrl:t.form.imgUrl,majorAbstract:t.form.majorAbstract,status:t.form.status,redirectLink:""};if(parseInt(t.form.redirectType)<5&&t.form.redirectLink&&(a.redirectLink=t.form.redirectLink),"1"===t.form.validType&&(a.validStartTime=t.form.validStartTime,a.validEndTime=t.form.validEndTime),t.form.activityPlazaId&&(a.activityPlazaId=t.form.activityPlazaId),t.updateLoading)return;t.updateLoading=!0,t.$service(Za,{method:"post",data:a}).then(function(e){t.updateLoading=!1,200===e.code?(t.dialogFormVisible=!1,t.form.activityPlazaId&&(t.offset=0),t.getList(Math.floor(t.offset/t.limit)+1),t.$message.success((t.form.activityPlazaId?"更新":"添加")+"成功")):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}})},setMajor:function(e){var t=this;this.$set(e,"loading",!0),this.$service(ii,{method:"post",data:{activityPlazaId:e.activityPlazaId,isMajor:e.isMajor?0:1}}).then(function(a){e.loading=!1,200===a.code?(e.majorPop=!1,t.$message.success((e.isMajor?"取消":"设置")+"主推成功"),t.getList(Math.floor(t.offset/t.limit)+1,!0)):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})},appDel:function(e){var t=this;this.$set(e,"loading",!0),this.$service(ai,{method:"post",data:{activityPlazaId:e.activityPlazaId}}).then(function(a){e.loading=!1,200===a.code?(e.delPop=!1,t.$message.success("删除成功"),t.getList(Math.floor(t.offset/t.limit)+1,!0)):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})},switchStatus:function(e){var t=this;this.$set(e,"statusLoading",!0);var a={activityPlazaId:e.activityPlazaId,status:e.status};this.$service(ei,{method:"post",data:a}).then(function(a){e.loading=!1,200===a.code?(e.statusLoading=!1,t.$message.success("状态更新成功")):(e.statusLoading=!1,t.$set(e,"status",e.status?0:1),t.$message.error(a.code+":"+a.message))},function(a){e.statusLoading=!1,t.$set(e,"status",e.status?0:1),t.$message.error(qo()(a))})},changeWeight:function(e){var t=this;this.$prompt("","修改权重",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,3}$/,inputErrorMessage:"0-999之间",closeOnClickModal:!1,inputValue:e.weight}).then(function(a){var i=a.value;t.$service(ti,{method:"post",data:{activityPlazaId:e.activityPlazaId,weight:i}}).then(function(e){200===e.code?(t.getList(Math.floor(t.offset/t.limit)+1,!0),t.$message.success("权重修改成功")):t.$message.error(e.code+":"+e.message)},function(e){t.$message.error(qo()(e))})})}},watch:{windowHeight:function(){this.setHeight()}}},qu={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"activity-app"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.appPop()}}},[e._v("新建活动")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"",label:"活动ID",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.activityPlazaId)+"\n        "),t.row.isMajor?a("el-tag",{staticStyle:{color:"#fff"},attrs:{size:"mini",color:"#e62121"}},[e._v("主推")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"活动标题","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"redirectLink",label:"跳转链接","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("urlRedirect2CH")(t.row.redirectType)))]),e._v(" "),a("span",[e._v(e._s(t.row.redirectLink||""))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"入口图片",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.imgUrl?a("img",{staticStyle:{"max-width":"150px","max-height":"62px"},attrs:{src:t.row.imgUrl+"?imageView&thumbnail=150y62&quality=85",alt:""}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"majorAbstract",label:"摘要","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"活动时间","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.validType?e.dateFormat(t.row.validStartTime)+"~"+e.dateFormat(t.row.validEndTime):"不限时")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"weight",label:"权重",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.changeWeight(t.row)}}},[e._v(e._s(t.row.weight))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.status?"下线":"上线")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"230"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"left"},model:{value:t.row.majorPop,callback:function(a){e.$set(t.row,"majorPop",a)},expression:"scope.row.majorPop"}},[a("p",[e._v(e._s(t.row.isMajor?"取消":"设为")+"主推？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.majorPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.setMajor(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:t.row.isMajor?"":"primary",size:"small"},slot:"reference"},[e._v(e._s(t.row.isMajor?"取消":"设为")+"主推")])],1),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.appPop(t.row)}}}),e._v(" "),a("el-popover",{attrs:{placement:"left"},model:{value:t.row.delPop,callback:function(a){e.$set(t.row,"delPop",a)},expression:"scope.row.delPop"}},[a("p",[e._v("确定删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.appDel(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:"",size:"small"},slot:"reference"})],1),e._v(" "),a("el-switch",{attrs:{disabled:t.row.statusLoading,"active-value":0,"inactive-value":1},nativeOn:{click:function(a){return e.switchStatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":Math.floor(e.offset/e.limit)+1,total:e.total,"page-size":e.limit},on:{"current-change":e.getList,"update:currentPage":function(t){e.$set(Math,"floor(offset/limit) + 1",t)},"update:current-page":function(t){e.$set(Math,"floor(offset/limit) + 1",t)}}}),e._v(" "),a("el-dialog",{attrs:{title:e.form.activityPlazaId?"修改活动":"新建活动",visible:e.dialogFormVisible,width:"520px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,disabled:e.updateLoading,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"活动标题",prop:"title",rules:[{required:!0,message:"必填",trigger:["blur","change"]},{max:15,message:"最多15个字符",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"跳转类型",prop:"redirectType"}},[a("el-select",{model:{value:e.form.redirectType,callback:function(t){e.$set(e.form,"redirectType",t)},expression:"form.redirectType"}},[a("el-option",{attrs:{value:"1",label:"URL"}}),e._v(" "),a("el-option",{attrs:{value:"2",label:"专家页"}}),e._v(" "),a("el-option",{attrs:{value:"3",label:"赛事页"}}),e._v(" "),a("el-option",{attrs:{value:"4",label:"方案页"}}),e._v(" "),a("el-option",{attrs:{value:"16",label:"充值页"}}),e._v(" "),a("el-option",{attrs:{value:"30",label:"交叉盘购买"}}),e._v(" "),a("el-option",{attrs:{value:"31",label:"积分商城页"}}),e._v(" "),a("el-option",{attrs:{value:"33",label:"拉新竞猜首页"}})],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:parseInt(e.form.redirectType)<5,expression:"parseInt(form.redirectType)<5"}],attrs:{label:"跳转"+(1===parseInt(e.form.redirectType)?"链接":"ID"),prop:"redirectLink",rules:[{required:parseInt(e.form.redirectType)<5,message:"不为空",trigger:["blur","change"]},{type:1===parseInt(e.form.redirectType)?"url":"",message:"不符合url格式,",trigger:["blur","change"]},{pattern:parseInt(e.form.redirectType)>1&&parseInt(e.form.redirectType)<5?/^\d+$/:"",message:"ID必须为数字,",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off","suffix-icon":e.previewLoading?"el-icon-loading":""},on:{change:e.previewID},model:{value:e.form.redirectLink,callback:function(t){e.$set(e.form,"redirectLink",t)},expression:"form.redirectLink"}})],1),e._v(" "),e.redirectPreview?a("el-form-item",[a("span",[e._v(e._s(e.redirectPreview))])]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"活动图片",prop:"imgUrl",rules:{required:!0,message:"不为空",trigger:["blur","change"]}}},[a("el-upload",{staticClass:"single-uploader",attrs:{accept:".jpeg,.jpg,.png,.gif","show-file-list":!1,"http-request":e.uploadSingleImg,"before-upload":e.beforeImgUpload}},[e.form.imgUrl?a("img",{staticClass:"single-img",attrs:{src:e.form.imgUrl+"?imageView&thumbnail=98y98&quality=85"}}):a("i",{staticClass:"el-icon-plus single-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"活动时间"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.form.validType,callback:function(t){e.$set(e.form,"validType",t)},expression:"form.validType"}},[e._v("不限制")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.form.validType,callback:function(t){e.$set(e.form,"validType",t)},expression:"form.validType"}},[e._v("限制")])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===e.form.validType,expression:"form.validType==='1'"}],attrs:{label:"",prop:"validStartTime",rules:[{validator:e.timeRule,trigger:["blur","change"]}]}},[a("el-date-picker",{staticStyle:{width:"185px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期","picker-options":{disabledDate:function(t){return t.getTime()<Date.now()||0!==new Date(e.form.validEndTime).getTime()&&t.getTime()>new Date(e.form.validEndTime).getTime()}}},model:{value:e.form.validStartTime,callback:function(t){e.$set(e.form,"validStartTime",t)},expression:"form.validStartTime"}}),e._v("\n        ~\n        "),a("el-date-picker",{ref:"validEndTime",staticStyle:{width:"185px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期","picker-options":{disabledDate:function(t){return t.getTime()<Date.now()||0!==new Date(e.form.validStartTime).getTime()&&t.getTime()<new Date(e.form.validStartTime).getTime()}}},model:{value:e.form.validEndTime,callback:function(t){e.$set(e.form,"validEndTime",t)},expression:"form.validEndTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动摘要",prop:"majorAbstract",rules:[{required:!0,message:"必填",trigger:["blur","change"]},{max:15,message:"最多15个字符",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.majorAbstract,callback:function(t){e.$set(e.form,"majorAbstract",t)},expression:"form.majorAbstract"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-option",{attrs:{label:"上线",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"下线",value:"1"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},ju=a("VU/8")(Vu,qu,!1,null,null,null).exports,Qu={name:"activityWap",data:function(){return{wapStatus:null,statusLoading:!1,sortRrders:["descending","ascending",null],loading:!1,list:[],tableHeight:null,dialogFormVisible:!1,form:{},updateLoading:!1}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-20})},timeRule:function(e,t,a){"1"===this.form.timeLimitation?t?this.$refs.endTime.value?a():a(new Error("结束时间不为空")):a(new Error("开始时间不为空")):a()},getList:function(e,t,a){var i=this;if(!this.loading){var r=null;e&&e.prop&&(r={sort:e.prop,sortDesc:"ascending"!==e.order&&("descending"===e.order||null)}),this.loading=!0,this.$service(ri,{params:r}).then(function(e){i.loading=!1,200===e.code?(i.list=e.data.activityList||[],i.wapStatus=e.data.status,i.$refs.elTable.bodyWrapper.scrollTop=0):i.$message.error(e.code+":"+e.message)},function(e){i.loading=!1,i.$message.error(qo()(e))})}},switchStatus:function(){var e=this;this.statusLoading||(this.statusLoading=!0,this.$service(this.wapStatus?li:si).then(function(t){e.statusLoading=!1,200===t.code?(e.getList(),e.$message.success(e.wapStatus?"下线成功":"上线成功"),e.wapStatus=e.wapStatus?0:1):e.$message.error(t.code+":"+t.message)},function(t){e.$message.error(qo()(t))}))},beforeImgUpload:function(e){if(e.size/1024/1024>5)return this.$message.error("上传头像图片大小不能超过 5MB!"),!1},uploadSingleImg:function(e){var t=this;En(e.file,"thread").then(function(e){t.form.imgUrl=e},function(e){e&&t.$message.error("上传图片失败，请稍后再传！")})},wapPop:function(e){var t=this;this.form=tn()({timeLimitation:"0",status:"1",imgUrl:""},e||{}),e&&(this.form.timeLimitation=this.form.timeLimitation+"",this.form.status=this.form.status+"",e.startTime&&(this.form.startTime=e.startTime+" 00:00:00"),e.endTime&&(this.form.endTime=e.endTime+" 23:59:59")),this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.form.clearValidate()})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(t.updateLoading)return;t.updateLoading=!0,t.$service(t.form.activityId?ni:oi,{method:"post",data:t.form}).then(function(e){t.updateLoading=!1,200===e.code?(t.dialogFormVisible=!1,t.getList(),t.$message.success(t.form.activityId?"修改成功":"添加成功")):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}})}},watch:{windowHeight:function(){this.setHeight()}}},Wu={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"activity-wap"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[e._v("\n      WAP活动状态："+e._s(e.wapStatus?"上线":"下线")+"\n      "),a("el-button",{attrs:{type:"primary",size:"mini",loading:e.statusLoading},on:{click:e.switchStatus}},[e._v(e._s(e.wapStatus?"下线":"上线")+"WAP活动")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.wapPop}},[e._v("新建活动")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight},on:{"sort-change":e.getList}},[a("el-table-column",{attrs:{sortable:"custom","sort-orders":e.sortRrders,prop:"priority",label:"权重",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"活动标题","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"custom","sort-orders":e.sortRrders,prop:"startTime",label:"活动时间","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.timeLimitation?t.row.startTime+"~"+t.row.endTime:"不限时")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"redirectUrl",label:"跳转链接","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"入口图片",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.imgUrl?a("img",{attrs:{src:t.row.imgUrl+"?imageView&thumbnail=150y62&quality=85",alt:""}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.status?"上线":"下线")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.wapPop(t.row)}}})]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:e.form.activityId?"修改活动":"新建活动","close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,disabled:e.updateLoading,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"权重",prop:"priority",rules:[{required:!0,message:"必填",trigger:["blur","change"]},{pattern:/^[1-9][0-9]{0,1}$/,message:"权重1-99",trigger:["blur","change"]}]}},[a("el-input",{attrs:{type:"age",autocomplete:"off"},model:{value:e.form.priority,callback:function(t){e.$set(e.form,"priority",t)},expression:"form.priority"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动标题",prop:"title",rules:[{required:!0,message:"必填",trigger:["blur","change"]},{max:10,message:"最多10个字符",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动时间"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.form.timeLimitation,callback:function(t){e.$set(e.form,"timeLimitation",t)},expression:"form.timeLimitation"}},[e._v("不限制")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.form.timeLimitation,callback:function(t){e.$set(e.form,"timeLimitation",t)},expression:"form.timeLimitation"}},[e._v("限制")])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===e.form.timeLimitation,expression:"form.timeLimitation==='1'"}],attrs:{label:"",prop:"startTime",rules:[{validator:e.timeRule,trigger:["blur","change"]}]}},[a("el-date-picker",{staticStyle:{width:"135px"},attrs:{type:"date","value-format":"yyyy-MM-dd 00:00:00",placeholder:"选择日期","picker-options":{disabledDate:function(t){return t.getTime()<Date.now()||0!==new Date(e.form.endTime).getTime()&&t.getTime()>new Date(e.form.endTime).getTime()}}},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}}),e._v("\n        ~\n        "),a("el-date-picker",{ref:"endTime",staticStyle:{width:"135px"},attrs:{type:"date","value-format":"yyyy-MM-dd 23:59:59",placeholder:"选择日期","picker-options":{disabledDate:function(t){return t.getTime()<Date.now()||0!==new Date(e.form.startTime).getTime()&&t.getTime()<new Date(e.form.startTime).getTime()}}},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"跳转链接",prop:"redirectUrl",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{type:"url",message:"不符合url格式,",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.redirectUrl,callback:function(t){e.$set(e.form,"redirectUrl",t)},expression:"form.redirectUrl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动图片",prop:"imgUrl",rules:{required:!0,message:"不为空",trigger:["blur","change"]}}},[a("el-upload",{staticClass:"single-uploader",attrs:{accept:".jpeg,.jpg,.png,.gif","show-file-list":!1,"http-request":e.uploadSingleImg,"before-upload":e.beforeImgUpload}},[e.form.imgUrl?a("img",{staticClass:"single-img",attrs:{src:e.form.imgUrl+"?imageView&thumbnail=98y98&quality=85"}}):a("i",{staticClass:"el-icon-plus single-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-option",{attrs:{label:"上线",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"下线",value:"0"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},Bu=a("VU/8")(Qu,Wu,!1,null,null,null).exports,Gu={name:"activityFreeThread",data:function(){return{loading:!1,offset:0,limit:25,total:1,list:[],tableHeight:null,dialogFormVisible:!1,form:{},updateLoading:!1}},computed:u()({},Object(sn.d)(["windowHeight"])),filters:{week2CH:function(e){return{1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六",7:"星期日"}[e]||""}},created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(e){var t=this;this.loading||(this.loading=!0,this.offset=e?(e-1)*this.limit:0,this.$service(ci,{urlParams:{offset:this.offset,limit:this.limit}}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.data||[],t.total=e.data.total||1,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){t.loading=!1,t.$message.error(qo()(e))}))},freePop:function(){var e=this;this.form={theme:"",expertList:[{id:"",flag:!1,nickname:""},{id:"",flag:!1,nickname:""},{id:"",flag:!1,nickname:""}]},this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.form.clearValidate()})},getExpertInfo:function(e){!e.loading&&/^\d+$/.test(e.id)&&(e.nickname="",e.flag=!1,this.$set(e,"loading",!0),On(e.id).then(function(t){e.loading=!1,e.flag=!!t.nickname,e.nickname=t.nickname||"找不到对应的专家"}).catch(function(t){t&&(e.loading=!1,e.flag=!1,e.nickname="找不到对应的专家")}))},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a={theme:t.form.theme},i=null,r=["expertA","expertB","expertC"];if(t.form.expertList.forEach(function(e,t){e.flag?a[r[t]]=e.id:i="专家"+t+"非正确的专家ID，请重新填写"}),i)return t.$message.error(i);if(t.updateLoading)return;t.updateLoading=!0,t.$service(di,{method:"post",data:a}).then(function(e){t.updateLoading=!1,200===e.code?(t.dialogFormVisible=!1,t.getList(),t.$message.success("添加成功")):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}})}},watch:{windowHeight:function(){this.setHeight()}}},Yu={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"activity-free-thread"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.freePop()}}},[e._v("新建活动")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"activityId",label:"期数ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"activityTheme",label:"星期","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("week2CH")(t.row.activityTheme))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"专家1","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.expertList[0]?t.row.expertList[0].nickname:"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"专家2","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.expertList[1]?t.row.expertList[1].nickname:"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"专家3","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.expertList[2]?t.row.expertList[2].nickname:"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"发布时间","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"adminName",label:"操作人","min-width":"120"}})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":Math.floor(e.offset/e.limit)+1,total:e.total,"page-size":e.limit},on:{"current-change":e.getList,"update:currentPage":function(t){e.$set(Math,"floor(offset/limit) + 1",t)},"update:current-page":function(t){e.$set(Math,"floor(offset/limit) + 1",t)}}}),e._v(" "),a("el-dialog",{attrs:{title:"新建活动","close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,disabled:e.updateLoading,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"渠道名",prop:"theme",rules:{required:!0,message:"不为空",trigger:["blur","change"]}}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.theme,callback:function(t){e.$set(e.form,"theme",t)},expression:"form.theme"}},[a("el-option",{attrs:{label:"星期一",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"星期二",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"星期三",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"星期四",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"星期五",value:"5"}}),e._v(" "),a("el-option",{attrs:{label:"星期六",value:"6"}}),e._v(" "),a("el-option",{attrs:{label:"星期七",value:"7"}})],1)],1),e._v(" "),e._l(e.form.expertList,function(t,i){return a("el-form-item",{key:i,attrs:{label:"专家"+i,prop:"expertList."+i+".id",rules:[{required:!0,message:"专家ID不为空",trigger:["blur","change"]},{pattern:/^\d+$/,message:"必须为数字",trigger:["blur","change"]}]}},[a("el-input",{attrs:{"suffix-icon":t.loading?"el-icon-loading":""},on:{change:function(a){return e.getExpertInfo(t)}},model:{value:t.id,callback:function(a){e.$set(t,"id",a)},expression:"item.id"}}),e._v(" "),t.nickname?a("p",[e._v(e._s(t.nickname))]):e._e()],1)})],2),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},Xu=a("VU/8")(Gu,Yu,!1,null,null,null).exports,Ku={name:"statisticsConsumerByDay",props:{appTab:{type:"String",default:"0"},visible:{type:"Boolean",default:!1},screenHeight:{type:"Number"}},data:function(){return{lotteryList:[],filter:{startTime:gh(new Date((new Date).getFullYear(),(new Date).getMonth(),1),"yyyy-MM-dd hh:mm:ss"),endTime:gh(new Date,"yyyy-MM-dd")+" 23:59:59",countType:"",category:"",payTerminal:"-1"},goodsType:on.goodsType,payTerminal:on.payTerminal,start:0,limit:25,total:1,list:[],totalStat:null,loading:!1,tableHeight:null,listType:1}},created:function(){this.getLottery(),this.visible&&(this.getList(),this.setHeight())},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.screenHeight-e.$refs.elTable.$el.offsetTop-63})},getLottery:function(){var e=this;this.$service(h).then(function(t){200===t.code&&(e.lotteryList=t.data.sort(hh("cId")))})},getList:function(e){var t=this;if(!this.loading){this.totalStat=null,this.loading=!0,this.start="number"==typeof e&&e?(e-1)*this.limit:0;var a={start:this.start,limit:this.limit};this.filter.startTime&&(a.startTime=this.filter.startTime),this.filter.endTime&&(a.endTime=this.filter.endTime),this.filter.countType&&(a.countType=this.filter.countType),1===parseInt(this.filter.countType)&&this.filter.category&&(a.category=this.filter.category),this.filter.payTerminal&&(a.payTerminal=this.filter.payTerminal);var i=ui[this.appTab].consumerByDay.list;this.listType=0,"1000"===this.filter.countType&&(this.listType=1,i=ui[this.appTab].consumerByDay.tcmList),"1001"===this.filter.countType&&(this.listType=2,i=ui[this.appTab].consumerByDay.quizList),this.$service(i,{params:a}).then(function(e){t.loading=!1,200===e.code?(e.data.data.forEach(function(e){e.dayConsumer=Math.floor(e.dayConsumer)}),t.list=e.data.data,t.total=e.data.total||1,t.$refs.elTable.bodyWrapper.scrollTop=0,"1000"===t.filter.countType?t.totalStat=e.data.topInfo?e.data.topInfo:null:"1001"===t.filter.countType?t.totalStat=e.data.topInfo?e.data.topInfo:null:t.totalStat={totalConsumer:e.data.data[0].totalConsumer||0,totalUser:e.data.data[0].totalUser||0,consumerCount:e.data.data[0].consumerCount||0,totalActiveUser:e.data.data[0].totalActiveUser||0}):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))})}},exportList:function(){var e=this;if(0===this.list.length)return this.$message.warning("暂无相关数据");var t=ui[this.appTab].consumerByDay.exportList;"1000"===this.filter.countType&&(t=ui[this.appTab].consumerByDay.exportTcmList),"1001"===this.filter.countType&&(t=ui[this.appTab].consumerByDay.exportQuizList);var a=[];o()(this.filter).forEach(function(t){e.filter[t]&&a.push(t+"="+e.filter[t])}),window.open(window.location.origin+t+"?"+a.join("&"))}},watch:{visible:function(e){e&&0===this.list.length&&(this.getList(),this.setHeight())},screenHeight:function(e){e&&this.setHeight()}}},Ju={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"consumer-day-wrap"},[a("el-form",{attrs:{inline:!0,model:e.filter,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"时间"}},[a("el-date-picker",{staticStyle:{width:"130px"},attrs:{type:"date",editable:"false",width:"100",placeholder:"开始日期","value-format":"yyyy-MM-dd 00:00:00",clearable:!1,"picker-options":{disabledDate:function(t){return t.getTime()>Date.now()||0!==new Date(e.filter.endTime).getTime()&&t.getTime()>new Date(e.filter.endTime).getTime()}}},model:{value:e.filter.startTime,callback:function(t){e.$set(e.filter,"startTime",t)},expression:"filter.startTime"}}),e._v("\n      ~\n      "),a("el-date-picker",{staticStyle:{width:"130px"},attrs:{type:"date",editable:"false",placeholder:"结束日期","value-format":"yyyy-MM-dd 23:59:59",clearable:!1,"picker-options":{disabledDate:function(t){return t.getTime()>Date.now()||0!==new Date(e.filter.startTime).getTime()&&t.getTime()<new Date(e.filter.startTime).getTime()}}},model:{value:e.filter.endTime,callback:function(t){e.$set(e.filter,"endTime",t)},expression:"filter.endTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品类别"}},[a("el-select",{staticStyle:{width:"115px"},model:{value:e.filter.countType,callback:function(t){e.$set(e.filter,"countType",t)},expression:"filter.countType"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"方案加点卡",value:"2001"}}),e._v(" "),e._l(e.goodsType[e.appTab],function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),e._v(" "),"0"===e.appTab?a("el-option",{attrs:{label:"竞猜",value:"1000"}}):e._e(),e._v(" "),"0"===e.appTab?a("el-option",{attrs:{label:"拉新竞猜",value:"1001"}}):e._e()],2)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==parseInt(e.filter.countType),expression:"parseInt(filter.countType)==1"}],attrs:{label:"彩种"}},[a("el-select",{staticStyle:{width:"105px"},model:{value:e.filter.category,callback:function(t){e.$set(e.filter,"category",t)},expression:"filter.category"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.lotteryList,function(e){return a("el-option",{key:e.cId,attrs:{label:e.cName,value:e.cId}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"终端"}},[a("el-select",{staticStyle:{width:"105px"},model:{value:e.filter.payTerminal,callback:function(t){e.$set(e.filter,"payTerminal",t)},expression:"filter.payTerminal"}},[a("el-option",{attrs:{label:"全部",value:"-1"}}),e._v(" "),e._l(e.payTerminal[e.appTab],function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),e._v(" "),a("el-option",{attrs:{label:"其他",value:"0"}})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.getList()}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.exportList()}}},[e._v("导出")])],1)],1),e._v(" "),0===e.listType&&e.totalStat?a("div",{staticClass:"statsTotal"},[e._v("\n    消费总次数："),a("b",[e._v(e._s(e.totalStat.totalConsumer))]),e._v("；\n    消费总用户数："),a("b",[e._v(e._s(e.totalStat.totalUser))]),e._v("；\n    消费总额："),a("b",[e._v(e._s(e.totalStat.consumerCount))])]):e._e(),e._v(" "),1===e.listType&&e.totalStat?a("div",{staticClass:"statsTotal"},[e._v("\n    投注量："),a("b",[e._v(e._s(e.totalStat.totalNum))]),e._v("；\n    投注总用户数："),a("b",[e._v(e._s(e.totalStat.userNum))]),e._v("；\n    投注总额："),a("b",[e._v(e._s(e.totalStat.totalFlowAmount))]),e._v("；\n    盈亏总额："),a("b",[e._v(e._s(e.totalStat.netprofitorloss))])]):e._e(),e._v(" "),2===e.listType&&e.totalStat?a("div",{staticClass:"statsTotal"},[e._v("\n    投注量："),a("b",[e._v(e._s(e.totalStat.totalNum))]),e._v("；\n    投注总用户数："),a("b",[e._v(e._s(e.totalStat.userNum))]),e._v("；\n    投注总额："),a("b",[e._v(e._s(e.totalStat.totalFlowAmount))]),e._v("；\n    投入成本总额："),a("b",[e._v(e._s(e.totalStat.totalCost))])]):e._e(),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[0===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"date",label:"日期","min-width":"120"}}):e._e(),e._v(" "),0===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"consumerNum",label:"消费次数","min-width":"100"}}):e._e(),e._v(" "),0===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"userNum",label:"消费用户数","min-width":"100"}}):e._e(),e._v(" "),0===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"dayConsumer",label:"消费总额","min-width":"100"}}):e._e(),e._v(" "),0===e.listType?a("el-table-column",{key:Math.random(),attrs:{label:"消费次数占比","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.consumerScale))+"\n      ")]}}],null,!1,1757357474)}):e._e(),e._v(" "),0===e.listType?a("el-table-column",{key:Math.random(),attrs:{label:"消费用户占比","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.userScale))+"\n      ")]}}],null,!1,674396429)}):e._e(),e._v(" "),1===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"days",label:"日期","min-width":"120"}}):e._e(),e._v(" "),1===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"eventNum",label:"投注比赛数","min-width":"100"}}):e._e(),e._v(" "),1===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"totalNum",label:"投注量(次数)","min-width":"100"}}):e._e(),e._v(" "),1===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"userNum",label:"投注用户数","min-width":"100"}}):e._e(),e._v(" "),1===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"totalFlowAmount",label:"投注总额","min-width":"100"}}):e._e(),e._v(" "),1===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"netprofitorloss",label:"盈亏额","min-width":"100"}}):e._e(),e._v(" "),1===e.listType?a("el-table-column",{key:Math.random(),attrs:{label:"消费次数占比","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.consumerHit))+"\n      ")]}}],null,!1,371695375)}):e._e(),e._v(" "),1===e.listType?a("el-table-column",{key:Math.random(),attrs:{label:"消费用户占比","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.userHit))+"\n      ")]}}],null,!1,2283912864)}):e._e(),e._v(" "),2===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"days",label:"日期","min-width":"120"}}):e._e(),e._v(" "),2===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"quizNum",label:"投注场次数","min-width":"100"}}):e._e(),e._v(" "),2===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"totalNum",label:"投注量(次数)","min-width":"100"}}):e._e(),e._v(" "),2===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"userNum",label:"投注用户数","min-width":"100"}}):e._e(),e._v(" "),2===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"newUserNum",label:"投注新用户数","min-width":"100"}}):e._e(),e._v(" "),2===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"oldUserNum",label:"投注老用户数","min-width":"100"}}):e._e(),e._v(" "),2===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"totalFlowAmount",label:"投注总额","min-width":"100"}}):e._e(),e._v(" "),2===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"totalNetReturn",label:"返奖总额","min-width":"100"}}):e._e(),e._v(" "),2===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"totalCost",label:"平台投入成本","min-width":"100"}}):e._e(),e._v(" "),2===e.listType?a("el-table-column",{key:Math.random(),attrs:{label:"消费用户占比","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.userHit))+"\n      ")]}}],null,!1,2283912864)}):e._e()],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":Math.floor(e.start/e.limit)+1,total:e.total,"page-size":e.limit},on:{"current-change":e.getList,"update:currentPage":function(t){e.$set(Math,"floor(start/limit) + 1",t)},"update:current-page":function(t){e.$set(Math,"floor(start/limit) + 1",t)}}})],1)},staticRenderFns:[]},Zu=a("VU/8")(Ku,Ju,!1,null,null,null).exports,em={name:"statisticsConsumerByPrice",props:{appTab:{type:"String",default:"0"},visible:{type:"Boolean",default:!1},screenHeight:{type:"Number"}},data:function(){return{lotteryList:[],filter:{countType:"",category:"",payTerminal:""},goodsType:on.goodsType,payTerminal:on.payTerminal,list:[],loading:!1,tableHeight:null,listType:1}},mounted:function(){this.getLottery(),this.visible&&(this.getList(),this.setHeight())},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.screenHeight-e.$refs.elTable.$el.offsetTop-20})},getLottery:function(){var e=this;this.$service(h).then(function(t){200===t.code&&(e.lotteryList=t.data.sort(hh("cId")))})},getList:function(e){var t=this;if(!this.loading){this.loading=!0;var a={};this.filter.countType&&(a.countType=this.filter.countType),1===parseInt(this.filter.countType)&&this.filter.category&&(a.category=this.filter.category),this.filter.payTerminal&&(a.payTerminal=this.filter.payTerminal);var i=ui[this.appTab].consumerByPrice.list;"1000"===this.filter.countType&&(i=ui[this.appTab].consumerByPrice.tcmList),this.listType=0,1===parseInt(this.filter.countType)&&(this.listType=1),"1000"===this.filter.countType&&(this.listType=2,i=ui[this.appTab].consumerByPrice.tcmList),this.$service(i,{params:a}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))})}}},watch:{visible:function(e){e&&0===this.list.length&&(this.getList(),this.setHeight())},screenHeight:function(e){e&&this.setHeight()}}},tm={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"consumer-price-wrap"},[a("el-form",{attrs:{inline:!0,model:e.filter,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"商品类别"}},[a("el-select",{staticStyle:{width:"105px"},model:{value:e.filter.countType,callback:function(t){e.$set(e.filter,"countType",t)},expression:"filter.countType"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.goodsType[e.appTab],function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),e._v(" "),"0"===e.appTab?a("el-option",{attrs:{label:"竞猜",value:"1000"}}):e._e()],2)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==parseInt(e.filter.countType),expression:"parseInt(filter.countType)==1"}],attrs:{label:"商品类别"}},[a("el-select",{staticStyle:{width:"105px"},model:{value:e.filter.category,callback:function(t){e.$set(e.filter,"category",t)},expression:"filter.category"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.lotteryList,function(e){return a("el-option",{key:e.cId,attrs:{label:e.cName,value:e.cId}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"终端"}},[a("el-select",{staticStyle:{width:"105px"},model:{value:e.filter.payTerminal,callback:function(t){e.$set(e.filter,"payTerminal",t)},expression:"filter.payTerminal"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.payTerminal[e.appTab],function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),e._v(" "),a("el-option",{attrs:{label:"其他",value:"0"}})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.getList()}}},[e._v("查询")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[0===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"price",label:"价格","min-width":"80"}}):e._e(),e._v(" "),0===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"consumerNum",label:"消费次数","min-width":"80"}}):e._e(),e._v(" "),0===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"userNum",label:"消费用户数","min-width":"90"}}):e._e(),e._v(" "),0===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"consumerScale",label:"消费次数占比","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.consumerScale))+"\n      ")]}}],null,!1,1757357474)}):e._e(),e._v(" "),0===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"userScale",label:"消费用户数占比","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.userScale))+"\n      ")]}}],null,!1,674396429)}):e._e(),e._v(" "),0===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"consumption",label:"消费额(定价*消费次数)","min-width":"170"}}):e._e(),e._v(" "),0===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"averageConsumption",label:"人均消费额(消费额/消费用户数)","min-width":"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(Math.round(100*t.row.averageConsumption)/100)+"\n      ")]}}],null,!1,3378084611)}):e._e(),e._v(" "),1===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"price",label:"价格","min-width":"80"}}):e._e(),e._v(" "),1===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"threadCount",label:"文章数量","min-width":"90"}}):e._e(),e._v(" "),1===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"threadEarningRate",label:"文章盈利率","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.threadEarningRate))+"\n      ")]}}],null,!1,159790288)}):e._e(),e._v(" "),1===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"cardConsumer",label:"点卡消费","min-width":"80"}}):e._e(),e._v(" "),1===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"consumerNum",label:"消费次数","min-width":"80"}}):e._e(),e._v(" "),1===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"userNum",label:"消费用户数","min-width":"90"}}):e._e(),e._v(" "),1===e.listType?a("el-table-column",{key:Math.random(),attrs:{label:"消费次数占比","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.consumerScale))+"\n      ")]}}],null,!1,1757357474)}):e._e(),e._v(" "),1===e.listType?a("el-table-column",{key:Math.random(),attrs:{label:"消费用户数占比","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.userScale))+"\n      ")]}}],null,!1,674396429)}):e._e(),e._v(" "),1===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"consumption",label:"消费额(定价*消费次数)","min-width":"170"}}):e._e(),e._v(" "),1===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"averageConsumption",label:"人均消费额(消费额/消费用户数)","min-width":"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(Math.round(100*t.row.averageConsumption)/100)+"\n      ")]}}],null,!1,3378084611)}):e._e(),e._v(" "),2===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"orderPrice",label:"价格","min-width":"80"}}):e._e(),e._v(" "),2===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"orderTimes",label:"投注量(次数)","min-width":"100"}}):e._e(),e._v(" "),2===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"userTimes",label:"投注用户数","min-width":"100"}}):e._e(),e._v(" "),2===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"orderTimesPer",label:"投注量占比","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.orderTimesPer))+"\n      ")]}}],null,!1,123054315)}):e._e(),e._v(" "),2===e.listType?a("el-table-column",{key:Math.random(),attrs:{prop:"userTimesPer",label:"投注用户占比","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.userTimesPer))+"\n      ")]}}],null,!1,4278527444)}):e._e()],1)],1)},staticRenderFns:[]},am=a("VU/8")(em,tm,!1,null,null,null).exports,im={name:"statisticsNewUserByDay",props:{appTab:{type:"String",default:"0"},screenHeight:{type:"Number"}},data:function(){return{filter:{time:"",payTerminal:"-1"},payTerminal:on.payTerminal,list:[],loading:!1,tableHeight:null,downloadStep:0,checkTimer:null}},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.screenHeight-e.$refs.elTable.$el.offsetTop-20})},getList:function(){var e=this;if(!this.filter.time)return this.$message.warning("请选择具体的时间范围");if(!this.loading){this.loading=!0;var t={};this.filter.time&&(t.startTime=this.filter.time[0]+" 00:00:00",t.endTime=this.filter.time[1]+" 23:59:59"),this.filter.payTerminal&&(t.payTerminal=this.filter.payTerminal),this.$service(ui[this.appTab].newUserByDay.list,{params:t}).then(function(t){e.loading=!1,200===t.code?(e.list=t.data,e.$refs.elTable.bodyWrapper.scrollTop=0,e.setHeight()):e.$message.error(t.code+":"+t.message)},function(t){t&&(e.loading=!1,e.$message.error(qo()(t)))})}},createExcel:function(){var e=this;if(!this.filter.time)return this.$message.warning("请选择具体的时间范围");if(0===this.downloadStep){this.getList(),this.downloadStep=1;var t={startTime:this.filter.time[0]+" 00:00:00",endTime:this.filter.time[1]+" 23:59:59",payTerminal:this.filter.payTerminal};this.$service(ui[this.appTab].newUserByDay.createExcel,{params:t}).then(function(t){e.checkExcel(),200!==t.code&&(e.downloadStep=0,e.$message.error(t.message))},function(t){e.downloadStep=0,e.$message.error(qo()(t))})}},checkExcel:function(){var e=this;this.checkTimer=setInterval(function(){e.$service(ui[e.appTab].newUserByDay.checkExcel).then(function(t){200===t.code&&t.data&&(e.downloadStep=2,clearInterval(e.checkTimer))})},3e3)},exportExcel:function(){2===this.downloadStep&&(this.downloadStep=0,window.open(window.location.origin+ui[this.appTab].newUserByDay.exportExcel))}},watch:{screenHeight:function(e){e&&this.setHeight()}}},rm={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"new-user-day-wrap"},[a("el-form",{attrs:{inline:!0,model:e.filter,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"时间"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":{disabledDate:function(e){return e.getTime()>Date.now()}}},model:{value:e.filter.time,callback:function(t){e.$set(e.filter,"time",t)},expression:"filter.time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"终端"}},[a("el-select",{staticStyle:{width:"105px"},model:{value:e.filter.payTerminal,callback:function(t){e.$set(e.filter,"payTerminal",t)},expression:"filter.payTerminal"}},[a("el-option",{attrs:{label:"全部",value:"-1"}}),e._v(" "),e._l(e.payTerminal[e.appTab],function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),e._v(" "),a("el-option",{attrs:{label:"其他",value:"0"}})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.getList()}}},[e._v("查询")]),e._v(" "),2!==e.downloadStep?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.createExcel()}}},[e._v(e._s(1===e.downloadStep?"正在生成报表...":"生成报表"))]):e._e(),e._v(" "),2===e.downloadStep?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.exportExcel()}}},[e._v("下载报表")]):e._e()],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"payTerminalName",label:"平台","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"newUserNum",label:"新增用户数","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payUserNum",label:"新增用户付费用户数","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userNum",label:"新增用户付费率","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.payRate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"payCount",label:"新增用户付费总额","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"arpu",label:"新增用户ARPU值","min-width":"120"}})],1)],1)},staticRenderFns:[]},om=a("VU/8")(im,rm,!1,null,null,null).exports,nm={name:"statisticsUserByThread",props:{screenHeight:{type:"Number"}},data:function(){return{filter:{time:"",excel:null},list:[],pageIndex:1,pageSize:25,pageCount:1,loading:!1,exportLoading:!1,tableHeight:null,fileName:null}},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.screenHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(e){var t=this;if(!this.filter.time)return this.$message.warning("请选择具体的时间范围");if(!this.filter.excel)return this.$message.warning("请选择用户ID的Excel");var a=new FormData;if(a.append("startTime",this.filter.time[0]+" 00:00:00"),a.append("endTime",this.filter.time[1]+" 23:59:59"),a.append("excel",this.filter.excel),"export"===e){if(this.exportLoading)return;this.exportLoading=!0}else{if(this.loading)return;this.loading=!0,this.pageIndex=e||1,a.append("pageIndex",this.pageIndex),a.append("pageSize",this.pageSize)}this.$service("export"===e?ui[0].userBuyThread.export:ui[0].userBuyThread.list,{method:"post",headers:{"Content-Type":"multipart/form-data"},responseType:"export"===e?"blob":"",data:a}).then(function(a){if("export"===e){if(t.exportLoading=!1,a){var i=new FileReader;i.readAsDataURL(a),i.onload=function(e){var t=document.createElement("a");t.download="用户购买数据统计.xlsx",t.href=e.target.result,document.body.appendChild(t),t.click()}}}else t.loading=!1,200===a.code?(t.list=a.data.records||[],t.pageCount=a.data.page&&a.data.page.pageCount?a.data.page.pageCount:1,t.$refs.elTable.bodyWrapper.scrollTop=0,t.setHeight()):t.$message.error(a.code+":"+a.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))})},handleFileChange:function(e,t){this.fileName=e.name,this.filter.excel=e.raw,t.length>1&&t.splice(0,t.length-1)}},watch:{screenHeight:function(e){e&&this.setHeight()}}},sm={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-buy-thread-wrap"},[a("el-form",{attrs:{inline:!0,model:e.filter,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"时间"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":{disabledDate:function(e){return e.getTime()>Date.now()}}},model:{value:e.filter.time,callback:function(t){e.$set(e.filter,"time",t)},expression:"filter.time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户Excel"}},[a("el-upload",{attrs:{accept:".xls,.xlsx,.xlc,.xlm,.xlt,.xlw","on-change":e.handleFileChange,"show-file-list":!1,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"mini",type:"primary"},slot:"trigger"},[e._v(e._s(e.fileName?e.fileName:"选取文件"))])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.getList()}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger",loading:e.exportLoading},on:{click:function(t){return e.getList("export")}}},[e._v("导出")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"userId",label:"用户ID","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderType",label:"购买类型","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("orderType2CH")(t.row.orderType))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"threadCount",label:"文章数","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsPriceSum",label:"消费金额","min-width":"80"}})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList}})],1)},staticRenderFns:[]},lm=a("VU/8")(nm,sm,!1,null,null,null).exports,cm={name:"lotteryPush",props:{screenHeight:{type:"Number"}},data:function(){return{listType:"filter",sortRrders:["descending","ascending",null],filter:{startDate:"",endDate:"",queryParam:"",sortDesc:"",sortField:""},list:[],pageIndex:1,pageSize:25,pageCount:1,loading:!1,exportLoading:!1,tableHeight:null,totalFee:0,totalPerson:0,search:!1}},created:function(){this.getList()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.screenHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(e){var t=this;if(!this.loading){this.loading=!0,this.pageIndex=fh(e)?e:1;var a={};this.filter.startDate&&(a.startDate=this.filter.startDate),this.filter.endDate&&(a.endDate=this.filter.endDate),this.filter.queryParam&&(this.search=!0,a.queryParam=this.filter.queryParam,a.pageIndex=this.pageIndex,a.pageSize=this.pageSize),"search"===e&&(a.startDate=null,a.endDate=null,this.filter.startDate="",this.filter.endDate=""),e&&"category"!==e||(this.filter.sortField=null),this.filter.sortField&&(a=tn()(a,{sortField:this.filter.sortField,sortDesc:this.filter.sortDesc})),this.$service(ui[0].lotterPush.list,{params:a}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.page.records||[],t.pageCount=e.data.page?e.data.page.page.pageCount:1,t.totalFee=e.data.totalFee||0,t.totalPerson=e.data.totalPerson||0,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))})}},sortList:function(e,t,a){this.filter.sortField=e.prop,this.filter.sortDesc="ascending"!==e.order&&("descending"===e.order||null),this.getList("sort")},exportList:function(){var e=this;if(0===this.list.length)return this.$message("暂无相关数据");var t=location.origin+ui[0].lotterPush.export,a=[];o()(this.filter).forEach(function(t){e.filter[t]&&a.push(t+"="+e.filter[t])}),window.open(t+"?"+a.join("&"))},handleFileChange:function(e,t){this.fileName=e.name,this.filter.excel=e.raw,t.length>1&&t.splice(0,t.length-1)}},watch:{screenHeight:function(e){e&&this.setHeight()}}},dm={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-buy-thread-wrap"},[a("el-form",{attrs:{inline:!0,model:e.filter,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"时间"}},[a("el-date-picker",{staticStyle:{width:"130px"},attrs:{type:"date",editable:"false",width:"100",placeholder:"开始日期","value-format":"yyyy-MM-dd",clearable:!1,"picker-options":{disabledDate:function(t){return t.getTime()>Date.now()||0!==new Date(e.filter.endDate).getTime()&&t.getTime()>new Date(e.filter.endDate).getTime()}}},model:{value:e.filter.startDate,callback:function(t){e.$set(e.filter,"startDate",t)},expression:"filter.startDate"}}),e._v("\n      ~\n      "),a("el-date-picker",{staticStyle:{width:"130px"},attrs:{type:"date",editable:"false",placeholder:"结束日期","value-format":"yyyy-MM-dd",clearable:!1,"picker-options":{disabledDate:function(t){return t.getTime()>Date.now()||0!==new Date(e.filter.startDate).getTime()&&t.getTime()<new Date(e.filter.startDate).getTime()}}},model:{value:e.filter.endDate,callback:function(t){e.$set(e.filter,"endDate",t)},expression:"filter.endDate"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.getList("filter")}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger",loading:e.exportLoading},on:{click:e.exportList}},[e._v("导出")])],1),e._v(" "),a("el-form-item",[e._v("\n      人数："+e._s(e.totalPerson)+" 人 ； 金额 ："+e._s(e.totalFee)+" 元\n    ")]),e._v(" "),a("el-form-item",{staticStyle:{float:"right"},attrs:{label:""}},[a("el-input",{staticStyle:{width:"auto"},attrs:{placeholder:"搜索专家ID/邀请码","prefix-icon":"el-icon-search",clearable:"",size:"mini"},on:{clear:function(t){return e.getList()},change:function(t){return e.getList("search")}},model:{value:e.filter.queryParam,callback:function(t){e.$set(e.filter,"queryParam",t)},expression:"filter.queryParam"}})],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight},on:{"sort-change":e.sortList}},[a("el-table-column",{attrs:{prop:"pushHandsUserId",label:"店铺ID","min-width":"80"}}),e._v(" "),e.search?e._e():a("el-table-column",{attrs:{prop:"inviteCode",label:"邀请码","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"invitePerson",label:"新增邀请人数（人）","min-width":"80",sortable:"custom","sort-orders":e.sortRrders}}),e._v(" "),a("el-table-column",{attrs:{prop:"fee",label:"结算金额（元）","min-width":"80",sortable:"custom","sort-orders":e.sortRrders}}),e._v(" "),e.search?a("el-table-column",{attrs:{prop:"settleDate",label:"结算日期","min-width":"80"}}):e._e()],1),e._v(" "),e.search?a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList}}):e._e()],1)},staticRenderFns:[]},um=a("VU/8")(cm,dm,!1,null,null,null).exports,mm={name:"CPSOrderExpert",data:function(){return{filter:{}}},methods:{exportList:function(){if(!this.filter.time)return this.$message.warning("请选择具体的时间范围");var e={};this.filter.time&&(e.startTime=this.filter.time[0]+" 00:00:00",e.endTime=this.filter.time[1]+" 23:59:59");var t=[];o()(e).forEach(function(a){t.push(a+"="+e[a])}),window.open(window.location.origin+ui[0].cpsOrder.export+"?"+t.join("&"))}}},pm={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cps-order-export"},[a("el-form",{attrs:{inline:!0,model:e.filter,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"时间"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":{disabledDate:function(e){return e.getTime()>Date.now()}}},model:{value:e.filter.time,callback:function(t){e.$set(e.filter,"time",t)},expression:"filter.time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.exportList()}}},[e._v("导出")])],1)],1)],1)},staticRenderFns:[]},fm=a("VU/8")(mm,pm,!1,null,null,null).exports,hm={name:"statisticsConsumer",data:function(){return{appTab:"0",activeTab:"1"}},computed:u()({},Object(sn.d)(["windowHeight"])),components:{ConsumerByDay:Zu,ConsumerByPrice:am,NewUserByDay:om,UserBuyThread:lm,CpsOrderExport:fm,LotteryPush:um},methods:{handleClickTabs:function(){"1"===this.appTab&&"4"===this.activeTab&&(this.activeTab="1")}}},gm={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"statistics-consumer"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title)+"\n        ")])})],2)],1)]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.appTab,callback:function(t){e.appTab=t},expression:"appTab"}},[a("el-tab-pane",{attrs:{label:"红彩",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"精准比分",name:"1"}})],1),e._v(" "),a("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"消费统计",name:"1"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"各价位消费统计",name:"2"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"新增用户数",name:"3"}}),e._v(" "),"0"===e.appTab?a("el-tab-pane",{attrs:{label:"用户购买统计",name:"4"}}):e._e(),e._v(" "),"0"===e.appTab?a("el-tab-pane",{attrs:{label:"CPS订单导出",name:"5"}}):e._e(),e._v(" "),"0"===e.appTab?a("el-tab-pane",{attrs:{label:"彩票店地推统计",name:"6"}}):e._e()],1),e._v(" "),a("consumer-by-day",{attrs:{screenHeight:e.windowHeight,appTab:"0",visible:"0"===e.appTab&&"1"===e.activeTab}}),e._v(" "),a("consumer-by-day",{attrs:{screenHeight:e.windowHeight,appTab:"1",visible:"1"===e.appTab&&"1"===e.activeTab}}),e._v(" "),a("consumer-by-price",{attrs:{screenHeight:e.windowHeight,appTab:"0",visible:"0"===e.appTab&&"2"===e.activeTab}}),e._v(" "),a("consumer-by-price",{attrs:{screenHeight:e.windowHeight,appTab:"1",visible:"1"===e.appTab&&"2"===e.activeTab}}),e._v(" "),a("new-user-by-day",{directives:[{name:"show",rawName:"v-show",value:"0"===e.appTab&&"3"===e.activeTab,expression:"appTab==='0'&&activeTab==='3'"}],attrs:{screenHeight:e.windowHeight,appTab:"0"}}),e._v(" "),a("new-user-by-day",{directives:[{name:"show",rawName:"v-show",value:"1"===e.appTab&&"3"===e.activeTab,expression:"appTab==='1'&&activeTab==='3'"}],attrs:{screenHeight:e.windowHeight,appTab:"1"}}),e._v(" "),a("user-buy-thread",{directives:[{name:"show",rawName:"v-show",value:"0"===e.appTab&&"4"===e.activeTab,expression:"appTab==='0'&&activeTab==='4'"}],attrs:{screenHeight:e.windowHeight}}),e._v(" "),a("lottery-push",{directives:[{name:"show",rawName:"v-show",value:"0"===e.appTab&&"6"===e.activeTab,expression:"appTab==='0'&&activeTab==='6'"}],attrs:{screenHeight:e.windowHeight}}),e._v(" "),a("cps-order-export",{directives:[{name:"show",rawName:"v-show",value:"0"===e.appTab&&"5"===e.activeTab,expression:"appTab==='0'&&activeTab==='5'"}]})],1)},staticRenderFns:[]},vm=a("VU/8")(hm,gm,!1,null,null,null).exports,bm={name:"expertBaseStat",props:{visible:{type:"Boolean",default:!1},screenHeight:{type:"Number"},categoryId:{type:"Number",default:1}},data:function(){return{sortRrders:["descending","ascending",null],sortObj:{},list:[],pageIndex:1,pageSize:25,pageCount:1,loading:!1,tableHeight:null}},mounted:function(){this.visible&&(this.getList(),this.setHeight())},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.screenHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(e){var t=this;if(!this.loading){this.loading=!0,this.pageIndex=e||1;var a={pageIndex:this.pageIndex,pageSize:this.pageSize};this.sortObj&&this.sortObj.sortField&&(a.sortField=this.sortObj.sortField,a.sortDesc=this.sortObj.sortDesc),1===this.categoryId?a.eType=0:a.eType=1,this.$service(pi,{params:a}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.records||[],t.pageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1,t.$refs.elTable.bodyWrapper.scrollTop=0,t.setHeight()):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))})}},sortList:function(e,t,a){this.sortObj.sortField=e.prop,this.sortObj.sortDesc="ascending"!==e.order&&("descending"===e.order||null),this.getList(1)}},watch:{visible:function(e){e&&0===this.list.length&&(this.getList(),this.setHeight())},screenHeight:function(e){e&&this.setHeight()}}},_m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"expert-base-stat"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight},on:{"sort-change":e.sortList}},[a("el-table-column",{attrs:{fixed:"",prop:"nickname",label:"专家名称","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"earningRateRankCount",label:"周盈利率榜次数","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"popularityRankCount",label:"周人气榜次数","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"custom","sort-orders":e.sortRrders,prop:"latestPostTime",label:"最后发文时间","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.latestPostTime?t.row.latestPostTime+"天":"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"custom","sort-orders":e.sortRrders,prop:"totalThreadCount",label:"发文数","min-width":"90"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"custom","sort-orders":e.sortRrders,prop:"totalBuyCount",label:"购买数","min-width":"90"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"custom","sort-orders":e.sortRrders,prop:"follower",label:"粉丝数","min-width":"90"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"custom","sort-orders":e.sortRrders,prop:"totalEarningRate",label:"总盈利率","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.totalEarningRate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"custom","sort-orders":e.sortRrders,prop:"totalHitRate",label:"总命中率","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.totalHitRate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"custom","sort-orders":e.sortRrders,prop:"continuityWin",label:"近期连红","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"custom","sort-orders":e.sortRrders,prop:"threeDaysHitRate",label:"近3日","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.threeDaysHitRate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"custom","sort-orders":e.sortRrders,prop:"sevenDaysHitRate",label:"近7日","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.sevenDaysHitRate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"custom","sort-orders":e.sortRrders,prop:"thirtyDaysHitRate",label:"近30日","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.thirtyDaysHitRate))+"\n      ")]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList}})],1)},staticRenderFns:[]},ym=a("VU/8")(bm,_m,!1,null,null,null).exports,wm={name:"expertLeague",props:{visible:{type:"Boolean",default:!1},screenHeight:{type:"Number"}},data:function(){return{filter:{type:"nickname"},list:[],pageIndex:1,pageSize:25,pageCount:1,loading:!1,tableHeight:null}},mounted:function(){this.visible&&(this.getList(),this.setHeight())},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.screenHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(e){var t=this;if(!this.loading){this.loading=!0,this.pageIndex=e||1;var a={pageIndex:this.pageIndex,pageSize:this.pageSize};this.filter.text&&(a[this.filter.type]=this.filter.text),this.$service(fi,{method:"post",data:a}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.records||[],t.pageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1,t.$refs.elTable.bodyWrapper.scrollTop=0,t.setHeight()):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))})}},exportList:function(){window.open(hi)}},watch:{visible:function(e){e&&0===this.list.length&&(this.getList(),this.setHeight())},screenHeight:function(e){e&&this.setHeight()}}},Tm={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"expert-league"},[a("el-form",{attrs:{inline:!0,model:e.filter,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:""}},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择"},on:{change:function(t){e.filter.text=""}},model:{value:e.filter.type,callback:function(t){e.$set(e.filter,"type",t)},expression:"filter.type"}},[a("el-option",{attrs:{label:"用户昵称",value:"nickname"}}),e._v(" "),a("el-option",{attrs:{label:"联赛名称",value:"leagueMatchName"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.filter.text,callback:function(t){e.$set(e.filter,"text",t)},expression:"filter.text"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.getList()}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.exportList()}}},[e._v("导出")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"nickname",label:"专家名称","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leagueMatchName",label:"联赛","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalHitRateDesc",label:"发文数","min-width":"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.totalHitRateDesc.replace(",","中"))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"totalEarningRate",label:"总盈利率","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.totalEarningRate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"totalHitRate",label:"总命中率","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.totalHitRate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"fiveMatchesHitRate",label:"近5日","min-width":"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.fiveMatchesHitRate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"sevenMatchesHitRate",label:"近7日","min-width":"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.sevenMatchesHitRate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"tenMatchesHitRate",label:"近10日","min-width":"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.tenMatchesHitRate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"fifteenMatchesHitRate",label:"近15日","min-width":"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.fifteenMatchesHitRate))+"\n      ")]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList}})],1)},staticRenderFns:[]},Im=a("VU/8")(wm,Tm,!1,null,null,null).exports,xm={name:"expertEarning",props:{visible:{type:"Boolean",default:!1},screenHeight:{type:"Number"}},data:function(){return{filter:{type:"0",week:new Date((new Date).valueOf()-6048e5),month:new Date},list:[],pageIndex:1,pageSize:31,pageCount:1,loading:!1,tableHeight:null,topType:"0",topCount:null}},mounted:function(){this.visible&&(this.getList(),this.getTopCount(),this.setHeight())},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.screenHeight-e.$refs.elTable.$el.offsetTop-63})},getDateLParam:function(){var e={};if("0"===this.filter.type){var t=this.filter.week.getDay()?this.filter.week.getDay():7;e.startDate=gh(new Date(this.filter.week.valueOf()-24*(t-1)*60*60*1e3),"yyyy-MM-dd"),e.endDate=gh(new Date(this.filter.week.valueOf()+24*(7-t)*60*60*1e3),"yyyy-MM-dd")}if("1"===this.filter.type){var a=this.filter.month.getMonth();e.startDate=gh(new Date(this.filter.month.getFullYear(),a,1),"yyyy-MM-dd"),e.endDate=gh(new Date(11===a?this.filter.month.getFullYear()+1:this.filter.month.getFullYear(),11===a?0:a+1,1).valueOf()-864e5,"yyyy-MM-dd")}return e},getList:function(e){var t=this;if(!this.loading){this.loading=!0,this.pageIndex=e||1;var a="0"===this.filter.type?gi:vi,i=this.getDateLParam();this.$service(a,{urlParams:"0"===this.filter.type?{pageIndex:this.pageIndex,pageSize:this.pageSize}:null,params:i}).then(function(e){t.loading=!1,200===e.code?(t.list="0"===t.filter.type?e.data.records:e.data,t.pageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1,t.$refs.elTable.bodyWrapper.scrollTop=0,t.setHeight()):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))})}},getTopCount:function(){var e=this;this.topCount=null;var t=this.getDateLParam();t.type=this.filter.type,this.$service(bi,{params:t}).then(function(t){200===t.code&&(e.topCount=t.data,e.topType=e.filter.type)})}},watch:{visible:function(e){e&&0===this.list.length&&(this.getList(),this.getTopCount(),this.setHeight())},screenHeight:function(e){e&&this.setHeight()}}},km={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"expert-earning"},[a("el-form",{attrs:{inline:!0,model:e.filter,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"周期时间"}},[a("el-select",{staticStyle:{width:"70px"},model:{value:e.filter.type,callback:function(t){e.$set(e.filter,"type",t)},expression:"filter.type"}},[a("el-option",{attrs:{label:"周",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"月",value:"1"}})],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"0"===e.filter.type,expression:"filter.type==='0'"}]},[a("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"week",format:"yyyy 第 WW 周",clearable:!1,"picker-options":{disabledDate:function(e){return e.getTime().valueOf()>Date.now().valueOf()-6048e5},firstDayOfWeek:1}},model:{value:e.filter.week,callback:function(t){e.$set(e.filter,"week",t)},expression:"filter.week"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===e.filter.type,expression:"filter.type==='1'"}]},[a("el-date-picker",{staticStyle:{width:"110px"},attrs:{type:"month",placeholder:"选择月",clearable:!1,"picker-options":{disabledDate:function(e){return e.getTime()>Date.now()}}},model:{value:e.filter.month,callback:function(t){e.$set(e.filter,"month",t)},expression:"filter.month"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.getList(),e.getTopCount()}}},[e._v("查询")])],1),e._v(" "),e.topCount?a("el-form-item",{attrs:{label:""}},[e._v("\n      "+e._s("0"===e.topType?"周":"月")+"总盈利率："),a("b",[e._v(e._s(e._f("toPercent")(e.topCount.totalEarningRate)))]),e._v("；\n      "+e._s("0"===e.topType?"周":"月")+"销售前10平均盈利率："),a("b",[e._v(e._s(e._f("toPercent")(e.topCount.topTenAvgEarningRate)))]),e._v("；\n      "+e._s("0"===e.topType?"周":"月")+"购买≥100平均盈利率："),a("b",[e._v(e._s(e._f("toPercent")(e.topCount.moreThanHundredEarningRate)))]),e._v("；\n      "+e._s("0"===e.topType?"周":"月")+"购买≥100命中率："),a("b",[e._v(e._s(e._f("toPercent")(e.topCount.moreThanHundredHitRate)))])]):e._e()],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"ranking",label:"排名","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.ranking||t.$index+1)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"nickName",label:"专家名","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.nickName||t.row.nickname)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"earningRate",label:"盈利率","min-width":"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.earningRate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"startDate",label:"周期","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.startDate.replace(/^\d+-/g,"").replace(/-/g,".")+" ~ "+t.row.endDate.replace(/^\d+-/g,"").replace(/-/g,"."))+"\n      ")]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList}})],1)},staticRenderFns:[]},$m=a("VU/8")(xm,km,!1,null,null,null).exports,Cm={name:"expertPopularity",props:{visible:{type:"Boolean",default:!1},screenHeight:{type:"Number"},categoryId:{type:"Number",default:1}},data:function(){return{filter:{week:new Date((new Date).valueOf()-6048e5)},list:[],pageIndex:1,pageSize:25,pageCount:1,loading:!1,tableHeight:null,topType:"0",topCount:null}},mounted:function(){this.visible&&(this.getList(),this.setHeight())},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.screenHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(e){var t=this;if(!this.loading){this.loading=!0,this.pageIndex=e||1;var a={},i=this.filter.week.getDay()?this.filter.week.getDay():7;a.startDate=gh(new Date(this.filter.week.valueOf()-24*(i-1)*60*60*1e3),"yyyy-MM-dd"),a.endDate=gh(new Date(this.filter.week.valueOf()+24*(7-i)*60*60*1e3),"yyyy-MM-dd"),this.$service(_i,{urlParams:{pageIndex:this.pageIndex,pageSize:this.pageSize,categoryId:this.categoryId},params:a}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.records,t.pageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1,t.$refs.elTable.bodyWrapper.scrollTop=0,t.setHeight()):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))})}}},watch:{visible:function(e){e&&0===this.list.length&&(this.getList(),this.setHeight())},screenHeight:function(e){e&&this.setHeight()}}},Sm={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"expert-popularity"},[a("el-form",{attrs:{inline:!0,model:e.filter,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"时间"}},[a("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"week",format:"yyyy 第 WW 周",clearable:!1,"picker-options":{disabledDate:function(e){return e.getTime().valueOf()>Date.now().valueOf()-6048e5},firstDayOfWeek:1}},model:{value:e.filter.week,callback:function(t){e.$set(e.filter,"week",t)},expression:"filter.week"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.getList()}}},[e._v("查询")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"ranking",label:"排名","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nickName",label:"专家名","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.nickName||t.row.nickname)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"threadSoldAvg",label:"平均购买数","min-width":"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalSale",label:"总销售额","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"followerIncrement",label:"新增粉丝数","min-width":"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"popularity",label:"人气值","min-width":"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"startDate",label:"周期","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.startDate.replace(/^\d+-/g,"").replace(/-/g,".")+" ~ "+t.row.endDate.replace(/^\d+-/g,"").replace(/-/g,"."))+"\n      ")]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList}})],1)},staticRenderFns:[]},Lm=a("VU/8")(Cm,Sm,!1,null,null,null).exports,Dm={name:"statisticsExpert",data:function(){return{activeTab:"1"}},computed:u()({},Object(sn.d)(["windowHeight"])),components:{ExpertBaseStat:ym,ExpertLeague:Im,ExpertEarning:$m,ExpertPopularity:Lm}},Pm={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"statistics-expert"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1)]),e._v(" "),a("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"基础统计",name:"1"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"联赛分布",name:"2"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"盈利率榜",name:"3"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"足球人气榜",name:"4"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"篮球人气榜",name:"5"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"预选专家统计",name:"6"}})],1),e._v(" "),a("expert-base-stat",{directives:[{name:"show",rawName:"v-show",value:"1"===e.activeTab,expression:"activeTab==='1'"}],attrs:{category:"1",screenHeight:e.windowHeight,visible:"1"===e.activeTab}}),e._v(" "),a("expert-league",{directives:[{name:"show",rawName:"v-show",value:"2"===e.activeTab,expression:"activeTab==='2'"}],attrs:{screenHeight:e.windowHeight,visible:"2"===e.activeTab}}),e._v(" "),a("expert-earning",{directives:[{name:"show",rawName:"v-show",value:"3"===e.activeTab,expression:"activeTab==='3'"}],attrs:{screenHeight:e.windowHeight,visible:"3"===e.activeTab}}),e._v(" "),a("expert-popularity",{directives:[{name:"show",rawName:"v-show",value:"4"===e.activeTab,expression:"activeTab==='4'"}],attrs:{categoryId:"1",screenHeight:e.windowHeight,visible:"4"===e.activeTab}}),e._v(" "),a("expert-popularity",{directives:[{name:"show",rawName:"v-show",value:"5"===e.activeTab,expression:"activeTab==='5'"}],attrs:{categoryId:"2",screenHeight:e.windowHeight,visible:"5"===e.activeTab}}),e._v(" "),a("expert-base-stat",{directives:[{name:"show",rawName:"v-show",value:"6"===e.activeTab,expression:"activeTab==='6'"}],attrs:{categoryId:"2",screenHeight:e.windowHeight,visible:"6"===e.activeTab}})],1)},staticRenderFns:[]},zm=a("VU/8")(Dm,Pm,!1,null,null,null).exports,Hm={name:"statisticsJournal",data:function(){return{filter:{startTime:"",endTime:"",countType:"0",app:"0",payTerminal:"-1"},countTypeList:{0:{1:"红豆购买文章",2:"包月服务",3:"点卡",4:"新交叉盘",5:"竞猜",6:"拉新竞猜"},1:{1:"红豆购买文章"}},payTerminal:on.payTerminal,downloadStep:0,checkTimer:null}},methods:{createExcel:function(){if(!this.filter.startTime||!this.filter.endTime)return this.$message.warning("请选择具体的月份范围");if(0===this.downloadStep){this.downloadStep=1;var e=new Date(this.filter.endTime).getMonth(),t=new Date(this.filter.endTime).getFullYear(),a={startTime:this.filter.startTime+" 00:00:00",endTime:gh(new Date(11===e?t+1:t,11===e?0:e+1,1).valueOf()-864e5,"yyyy-MM-dd")+" 23:59:59",payTerminal:this.filter.payTerminal,countType:this.filter.countType};this.checkExcel(),this.$service(Pi[this.filter.app].create,{params:a}).then(function(e){})}},checkExcel:function(){var e=this;this.checkTimer=setInterval(function(){e.$service(Pi[e.filter.app].check).then(function(t){200===t.code&&t.data&&(e.downloadStep=2,clearInterval(e.checkTimer))})},3e3)},exportExcel:function(){2===this.downloadStep&&(this.downloadStep=0,window.open(window.location.origin+Pi[this.filter.app].export))}}},Mm={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"statistics-journal"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1)]),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.filter,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"时间"}},[a("el-date-picker",{staticStyle:{width:"110px"},attrs:{type:"month",editable:"false",width:"100",placeholder:"开始月份","value-format":"yyyy-MM-dd","picker-options":{disabledDate:function(t){return t.getTime()>Date.now()||0!==new Date(e.filter.endTime).getTime()&&t.getTime()>new Date(e.filter.endTime).getTime()}}},model:{value:e.filter.startTime,callback:function(t){e.$set(e.filter,"startTime",t)},expression:"filter.startTime"}}),e._v("\n      ~\n      "),a("el-date-picker",{staticStyle:{width:"110px"},attrs:{type:"month",editable:"false",placeholder:"结束月份","value-format":"yyyy-MM-dd","picker-options":{disabledDate:function(t){return t.getTime()>Date.now()||0!==new Date(e.filter.startTime).getTime()&&t.getTime()<new Date(e.filter.startTime).getTime()}}},model:{value:e.filter.endTime,callback:function(t){e.$set(e.filter,"endTime",t)},expression:"filter.endTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"终端"}},[a("el-select",{staticStyle:{width:"105px"},model:{value:e.filter.payTerminal,callback:function(t){e.$set(e.filter,"payTerminal",t)},expression:"filter.payTerminal"}},[a("el-option",{attrs:{label:"全部",value:"-1"}}),e._v(" "),e._l(e.payTerminal[e.filter.app],function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),e._v(" "),a("el-option",{attrs:{label:"其他",value:"0"}})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"商品类型"}},[a("el-select",{staticStyle:{width:"105px"},model:{value:e.filter.countType,callback:function(t){e.$set(e.filter,"countType",t)},expression:"filter.countType"}},[a("el-option",{attrs:{label:"全部",value:"0"}}),e._v(" "),e._l(e.countTypeList[e.filter.app],function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"来源"}},[a("el-select",{staticStyle:{width:"105px"},model:{value:e.filter.app,callback:function(t){e.$set(e.filter,"app",t)},expression:"filter.app"}},[a("el-option",{attrs:{label:"红彩",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"精准比分",value:"1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[2!==e.downloadStep?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.createExcel()}}},[e._v(e._s(1===e.downloadStep?"正在生成报表...":"生成报表"))]):e._e(),e._v(" "),2===e.downloadStep?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.exportExcel()}}},[e._v("下载报表")]):e._e()],1)],1)],1)},staticRenderFns:[]},Fm=a("VU/8")(Hm,Mm,!1,null,null,null).exports,Nm={name:"productSp",props:{visible:{type:"Boolean",default:!1},screenHeight:{type:"Number"}},data:function(){return{filter:{startTime:"",endTime:""},list:[],offset:1,limit:25,total:1,loading:!1,tableHeight:null}},computed:{currentPage:function(){return Math.floor(this.offset/this.limit)+1}},mounted:function(){this.visible&&(this.getList(),this.setHeight())},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.screenHeight-e.$refs.elTable.$el.offsetTop-63})},result2ch:function(e){return{"-1":"输",0:"走盘",1:"赢"}[e]||"-"},spanMethod:function(e){e.row,e.column;var t=e.rowIndex;if(0===e.columnIndex)return t%2==0?{rowspan:2,colspan:1}:{rowspan:0,colspan:0}},getList:function(e){var t=this;if(!this.loading){this.loading=!0,this.offset=e?(e-1)*this.limit:0;var a={};this.filter.startTime&&(a.startTime=this.filter.startTime),this.filter.endTime&&(a.endTime=this.filter.endTime),this.$service(yi,{urlParams:{offset:this.offset,limit:this.limit},params:a}).then(function(e){t.loading=!1,200===e.code?(t.list=[],e.data&&e.data.data&&e.data.data.forEach(function(e){e.matchList.forEach(function(a){t.list.push(tn()(a,{company:e.company}))})}),t.total=e.data.total||1,t.$refs.elTable.bodyWrapper.scrollTop=0,t.setHeight()):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))})}}},watch:{visible:function(e){e&&0===this.list.length&&(this.getList(),this.setHeight())},screenHeight:function(e){e&&this.setHeight()}}},Em={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"product-sp"},[a("el-form",{attrs:{inline:!0,model:e.filter,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"时间"}},[a("el-date-picker",{staticStyle:{width:"135px"},attrs:{type:"date",editable:"false","min-width":"100",placeholder:"开始日期","value-format":"yyyy-MM-dd 00:00:00","picker-options":{disabledDate:function(t){return t.getTime()>Date.now()||0!==new Date(e.filter.endTime).getTime()&&t.getTime()>new Date(e.filter.endTime).getTime()}}},on:{change:e.getFilterList},model:{value:e.filter.startTime,callback:function(t){e.$set(e.filter,"startTime",t)},expression:"filter.startTime"}}),e._v("\n      ~\n      "),a("el-date-picker",{staticStyle:{width:"135px"},attrs:{type:"date",editable:"false",placeholder:"结束日期","value-format":"yyyy-MM-dd 23:59:59","picker-options":{disabledDate:function(t){return t.getTime()>Date.now()||0!==new Date(e.filter.startTime).getTime()&&t.getTime()<new Date(e.filter.startTime).getTime()}}},on:{change:e.getFilterList},model:{value:e.filter.endTime,callback:function(t){e.$set(e.filter,"endTime",t)},expression:"filter.endTime"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.getList()}}},[e._v("查询")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",staticStyle:{width:"100%"},attrs:{data:e.list,"span-method":e.spanMethod,border:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"company",label:"交叉盘组","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"matchInfoId",label:"比赛ID","min-width":"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leagueName",label:"联赛","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{label:"对阵","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.home+" VS "+t.row.guest)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"即时赔率","min-width":"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.instantOdds?"胜"+t.row.instantOdds.w+"、平"+t.row.instantOdds.d+"、负"+t.row.instantOdds.l:"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"初赔赔率","min-width":"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.originalOdds?"胜"+t.row.originalOdds.w+"、平"+t.row.originalOdds.d+"、负"+t.row.originalOdds.l:"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"比赛时间","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.matchDate+" "+t.row.matchTime)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"matchStatus",label:"状态","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("matchStatus2CH")(t.row.matchStatus))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"比分","min-width":"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(2===t.row.matchStatus||3===t.row.matchStatus?t.row.homeScore+" - "+t.row.guestScore:"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"结果","min-width":"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.oddsAsiaResult?a("span",[e._v(e._s(t.row.oddsAsiaResult.drawsConcede+" "+e.result2ch(t.row.oddsAsiaResult.resultStatus)))]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.currentPage,total:e.total,"page-size":e.limit},on:{"current-change":e.getList,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)},staticRenderFns:[]},Rm=a("VU/8")(Nm,Em,!1,null,null,null).exports,Om={name:"productStar",props:{visible:{type:"Boolean",default:!1},screenHeight:{type:"Number"}},data:function(){return{filter:{startTime:"",endTime:""},list:[],offset:1,limit:25,total:1,loading:!1,tableHeight:null,count:null,starInfo:[],starLoading:!1}},mounted:function(){this.visible&&(this.getList(),this.setHeight(),this.getCount())},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.screenHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(e){var t=this;if(!this.loading){this.loading=!0,this.offset=e?(e-1)*this.limit:0;var a={};this.filter.startTime&&(a.startTime=this.filter.startTime),this.filter.endTime&&(a.endTime=this.filter.endTime),this.$service(wi,{urlParams:{offset:this.offset,limit:this.limit},params:a}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.data||[],t.total=e.data.total||1,t.$refs.elTable.bodyWrapper.scrollTop=0,t.setHeight()):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))})}},getCount:function(){var e=this,t={};this.filter.startTime&&(t.startTime=this.filter.startTime),this.filter.endTime&&(t.endTime=this.filter.endTime),this.$service(Ti,{params:t}).then(function(t){e.loading=!1,200===t.code&&(e.count=t.data)})},getStarById:function(e){var t=this;this.starInfo=[],this.starLoading=!0,this.$service(Ii,{urlParams:{matchInfoId:e}}).then(function(e){t.starLoading=!1,200===e.code&&(t.starInfo=e.data)},function(e){e&&(t.starLoading=!1)})}},watch:{visible:function(e){e&&0===this.list.length&&(this.getList(),this.setHeight(),this.getCount())},screenHeight:function(e){e&&this.setHeight()}}},Am={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"product-star"},[a("el-form",{attrs:{inline:!0,model:e.filter,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"时间"}},[a("el-date-picker",{staticStyle:{width:"135px"},attrs:{type:"date",editable:"false","min-width":"100",placeholder:"开始日期","value-format":"yyyy-MM-dd 00:00:00","picker-options":{disabledDate:function(t){return t.getTime()>Date.now()||0!==new Date(e.filter.endTime).getTime()&&t.getTime()>new Date(e.filter.endTime).getTime()}}},on:{change:e.getFilterList},model:{value:e.filter.startTime,callback:function(t){e.$set(e.filter,"startTime",t)},expression:"filter.startTime"}}),e._v("\n      ~\n      "),a("el-date-picker",{staticStyle:{width:"135px"},attrs:{type:"date",editable:"false",placeholder:"结束日期","value-format":"yyyy-MM-dd 23:59:59","picker-options":{disabledDate:function(t){return t.getTime()>Date.now()||0!==new Date(e.filter.startTime).getTime()&&t.getTime()<new Date(e.filter.startTime).getTime()}}},on:{change:e.getFilterList},model:{value:e.filter.endTime,callback:function(t){e.$set(e.filter,"endTime",t)},expression:"filter.endTime"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.getList(),e.getCount()}}},[e._v("查询")])],1),e._v(" "),e.count?a("el-form-item",{attrs:{label:""}},[e._v("\n      总命中率："),a("b",[e._v(e._s(e.count.totalHit?e.count.totalHit+"%":"-"))]),e._v("；\n      总盈利率："),a("b",[e._v(e._s(e._f("toPercent")(e.count.totalEarningsRate)))]),e._v("；\n      近3天："),a("b",[e._v(e._s(e.count.threeDayHitStr||"-"))]),e._v("；\n      近5天："),a("b",[e._v(e._s(e.count.fiveDayHitStr||"-"))]),e._v("；\n      近7天："),a("b",[e._v(e._s(e.count.sevenDayHitStr||"-"))])]):e._e()],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"matchInfoId",label:"比赛ID","min-width":"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leagueMatch",label:"联赛","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{label:"对阵","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.homeName+" VS "+t.row.guestName)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"信心","min-width":"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s("★★★★★☆☆☆☆☆".slice(5-t.row.star,10-t.row.star))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"比赛时间","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.matchTime)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"matchStatus",label:"状态","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("matchStatus2CH")(t.row.matchStatus))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"比分","min-width":"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(2===t.row.matchStatus||3===t.row.matchStatus?t.row.homeScore+" - "+t.row.guestScore:"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"推荐","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"left",width:"300",trigger:"click"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.starLoading,expression:"starLoading"}],staticClass:"starInfo"},[e._l(e.starInfo,function(t,i){return a("div",{key:i,staticClass:"item"},[a("h2",[e._v(e._s(t.name)),a("span",[e._v(e._s(t.date))])]),e._v(" "),e._l(t.handicapInfoList,function(t,i){return a("div",{key:i,staticClass:"item-odds"},[a("li",{staticClass:"area"},[e._v("\n                  "+e._s(1===t.area?"亚盘":"欧赔")+"\n                  "),1===t.hitStatus?a("span",{staticClass:"red"},[e._v("已中")]):e._e(),e._v(" "),3===t.hitStatus?a("span",{staticClass:"blue"},[e._v("走盘")]):e._e(),e._v(" "),2===t.hitStatus?a("span",{staticClass:"black"},[e._v("未中")]):e._e()]),e._v(" "),a("li",{class:{check:1&t.modelRecommend,hit:1&t.hits}},[a("span",[e._v("主赔")]),a("span",[e._v(e._s(t.winsOdds))])]),e._v(" "),1===t.area?a("li",[e._v("让 "+e._s(t.concede))]):e._e(),e._v(" "),2===t.area?a("li",{class:{check:2&t.modelRecommend,hit:2&t.hits}},[a("span",[e._v("平")]),a("span",[e._v(e._s(t.drawsOdds))])]):e._e(),e._v(" "),a("li",{class:{check:4&t.modelRecommend,hit:4&t.hits}},[a("span",[e._v("客赔")]),a("span",[e._v(e._s(t.lossesOdds))])])])})],2)}),e._v(" "),e.starLoading||0!==e.starInfo.length?e._e():a("div",[e._v("没有数据")])],2),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"text"},nativeOn:{click:function(a){return e.getStarById(t.row.matchInfoId)}},slot:"reference"},[e._v("详情>>")])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"结果","min-width":"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[3===t.row.matchStatus?a("el-tag",{staticStyle:{color:"#fff"},attrs:{size:"mini",color:1===t.row.isWin?"#e62121":"#333"}},[e._v("   ")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":Math.floor(e.offset/e.limit)+1,total:e.total,"page-size":e.limit},on:{"current-change":e.getList,"update:currentPage":function(t){e.$set(Math,"floor(offset/limit) + 1",t)},"update:current-page":function(t){e.$set(Math,"floor(offset/limit) + 1",t)}}})],1)},staticRenderFns:[]};var Um=a("VU/8")(Om,Am,!1,function(e){a("4roC")},null,null).exports,Vm={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"eloDetailInfo"},[a("h2",[e._v(e._s(e.title)+"方案")]),e._v(" "),a("p",[e._v("理论 VS 百家赔率")]),e._v(" "),e._m(0),e._v(" "),!e.eloInfo.theoryOdds||0===e.eloInfo.theoryOdds.euWinOdds&&0===e.eloInfo.theoryOdds.euDrawOdds&&0===e.eloInfo.theoryOdds.euLossOdds?e._e():a("ul",[a("li",{staticClass:"text-left"},[e._v("理论")]),e._v(" "),a("li",[e._v(e._s(e.eloInfo.theoryOdds.euWinOdds))]),e._v(" "),a("li",[e._v(e._s(e.eloInfo.theoryOdds.euDrawOdds))]),e._v(" "),a("li",[e._v(e._s(e.eloInfo.theoryOdds.euLossOdds))])]),e._v(" "),!e.eloInfo.averOdds||0===e.eloInfo.averOdds.euWinOdds&&0===e.eloInfo.averOdds.euDrawOdds&&0===e.eloInfo.averOdds.euLossOdds?e._e():a("ul",[a("li",{staticClass:"text-left"},[e._v("百家")]),e._v(" "),a("li",[e._v("\n      "+e._s(e.eloInfo.averOdds.euWinOdds)+"\n      "),1==parseInt(e.eloInfo.averOddsDisplayPosition)?a("span",[e._v("("),/\-/g.test(e.eloInfo.averOddsDiffRate)?a("i",{staticStyle:{color:"green"}},[e._v("↓")]):a("i",{staticStyle:{color:"red"}},[e._v("↑")]),e._v(e._s((Math.round(1e4*e.eloInfo.averOddsDiffRate)/100+"%").replace(/\-/,""))+")")]):e._e()]),e._v(" "),a("li",[e._v("\n      "+e._s(e.eloInfo.averOdds.euDrawOdds)+"\n      "),0==parseInt(e.eloInfo.averOddsDisplayPosition)?a("span",[e._v("("),/\-/g.test(e.eloInfo.averOddsDiffRate)?a("i",{staticStyle:{color:"green"}},[e._v("↓")]):a("i",{staticStyle:{color:"red"}},[e._v("↑")]),e._v(e._s((Math.round(1e4*e.eloInfo.averOddsDiffRate)/100+"%").replace(/\-/,""))+")")]):e._e()]),e._v(" "),a("li",[e._v("\n      "+e._s(e.eloInfo.averOdds.euLossOdds)+"\n      "),-1==parseInt(e.eloInfo.averOddsDisplayPosition)?a("span",[e._v("("),/\-/g.test(e.eloInfo.averOddsDiffRate)?a("i",{staticStyle:{color:"green"}},[e._v("↓")]):a("i",{staticStyle:{color:"red"}},[e._v("↑")]),e._v(e._s((Math.round(1e4*e.eloInfo.averOddsDiffRate)/100+"%").replace(/\-/,""))+")")]):e._e()])]),e._v(" "),e.eloInfo.averOddsDiffRate?a("p",[e._v("百家平均欧赔比理论赔率"),a("i",[e._v(e._s(/\-/g.test(e.eloInfo.averOddsDiffRate)?"低":"高")+e._s((Math.round(1e4*e.eloInfo.averOddsDiffRate)/100+"%").replace(/\-/,""))+"，有")]),e._v("投注价值")]):e._e(),e._v(" "),a("h2",[e._v(e._s(e.title)+"参考方案")]),e._v(" "),!e.eloInfo.referAsiaOddsVo||0===e.eloInfo.referAsiaOddsVo.asiaUpOdds&&0===e.eloInfo.referAsiaOddsVo.asiaConcede&&0===e.eloInfo.referAsiaOddsVo.asiaDownOdds?e._e():a("ul",[a("li",{staticClass:"text-left"},[e._v("亚盘"),1===e.eloInfo.referAsiaOddsVo.isAsiaHit?a("div",{staticClass:"red"},[e._v("已中")]):e._e(),2===e.eloInfo.referAsiaOddsVo.isAsiaHit?a("div",{staticClass:"blue"},[e._v("走盘")]):e._e(),0===e.eloInfo.referAsiaOddsVo.isAsiaHit?a("div",{staticClass:"black"},[e._v("未中")]):e._e()]),e._v(" "),a("li",{class:{hit:1===e.eloInfo.referAsiaOddsVo.asiaResultItem&&2!=e.eloInfo.referAsiaOddsVo.isAsiaHit,check:1===e.eloInfo.referAsiaOddsVo.suggestAsiaItem}},[e._v("主赔 "+e._s(e.eloInfo.referAsiaOddsVo.asiaUpOdds))]),e._v(" "),a("li",[e._v(e._s(e.eloInfo.referAsiaOddsVo.asiaConcede>0?"+":"")+e._s(e.eloInfo.referAsiaOddsVo.asiaConcede))]),e._v(" "),a("li",{class:{hit:-1===e.eloInfo.referAsiaOddsVo.asiaResultItem&&2!=e.eloInfo.referAsiaOddsVo.isAsiaHit,check:-1===e.eloInfo.referAsiaOddsVo.suggestAsiaItem}},[e._v("客赔 "+e._s(e.eloInfo.referAsiaOddsVo.asiaDownOdds))])]),e._v(" "),!e.eloInfo.referEuOddsVo||0===e.eloInfo.referEuOddsVo.euWinOdds&&0===e.eloInfo.referEuOddsVo.euDrawOdds&&0===e.eloInfo.referEuOddsVo.euLossOdds?e._e():a("ul",[a("li",{staticClass:"text-left"},[e._v("欧赔"),1===e.eloInfo.referEuOddsVo.isEuropeHit?a("div",{staticClass:"red"},[e._v("已中")]):e._e(),2===e.eloInfo.referEuOddsVo.isEuropeHit?a("div",{staticClass:"blue"},[e._v("走盘")]):e._e(),0===e.eloInfo.referEuOddsVo.isEuropeHit?a("div",{staticClass:"black"},[e._v("未中")]):e._e()]),e._v(" "),a("li",{class:{hit:1===e.eloInfo.referEuOddsVo.euResultItem&&2!=e.eloInfo.referEuOddsVo.isEuropeHit,check:1===e.eloInfo.referEuOddsVo.suggestEuropeItem}},[e._v("胜 "+e._s(e.eloInfo.referEuOddsVo.euWinOdds))]),e._v(" "),a("li",{class:{hit:0===e.eloInfo.referEuOddsVo.euResultItem&&2!=e.eloInfo.referEuOddsVo.isEuropeHit,check:0===e.eloInfo.referEuOddsVo.suggestEuropeItem||1===e.eloInfo.referEuOddsVo.isDoubleSelection}},[e._v("平 "+e._s(e.eloInfo.referEuOddsVo.euDrawOdds))]),e._v(" "),a("li",{class:{hit:-1===e.eloInfo.referEuOddsVo.euResultItem&&2!=e.eloInfo.referEuOddsVo.isEuropeHit,check:-1===e.eloInfo.referEuOddsVo.suggestEuropeItem}},[e._v("负 "+e._s(e.eloInfo.referEuOddsVo.euLossOdds))])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",{staticClass:"text-left"},[this._v(" ")]),this._v(" "),t("li",[this._v("胜")]),this._v(" "),t("li",[this._v("平")]),this._v(" "),t("li",[this._v("负")])])}]};var qm={name:"productElo",props:{visible:{type:"Boolean",default:!1},screenHeight:{type:"Number"},pop:{type:"Boolean",default:!1}},data:function(){return{filter:{startTime:"",endTime:""},list:[],offset:1,limit:25,total:1,loading:!1,tableHeight:null,count:null,eloInfo:null,eloLoading:!1,form:{},dialogFormVisible:!1,updateLoading:!1,previewLoading:!1,previewEloInfo:null,matchIdPreview:!1,matchIdLoading:!1}},computed:{currentPage:function(){return Math.floor(this.offset/this.limit)+1}},mounted:function(){this.visible&&(this.getList(),this.setHeight(),this.getCount())},components:{EloTableInfo:a("VU/8")({name:"EloTableInfo",props:["eloInfo","title"]},Vm,!1,function(e){a("fzjT")},null,null).exports},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.screenHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(e){var t=this;if(!this.loading){this.loading=!0,this.offset=e?(e-1)*this.limit:0;var a={};this.filter.startTime&&(a.startTime=this.filter.startTime),this.filter.endTime&&(a.endTime=this.filter.endTime),this.$service(xi,{urlParams:{offset:this.offset,limit:this.limit},params:a}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.data||[],t.total=e.data.total||1,t.$refs.elTable.bodyWrapper.scrollTop=0,t.setHeight()):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))})}},getCount:function(){var e=this,t={};this.filter.startTime&&(t.startTime=this.filter.startTime),this.filter.endTime&&(t.endTime=this.filter.endTime),this.$service(ki,{params:t}).then(function(t){e.loading=!1,200===t.code&&(e.count=t.data)})},getEloById:function(e){var t=this;this.eloInfo=null,this.eloLoading=!0,this.$service($i,{urlParams:{matchInfoId:e}}).then(function(e){t.eloLoading=!1,200===e.code&&(t.eloInfo=e.data)},function(e){e&&(t.eloLoading=!1)})},eloDel:function(e){var t=this;this.$set(e,"loading",!0),this.$service(Ci,{method:"post",data:{matchInfoId:e.matchInfoId}}).then(function(a){e.loading=!1,200===a.code?(e.delPop=!1,t.$message.success("删除成功"),t.getList()):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})},updateStatus:function(e){var t=this;this.$set(e,"loading",!0),this.$service(Si,{method:"post",data:{matchInfoId:e.matchInfoId,show:e.isShow?0:1}}).then(function(a){e.loading=!1,200===a.code?(e.showPop=!1,t.$message.success((e.isShow?"隐藏":"显示")+"成功"),e.isShow=e.isShow?0:1):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})},previewMatchID:function(){var e=this;!this.matchIdLoading&&/\d+/.test(this.form.matchInfoId)&&(this.matchIdLoading=!0,An(this.form.matchInfoId).then(function(t){e.matchIdPreview=t.homeMatchTeam.teamName+"VS"+t.guestMatchTeam.teamName,e.matchIdLoading=!1}).catch(function(t){t&&(e.matchIdLoading=!1,e.matchIdPreview="提示：无对应跳转赛事")}))},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(t.updateLoading)return;t.updateLoading=!0,t.$service(Li,{method:"post",data:t.form}).then(function(e){t.updateLoading=!1,200===e.code?(t.$message.success("添加成功"),t.getList(),t.dialogFormVisible=!1):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}})},previewElo:function(){var e=this;this.previewLoading||(this.previewLoading=!0,this.$service(Di,{method:"post",data:this.form}).then(function(t){e.previewLoading=!1,200===t.code?e.previewEloInfo=t.data:(e.previewEloInfo=null,e.$message.error(t.code+":"+t.message))},function(t){e.previewEloInfo=null,e.previewLoading=!1,e.$message.error(qo()(t))}))}},watch:{visible:function(e){e&&0===this.list.length&&(this.getList(),this.setHeight(),this.getCount())},screenHeight:function(e){e&&this.setHeight()},pop:function(e){var t=this;e&&(this.form={},this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.form.clearValidate()}))},dialogFormVisible:function(e){e||this.$emit("closePop")}}},jm={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"product-elo"},[a("el-form",{attrs:{inline:!0,model:e.filter,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"时间"}},[a("el-date-picker",{staticStyle:{width:"135px"},attrs:{type:"date",editable:"false","min-width":"100",placeholder:"开始日期","value-format":"yyyy-MM-dd 00:00:00","picker-options":{disabledDate:function(t){return t.getTime()>Date.now()||0!==new Date(e.filter.endTime).getTime()&&t.getTime()>new Date(e.filter.endTime).getTime()}}},on:{change:e.getFilterList},model:{value:e.filter.startTime,callback:function(t){e.$set(e.filter,"startTime",t)},expression:"filter.startTime"}}),e._v("\n      ~\n      "),a("el-date-picker",{staticStyle:{width:"135px"},attrs:{type:"date",editable:"false",placeholder:"结束日期","value-format":"yyyy-MM-dd 23:59:59","picker-options":{disabledDate:function(t){return t.getTime()>Date.now()||0!==new Date(e.filter.startTime).getTime()&&t.getTime()<new Date(e.filter.startTime).getTime()}}},on:{change:e.getFilterList},model:{value:e.filter.endTime,callback:function(t){e.$set(e.filter,"endTime",t)},expression:"filter.endTime"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.getList(),e.getCount()}}},[e._v("查询")])],1),e._v(" "),e.count?a("el-form-item",{attrs:{label:""}},[e._v("\n      总命中率："),a("b",[e._v(e._s(e.count.totalHitRate?e.count.totalHitRate:"-"))]),e._v("；\n      总盈利率："),a("b",[e._v(e._s(e.count.totalEarningRate?e.count.totalEarningRate:"-"))]),e._v("；\n      近3天："),a("b",[e._v(e._s(e.count.threeDaysStats||"-"))]),e._v("；\n      近5天："),a("b",[e._v(e._s(e.count.fiveDaysStats||"-"))]),e._v("；\n      近7天："),a("b",[e._v(e._s(e.count.sevenDaysStats||"-"))])]):e._e()],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"matchInfoId",label:"比赛ID","min-width":"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"competition",label:"联赛","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"match",label:"对阵","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"homeRatingScore",label:"主队积分","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(0!==t.row.homeRatingScore?t.row.homeRatingScore:"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"awayRatingScore",label:"客队积分","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(0!==t.row.awayRatingScore?t.row.awayRatingScore:"-")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"matchTime",label:"比赛时间","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"matchStatus",label:"状态","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("matchStatus2CH")(t.row.matchStatus))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"finalScore",label:"比分","min-width":"70"}}),e._v(" "),a("el-table-column",{attrs:{label:"推荐","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"left-end",width:"400",trigger:"click"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.eloLoading,expression:"eloLoading"}],staticClass:"eloInfo"},[e.eloInfo&&!e.eloInfo.isBetGoodTime?a("p",[a("b",[e._v(e._s(e.eloInfo.notBetGoodTimeText))])]):e._e(),e._v(" "),e.eloInfo&&e.eloInfo.nowInfo?a("elo-table-info",{attrs:{eloInfo:e.eloInfo.nowInfo,title:"即时"}}):e._e(),e._v(" "),e.eloInfo&&e.eloInfo.initInfo?a("elo-table-info",{attrs:{eloInfo:e.eloInfo.initInfo,title:"初盘"}}):e._e(),e._v(" "),e.eloLoading||e.eloInfo?e._e():a("div",{staticStyle:{"line-height":"2","text-align":"center"}},[e._v("没有数据")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"text"},nativeOn:{click:function(a){return e.getEloById(t.row.matchInfoId)}},slot:"reference"},[e._v("详情>>")])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"红黑","min-width":"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[3===t.row.matchStatus?a("el-tag",{staticStyle:{color:"#fff"},attrs:{size:"mini",color:1===t.row.isWin?"#e62121":"#333"}},[e._v("   ")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"left"},model:{value:t.row.showPop,callback:function(a){e.$set(t.row,"showPop",a)},expression:"scope.row.showPop"}},[a("p",[e._v("确定"+e._s(t.row.isShow?"隐藏":"显示")+"？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.showPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.updateStatus(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:t.row.isShow?"primary":"",size:"small"},slot:"reference"},[e._v(e._s(t.row.isShow?"隐藏":"显示"))])],1),e._v(" "),a("el-popover",{attrs:{placement:"left"},model:{value:t.row.delPop,callback:function(a){e.$set(t.row,"delPop",a)},expression:"scope.row.delPop"}},[a("p",[e._v("确定删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.eloDel(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:"",size:"small"},slot:"reference"})],1)]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.currentPage,total:e.total,"page-size":e.limit},on:{"current-change":e.getList,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}}),e._v(" "),a("el-dialog",{attrs:{title:"新建红彩指数赛事",visible:e.dialogFormVisible,width:"500px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,disabled:e.updateLoading,"label-width":"110px",size:"small"}},[a("el-form-item",{attrs:{label:"赛事ID",prop:"matchInfoId",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{pattern:/^\d{1,30}$/,message:"整数且小于30位",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off","suffix-icon":e.matchIdLoading?"el-icon-loading":""},on:{change:e.previewMatchID},model:{value:e.form.matchInfoId,callback:function(t){e.$set(e.form,"matchInfoId",t)},expression:"form.matchInfoId"}})],1),e._v(" "),e.matchIdPreview?a("el-form-item",[a("span",[e._v(e._s(e.matchIdPreview))])]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"理论胜赔率",prop:"theoryWin",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{pattern:/^\d+(.\d{1,2})?$/,message:"数字，最多两位小数",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.theoryWin,callback:function(t){e.$set(e.form,"theoryWin",t)},expression:"form.theoryWin"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"理论平赔率",prop:"theoryDraw",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{pattern:/^\d+(.\d{1,2})?$/,message:"数字，最多两位小数",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.theoryDraw,callback:function(t){e.$set(e.form,"theoryDraw",t)},expression:"form.theoryDraw"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"理论负赔率",prop:"theoryLoss",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{pattern:/^\d+(.\d{1,2})?$/,message:"数字，最多两位小数",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.theoryLoss,callback:function(t){e.$set(e.form,"theoryLoss",t)},expression:"form.theoryLoss"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",loading:e.previewLoading},on:{click:function(t){return e.previewElo()}}},[e._v("预览")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("提交")])],1),e._v(" "),e.previewEloInfo?a("elo-table-info",{attrs:{eloInfo:e.previewEloInfo,title:"方案"}}):e._e()],1)],1)},staticRenderFns:[]},Qm=a("VU/8")(qm,jm,!1,null,null,null).exports,Wm={name:"statisticsProduct",data:function(){return{activeTab:"1",eloPop:!1}},computed:u()({},Object(sn.d)(["windowHeight"])),components:{ProductSp:Rm,ProductStar:Um,ProductElo:Qm}},Bm={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"statistics-product"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},["3"===e.activeTab?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.eloPop=!0}}},[e._v("新建红彩指数数据")]):e._e()],1)]),e._v(" "),a("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"交叉盘",name:"1"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"五星指数",name:"2"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"红彩指数",name:"3"}})],1),e._v(" "),a("product-sp",{directives:[{name:"show",rawName:"v-show",value:"1"===e.activeTab,expression:"activeTab==='1'"}],attrs:{screenHeight:e.windowHeight,visible:"1"===e.activeTab}}),e._v(" "),a("product-star",{directives:[{name:"show",rawName:"v-show",value:"2"===e.activeTab,expression:"activeTab==='2'"}],attrs:{screenHeight:e.windowHeight,visible:"2"===e.activeTab}}),e._v(" "),a("product-elo",{directives:[{name:"show",rawName:"v-show",value:"3"===e.activeTab,expression:"activeTab==='3'"}],attrs:{pop:e.eloPop,screenHeight:e.windowHeight,visible:"3"===e.activeTab},on:{closePop:function(t){e.eloPop=!1}}})],1)},staticRenderFns:[]},Gm=a("VU/8")(Wm,Bm,!1,null,null,null).exports,Ym=[{id:1,name:"红豆"},{id:3,name:"五星指数"},{id:5,name:"点卡"},{id:6,name:"红彩指数"},{id:13,name:"大会员"},{id:15,name:"旋转矩阵"}],Xm={name:"statisticsRechargeByTime",props:{appTab:{type:"String",default:"0"},visible:{type:"Boolean",default:!1},screenHeight:{type:"Number"}},data:function(){return{filter:{startTime:gh(new Date((new Date).getFullYear(),(new Date).getMonth(),1),"yyyy-MM-dd hh:mm:ss"),endTime:gh(new Date,"yyyy-MM-dd")+" 23:59:59",goodsTypeId:0},start:0,limit:25,total:1,list:[],totalStat:null,loading:!1,goodsTypeId:Ym,tableHeight:null}},computed:{currentPage:function(){return Math.floor(this.start/this.limit)+1}},created:function(){this.visible&&(this.getList(),this.setHeight())},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.screenHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(e){var t=this;if(!this.loading){this.totalStat=null,this.loading=!0,this.start="number"==typeof e&&e?(e-1)*this.limit:0;var a={start:this.start,limit:this.limit};this.filter.startTime&&(a.startTime=this.filter.startTime),this.filter.endTime&&(a.endTime=this.filter.endTime),this.filter.goodsTypeId&&(a.goodsTypeId=this.filter.goodsTypeId),this.$service(mi[this.appTab].listByTime,{params:a}).then(function(e){t.loading=!1,200===e.code?(t.totalStat=null,t.list=e.data.data||[],t.total=e.data.total||1,t.$refs.elTable.bodyWrapper.scrollTop=0,t.list.length>0&&(t.totalStat={totalRecharge:t.list[0].totalRecharge,totalUser:t.list[0].totalUser,totalAmount:t.list[0].totalAmount})):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))})}}},watch:{visible:function(e){e&&0===this.list.length&&(this.getList(),this.setHeight())},screenHeight:function(e){e&&this.setHeight()}}},Km={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"recharge-time-wrap"},[a("el-form",{attrs:{inline:!0,model:e.filter,size:"mini",disabled:e.loading}},[a("el-form-item",{attrs:{label:"时间"}},[a("el-date-picker",{staticStyle:{width:"130px"},attrs:{type:"date",editable:"false",width:"100",placeholder:"开始日期","value-format":"yyyy-MM-dd 00:00:00",clearable:!1,"picker-options":{disabledDate:function(t){return t.getTime()>Date.now()||0!==new Date(e.filter.endTime).getTime()&&t.getTime()>new Date(e.filter.endTime).getTime()}}},model:{value:e.filter.startTime,callback:function(t){e.$set(e.filter,"startTime",t)},expression:"filter.startTime"}}),e._v("\n      ~\n      "),a("el-date-picker",{staticStyle:{width:"130px"},attrs:{type:"date",editable:"false",placeholder:"结束日期","value-format":"yyyy-MM-dd 23:59:59",clearable:!1,"picker-options":{disabledDate:function(t){return t.getTime()>Date.now()||0!==new Date(e.filter.startTime).getTime()&&t.getTime()<new Date(e.filter.startTime).getTime()}}},model:{value:e.filter.endTime,callback:function(t){e.$set(e.filter,"endTime",t)},expression:"filter.endTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-select",{staticStyle:{width:"105px"},model:{value:e.filter.goodsTypeId,callback:function(t){e.$set(e.filter,"goodsTypeId",t)},expression:"filter.goodsTypeId"}},[a("el-option",{attrs:{label:"全部",value:0}},[e._v("全部")]),e._v(" "),e._l(e.goodsTypeId,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.getList()}}},[e._v("查询")])],1),e._v(" "),e.totalStat?a("el-form-item",{attrs:{label:""}},[e._v("\n      总充值次数："),a("b",[e._v(e._s(e.totalStat.totalRecharge))]),e._v("；\n      充值总用户数："),a("b",[e._v(e._s(e.totalStat.totalUser))]),e._v("；\n      充值总额："),a("b",[e._v(e._s(e.totalStat.totalAmount))])]):e._e()],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"date",label:"日期","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rechargeCount",label:"充值次数","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userCount",label:"充值用户数","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"充值总额","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"充值次数占比","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.rechargeScale))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"充值用户占比","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.userScale))+"\n      ")]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.currentPage,total:e.total,"page-size":e.limit},on:{"current-change":e.getList,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)},staticRenderFns:[]},Jm=a("VU/8")(Xm,Km,!1,null,null,null).exports,Zm={name:"statisticsRechargeByTime",props:{appTab:{type:"String",default:"0"},visible:{type:"Boolean",default:!1},screenHeight:{type:"Number"}},data:function(){return{activeTab:null,platformList:{0:[{id:2,name:"iOS"},{id:1,name:"Android"},{id:3,name:"PC"},{id:4,name:"WAP"},{id:5,name:"PRVIP"},{id:9,name:"iOSWAP"}],1:[{id:2,name:"iOS"},{id:1,name:"Android"},{id:3,name:"PC"}]},start:0,limit:25,total:1,list:[],loading:!1,tableHeight:null}},created:function(){this.activeTab=this.platformList[this.appTab][0].id,this.visible&&(this.getList(),this.setHeight())},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.screenHeight-e.$refs.elTable.$el.offsetTop-63})},handleClickTabs:function(){this.getList(),this.setHeight()},getList:function(e){var t=this;if(!this.loading){this.loading=!0,this.start=e?(e-1)*this.limit:0;var a={start:this.start,limit:this.limit};this.$service(mi[this.appTab].listByPlatform,{urlParams:{platform:this.activeTab},params:a}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.data||[],t.total=e.data.total||1,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))})}}},watch:{visible:function(e){e&&0===this.list.length&&(this.getList(),this.setHeight())},screenHeight:function(e){e&&this.setHeight()}}},ep={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"recharge-price-wrap"},[a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.platformList[e.appTab],function(t,i){return a("el-tab-pane",{key:i,attrs:{label:t.name,name:t.id,disabled:e.loading}})}),1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"price",label:"价格","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rechargeCount",label:"充值次数","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userCount",label:"充值用户数","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{label:"充值次数占比","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.rechargeScale))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"充值用户占比","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.userScale))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"totalRecharge",label:"充值总额","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"averageRecharge",label:"人均充值额","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(Math.round(100*t.row.averageRecharge)/100)+"\n      ")]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":Math.floor(e.start/e.limit)+1,total:e.total,"page-size":e.limit},on:{"current-change":e.getList,"update:currentPage":function(t){e.$set(Math,"floor(start/limit) + 1",t)},"update:current-page":function(t){e.$set(Math,"floor(start/limit) + 1",t)}}})],1)},staticRenderFns:[]},tp=a("VU/8")(Zm,ep,!1,null,null,null).exports,ap={name:"statisticsRecharge",data:function(){return{appTab:"0",activeTab:"1"}},computed:u()({},Object(sn.d)(["windowHeight"])),components:{RechargeByTime:Jm,RechargeByPrice:tp}},ip={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"statistics-recharge"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1)]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.appTab,callback:function(t){e.appTab=t},expression:"appTab"}},[a("el-tab-pane",{attrs:{label:"红彩",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"精准比分",name:"1"}})],1),e._v(" "),a("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"时间段统计",name:"1"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"各价位统计",name:"2"}})],1),e._v(" "),a("recharge-by-time",{directives:[{name:"show",rawName:"v-show",value:"0"===e.appTab&&"1"===e.activeTab,expression:"appTab==='0'&&activeTab==='1'"}],attrs:{screenHeight:e.windowHeight,appTab:"0",visible:"0"===e.appTab&&"1"===e.activeTab}}),e._v(" "),a("recharge-by-time",{directives:[{name:"show",rawName:"v-show",value:"1"===e.appTab&&"1"===e.activeTab,expression:"appTab==='1'&&activeTab==='1'"}],attrs:{screenHeight:e.windowHeight,appTab:"1",visible:"1"===e.appTab&&"1"===e.activeTab}}),e._v(" "),a("recharge-by-price",{directives:[{name:"show",rawName:"v-show",value:"0"===e.appTab&&"2"===e.activeTab,expression:"appTab==='0'&&activeTab==='2'"}],attrs:{screenHeight:e.windowHeight,appTab:"0",visible:"0"===e.appTab&&"2"===e.activeTab}}),e._v(" "),a("recharge-by-price",{directives:[{name:"show",rawName:"v-show",value:"1"===e.appTab&&"2"===e.activeTab,expression:"appTab==='1'&&activeTab==='2'"}],attrs:{screenHeight:e.windowHeight,appTab:"1",visible:"1"===e.appTab&&"2"===e.activeTab}})],1)},staticRenderFns:[]},rp=a("VU/8")(ap,ip,!1,null,null,null).exports,op={name:"dialogCouponWrap",props:{data:{type:"Object",default:function(){return{}}},tab:"String",visible:{type:"Boolean",default:!1}},data:function(){return{form:{},updateLoading:!1,codeList:[]}},methods:{dateRule:function(e,t,a){if("1"===this.form.releaseTimeType){var i=this.$refs.endTime.value;t?i?a():a(new Error("结束时间不为空")):a(new Error("开始时间不为空"))}else a()},getCodeList:function(){var e=this;this.$service(Vi[this.tab].codeList).then(function(t){200===t.code&&(e.codeList=t.data)})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(t.updateLoading)return;t.updateLoading=!0;var a={wrapName:t.form.wrapName,activeTitle:t.form.activeTitle,activeDesc:t.form.activeDesc,releaseTimeType:parseInt(t.form.releaseTimeType),isMultGet:parseInt(t.form.isMultGet)};1===a.releaseTimeType&&(a.releaseStartDate=t.form.releaseStartDate,a.releaseEndDate=t.form.releaseEndDate),t.form.couponWrapId?a.couponWrapId=t.form.couponWrapId:a.couponWrapType=t.form.couponWrapType,t.$service(t.form.couponWrapId?Vi[t.tab].update:Vi[t.tab].add,{method:"post",data:a}).then(function(e){200===e.code?(t.updateLoading=!1,t.$message.success(t.form.couponWrapId?"修改组合成功":"新建组合成功"),t.$emit("closeDialog"),t.$emit("success")):(t.updateLoading=!1,t.$message.error(e.code+":"+e.message))},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}})}},watch:{visible:function(e){var t=this;e?(this.data.couponWrapId||this.getCodeList(),this.form=tn()({},this.data.couponWrapId?this.data:{couponWrapType:"",wrapName:"",activeTitle:"",activeDesc:"",releaseTimeType:"0",isMultGet:"0",releaseStartDate:"",releaseEndDate:""}),this.form.releaseStartDate&&(this.form.releaseStartDate=gh(this.form.releaseStartDate,"yyyy-MM-dd hh:mm:ss")),this.form.releaseEndDate&&(this.form.releaseEndDate=gh(this.form.releaseEndDate,"yyyy-MM-dd hh:mm:ss")),this.form.releaseTimeType=this.form.releaseTimeType+"",this.data.couponWrapId&&(this.form.isMultGet=this.form.isMultGet?"1":"0"),this.$nextTick(function(){t.$refs.form.clearValidate()})):this.$emit("closeDialog")}}},np={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dialog-coupon-wrap"},[a("el-dialog",{attrs:{title:e.form.couponWrapId?"修改组合":"新建组合",visible:e.visible,"close-on-click-modal":!1,width:"530px",center:""},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,disabled:e.updateLoading,"label-width":"90px",size:"small"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.form.couponWrapId,expression:"!form.couponWrapId"}],attrs:{label:"活动类型",prop:"couponWrapType",rules:{required:!e.form.couponWrapId,message:"必选",trigger:["blur","change"]}}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.couponWrapType,callback:function(t){e.$set(e.form,"couponWrapType",t)},expression:"form.couponWrapType"}},e._l(e.codeList,function(e,t){return a("el-option",{key:t,attrs:{value:e.couponWrapType,label:e.codeName}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"组合名称",prop:"wrapName",rules:[{required:!0,message:"必填",trigger:["blur","change"]},{max:20,message:"最多20字",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.wrapName,callback:function(t){e.$set(e.form,"wrapName",t)},expression:"form.wrapName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动标题",prop:"activeTitle",rules:[{required:!0,message:"必填",trigger:["blur","change"]},{max:10,message:"最多10字",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.activeTitle,callback:function(t){e.$set(e.form,"activeTitle",t)},expression:"form.activeTitle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动说明",prop:"activeDesc",rules:[{required:!0,message:"必填",trigger:["blur","change"]},{max:20,message:"最多20字",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.activeDesc,callback:function(t){e.$set(e.form,"activeDesc",t)},expression:"form.activeDesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发放日期",prop:"releaseTimeType"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.form.releaseTimeType,callback:function(t){e.$set(e.form,"releaseTimeType",t)},expression:"form.releaseTimeType"}},[e._v("无")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.form.releaseTimeType,callback:function(t){e.$set(e.form,"releaseTimeType",t)},expression:"form.releaseTimeType"}},[e._v("有")])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===e.form.releaseTimeType,expression:"form.releaseTimeType === '1'"}],attrs:{prop:"releaseStartDate",rules:[{validator:e.dateRule,trigger:["blur","change"]}]}},[a("el-date-picker",{staticStyle:{width:"185px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期","picker-options":{disabledDate:function(t){return t.getTime()<Date.now()-864e5||0!==new Date(e.form.releaseEndDate).getTime()&&t.getTime()>new Date(e.form.releaseEndDate).getTime()}}},model:{value:e.form.releaseStartDate,callback:function(t){e.$set(e.form,"releaseStartDate",t)},expression:"form.releaseStartDate"}}),e._v("\n        ~\n        "),a("el-date-picker",{ref:"endTime",staticStyle:{width:"185px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期","picker-options":{disabledDate:function(t){return t.getTime()<Date.now()-864e5||0!==new Date(e.form.releaseStartDate).getTime()&&t.getTime()<new Date(e.form.releaseStartDate).getTime()}}},model:{value:e.form.releaseEndDate,callback:function(t){e.$set(e.form,"releaseEndDate",t)},expression:"form.releaseEndDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"允许重复领",prop:"isMultGet"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.form.isMultGet,callback:function(t){e.$set(e.form,"isMultGet",t)},expression:"form.isMultGet"}},[e._v("否")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.form.isMultGet,callback:function(t){e.$set(e.form,"isMultGet",t)},expression:"form.isMultGet"}},[e._v("是")])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]},sp=a("VU/8")(op,np,!1,null,null,null).exports,lp={name:"dialogCouponCategory",props:{data:{type:"Object",default:function(){return{}}},couponWrapId:"Number",tab:"String",visible:{type:"Boolean",default:!1}},data:function(){return{couponType:on.couponType,form:{},updateLoading:!1,channelList:[]}},methods:{dateRule:function(e,t,a){if("1"===this.form.validType){var i=this.$refs.endTime.value;t?i?a():a(new Error("结束时间不为空")):a(new Error("开始时间不为空"))}else a()},dateRule1:function(e,t,a){if("1"===this.form.releaseTimeType){var i=this.$refs.endTime1.value;t?i?a():a(new Error("结束时间不为空")):a(new Error("开始时间不为空"))}else a()},getChannelList:function(){var e=this;if(!(this.channelList.length>0||"0"!==this.tab))return this.$service(ji).then(function(t){200===t.code&&(e.channelList=t.data)})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(t.updateLoading)return;t.updateLoading=!0;var a={};t.form.couponId?a={couponId:t.form.couponId,couponName:t.form.couponName,releaseTimeType:parseInt(t.form.releaseTimeType),couponDesc:t.form.couponDesc}:(1===(a={couponType:parseInt(t.form.couponType),couponName:t.form.couponName,discount:{},amountType:parseInt(t.form.amountType),validType:parseInt(t.form.validType),releaseTimeType:parseInt(t.form.releaseTimeType),couponDesc:t.form.couponDesc,isIOS:t.form.app.indexOf("2")>-1,isAndroid:t.form.app.indexOf("1")>-1,isPC:t.form.app.indexOf("3")>-1,newUser:t.form.user.indexOf("0")>-1,oldUser:t.form.user.indexOf("1")>-1}).amountType&&(a.amount=t.form.amount),1===a.couponType&&(a.discount.discount=t.form.discount,a.discount.limit="0"===t.form.threadLimitFlag?0:t.form.threadLimit),2===a.couponType&&(a.discount.reduction=t.form.reduction,a.discount.full=t.form.full),3===a.couponType&&(a.discount.down=t.form.down),6===a.couponType&&(a.discount.experience=t.form.experience,a.discount.upperLimit=t.form.upperLimit,a.discount.lowerLimit=t.form.lowerLimit),7===a.couponType&&(a.discount.discount=t.form.rechargeDiscount,a.discount.limit=t.form.rechargeLimit),0===a.validType?a.validDay=t.form.validDay:(a.validStartDate=t.form.validStartDate,a.validEndDate=t.form.validEndDate),a.isAndroid&&t.form.channelList.length>0&&(a.channelList=qo()(t.form.channelList)),a.discount=qo()(a.discount)),1===a.releaseTimeType&&(a.releaseStartDate=t.form.releaseStartDate,a.releaseEndDate=t.form.releaseEndDate),t.$service(t.form.couponId?qi[t.tab].update:qi[t.tab].add,{method:"post",urlParams:t.form.couponId?null:{couponWrapId:t.couponWrapId},data:a}).then(function(e){200===e.code?(t.updateLoading=!1,t.$message.success(t.form.couponId?"修改类别成功":"新建类别成功"),t.$emit("closeDialog"),t.$emit("success")):(t.updateLoading=!1,t.$message.error(e.code+":"+e.message))},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}})}},watch:{visible:function(e){var t=this;e?(this.getChannelList(),this.form=tn()({couponType:"",couponName:"",discount:"",threadLimitFlag:"0",threadLimit:"",reduction:"",full:"",down:"",experience:"",upperLimit:"",lowerLimit:"",amountType:"",amount:"",rechargeDiscount:"",rechargeLimit:"",validType:"0",validDay:"",validStartDate:"",validEndDate:"",releaseTimeType:"0",releaseStartDate:"",releaseEndDate:"",app:[],channelList:[],user:[],couponDesc:""},this.data||{}),this.form.amountType=this.form.amountType+"",this.form.validType=this.form.validType+"",this.form.releaseTimeType=this.form.releaseTimeType+"",0===this.data.amount&&(this.form.amount=""),this.data.newUser||this.data.oldUser?(this.data.newUser&&this.form.user.push("0"),this.data.oldUser&&this.form.user.push("1")):this.form.user=["0"],this.data.isIOS&&this.form.app.push("2"),this.data.isAndroid&&this.form.app.push("1"),this.data.isPC&&this.form.app.push("3"),this.data.channelList&&(this.form.channelList=JSON.parse(this.data.channelList)),this.form.discount="",this.data.discount&&(this.data.discount=JSON.parse(this.data.discount),1===this.data.couponType&&(this.form.discount=this.data.discount.discount,this.data.discount.limit?(this.form.threadLimitFlag="1",this.form.threadLimit=this.data.discount.limit):(this.form.threadLimitFlag="0",this.form.threadLimit="")),2===this.data.couponType&&(this.form.reduction=this.data.discount.reduction,this.form.full=this.data.discount.full),3===this.data.couponType&&(this.form.down=this.data.discount.down),6===this.data.couponType&&(this.form.experience=this.data.discount.experience,this.form.upperLimit=this.data.discount.upperLimit,this.form.lowerLimit=this.data.discount.lowerLimit),7===this.data.couponType&&(this.form.rechargeDiscount=this.data.discount.discount,this.form.rechargeLimit=this.data.discount.limit)),1===this.data.validType&&(this.form.validStartDate=gh(this.data.validStartDate,"yyyy-MM-dd hh:mm:ss"),this.form.validEndDate=gh(this.data.validEndDate,"yyyy-MM-dd hh:mm:ss")),1===this.data.releaseTimeType&&(this.form.releaseStartDate=gh(this.data.releaseStartDate,"yyyy-MM-dd hh:mm:ss"),this.form.releaseEndDate=gh(this.data.releaseEndDate,"yyyy-MM-dd hh:mm:ss")),this.$nextTick(function(){t.$refs.form.clearValidate()})):this.$emit("closeDialog")}}},cp={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dialog-coupon-category"},[a("el-dialog",{attrs:{title:e.form.couponId?"修改类别":"新建类别",visible:e.visible,"close-on-click-modal":!1,width:"580px",center:""},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,disabled:e.updateLoading,"label-width":"140px",size:"small"}},[a("el-form-item",{attrs:{label:"类型",prop:"couponType",rules:{required:!0,message:"必选",trigger:["blur","change"]}}},[a("el-select",{attrs:{placeholder:"请选择",disabled:e.form.couponId},model:{value:e.form.couponType,callback:function(t){e.$set(e.form,"couponType",t)},expression:"form.couponType"}},e._l(e.couponType,function(e,t){return a("el-option",{key:t,attrs:{value:e.id,label:e.name}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"couponName",rules:[{required:!0,message:"必填",trigger:["blur","change"]},{max:10,message:"最多10字",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.couponName,callback:function(t){e.$set(e.form,"couponName",t)},expression:"form.couponName"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1===e.form.couponType,expression:"form.couponType === 1"}],attrs:{label:"优惠力度",prop:"discount",rules:[{required:1===e.form.couponType,message:"必填",trigger:["blur","change"]},{pattern:/^[1-9]\d{0,1}$/,message:"1-99",trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"120px"},attrs:{autocomplete:"off",disabled:e.form.couponId},model:{value:e.form.discount,callback:function(t){e.$set(e.form,"discount",t)},expression:"form.discount"}}),e._v(" 折\n      ")],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1===e.form.couponType,expression:"form.couponType === 1"}],attrs:{label:"体验方案限制",prop:"threadLimitFlag"}},[a("el-radio",{attrs:{label:"0",disabled:e.form.couponId},model:{value:e.form.threadLimitFlag,callback:function(t){e.$set(e.form,"threadLimitFlag",t)},expression:"form.threadLimitFlag"}},[e._v("无限制")]),e._v(" "),a("el-radio",{attrs:{label:"1",disabled:e.form.couponId},model:{value:e.form.threadLimitFlag,callback:function(t){e.$set(e.form,"threadLimitFlag",t)},expression:"form.threadLimitFlag"}},[e._v("限制")])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1===e.form.couponType&&"1"===e.form.threadLimitFlag,expression:"form.couponType === 1 && form.threadLimitFlag === '1'"}],attrs:{label:"最高X元",prop:"threadLimit",rules:[{required:1===e.form.couponType&&"1"===e.form.threadLimitFlag,message:"必填",trigger:["blur","change"]},{pattern:/^([1-9]\d{0,1}|[1-4]\d{2}|500)$/,message:"1-500",trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"120px"},attrs:{autocomplete:"off",disabled:e.form.couponId},model:{value:e.form.threadLimit,callback:function(t){e.$set(e.form,"threadLimit",t)},expression:"form.threadLimit"}}),e._v(" 元\n      ")],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2===e.form.couponType,expression:"form.couponType === 2"}],attrs:{label:"优惠力度",prop:"reduction",rules:[{required:2===e.form.couponType,message:"必填",trigger:["blur","change"]},{pattern:/^([1-9]\d{0,2}|1000)$/,message:"1-1000",trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"120px"},attrs:{autocomplete:"off",disabled:e.form.couponId},model:{value:e.form.reduction,callback:function(t){e.$set(e.form,"reduction",t)},expression:"form.reduction"}}),e._v(" 红豆\n      ")],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2===e.form.couponType,expression:"form.couponType === 2"}],attrs:{label:"优惠条件",prop:"full",rules:[{required:2===e.form.couponType,message:"必填",trigger:["blur","change"]},{pattern:/^[1-9]\d{0,8}$/,message:"1-999999999",trigger:["blur","change"]}]}},[e._v("\n        满 "),a("el-input",{staticStyle:{width:"120px"},attrs:{autocomplete:"off",disabled:e.form.couponId},model:{value:e.form.full,callback:function(t){e.$set(e.form,"full",t)},expression:"form.full"}}),e._v(" 红豆使用\n      ")],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3===e.form.couponType,expression:"form.couponType === 3"}],attrs:{label:"优惠力度",prop:"down",rules:[{required:3===e.form.couponType,message:"必填",trigger:["blur","change"]},{pattern:/^([1-9]\d{0,2}|1000)$/,message:"1-1000",trigger:["blur","change"]}]}},[e._v("\n        减 "),a("el-input",{staticStyle:{width:"120px"},attrs:{autocomplete:"off",disabled:e.form.couponId},model:{value:e.form.down,callback:function(t){e.$set(e.form,"down",t)},expression:"form.down"}}),e._v(" 红豆\n      ")],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:6===e.form.couponType,expression:"form.couponType === 6"}],attrs:{label:"N元体验",prop:"experience",rules:[{required:6===e.form.couponType,message:"必填",trigger:["blur","change"]},{pattern:/^([1-9]\d{0,2}|1000)$/,message:"1-1000",trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"120px"},attrs:{autocomplete:"off",disabled:e.form.couponId},model:{value:e.form.experience,callback:function(t){e.$set(e.form,"experience",t)},expression:"form.experience"}}),e._v(" 元\n      ")],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:6===e.form.couponType,expression:"form.couponType === 6"}],attrs:{label:"体验方案最大额度",prop:"upperLimit",rules:[{required:6===e.form.couponType,message:"必填",trigger:["blur","change"]},{pattern:/^([1-9]\d{0,2}|1000)$/,message:"1-1000",trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"120px"},attrs:{autocomplete:"off",disabled:e.form.couponId},model:{value:e.form.upperLimit,callback:function(t){e.$set(e.form,"upperLimit",t)},expression:"form.upperLimit"}}),e._v(" 元\n      ")],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:6===e.form.couponType,expression:"form.couponType === 6"}],attrs:{label:"体验方案最小额度",prop:"lowerLimit",rules:[{required:6===e.form.couponType,message:"必填",trigger:["blur","change"]},{pattern:/^([1-9]\d{0,2}|1000)$/,message:"1-1000",trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"120px"},attrs:{autocomplete:"off",disabled:e.form.couponId},model:{value:e.form.lowerLimit,callback:function(t){e.$set(e.form,"lowerLimit",t)},expression:"form.lowerLimit"}}),e._v(" 元\n      ")],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:7===e.form.couponType,expression:"form.couponType === 7"}],attrs:{label:"优惠力度",prop:"rechargeDiscount",rules:[{required:7===e.form.couponType,message:"必填",trigger:["blur","change"]},{pattern:/^[1-4]?\d{1,2}$|^500$/,message:"1-500",trigger:["blur","change"]}]}},[e._v("\n        1 + "),a("el-input",{staticStyle:{width:"120px"},attrs:{autocomplete:"off",disabled:e.form.couponId},model:{value:e.form.rechargeDiscount,callback:function(t){e.$set(e.form,"rechargeDiscount",t)},expression:"form.rechargeDiscount"}}),e._v(" % 豆\n      ")],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:7===e.form.couponType,expression:"form.couponType === 7"}],attrs:{label:"充值上限",prop:"rechargeLimit",rules:[{required:7===e.form.couponType,message:"必填",trigger:["blur","change"]},{pattern:/^[1-4]?\d{1,4}$|^50000$/,message:"必须为正整数且最大50000",trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"180px"},attrs:{autocomplete:"off",disabled:e.form.couponId},model:{value:e.form.rechargeLimit,callback:function(t){e.$set(e.form,"rechargeLimit",t)},expression:"form.rechargeLimit"}}),e._v(" 元\n      ")],1),e._v(" "),a("el-form-item",{attrs:{label:"创建方式",prop:"amountType",rules:[{required:!0,message:"必填",trigger:["blur","change"]}]}},[a("el-select",{attrs:{placeholder:"请选择",disabled:e.form.couponId},model:{value:e.form.amountType,callback:function(t){e.$set(e.form,"amountType",t)},expression:"form.amountType"}},[a("el-option",{attrs:{value:"0",label:"自动"}}),e._v(" "),a("el-option",{attrs:{value:"1",label:"手动"}})],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===e.form.amountType,expression:"form.amountType === '1'"}],attrs:{label:"新增",prop:"amount",rules:[{required:"1"===e.form.amountType,message:"必填",trigger:["blur","change"]},{pattern:/^[1-9]\d{0,8}$/,message:"1-999999999",trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"120px"},attrs:{autocomplete:"off"},model:{value:e.form.amount,callback:function(t){e.$set(e.form,"amount",t)},expression:"form.amount"}}),e._v("个\n      ")],1),e._v(" "),a("el-form-item",{attrs:{label:"有效期",prop:"validType"}},[a("el-radio",{attrs:{label:"0",disabled:e.form.couponId},model:{value:e.form.validType,callback:function(t){e.$set(e.form,"validType",t)},expression:"form.validType"}},[e._v("相对天数")]),e._v(" "),a("el-radio",{attrs:{label:"1",disabled:e.form.couponId},model:{value:e.form.validType,callback:function(t){e.$set(e.form,"validType",t)},expression:"form.validType"}},[e._v("固定时间")])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"0"===e.form.validType,expression:"form.validType === '0'"}],attrs:{prop:"validDay",rules:[{required:"0"===e.form.validType,message:"必填",trigger:["blur","change"]},{pattern:/^(1500|[1][0-4]\d{2}|\d{1,3})$/,message:"天数范围0-1500",trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"120px"},attrs:{autocomplete:"off",disabled:e.form.couponId},model:{value:e.form.validDay,callback:function(t){e.$set(e.form,"validDay",t)},expression:"form.validDay"}}),e._v(" 天\n      ")],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===e.form.validType,expression:"form.validType === '1'"}],attrs:{prop:"validStartDate",rules:[{validator:e.dateRule,trigger:["blur","change"]}]}},[a("el-date-picker",{staticStyle:{width:"135px"},attrs:{type:"date","value-format":"yyyy-MM-dd 00:00:00",placeholder:"选择日期",disabled:e.form.couponId,"picker-options":{disabledDate:function(t){return t.getTime()<Date.now()-864e5||0!==new Date(e.form.validEndDate).getTime()&&t.getTime()>new Date(e.form.validEndDate).getTime()}}},model:{value:e.form.validStartDate,callback:function(t){e.$set(e.form,"validStartDate",t)},expression:"form.validStartDate"}}),e._v("\n        ~\n        "),a("el-date-picker",{ref:"endTime",staticStyle:{width:"135px"},attrs:{type:"date","value-format":"yyyy-MM-dd 23:59:59",placeholder:"选择日期",disabled:e.form.couponId,"picker-options":{disabledDate:function(t){return t.getTime()<Date.now()-864e5||0!==new Date(e.form.validStartDate).getTime()&&t.getTime()<new Date(e.form.validStartDate).getTime()}}},model:{value:e.form.validEndDate,callback:function(t){e.$set(e.form,"validEndDate",t)},expression:"form.validEndDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发放日期",prop:"releaseTimeType"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.form.releaseTimeType,callback:function(t){e.$set(e.form,"releaseTimeType",t)},expression:"form.releaseTimeType"}},[e._v("无")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.form.releaseTimeType,callback:function(t){e.$set(e.form,"releaseTimeType",t)},expression:"form.releaseTimeType"}},[e._v("有")])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===e.form.releaseTimeType,expression:"form.releaseTimeType === '1'"}],attrs:{prop:"releaseStartDate",rules:[{validator:e.dateRule1,trigger:["blur","change"]}]}},[a("el-date-picker",{staticStyle:{width:"185px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期","picker-options":{disabledDate:function(t){return t.getTime()<Date.now()-864e5||0!==new Date(e.form.releaseEndDate).getTime()&&t.getTime()>new Date(e.form.releaseEndDate).getTime()}}},model:{value:e.form.releaseStartDate,callback:function(t){e.$set(e.form,"releaseStartDate",t)},expression:"form.releaseStartDate"}}),e._v("\n        ~\n        "),a("el-date-picker",{ref:"endTime1",staticStyle:{width:"185px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期","picker-options":{disabledDate:function(t){return t.getTime()<Date.now()-864e5||0!==new Date(e.form.releaseStartDate).getTime()&&t.getTime()<new Date(e.form.releaseStartDate).getTime()}}},model:{value:e.form.releaseEndDate,callback:function(t){e.$set(e.form,"releaseEndDate",t)},expression:"form.releaseEndDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"使用范围",prop:"app",rules:{required:!0,type:"array",message:"适用范围必选一项",trigger:["blur","change"]}}},[a("el-checkbox-group",{attrs:{disabled:e.form.couponId},model:{value:e.form.app,callback:function(t){e.$set(e.form,"app",t)},expression:"form.app"}},[a("el-checkbox",{attrs:{label:"2"}},[e._v("iOS")]),e._v(" "),a("el-checkbox",{attrs:{label:"1"}},[e._v("Android")]),e._v(" "),a("el-checkbox",{attrs:{label:"3"}},[e._v("PC")])],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.app&&e.form.app.indexOf("1")>-1,expression:"form.app&&form.app.indexOf('1')>-1"}],attrs:{label:"",prop:"channelList"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择",disabled:e.form.couponId},model:{value:e.form.channelList,callback:function(t){e.$set(e.form,"channelList",t)},expression:"form.channelList"}},e._l(e.channelList,function(e){return a("el-option",{key:e.appChannelId,attrs:{label:e.channelName,value:e.appChannelId}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"适用人群",prop:"user",rules:{required:!0,type:"array",message:"适用人群必选一项",trigger:["blur","change"]}}},[a("el-checkbox-group",{attrs:{disabled:e.form.couponId},model:{value:e.form.user,callback:function(t){e.$set(e.form,"user",t)},expression:"form.user"}},[a("el-checkbox",{attrs:{label:"0"}},[e._v("新用户")]),e._v(" "),a("el-checkbox",{attrs:{label:"1"}},[e._v("老用户")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"说明",prop:"couponDesc",rules:[{required:!0,message:"必填",trigger:["blur","change"]},{max:20,message:"最多20字",trigger:["blur","change"]}]}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"不为空且不超20字"},model:{value:e.form.couponDesc,callback:function(t){e.$set(e.form,"couponDesc",t)},expression:"form.couponDesc"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]},dp=a("VU/8")(lp,cp,!1,null,null,null).exports,up={name:"dialogCouponSend",props:{id:"Number",tab:"String",visible:{type:"Boolean",default:!1}},data:function(){return{form:{},updateLoading:!1,fileList:[]}},methods:{userIdRule:function(e,t,a){"2"===this.form.userType?this.form.excel?a():t?/^[0-9,]+$/.test(t)?t.split(",").length>200?a(new Error("最多200个用户ID")):a():a(new Error("必须为数字且英文(,)隔开")):a(new Error("不为空")):a()},handleFileExceed:function(){this.$message.warning("请先移除Excel文件。")},handleFileRemove:function(e){this.form.excel=null},handleFileChange:function(e,t){this.form.excel=e.raw},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(t.form.excel&&t.form.userIds)return t.$message.warning("用户ID与Excel只能二选一");if(t.updateLoading)return;t.updateLoading=!0;var a={couponWrapId:t.id,userType:t.form.userType};t.form.excel?((a=new FormData).append("excel",t.form.excel),a.append("couponWrapId",t.id),a.append("userType",t.form.userType)):t.form.userIds&&(a.userIds=t.form.userIds),t.$service(Vi[t.tab].sendConfirmation,{method:"post",headers:t.form.excel?{"Content-Type":"multipart/form-data"}:null,data:a}).then(function(e){if(200===e.code){var i={};on.couponType.forEach(function(e){i[e.id]=e.name});var r="确定要";e.data.forEach(function(e,t){r+=(0!==t?"；":"")+"对"+(e.number>0?e.number+"名用户":"全部用户")+"发送【"+e.couponName+"】【"+e.validDay+"天】【"+e.discountStr+"】【"+i[e.couponType]+"】"}),r+="吗？",t.$confirm(r,{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){t.$service(Vi[t.tab].send,{method:"post",headers:t.form.excel?{"Content-Type":"multipart/form-data"}:null,data:a}).then(function(e){t.updateLoading=!1,200===e.code?(t.$message.success("定向发送成功"),t.$emit("closeDialog"),t.$emit("success")):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}).catch(function(){t.updateLoading=!1})}else t.updateLoading=!1,t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}})}},watch:{visible:function(e){var t=this;e?(this.form={userType:"1",excel:null},this.fileList=[],this.$nextTick(function(){t.$refs.form.clearValidate()})):this.$emit("closeDialog")}}},mp={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dialog-coupon-send"},[a("el-dialog",{attrs:{title:"定向发放",visible:e.visible,"close-on-click-modal":!1,width:"500px",center:""},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,disabled:e.updateLoading,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"用户群"}},[a("el-select",{model:{value:e.form.userType,callback:function(t){e.$set(e.form,"userType",t)},expression:"form.userType"}},[a("el-option",{attrs:{value:"1",label:"全部用户"}}),e._v(" "),a("el-option",{attrs:{value:"2",label:"单用户"}})],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"2"===e.form.userType,expression:"form.userType==='2'"}],attrs:{label:"用户ID",prop:"userIds",rules:[{validator:e.userIdRule,trigger:["blur","change"]}]}},[a("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.form.userIds,callback:function(t){e.$set(e.form,"userIds",t)},expression:"form.userIds"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"2"===e.form.userType,expression:"form.userType==='2'"}]},[a("span",[e._v("*不为空&用,隔开，最多200个用户")]),a("br"),e._v(" "),a("span",{staticClass:"text-red"},[e._v("(用户ID与Excel只能二选一)")])]),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"2"===e.form.userType,expression:"form.userType==='2'"}],attrs:{prop:"excel",rules:[{required:"2"===e.form.userType&&!e.form.userIds,message:"请选择Excel",trigger:["blur","change"]}]}},[a("el-upload",{ref:"upload",attrs:{limit:"1",accept:".xls,.xlsx,.xlc,.xlm,.xlt,.xlw","on-remove":e.handleFileRemove,"on-change":e.handleFileChange,"on-exceed":e.handleFileExceed,"auto-upload":!1,"file-list":e.fileList}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("*文件需为excel格式")])],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]},pp=a("VU/8")(up,mp,!1,null,null,null).exports,fp={name:"couponPackage",data:function(){return{activeTab:"0",loading:!1,list:[],pageIndex:1,pageSize:25,pageCount:1,tableHeight:null,expands:[],dialogWrapData:{},dialogWrapVisible:!1,dialogCategoryData:{},dialogCategoryVisible:!1,dialogCouponWrapId:null,dialogSendId:null,dialogSendVisible:!1}},computed:u()({},Object(sn.d)(["windowHeight"])),components:{DialogCouponWrap:sp,DialogCouponCategory:dp,DialogCouponSend:pp},created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},handleClickTabs:function(){this.list=[],this.getList()},getRowKeys:function(e){return e.couponWrapId},getList:function(e){var t=this;if(!this.loading){var a=this.pageIndex===e?this.$refs.elTable.bodyWrapper.scrollTop:0;return this.pageIndex=e||1,this.loading=!0,this.$service(Vi[this.activeTab].list,{params:{start:this.pageIndex,limit:this.pageSize}}).then(function(e){if(t.loading=!1,200===e.code)return t.list=e.data.records||[],t.pageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1,t.$refs.elTable.bodyWrapper.scrollTop=a,Bo.a.resolve();t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))})}},countExpand:function(e,t){0!==t.length?this.expands.indexOf(e.couponWrapId)>-1||(this.expands=[e.couponWrapId],this.getCategoryList(e)):this.expands=[]},getCategoryList:function(e){var t=this;this.$set(e,"loading",!0),e.list||this.$set(e,"list",[]),this.$service(Vi[this.activeTab].listByCouponWrapId,{urlParams:{couponWrapId:e.couponWrapId}}).then(function(a){e.loading=!1,200===a.code?t.$set(e,"list",a.data):t.$message.error(a.message)},function(a){a&&(e.loading=!1,t.$message.error(qo()(a)))})},switchCouponWrapId:function(e){var t=this;this.$set(e,"statusLoading",!0);var a={couponWrapId:e.couponWrapId,couponWrapStatus:e.couponWrapStatus};this.$service(Vi[this.activeTab].status,{method:"post",data:a}).then(function(a){e.statusLoading=!1,200===a.code?t.$message.success("状态更新成功"):(t.$set(e,"couponWrapStatus",e.couponWrapStatus?0:1),t.$message.error(a.message))},function(a){e.statusLoading=!1,t.$set(e,"couponWrapStatus",e.couponWrapStatus?0:1),t.$message.error(qo()(a))})},switchCouponId:function(e){var t=this;this.$set(e,"statusLoading",!0);var a={couponId:e.couponId,validStatus:e.validStatus};this.$service(qi[this.activeTab].status,{method:"post",data:a}).then(function(a){e.statusLoading=!1,200===a.code?t.$message.success("状态更新成功"):(t.$set(e,"validStatus",e.validStatus?0:1),t.$message.error(a.message))},function(a){e.statusLoading=!1,t.$set(e,"validStatus",e.validStatus?0:1),t.$message.error(qo()(a))})},categoryPop:function(e,t){var a=this;this.$service(qi[this.activeTab].detail,{urlParams:{couponId:e.couponId}}).then(function(e){200===e.code?(a.dialogCategoryData=e.data,t?a.dialogCouponWrapId=null:(a.dialogCouponWrapId=a.expands[0],delete a.dialogCategoryData.couponId),a.dialogCategoryVisible=!0):a.$message.error("获取优惠券详情失败，请稍后再试")},function(e){e&&a.$message.error("获取优惠券详情失败，请稍后再试")})},categorySuccess:function(){var e=this,t=this.expands[0];t&&this.list.forEach(function(a){a.couponWrapId===t&&e.getCategoryList(a)})},couponAdd:function(e,t){var a=this;if(!/\d+/.test(e.addCount))return this.$message.warning("要增加的券数必须为整数");if(e.addCount<1)return this.$message.warning("要增加的券数必须大于0");if(t)window.open(location.origin+Bi[this.activeTab].addExport+"?couponId="+e.couponId+"&count="+e.addCount),e.addPop=!1,this.categorySuccess();else{if(e.addLoading)return;this.$set(e,"addLoading",!0),this.$service(Bi[this.activeTab].add,{method:"post",data:{couponId:e.couponId,count:e.addCount}}).then(function(t){e.addLoading=!1,200===t.code?(e.addPop=!1,a.$message.success("券数增加成功"),a.categorySuccess()):a.$message.error(t.code+":"+t.message)},function(t){t&&(e.addLoading=!1,a.$message.error(qo()(t)))})}},ResendNewCoupon:function(){var e=this;this.$prompt("输入新手通行证账号",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/,inputErrorMessage:"邮箱格式不正确",closeOnClickModal:!1}).then(function(t){var a=t.value;e.$service(Vi[e.activeTab].ResendNewCoupon,{params:{account:a}}).then(function(t){200===t.code?e.$message.success("补发新手礼包成功"):e.$message.error(t.message)}).catch(function(t){t&&e.$message.error(qo()(t))})})}},watch:{windowHeight:function(){this.setHeight()}}},hp={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"coupon-package"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},["0"===e.activeTab?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:e.ResendNewCoupon}},[e._v("补发新手礼包")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.dialogWrapData={},e.dialogWrapVisible=!0}}},[e._v("新建组合")])],1)]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"红彩",name:"0",disabled:e.loading}}),e._v(" "),a("el-tab-pane",{attrs:{label:"精准比分",name:"1",disabled:e.loading}})],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight,"row-key":e.getRowKeys,"expand-row-keys":e.expands},on:{"cell-click":e.countExpand,"row-click":e.countExpand,"expand-change":e.countExpand}},[a("el-table-column",{attrs:{fixed:"",type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.row.loading,expression:"props.row.loading"}],attrs:{data:t.row.list}},[a("el-table-column",{attrs:{prop:"couponId",label:"类型ID",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.couponId)+"\n              "),t.row.isFetch?e._e():a("el-tooltip",{attrs:{effect:"dark",content:"优惠券已发完",placement:"top"}},[a("span",{staticClass:"el-icon-warning",staticStyle:{"font-size":"18px",color:"#e62121"}})])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"wrapName",label:"类型",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("couponType2CH")(t.row.couponType))+"\n            ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"couponName",label:"优惠券名称","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"CouponDetail",params:{id:t.row.couponId,source:e.activeTab}}}},[e._v(e._s(t.row.couponName))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"validType",label:"有效期","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(0===t.row.validType?t.row.validDay+"天":t.row.validStartDate+" ~ "+t.row.validEndDate)+"\n            ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"discountStr",label:"优惠力度",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"useCount",label:"使用数",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fetchCount",label:"领取数",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"总数",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(0===t.row.amountType?t.row.fetchCount:t.row.amount)+"\n            ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"导出数",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(0===t.row.amountType&&t.row.exportCount?t.row.exportCount:"-")+"\n            ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"导出待领取数",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(0===t.row.amountType&&t.row.unclaimedCount?t.row.unclaimedCount:"-")+"\n            ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{label:"创建方式",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(0===t.row.amountType?"自动":"手动")+"\n            ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{label:"类型发放日期","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(0===t.row.releaseTimeType?"-":t.row.releaseStartDate+" ~ "+t.row.releaseEndDate)+"\n            ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"validStatus",label:"状态",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.validStatus?"停用":"正常")+"\n              "),0!==t.row.validStatus||t.row.isValid?e._e():a("span",{staticClass:"el-icon-warning",staticStyle:{"font-size":"18px",color:"#e62121"}})]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(i){return["1001"===t.row.couponWrapType||1!==i.row.amountType||1==i.row.validType&&new Date(i.row.validEndDate).valueOf()<(new Date).valueOf()?e._e():a("el-popover",{attrs:{placement:"left-start",trigger:"click"},model:{value:i.row.addPop,callback:function(t){e.$set(i.row,"addPop",t)},expression:"scope.row.addPop"}},[a("el-input",{attrs:{size:"small",placeholder:"整数且大于0"},model:{value:i.row.addCount,callback:function(t){e.$set(i.row,"addCount",t)},expression:"scope.row.addCount"}}),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"10px 0 0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){i.row.addPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"",loading:i.row.addLoading},on:{click:function(t){return e.couponAdd(i.row)}}},[e._v("增加")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.couponAdd(i.row,!0)}}},[e._v("增加并导出")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",plain:"",size:"mini"},nativeOn:{click:function(t){return e.$set(i.row,"addCount","")}},slot:"reference"},[e._v("增加券数")])],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){return e.categoryPop(i.row,i.row.couponId)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){return e.categoryPop(i.row)}}},[e._v("复制")]),e._v(" "),a("el-switch",{attrs:{"active-color":"#e6212180",disabled:i.row.statusLoading,"active-value":0,"inactive-value":1},nativeOn:{click:function(t){return e.switchCouponId(i.row)}},model:{value:i.row.validStatus,callback:function(t){e.$set(i.row,"validStatus",t)},expression:"scope.row.validStatus"}})]}}],null,!0)})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"couponWrapId",label:"组合ID",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.couponWrapId)+"\n        "),t.row.isFetch?e._e():a("span",{staticClass:"el-icon-warning",staticStyle:{"font-size":"18px",color:"#e62121"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"wrapName",label:"组合名称","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fetchCount",label:"发放次数",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"组合发放日期","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(1!==t.row.releaseTimeType?"-":t.row.releaseStartDate+" ~ "+t.row.releaseEndDate)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"useCount",label:"是否可重复领取",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.isMultGet?"是":"否")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"validStatus",label:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.couponWrapStatus?"停用":"正常")+"\n        "),0!==t.row.couponWrapStatus||t.row.isValid?e._e():a("span",{staticClass:"el-icon-warning",staticStyle:{"font-size":"18px",color:"#e62121"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.couponWrapStatus?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){a.stopPropagation(),e.dialogSendId=t.row.couponWrapId,e.dialogSendVisible=!0}}},[e._v("定向发放")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){a.stopPropagation(),e.dialogCategoryData={},e.dialogCouponWrapId=t.row.couponWrapId,e.dialogCategoryVisible=!0}}},[e._v("添加类别")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit",circle:""},on:{click:function(a){a.stopPropagation(),e.dialogWrapData=t.row,e.dialogWrapVisible=!0}}}),e._v(" "),a("el-switch",{attrs:{disabled:t.row.statusLoading,"active-value":0,"inactive-value":1},nativeOn:{click:function(a){return a.stopPropagation(),e.switchCouponWrapId(t.row)}},model:{value:t.row.couponWrapStatus,callback:function(a){e.$set(t.row,"couponWrapStatus",a)},expression:"scope.row.couponWrapStatus"}})]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList}}),e._v(" "),a("dialog-coupon-wrap",{attrs:{tab:e.activeTab,data:e.dialogWrapData,visible:e.dialogWrapVisible},on:{closeDialog:function(t){e.dialogWrapVisible=!1},success:function(t){return e.getList(e.dialogWrapData.couponWrapId?e.pageIndex:1)}}}),e._v(" "),a("dialog-coupon-category",{attrs:{tab:e.activeTab,data:e.dialogCategoryData,visible:e.dialogCategoryVisible,couponWrapId:e.dialogCouponWrapId},on:{closeDialog:function(t){e.dialogCategoryVisible=!1},success:e.categorySuccess}}),e._v(" "),a("dialog-coupon-send",{attrs:{tab:e.activeTab,id:e.dialogSendId,visible:e.dialogSendVisible},on:{closeDialog:function(t){e.dialogSendVisible=!1},success:function(t){e.getList(e.pageIndex).then(function(){e.categorySuccess()})}}})],1)},staticRenderFns:[]},gp=a("VU/8")(fp,hp,!1,null,null,null).exports,vp={name:"couponCategory",data:function(){return{activeTab:"0",couponTab:"1",couponTypeList:on.couponType,loading:!1,list:[],pageIndex:1,pageSize:25,pageCount:1,tableHeight:null,form:{str:""},dialogFormVisible:!1,checkLoading:!1,checkCouponInfo:null,dialogCategoryData:{},dialogCategoryVisible:!1}},computed:u()({},Object(sn.d)(["windowHeight"])),components:{DialogCouponCategory:dp},created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},handleClickTabs:function(){this.couponTab="1",this.handleCouponTabs()},handleCouponTabs:function(){this.pageIndex=1,this.pageCount=1,this.list=[],this.getList()},getList:function(e){var t=this;this.loading||(this.pageIndex=e||1,this.loading=!0,this.$service(qi[this.activeTab].list,{urlParams:{type:this.couponTab,pageIndex:this.pageIndex,pageSize:this.pageSize}}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.records||[],t.pageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))}))},switchStatus:function(e){var t=this;this.$set(e,"statusLoading",!0);var a={couponId:e.couponId,validStatus:e.validStatus};this.$service(qi[this.activeTab].status,{method:"post",data:a}).then(function(a){e.statusLoading=!1,200===a.code?t.$message.success("状态更新成功"):(t.$set(e,"validStatus",e.validStatus?0:1),t.$message.error(a.message))},function(a){e.statusLoading=!1,t.$set(e,"validStatus",e.validStatus?0:1),t.$message.error(qo()(a))})},categoryPop:function(e){var t=this;this.$service(qi[this.activeTab].detail,{urlParams:{couponId:e.couponId}}).then(function(e){200===e.code?(t.dialogCategoryData=e.data,t.dialogCategoryVisible=!0):t.$message.error("获取优惠券详情失败，请稍后再试")},function(e){e&&t.$message.error("获取优惠券详情失败，请稍后再试")})},checkCouponPop:function(){var e=this;this.form.str="",this.checkCouponInfo=null,this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.form.clearValidate()})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(t.checkLoading)return;t.checkCouponInfo=null,t.checkLoading=!0,t.$service(qi[t.activeTab].checkCouponStr,{urlParams:{str:t.form.str}}).then(function(e){t.checkLoading=!1,200===e.code?t.checkCouponInfo=e.data:t.$message.error(e.code+":"+e.message)},function(e){t.checkLoading=!1,t.$message.error(qo()(e))})}})}},watch:{windowHeight:function(){this.setHeight()}}},bp={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"coupon-category"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.checkCouponPop()}}},[e._v("验券")])],1)]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"红彩",name:"0",disabled:e.loading}}),e._v(" "),a("el-tab-pane",{attrs:{label:"精准比分",name:"1",disabled:e.loading}})],1),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleCouponTabs},model:{value:e.couponTab,callback:function(t){e.couponTab=t},expression:"couponTab"}},e._l(e.couponTypeList,function(t){return a("el-tab-pane",{key:t.id,attrs:{label:t.name,name:t.id.toString(),disabled:e.loading}})}),1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{fixed:"",prop:"couponId",label:"ID",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.couponId)+"\n        "),t.row.fetch?e._e():a("el-tooltip",{attrs:{effect:"dark",content:"优惠券已发完",placement:"right"}},[a("span",{staticClass:"el-icon-warning",staticStyle:{"font-size":"18px",color:"#e62121"}})])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"couponType",label:"类型",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("couponType2CH")(t.row.couponType))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"couponName",label:"优惠券名称","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"CouponDetail",params:{id:t.row.couponId,source:e.activeTab}}}},[e._v(e._s(t.row.couponName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"discountStr",label:"优惠力度","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"类型发放日期","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(0===t.row.releaseTimeType?"-":t.row.releaseStartDate+" ~ "+t.row.releaseEndDate)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"useCount",label:"使用数",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fetchCount",label:"领取数",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"总数",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(0===t.row.amountType?t.row.fetchCount:t.row.amount)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建方式",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(0===t.row.amountType?"自动":"手动")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"validStatus",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.validStatus?"停用":"正常")+"\n        "),0!==t.row.validStatus||t.row.valid?e._e():a("span",{staticClass:"el-icon-warning",staticStyle:{"font-size":"18px",color:"#e62121"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.categoryPop(t.row)}}}),e._v(" "),a("el-switch",{attrs:{disabled:t.row.statusLoading,"active-value":0,"inactive-value":1},nativeOn:{click:function(a){return e.switchStatus(t.row)}},model:{value:t.row.validStatus,callback:function(a){e.$set(t.row,"validStatus",a)},expression:"scope.row.validStatus"}})]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList}}),e._v(" "),a("el-dialog",{attrs:{title:"验券","close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,disabled:e.checkLoading,size:"small","label-width":"60px"}},[a("el-form-item",{attrs:{label:"券码",prop:"str",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{pattern:/^[0-9a-zA-Z]{1,}$/,message:"仅支持字母、数字",trigger:["blur","change"]},{max:199,message:"最多199个字符",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.str,callback:function(t){e.$set(e.form,"str",t)},expression:"form.str"}})],1)],1),e._v(" "),e.checkCouponInfo?a("el-form",{attrs:{size:"mini","label-width":"100px"}},[a("el-form-item",{attrs:{label:"优惠券ID："}},[e._v("\n        "+e._s(e.checkCouponInfo.userCouponId)+"\n      ")]),e._v(" "),a("el-form-item",{attrs:{label:"优惠券类型："}},[e._v("\n        "+e._s(e._f("couponType2CH")(e.checkCouponInfo.couponType))+"\n      ")]),e._v(" "),a("el-form-item",{attrs:{label:"优惠力度："}},[e._v("\n        "+e._s(e.checkCouponInfo.discountStr)+"\n      ")]),e._v(" "),a("el-form-item",{attrs:{label:"优惠券名称："}},[e._v("\n        "+e._s(e.checkCouponInfo.couponName)+"\n      ")]),e._v(" "),a("el-form-item",{attrs:{label:"有效日期："}},[e._v("\n        "+e._s(e.checkCouponInfo.validStr)+"\n      ")]),e._v(" "),a("el-form-item",{attrs:{label:"领取人："}},[e._v("\n        "+e._s(e.checkCouponInfo.account||"未领取")+"\n      ")]),e._v(" "),e.checkCouponInfo.fetchTime?a("el-form-item",{attrs:{label:"领取时间："}},[e._v("\n        "+e._s(e.checkCouponInfo.fetchTime)+"\n      ")]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"状态："}},[e._v("\n        "+e._s(e.checkCouponInfo.statusStr)+"\n      ")]),e._v(" "),e.checkCouponInfo.useTime?a("el-form-item",{attrs:{label:"使用时间："}},[e._v("\n        "+e._s(e.checkCouponInfo.useTime)+"\n      ")]):e._e()],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",loading:e.checkLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("提交")])],1)],1),e._v(" "),a("dialog-coupon-category",{attrs:{tab:e.activeTab,data:e.dialogCategoryData,visible:e.dialogCategoryVisible},on:{closeDialog:function(t){e.dialogCategoryVisible=!1},success:function(t){return e.getList(e.pageIndex)}}})],1)},staticRenderFns:[]},_p=a("VU/8")(vp,bp,!1,null,null,null).exports,yp={name:"couponChannel",data:function(){return{loading:!1,list:[],form:{channelCode:"",channelName:"",abbr:"",channelIcon:""},updateLoading:!1,dialogFormVisible:!1,tableHeight:null}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(){var e=this;this.loading||(this.loading=!0,this.$service(ji).then(function(t){e.loading=!1,200===t.code?(e.list=t.data||[],e.$refs.elTable.bodyWrapper.scrollTop=0):e.$message.error(t.code+":"+t.message)},function(t){e.$message.error(qo()(t))}))},beforeImgUpload:function(e){if(e.size/1024/1024>5)return this.$message.error("上传ICON大小不能超过 5MB!"),!1},uploadSingleImg:function(e){var t=this;En(e.file,"thread").then(function(e){t.form.channelIcon=e},function(e){e&&t.$message.error("上传ICON失败，请稍后再传！")})},channelPop:function(e){var t=this;this.form=tn()({channelCode:"",channelName:"",abbr:"",channelIcon:""},e||{}),this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.form.clearValidate()})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(t.updateLoading)return;t.updateLoading=!0,t.$service(t.form.appChannelId?Wi:Qi,{method:"post",data:t.form}).then(function(e){t.updateLoading=!1,200===e.code?(t.dialogFormVisible=!1,t.$message.success((t.form.appChannelId?"修改":"添加")+"成功"),t.getList()):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}})}},watch:{windowHeight:function(){this.setHeight()}}},wp={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"coupon-channel"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.channelPop()}}},[e._v("新建渠道")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"appChannelId",label:"ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelCode",label:"渠道号","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelName",label:"渠道名称","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelIcon",label:"渠道icon","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.channelIcon?a("img",{attrs:{src:t.row.channelIcon+"?imageView&thumbnail=50y50&quality=85"}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.channelPop(t.row)}}})]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:e.form.appChannelId?"修改渠道":"新建渠道","close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,disabled:e.updateLoading,size:"small","label-width":"80px"}},[a("el-form-item",{attrs:{label:"渠道号",prop:"channelCode",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{pattern:/^[0-9a-zA-Z_-]{1,}$/,message:"仅支持字母、数字及_或-",trigger:["blur","change"]},{max:50,message:"最多50个字符",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.channelCode,callback:function(t){e.$set(e.form,"channelCode",t)},expression:"form.channelCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"渠道名称",prop:"channelName",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{max:30,message:"最多30个字符",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.channelName,callback:function(t){e.$set(e.form,"channelName",t)},expression:"form.channelName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"缩写字母",prop:"abbr",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{pattern:/^[0-9a-zA-Z_-]{1,}$/,message:"仅支持字母、数字及_或-",trigger:["blur","change"]},{max:10,message:"最多10个字符",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.abbr,callback:function(t){e.$set(e.form,"abbr",t)},expression:"form.abbr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图标",prop:"channelIcon",rules:{required:!0,message:"不为空",trigger:"blur"}}},[a("el-upload",{staticClass:"single-uploader",attrs:{accept:".jpeg,.jpg,.png,.gif","show-file-list":!1,"http-request":e.uploadSingleImg,"before-upload":e.beforeImgUpload}},[e.form.channelIcon?a("img",{staticClass:"single-img",attrs:{src:e.form.channelIcon+"?imageView&thumbnail=98y98&quality=85"}}):a("i",{staticClass:"el-icon-plus single-uploader-icon"})])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},Tp=a("VU/8")(yp,wp,!1,null,null,null).exports,Ip={name:"couponDetail",data:function(){return{tab:"0",fromRouter:null,currentRouter:null,activeTab:"1",couponId:null,couponInfo:null,list:[],loading:!1,pageIndex:1,pageSize:25,pageCount:1,logList:[],logLoading:!1,logPageIndex:1,logPageSize:25,logPageCount:1,tableHeight:null,addCount:"",addPop:!1,addLoading:!1}},computed:u()({},Object(sn.d)(["windowHeight"]),{showAddCoupon:function(){return this.couponInfo&&"1001"!==this.couponInfo.couponWrapType&&1===this.couponInfo.amountType&&!(1===this.couponInfo.validType&&new Date(this.couponInfo.validEndDate).valueOf()<(new Date).valueOf())}}),created:function(){this.couponId=this.$route.params.id,this.tab=this.$route.params.source,this.getList()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},handleClickTabs:function(){this.pageIndex=1,this.pageCount=1,this.list=[],this.getList()},getList:function(e){var t=this;this.loading||(this.pageIndex=e||1,this.loading=!0,this.$service(Bi[this.tab].list,{urlParams:{couponId:this.couponId,type:this.activeTab,pageIndex:this.pageIndex,pageSize:this.pageSize}}).then(function(e){t.loading=!1,200===e.code?(t.couponInfo=e.data.couponDetail,t.list=e.data.userCouponListPage.records||[],t.pageCount=e.data.userCouponListPage.page&&e.data.userCouponListPage.page.pageCount?e.data.userCouponListPage.page.pageCount:1,t.$refs.elTable.bodyWrapper.scrollTop=0,t.setHeight()):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))}))},getLogList:function(e){var t=this;this.logLoading||(this.logPageIndex=e||1,this.logLoading=!0,this.$service(Bi[this.tab].log,{urlParams:{couponId:this.couponId,pageIndex:this.logPageIndex,pageSize:this.logPageSize}}).then(function(e){t.logLoading=!1,200===e.code?(t.logList=e.data.records||[],t.logPageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1,t.$refs.logElTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.logLoading=!1,t.$message.error(qo()(e)))}))},couponAdd:function(e){var t=this;if(!/\d+/.test(this.addCount))return this.$message.warning("要增加的券数必须为整数");if(this.addCount<1)return this.$message.warning("要增加的券数必须大于0");if(e)window.open(location.origin+Bi[this.tab].addExport+"?couponId="+this.couponId+"&count="+this.addCount),this.addPop=!1,this.getList();else{if(this.addLoading)return;this.addLoading=!0,this.$service(Bi[this.tab].add,{method:"post",data:{couponId:this.couponId,count:this.addCount}}).then(function(e){t.addLoading=!1,200===e.code?(t.addPop=!1,t.$message.success("券数增加成功"),t.getList()):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.addLoading=!1,t.$message.error(qo()(e)))})}}},beforeRouteUpdate:function(e,t,a){this.couponId=e.params.id,this.pageIndex=1,this.pageCount=1,this.list=[],this.activeTab="1",this.couponInfo=null,this.getList(),a()},beforeRouteEnter:function(e,t,a){a(function(a){a.fromRouter=t&&t.name?t:null,a.currentRouter=e})},watch:{windowHeight:function(){this.setHeight()}}},xp={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"coupon-detail"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e.fromRouter?a("el-breadcrumb-item",{attrs:{to:{path:e.fromRouter.fullPath}}},[e._v(e._s(e.fromRouter.meta.title)+"\n        ")]):e._e(),e._v(" "),e.currentRouter?a("el-breadcrumb-item",[e._v(e._s(e.currentRouter.meta.title))]):e._e()],1)],1),e._v(" "),a("div",{staticClass:"tools"},[e.showAddCoupon?a("el-popover",{attrs:{placement:"left-start",trigger:"click"},model:{value:e.addPop,callback:function(t){e.addPop=t},expression:"addPop"}},[a("el-input",{attrs:{size:"small",placeholder:"整数且大于0"},model:{value:e.addCount,callback:function(t){e.addCount=t},expression:"addCount"}}),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"10px 0 0"}},[a("el-button",{attrs:{size:"mini",type:"",loading:e.addLoading},on:{click:function(t){return e.couponAdd()}}},[e._v("增加")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.couponAdd(!0)}}},[e._v("增加并导出")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"danger",size:"small"},nativeOn:{click:function(t){e.addCount=""}},slot:"reference"},[e._v("增加券数")])],1):e._e(),e._v(" "),e.couponInfo&&1==e.couponInfo.amountType?a("el-popover",{attrs:{placement:"left-start",width:"400",trigger:"click"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.logLoading,expression:"logLoading"}],ref:"logElTable",attrs:{size:"mini",data:e.logList,stripe:"","max-height":"350"}},[a("el-table-column",{attrs:{width:"140",property:"createTime",label:"日期"}}),e._v(" "),a("el-table-column",{attrs:{width:"160",property:"userAccount",label:"操作者"}}),e._v(" "),a("el-table-column",{attrs:{width:"100",property:"incAmount",label:"数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.incAmount||"-")+"个\n            ")]}}],null,!1,501254706)})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{small:"",background:"",layout:"prev, pager, next","current-page":e.logPageIndex,"page-count":e.logPageCount},on:{"current-change":e.getLogList}}),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",size:"small"},nativeOn:{click:function(t){return e.getLogList()}},slot:"reference"},[e._v("操作记录")])],1):e._e()],1)]),e._v(" "),e.couponInfo?a("table",{staticClass:"coupon-table"},[a("tr",[a("td",{staticClass:"bg-fa"},[e._v("序号：")]),e._v(" "),a("td",[e._v(e._s(e.couponInfo.couponId))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("类型：")]),e._v(" "),a("td",[e._v(e._s(e._f("couponType2CH")(e.couponInfo.couponType)))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("名称：")]),e._v(" "),a("td",[e._v(e._s(e.couponInfo.couponName))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("创建方式：")]),e._v(" "),a("td",[e._v(e._s(0===e.couponInfo.amountType?"自动":"手动"))]),e._v(" "),a("td",{staticClass:"bg-fa"},[e._v("状态：")]),e._v(" "),a("td",[e._v(e._s(0===e.couponInfo.validStatus?"正常":"停用"))])]),e._v(" "),a("tr",[a("td",{staticClass:"bg-fa"},[e._v("使用/领取/总数：")]),e._v(" "),a("td",[e._v("\n        "+e._s(e.couponInfo.useCount)+"/"+e._s(e.couponInfo.fetchCount)+"/"+e._s(0==e.couponInfo.amountType?e.couponInfo.fetchCount:e.couponInfo.amount)+"\n      ")]),e._v(" "),a("td",{staticClass:"bg-fa",attrs:{colspan:"2"}},[e._v("类型发放日期：")]),e._v(" "),a("td",{attrs:{colspan:"2"}},[e._v("\n        "+e._s(0==e.couponInfo.releaseTimeType?"-":e.couponInfo.releaseStartDate+" ~ "+e.couponInfo.releaseEndDate)+"\n      ")]),e._v(" "),a("td",{staticClass:"bg-fa",attrs:{colspan:"2"}},[e._v("券有效日期：")]),e._v(" "),a("td",{attrs:{colspan:"2"}},[e._v("\n        "+e._s(0===e.couponInfo.validType?e.couponInfo.validDay+"天":e.couponInfo.validStartDate+" ~ "+e.couponInfo.validEndDate)+"\n      ")])])]):e._e(),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"待使用("+(e.couponInfo?e.couponInfo.tabUnUseCount:0)+")",name:"1",disabled:e.loading}}),e._v(" "),a("el-tab-pane",{attrs:{label:"已使用("+(e.couponInfo?e.couponInfo.tabUseCount:0)+")",name:"2",disabled:e.loading}}),e._v(" "),a("el-tab-pane",{attrs:{label:"待发放("+(e.couponInfo?e.couponInfo.tabUnSendCount:0)+")",name:"3",disabled:e.loading}}),e._v(" "),a("el-tab-pane",{attrs:{label:"已过期("+(e.couponInfo?e.couponInfo.tabExpiredCount:0)+")",name:"4",disabled:e.loading}})],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"userCouponId",label:"序号",width:"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"couponCode",label:"优惠券码",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userAccount",label:"领取人","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"有效日期","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.validStartDate)+" ~ "+e._s(t.row.validEndDate)+"\n      ")]}}])}),e._v(" "),"1"===e.activeTab?a("el-table-column",{attrs:{prop:"fetchTime",label:"领取时间",width:"150"}}):e._e(),e._v(" "),"2"===e.activeTab?a("el-table-column",{attrs:{prop:"useTime",label:"使用时间",width:"150"}}):e._e(),e._v(" "),"3"===e.activeTab?a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"150"}}):e._e(),e._v(" "),"4"===e.activeTab?a("el-table-column",{attrs:{prop:"expiredTime",label:"过期时间",width:"150"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"adminShowStatus",label:"状态",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"useRangeShow",label:"适用范围","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"couponDesc",label:"说明","min-width":"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"adminName",label:"发放人","min-width":"160"}})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList}})],1)},staticRenderFns:[]};var kp=a("VU/8")(Ip,xp,!1,function(e){a("wXvF")},null,null).exports,$p={name:"invitation",data:function(){return{statusInfo:{openStatus:!0},form:{},dialogFormVisible:!1,updateLoading:!1,activeTab:"0",filter:{},list:[],pageIndex:1,pageSize:25,pageCount:1,loading:!1,tableHeight:null,totalInfo:{},warningFilter:{},warningList:[],warningPageIndex:1,warningPageSize:25,warningPageCount:1,warningLoading:!1,warningTableHeight:null}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getSwitchStatus(),this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){"0"===e.activeTab&&(e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63),"1"===e.activeTab&&(e.tableHeight=e.windowHeight-e.$refs.warningElTable.$el.offsetTop-63)})},handleClickTabs:function(){"0"===this.activeTab&&0===this.list.length&&this.getList(),"1"===this.activeTab&&0===this.warningList.length&&this.getWarningList(),this.setHeight()},getList:function(e){var t=this;if(!this.loading){this.loading=!0;var a={};this.filter.startTime&&(a.startTime=this.filter.startTime),this.filter.endTime&&(a.endTime=this.filter.endTime),this.pageIndex=e||1,this.$service(Xi,{urlParams:{pageIndex:this.pageIndex,pageSize:this.pageSize},params:a}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.resultPage.records||[],t.pageCount=e.data.resultPage.page&&e.data.resultPage.page.pageCount?e.data.resultPage.page.pageCount:1,t.$refs.elTable.bodyWrapper.scrollTop=0,t.totalInfo=e.data.sharePullHostUserStTotalVo||{}):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1)&&t.$message.error(qo()(e))})}},getWarningList:function(e){var t=this;if(!this.warningLoading){this.warningLoading=!0;var a={};this.warningFilter.startTime&&(a.startTime=this.warningFilter.startTime),this.warningFilter.endTime&&(a.endTime=this.warningFilter.endTime),this.warningPageIndex=e||1,this.$service(Ki,{urlParams:{pageIndex:this.warningPageIndex,pageSize:this.warningPageSize},params:a}).then(function(e){t.warningLoading=!1,200===e.code?(t.warningList=e.data.records||[],t.warningPageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1,t.$refs.warningElTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.warningLoading=!1)&&t.$message.error(qo()(e))})}},getSwitchStatus:function(){var e=this;this.$service(Gi).then(function(t){200===t.code&&(e.statusInfo={openStatus:t.data.openStatus})})},switchStatus:function(){var e=this;this.form=tn()({},this.statusInfo),this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.form.clearValidate()})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(t.updateLoading)return;t.updateLoading=!0,t.$service(Yi,{method:"post",data:{openStatus:t.form.openStatus?1:0}}).then(function(e){t.updateLoading=!1,200===e.code?(t.dialogFormVisible=!1,t.getSwitchStatus(),t.$message.success("更新状态成功")):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,e&&t.$message.error(qo()(e))})}})}},watch:{windowHeight:function(){this.setHeight()}}},Cp={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"invitation"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[e.statusInfo?a("span",[a("b",[e._v("活动状态：")]),e._v(e._s(e.statusInfo.openStatus?"上线":"下线"))]):e._e(),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.switchStatus}},[e._v("更新状态")])],1)]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"点卡发放列表",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"预警用户列表",name:"1"}})],1),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:"0"===e.activeTab,expression:"activeTab==='0'"}],attrs:{inline:!0,model:e.filter,size:"mini",disabled:e.loading}},[a("el-form-item",[a("el-date-picker",{staticStyle:{width:"135px"},attrs:{type:"date",editable:"false",width:"100",placeholder:"开始日期","value-format":"yyyy-MM-dd 00:00:00","picker-options":{disabledDate:function(t){return t.getTime()>Date.now()||0!==new Date(e.filter.endTime).getTime()&&t.getTime()>new Date(e.filter.endTime).getTime()}}},model:{value:e.filter.startTime,callback:function(t){e.$set(e.filter,"startTime",t)},expression:"filter.startTime"}}),e._v("\n      ~\n      "),a("el-date-picker",{staticStyle:{width:"135px"},attrs:{type:"date",editable:"false",placeholder:"结束日期","value-format":"yyyy-MM-dd 23:59:59","picker-options":{disabledDate:function(t){return t.getTime()>Date.now()||0!==new Date(e.filter.startTime).getTime()&&t.getTime()<new Date(e.filter.startTime).getTime()}}},model:{value:e.filter.endTime,callback:function(t){e.$set(e.filter,"endTime",t)},expression:"filter.endTime"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.getList()}}},[e._v("查询")])],1),e._v(" "),e.totalInfo.totalCards?a("el-form-item",[a("b",[e._v("发放点卡总数：")]),e._v(e._s(e.totalInfo.totalCards)+"；")]):e._e(),e._v(" "),e.totalInfo.totalCardCost?a("el-form-item",[a("b",[e._v("点卡总成本：")]),e._v(e._s(e.totalInfo.totalCardCost)+"；")]):e._e(),e._v(" "),e.totalInfo.totalActivateCards?a("el-form-item",[a("b",[e._v("点卡激活总数：")]),e._v(e._s(e.totalInfo.totalActivateCards)+"；")]):e._e(),e._v(" "),e.totalInfo.totalRegisters?a("el-form-item",[a("b",[e._v("邀请码注册总人数：")]),e._v(e._s(e.totalInfo.totalRegisters))]):e._e()],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"0"===e.activeTab,expression:"activeTab==='0'"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"sharePullNewLogId",label:"ID","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"hostUserId",label:"用户ID","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"UserDetail",params:{id:t.row.hostUserId,source:0}}}},[e._v(e._s(t.row.hostUserId))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"hostAccount",label:"用户账号","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"UserDetail",params:{id:t.row.hostUserId,source:0}}}},[e._v(e._s(t.row.hostAccount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"newUserId",label:"被邀请下单用户ID","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"UserDetail",params:{id:t.row.newUserId,source:0}}}},[e._v(e._s(t.row.newUserId))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cardPoints",label:"点卡","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.cardPoints>0?t.row.cardPoints+"点周卡":"")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"点卡状态","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.cardPoints>0?1===t.row.cardStatus?"已激活":"已发放未激活":"")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"pullFinishTime",label:"发放时间","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.pullFinishTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"hostUserStatus",label:"用户状态","min-width":"80"}})],1),e._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:"0"===e.activeTab,expression:"activeTab==='0'"}],staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}}),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:"1"===e.activeTab,expression:"activeTab==='1'"}],attrs:{inline:!0,model:e.warningFilter,size:"mini",disabled:e.warningLoading}},[a("el-form-item",[a("el-date-picker",{staticStyle:{width:"135px"},attrs:{type:"date",editable:"false",width:"100",placeholder:"开始日期","value-format":"yyyy-MM-dd 00:00:00","picker-options":{disabledDate:function(t){return t.getTime()>Date.now()||0!==new Date(e.warningFilter.endTime).getTime()&&t.getTime()>new Date(e.warningFilter.endTime).getTime()}}},model:{value:e.warningFilter.startTime,callback:function(t){e.$set(e.warningFilter,"startTime",t)},expression:"warningFilter.startTime"}}),e._v("\n      ~\n      "),a("el-date-picker",{staticStyle:{width:"135px"},attrs:{type:"date",editable:"false",placeholder:"结束日期","value-format":"yyyy-MM-dd 23:59:59","picker-options":{disabledDate:function(t){return t.getTime()>Date.now()||0!==new Date(e.warningFilter.startTime).getTime()&&t.getTime()<new Date(e.warningFilter.startTime).getTime()}}},model:{value:e.warningFilter.endTime,callback:function(t){e.$set(e.warningFilter,"endTime",t)},expression:"warningFilter.endTime"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.getWarningList()}}},[e._v("查询")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"1"===e.activeTab,expression:"activeTab==='1'"},{name:"loading",rawName:"v-loading",value:e.warningLoading,expression:"warningLoading"}],ref:"warningElTable",attrs:{data:e.warningList,stripe:"","max-height":e.warningTableHeight<400?400:e.warningTableHeight}},[a("el-table-column",{attrs:{prop:"sharePullHostUserStId",label:"ID","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"用户ID","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"UserDetail",params:{id:t.row.userId,source:0}}}},[e._v(e._s(t.row.userId))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"用户账号","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"UserDetail",params:{id:t.row.userId,source:0}}}},[e._v(e._s(t.row.account))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"totalCards",label:"已发放点卡数量(张)","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalActivateCards",label:"已激活点卡数量","min-width":"120"}})],1),e._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:"1"===e.activeTab,expression:"activeTab==='1'"}],staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.warningPageIndex,"page-count":e.warningPageCount},on:{"current-change":e.getWarningList,"update:currentPage":function(t){e.warningPageIndex=t},"update:current-page":function(t){e.warningPageIndex=t}}}),e._v(" "),a("el-dialog",{attrs:{title:"修改活动状态","close-on-click-modal":!1,visible:e.dialogFormVisible,width:"400px",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,disabled:e.updateLoading,"label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"状态"}},[a("el-radio",{attrs:{label:!0},model:{value:e.form.openStatus,callback:function(t){e.$set(e.form,"openStatus",t)},expression:"form.openStatus"}},[e._v("上线")]),e._v(" "),a("el-radio",{attrs:{label:!1},model:{value:e.form.openStatus,callback:function(t){e.$set(e.form,"openStatus",t)},expression:"form.openStatus"}},[e._v("下线")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},Sp=a("VU/8")($p,Cp,!1,null,null,null).exports,Lp={name:"HeadExpertRecommend",data:function(){return{loading:!1,list:[],pageIndex:1,pageSize:25,pageCount:1,tableHeight:null,dialogFormVisible:!1,form:{},updateLoading:!1,expertLoading:!1}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(e){var t=this;this.loading||(this.pageIndex=e||1,this.loading=!0,this.$service(Ji,{urlParams:{pageIndex:this.pageIndex,pageSize:this.pageSize}}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.records||[],t.pageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))}))},recommendPop:function(){var e=this;this.form={},this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.form.clearValidate()})},queryExpertInfo:function(){var e=this,t=this.form.userId;/^\d+$/g.test(t)&&!this.expertLoading&&(this.form.nickname="",this.expertLoading=!0,On(t).then(function(t){e.form.nickname="专家昵称为："+t.nickname,e.expertLoading=!1}).catch(function(t){t&&(e.expertLoading=!1,e.form.nickname=t)}))},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(t.updateLoading)return;t.updateLoading=!0,t.$service(Zi,{method:"post",data:t.form}).then(function(e){t.updateLoading=!1,200===e.code?(t.dialogFormVisible=!1,t.$message.success("新增专家成功"),t.getList()):t.$message.error(e.message)},function(e){e&&(t.updateLoading=!1,t.$message.error(qo()(e)))})}})},recommendDel:function(e){var t=this;e.loading||(this.$set(e,"loading",!0),this.$service(er,{params:{recommendExpertId:e.recommendExpertId}}).then(function(a){e.loading=!1,200===a.code?(e.delPop=!1,t.$message.success("删除成功"),t.getList(t.pageIndex)):t.$message.error(a.code+":"+a.message)},function(a){a&&(e.loading=!1,t.$message.error(qo()(a)))}))},dblclick:function(e,t,a,i){"description"===t.property&&(this.$set(e,"editor",!0),this.$set(e,"des",e.description))},recommendUpdate:function(e){var t=this,a=e.des.replace(/\r|\n/g,"");return a?a.length>60?this.$message.warning("专家简介最多60字"):void(e.loading||(this.$set(e,"loading",!0),this.$service(tr,{method:"post",data:{recommendExpertId:e.recommendExpertId,description:a}}).then(function(i){e.loading=!1,200===i.code?(t.$message.success("更新简介成功"),e.description=a,e.editor=!1):t.$message.error(i.code+":"+i.message)},function(a){a&&(e.loading=!1,t.$message.error(qo()(a)))}))):this.$message.warning("专家简介不允许为空")}},watch:{windowHeight:function(){this.setHeight()}}},Dp={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"expert-recommend"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title)+"\n        ")])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.recommendPop()}}},[e._v("新建专家")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight},on:{"cell-dblclick":e.dblclick}},[a("el-table-column",{attrs:{prop:"recommendExpertId",label:"ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"realName",label:"专家名称","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"ExpertDetail",params:{id:t.row.userId}}}},[e._v(e._s(t.row.realName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"专家ID","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"ExpertDetail",params:{id:t.row.userId}}}},[e._v(e._s(t.row.userId))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"弹框专家简介","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editor?e._e():a("span",[e._v(e._s(t.row.description))]),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:t.row.editor,expression:"scope.row.editor"}],attrs:{disabled:t.row.loading,type:"textarea",rows:2,placeholder:"请填写简介"},on:{blur:function(a){return e.recommendUpdate(t.row)}},model:{value:t.row.des,callback:function(a){e.$set(t.row,"des",a)},expression:"scope.row.des"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"left"},model:{value:t.row.delPop,callback:function(a){e.$set(t.row,"delPop",a)},expression:"scope.row.delPop"}},[a("p",[e._v("确定删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.recommendDel(t.row)}}},[e._v("确定\n            ")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",icon:"el-icon-delete",circle:"",size:"mini"},slot:"reference"})],1)]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList}}),e._v(" "),a("el-dialog",{attrs:{title:"新增专家","close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,disabled:e.updateLoading,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"专家ID",prop:"userId",rules:[{required:!0,message:"必填",trigger:["blur","change"]},{pattern:/^\d+$/,message:"ID必须为数字",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off","suffix-icon":e.expertLoading?"el-icon-loading":""},on:{change:e.queryExpertInfo},model:{value:e.form.userId,callback:function(t){e.$set(e.form,"userId",t)},expression:"form.userId"}})],1),e._v(" "),e.form.nickname?a("el-form-item",[a("span",[e._v(e._s(e.form.nickname))])]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"弹框简介",prop:"description",rules:[{required:!0,message:"必填",trigger:["blur","change"]},{max:60,message:"最多60字",trigger:["blur","change"]}]}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请填写简介"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]},Pp=a("VU/8")(Lp,Dp,!1,null,null,null).exports,zp={name:"activityPresentation",data:function(){return{loading:!1,pageIndex:1,pageSize:25,pageCount:1,list:[],tableHeight:null,rulesList:{1:"每日消费统计",2:"活动期间消费累计"},buyTypeList:{1:"竞彩",2:"北单",3:"任九",4:"胜负彩",5:"竞足",6:"竞篮",7:"北单足",8:"北单篮"},dialogFormVisible:!1,form:{},updateLoading:!1}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(e,t){var a=this;this.loading||(this.loading=!0,this.pageIndex=e||1,this.$service(ar,{urlParams:{pageIndex:this.pageIndex,pageSize:this.pageSize}}).then(function(e){a.loading=!1,200===e.code?(a.list=e.data.records||[],a.pageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1,!t&&(a.$refs.elTable.bodyWrapper.scrollTop=0)):a.$message.error(e.code+":"+e.message)},function(e){a.loading=!1,a.$message.error(qo()(e))}))},getInfoById:function(e){return e?this.$service(nr,{urlParams:{buyXGetNActivityId:e}}).then(function(e){return 200===e.code?Bo.a.resolve(e.data):Bo.a.reject(e.message)},function(e){if(e)return Bo.a.reject(e)}):Bo.a.resolve()},newPop:function(e,t){var a=this,i=e?e.buyXGetNActivityId:null;this.getInfoById(i).then(function(e){var i={};if(e){(i=u()({},e)).startTime=gh(i.startTime,"yyyy-MM-dd hh:mm:ss"),i.endTime=gh(i.endTime,"yyyy-MM-dd hh:mm:ss");var r=[];if(JSON.parse(i.couponIds).forEach(function(e){r.push({id:e,name:"",discount:"",loading:!1})}),i.couponIds=r,i.buyStatsRuleTypeId=i.buyStatsRuleTypeId+"",i.buyTypeIdSet=[],i.buyTypeIds.forEach(function(e){i.buyTypeIdSet.push(e+"")}),t)delete i.buyXGetNActivityId;else{var o=0,n=(new Date).getTime();n>e.startTime&&n<e.endTime&&(o=1),n>e.endTime&&(o=2),i.activityStatus=o}}a.form=tn()({activityName:"",startTime:"",endTime:"",buyStatsRuleTypeId:"",buyTypeIdSet:[],couponIds:[{id:"",name:"",discount:"",loading:!1}],dailyGetTimes:"",buyCount:""},i),a.form.couponIds.forEach(function(e){e.id&&Un(e.id).then(function(t){e.couponName=t.couponName,e.discount=t.discount})}),a.dialogFormVisible=!0,a.$nextTick(function(){a.$refs.form.clearValidate()})},function(){a.$message.error("获取活动详情失败，请稍后再试")})},addCoupon:function(){this.form.couponIds.push({id:"",name:"",discount:"",loading:!1})},removeCoupon:function(e){this.form.couponIds.splice(e,1)},getCouponInfo:function(e){var t=this;!e.loading&&/^\d+$/.test(e.id)&&(e.couponName="",e.discount="",this.$set(e,"loading",!0),Un(e.id).then(function(t){e.loading=!1,e.couponName=t.couponName,e.discount=t.discount},function(a){a&&(e.loading=!1,t.$message.error(a))}))},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a=u()({},t.form),i=[];if(t.form.couponIds.forEach(function(e){i.push(e.id)}),a.couponIds=i.join(","),a.buyTypeIdSet=a.buyTypeIdSet.join(","),t.updateLoading)return;t.updateLoading=!0,t.$service(a.buyXGetNActivityId?rr:ir,{method:"post",urlParams:a.buyXGetNActivityId?{buyXGetNActivityId:a.buyXGetNActivityId}:null,data:a}).then(function(e){t.updateLoading=!1,200===e.code?(t.dialogFormVisible=!1,t.getList(a.buyXGetNActivityId?t.pageIndex:1,!!a.buyXGetNActivityId),t.$message.success(a.buyXGetNActivityId?"修改成功":"添加成功")):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}})},switchStatus:function(e){var t=this;this.$set(e,"statusLoading",!0),this.$service(or,{method:"post",urlParams:{buyXGetNActivityId:e.buyXGetNActivityId},data:{status:e.status}}).then(function(a){e.statusLoading=!1,200===a.code?t.$message.success("状态更新成功"):(t.$set(e,"status",e.status?0:1),t.$message.error(a.message))},function(a){e.statusLoading=!1,t.$set(e,"status",e.status?0:1),t.$message.error(qo()(a))})},presentationDel:function(e){var t=this;this.$set(e,"loading",!0),this.$service(sr,{method:"post",urlParams:{buyXGetNActivityId:e.buyXGetNActivityId}}).then(function(a){e.loading=!1,200===a.code?(e.delPop=!1,t.$message.success("删除成功"),t.getList(t.pageIndex,!0)):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})}},watch:{windowHeight:function(){this.setHeight()}}},Hp={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"activity-presentation"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.newPop()}}},[e._v("新建活动")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"buyXGetNActivityId",label:"活动ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"activityName",label:"活动名称","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"startTime",label:"开始时间","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.startTime,"yyyy-MM-dd"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.endTime,"yyyy-MM-dd"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"购买规则","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.rulesList[t.row.buyStatsRuleTypeId]||"")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"buyCount",label:"购买篇数","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"couponIds",label:"赠送优惠券数量","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(JSON.parse(t.row.couponIds).length)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"210"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{disabled:t.row.statusLoading,"active-value":1,"inactive-value":0},nativeOn:{click:function(a){return e.switchStatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}}),e._v(" "),a("el-popover",{attrs:{placement:"left"},model:{value:t.row.delPop,callback:function(a){e.$set(t.row,"delPop",a)},expression:"scope.row.delPop"}},[a("p",[e._v("确定删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.presentationDel(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:"",size:"small"},slot:"reference"})],1),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.newPop(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.newPop(t.row,!0)}}},[e._v("复制")])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount,"page-size":e.pageSize},on:{"current-change":e.getList,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}}),e._v(" "),a("el-dialog",{attrs:{title:e.form.buyXGetNActivityId?"修改活动":"新建活动","close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,disabled:e.updateLoading,"label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"活动名称",prop:"activityName",rules:[{required:!0,message:"必填",trigger:["blur","change"]},{max:15,message:"最多15字",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.activityName,callback:function(t){e.$set(e.form,"activityName",t)},expression:"form.activityName"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"startTime",label:"开始时间",rules:{required:!0,message:"必填",trigger:["blur","change"]}}},[a("el-date-picker",{staticStyle:{width:"135px"},attrs:{type:"date","value-format":"yyyy-MM-dd 00:00:00",placeholder:"选择日期",disabled:0!==e.form.activityStatus&&e.form.buyXGetNActivityId,"picker-options":{disabledDate:function(t){return t.getTime()<Date.now()-864e5||0!==new Date(e.form.endTime).getTime()&&t.getTime()>new Date(e.form.endTime).getTime()}}},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"endTime",label:"结束时间",rules:{required:!0,message:"必填",trigger:["blur","change"]}}},[a("el-date-picker",{ref:"endTime",staticStyle:{width:"135px"},attrs:{type:"date","value-format":"yyyy-MM-dd 23:59:59",placeholder:"选择日期",disabled:2===e.form.activityStatus&&e.form.buyXGetNActivityId,"picker-options":{disabledDate:function(t){return t.getTime()<Date.now()-864e5||0!==new Date(e.form.startTime).getTime()&&t.getTime()<new Date(e.form.startTime).getTime()}}},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"购买规则",prop:"buyStatsRuleTypeId",rules:{required:!0,message:"不为空",trigger:["blur","change"]}}},[a("el-select",{attrs:{placeholder:"请选择",disabled:e.form.buyXGetNActivityId},model:{value:e.form.buyStatsRuleTypeId,callback:function(t){e.$set(e.form,"buyStatsRuleTypeId",t)},expression:"form.buyStatsRuleTypeId"}},e._l(e.rulesList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"购买篇数",prop:"buyCount",rules:[{required:!0,message:"必填",trigger:["blur","change"]},{pattern:/^\d{1,3}$/,message:"0-999",trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"120px"},attrs:{disabled:e.form.buyXGetNActivityId,autocomplete:"off"},model:{value:e.form.buyCount,callback:function(t){e.$set(e.form,"buyCount",t)},expression:"form.buyCount"}}),e._v(" 篇\n      ")],1),e._v(" "),a("el-form-item",{attrs:{label:"方案类型",prop:"buyTypeIdSet",rules:{required:!0,type:"array",message:"必填",trigger:["blur","change"]}}},[a("el-select",{attrs:{multiple:"",disabled:e.form.buyXGetNActivityId,placeholder:"请选择"},model:{value:e.form.buyTypeIdSet,callback:function(t){e.$set(e.form,"buyTypeIdSet",t)},expression:"form.buyTypeIdSet"}},e._l(e.buyTypeList,function(e,t){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:"1"!==t&&"2"!==t,expression:"key!=='1' && key!=='2'"}],key:t,attrs:{label:e,value:t}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"每日优惠次数上限",prop:"dailyGetTimes",rules:[{required:!0,message:"必填",trigger:["blur","change"]},{pattern:/^\d{1,3}$/,message:"0-999",trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"120px"},attrs:{autocomplete:"off"},model:{value:e.form.dailyGetTimes,callback:function(t){e.$set(e.form,"dailyGetTimes",t)},expression:"form.dailyGetTimes"}}),e._v(" 次\n      ")],1),e._v(" "),e._l(e.form.couponIds,function(t,i){return a("el-form-item",{key:i,attrs:{label:"优惠券ID",prop:"couponIds."+i+".id",rules:[{required:!0,message:"优惠券ID不为空",trigger:["blur","change"]},{pattern:/^\d+$/,message:"必须为数字",trigger:["blur","change"]}]}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"suffix-icon":t.loading?"el-icon-loading":""},on:{change:function(a){return e.getCouponInfo(t)}},model:{value:t.id,callback:function(a){e.$set(t,"id",a)},expression:"item.id"}}),e._v(" "),e.form.couponIds.length>1?a("el-button",{on:{click:function(t){return t.preventDefault(),e.removeCoupon(i)}}},[e._v("删除")]):e._e(),e._v(" "),t.couponName?a("p",[e._v("优惠券名称："+e._s(t.couponName))]):e._e(),e._v(" "),t.discount?a("p",[e._v("优惠力度："+e._s(t.discount))]):e._e()],1)}),e._v(" "),e.form.couponIds&&e.form.couponIds.length<10?a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.addCoupon(e.index)}}},[e._v("新增优惠券")])],1):e._e()],2),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},Mp=a("VU/8")(zp,Hp,!1,null,null,null).exports,Fp={name:"PushHands",data:function(){return{statusInfo:{openStatus:!0},loading:!1,pageIndex:0,pageSize:25,pageCount:1,list:[],tableHeight:null,dialogFormVisible:!1,form:{},updateLoading:!1,dialogStatusFormVisible:!1,statusLoading:!1,statusForm:{},expertInfo:{loading:!1},canvasBg:"https://cms-bucket.ws.126.net/2019/08/07/3ec72ed39e8c474585e04f4099f349a8.jpeg",defaultDownloadPage:"https://hongcai.163.com/html/downloadapp.html"}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getSwitchStatus(),this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(e,t){var a=this;this.loading||(this.loading=!0,this.pageIndex=e||1,this.$service(lr,{urlParams:{pageIndex:this.pageIndex,pageSize:this.pageSize||25}}).then(function(e){a.loading=!1,200===e.code?(!t&&(a.$refs.elTable.bodyWrapper.scrollTop=0),a.list=e.data.records||[],a.pageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1):a.$message.error(e.code+":"+e.message)},function(e){a.loading=!1,a.$message.error(qo()(e))}))},pushHandsPop:function(e){var t=this;this.expertInfo={loading:!1},e=e||{},this.form=tn()({},e),this.form.pushHandsId&&this.form.userId&&this.getExpertInfo(this.expertInfo,this.form.userId,"form"),this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.form.clearValidate()})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(t.updateLoading)return;if(!t.expertInfo.nickname)return t.$message.error("找不到对应的专家，请输入正确的专家ID");t.updateLoading=!0,t.$service(t.form.pushHandsId?dr:cr,{method:"post",urlParams:t.form.pushHandsId?{pushHandsId:t.form.pushHandsId}:null,data:t.form}).then(function(e){t.updateLoading=!1,200===e.code?(t.dialogFormVisible=!1,t.$message.success((t.form.pushHandsId?"修改":"添加")+"成功。"),t.canvasImg(t.expertInfo,t.form.channelName),t.getList(t.form.pushHandsId?t.pageIndex:1,!0)):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}})},getExpertInfo:function(e,t,a){var i=this;!e.loading&&/^\d+$/.test(t)&&("form"===a&&this.$set(e,"nickname",""),this.$set(e,"loading",!0),this.$set(e,"avatar",""),this.$set(e,"desc",""),On(t).then(function(t){t.nickname?("form"===a&&(e.nickname=t.nickname),e.avatar=t.avatar,e.desc=t.description,"list"===a&&i.canvasImg(e)):i.$message.error("获取专家信息失败，请稍后再试"),e.loading=!1}).catch(function(t){t&&(e.loading=!1,i.$message.error("获取专家信息失败，请稍后再试"))}))},canvasImg:function(e,t){var a=this,i=this.$loading({lock:!0,text:"正在生成图片...",background:"rgba(255, 255, 255, 0.5)"}),r=e.nickname,o=e.avatar,n=e.desc;t=t||e.channelName;var s=Th({text:this.defaultDownloadPage+"?from="+t,width:196,height:196}),l=document.createElement("canvas");l.width=1080,l.height=1920;var c=l.getContext("2d");wh(this.canvasBg,1080,1920).then(function(e){c.drawImage(e,0,0),wh(o,250,250).then(function(e){c.save(),c.arc(253,768,125,0,2*Math.PI),c.clip(),c.drawImage(e,128,643,250,250),c.restore(),kh(c,728.5,1616.5,230,230,6,1,"#dedede"),$h(c,728.5,1616.5,230,230,6,"#fff"),c.drawImage(s,744,1632,196,196),$h(c,818,1706,50,50,4,"#fff"),c.save(),c.translate(820,1708),xh(c,46,46,4),c.clip(),c.drawImage(e,0,0,46,46),c.restore(),c.save(),c.font="bolder 46px PingFangSC-Medui,sans-serif",c.fillStyle="#000",c.textAlign="left",c.textBaseline="top",c.fillText(r,440,655),c.restore(),c.save(),c.font="lighter 30px Microsoft Yahei,sans-serif",c.fillStyle="#666",c.textAlign="left",c.textBaseline="top",Ch(c,n,440,734,515,46),c.restore();try{var o=l.toDataURL("image/jpeg");Ih(o,r+"_"+t,"jpg"),i.close()}catch(e){e&&i.close()&&a.$message("无法下载图片，请使用最新版Chrome浏览器再试")}}).catch(function(e){e&&i.close()&&a.$message("生成无法生成图片，请使用最新版Chrome浏览器再试")})}).catch(function(e){e&&i.close()&&a.$message("生成无法生成图片，请使用最新版Chrome浏览器再试")})},pushHandsDel:function(e){var t=this;e.loading||(this.$set(e,"loading",!0),this.$service(ur,{method:"post",urlParams:{pushHandsId:e.pushHandsId}}).then(function(a){e.loading=!1,200===a.code?(e.delPop=!1,t.$message.success("删除成功"),t.getList(t.pageIndex,!0)):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))}))},getSwitchStatus:function(){var e=this;this.$service(mr).then(function(t){200===t.code&&(e.statusInfo={openStatus:!(!t.data||t.data&&void 0===t.data.openStatus)&&t.data.openStatus})})},switchStatus:function(){var e=this;this.statusForm=tn()({},this.statusInfo),this.dialogStatusFormVisible=!0,this.$nextTick(function(){e.$refs.statusForm.clearValidate()})},submitStatusForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(t.statusLoading)return;t.statusLoading=!0,t.$service(pr,{method:"post",data:{openStatus:t.statusForm.openStatus?1:0}}).then(function(e){t.statusLoading=!1,200===e.code?(t.dialogStatusFormVisible=!1,t.getSwitchStatus(),t.$message.success("更新状态成功")):t.$message.error(e.code+":"+e.message)},function(e){t.statusLoading=!1,e&&t.$message.error(qo()(e))})}})}},watch:{windowHeight:function(){this.setHeight()}}},Np={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"push-hands"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[e.statusInfo?a("span",{staticStyle:{"margin-right":"10px"}},[a("b",[e._v("活动状态：")]),e._v(e._s(e.statusInfo.openStatus?"上线":"下线"))]):e._e(),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.switchStatus}},[e._v("更新状态")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.pushHandsPop()}}},[e._v("新建推手")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"pushHandsId",label:"ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"昵称","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"用户ID","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelName",label:"渠道号","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"专家参与活动时间",width:"165"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"活动生成图片","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary",loading:t.row.loading},on:{click:function(a){return e.getExpertInfo(t.row,t.row.userId,"list")}}},[e._v("下载推手图片")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"left"},model:{value:t.row.delPop,callback:function(a){e.$set(t.row,"delPop",a)},expression:"scope.row.delPop"}},[a("p",[e._v("确定删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.pushHandsDel(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:"",size:"small"},slot:"reference"})],1),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.pushHandsPop(t.row)}}})]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList}}),e._v(" "),a("el-dialog",{attrs:{title:e.form.pushHandsId?"修改推手":"新建推手",visible:e.dialogFormVisible,width:"360px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,disabled:e.updateLoading,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"专家ID",prop:"userId",rules:[{required:!0,message:"专家ID不为空",trigger:["blur","change"]},{pattern:/^\d+$/,message:"必须为数字",trigger:["blur","change"]}]}},[a("el-input",{attrs:{"suffix-icon":e.expertInfo.loading?"el-icon-loading":"",disabled:e.form.pushHandsId,autocomplete:"off"},on:{change:function(t){return e.getExpertInfo(e.expertInfo,e.form.userId,"form")}},model:{value:e.form.userId,callback:function(t){e.$set(e.form,"userId",t)},expression:"form.userId"}})],1),e._v(" "),e.expertInfo.nickname?a("el-form-item",{attrs:{label:"专家昵称"}},[a("p",[e._v(e._s(e.expertInfo.nickname))])]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"渠道号",prop:"channelName",rules:[{required:!0,message:"必填",trigger:["blur","change"]},{pattern:/^[A-Za-z0-9_-]{1,}$/,message:"只支持输入大小字母数字及-_",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.channelName,callback:function(t){e.$set(e.form,"channelName",t)},expression:"form.channelName"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("保存并下载推手图片")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改活动状态","close-on-click-modal":!1,visible:e.dialogStatusFormVisible,width:"400px",center:""},on:{"update:visible":function(t){e.dialogStatusFormVisible=t}}},[a("el-form",{ref:"statusForm",attrs:{model:e.statusForm,disabled:e.statusLoading,"label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"状态"}},[a("el-radio",{attrs:{label:!0},model:{value:e.statusForm.openStatus,callback:function(t){e.$set(e.statusForm,"openStatus",t)},expression:"statusForm.openStatus"}},[e._v("上线")]),e._v(" "),a("el-radio",{attrs:{label:!1},model:{value:e.statusForm.openStatus,callback:function(t){e.$set(e.statusForm,"openStatus",t)},expression:"statusForm.openStatus"}},[e._v("下线")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogStatusFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary",loading:e.statusLoading},on:{click:function(t){return e.submitStatusForm("statusForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},Ep=a("VU/8")(Fp,Np,!1,null,null,null).exports,Rp={name:"LotteryPush",data:function(){return{loading:!1,pageIndex:0,pageSize:25,pageCount:1,list:[],tableHeight:null,dialogFormVisible:!1,form:{license:[]},updateLoading:!1,statusLoading:!1,protocolList:[],canvasBg:"https://relottery.ws.126.net/thread/20200714/msGEOG.jpg",defaultDownloadPage:"https://hongcai.163.com/html/downloadapp.html"}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},filters:{serviceStatus2CH:function(e){return{"-1":"待确认",1:"正常",0:"终止或待确认"}[e]||"-"},protocolStatus2CH:function(e){return{"-1":"待确认",1:"正常",0:"终止"}[e]||"-"}},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},dateFormat:function(e){return gh(e,"yyyy-MM-dd hh:mm:ss")},getList:function(e,t){var a=this;this.loading||(this.loading=!0,this.pageIndex=e||1,this.$service(fr,{params:{pageIndex:this.pageIndex,pageSize:this.pageSize||25}}).then(function(e){a.loading=!1,200===e.code?(!t&&(a.$refs.elTable.bodyWrapper.scrollTop=0),a.list=e.data.records||[],a.pageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1):a.$message.error(e.code+":"+e.message)},function(e){a.loading=!1,a.$message.error(qo()(e))}))},getProtocolList:function(e){var t=this;return this.$service(Ye,{urlParams:{userId:e},params:{protocolUserType:1}}).then(function(e){if(200===e.code){t.protocolList=e.data||[];for(var a=e.data.length,i=0;i<a;i++)t.protocolList[i].divideRateNumber=(100*t.protocolList[i].divideRate).toFixed(0);return Bo.a.resolve(e.data)}t.$message.error(e.code+":"+e.message)},function(e){t.$message.error(qo()(e))})},protocolButton:function(){this.$set(this.form,"showAddProtocol",!this.form.showAddProtocol),this.$refs.form.clearValidate()},shopPop:function(e){var t=this;if(this.form=tn()({license:[]},e),e){var a=e.license;this.form.license=a.split(","),this.getProtocolList(e.pushHandsUserId).then(function(){t.dialogFormVisible=!0,t.$nextTick(function(){t.$refs.form.clearValidate()})})}else this.protocolList=[],this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.form.clearValidate()})},removeImg:function(e){this.form.license.splice(e,1)},beforeLicenseUpload:function(e){if(e.size/1024/1024>5)return this.$message.error("上传头像图片大小不能超过 5MB!"),!1},uploadLicense:function(e){var t=this;En(e.file,"thread",!0).then(function(e){t.form.license.push(e)},function(e){e&&t.$message.error("上传头像失败，请稍后再传！")})},divideRule:function(e,t,a){if(this.form.pushHandsUserId&&!this.form.showAddProtocol)a();else{var i=this.$refs.startTime.value,r=this.$refs.endTime.value;t?/^\d+$/.test(t)?t<0||t>99?a(new Error("分成比例0-99")):i?r?this.isMonthLastDay(r)?a():a(new Error("协议结束时间必须为当月最后一天")):a(new Error("协议结束时间不为空")):a(new Error("协议开始时间不为空")):a(new Error("分成比例必须为整数")):a(new Error("分成比例不为空"))}},isMonthLastDay:function(e){e=e.replace(/\.|\//g,"-");var t=new Date(e+" 00:00:00"),a=11===t.getMonth()?0:t.getMonth()+1,i=11===t.getMonth()?t.getFullYear()+1:t.getFullYear(),r=new Date(new Date(i,a,1).getTime()-864e5).getTime();return t.getTime()===r},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a=[];t.form.license.forEach(function(e){a.push(e)});var i={realName:t.form.realName,loginCode:t.form.loginCode,idCard:t.form.idCard,license:a.join(","),phone:t.form.phone};if(t.form.account&&(i.account=t.form.account),t.form.inviteCode&&(i.inviteCode=t.form.inviteCode),t.form.inviteCode&&(i.inviteCode=t.form.inviteCode),t.form.startTime&&(i.startTime=t.form.startTime),t.form.endTime&&(i.endTime=t.form.endTime),t.form.divideRate&&(i.divideRate=.01*t.form.divideRate),t.$service(t.form.pushHandsUserId?gr:hr,{method:"post",urlParams:t.form.pushHandsUserId?{pushHandsUserId:t.form.pushHandsUserId}:null,data:i}).then(function(e){t.updateLoading=!1,200===e.code?(t.dialogFormVisible=!1,t.$message.success((t.form.pushHandsUserId?"修改":"添加")+"成功。"),t.getList(t.form.pushHandsUserId?t.pageIndex:1,!0)):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))}),t.form.pushHandsUserId)for(var r=t.protocolList.length,o=0;o<r;o++){var n=t.protocolList[o].divideRateNumber/100;0!==t.protocolList[o].protocolStatus&&n!==t.protocolList[o].divideRate&&t.updateDivideRate(t.protocolList[o].protocolId,n)}}})},canvasImg:function(e){var t=this,a=this.$loading({lock:!0,text:"正在生成图片...",background:"rgba(255, 255, 255, 0.5)"}),i=e.inviteCode,r=e.realName,o=document.createElement("canvas");o.width=750,o.height=1334;var n=o.getContext("2d");wh(this.canvasBg,750,1334).then(function(e){n.drawImage(e,0,0),n.save(),n.font="bolder 55px Arail,sans-serif",n.fillStyle="#fff",n.textAlign="center",n.textBaseline="Middle",n.fillText(i[0],180,615),n.fillText(i[1],280,615),n.fillText(i[2],375,615),n.fillText(i[3],475,615),n.fillText(i[4],570,615),n.restore();try{var s=o.toDataURL("image/jpeg");Ih(s,""+r,"jpg"),a.close()}catch(e){e&&a.close()&&t.$message("无法下载图片，请使用最新版Chrome浏览器再试")}}).catch(function(e){e&&a.close()&&t.$message("生成无法生成图片，请使用最新版Chrome浏览器再试")})},submitStatusForm:function(e){var t=this;e.eStatus?e.eStatus=0:e.eStatus=1,this.$service(vr,{method:"post",urlParams:{pushHandsUserId:e.pushHandsUserId},data:{eStatus:e.eStatus}}).then(function(a){t.statusLoading=!1,200===a.code?(e.popover=!1,t.$message.success("更新状态成功")):t.$message.error(a.code+":"+a.message)},function(e){t.statusLoading=!1,e&&t.$message.error(qo()(e))})}},watch:{windowHeight:function(){this.setHeight()}}},Op={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"push-hands"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title)+"\n        ")])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.shopPop()}}},[e._v("新增店铺")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"pushHandsUserId",label:"序号",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"realName",label:"姓名","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"账号","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"inviteCode",label:"邀请码","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"建立时间","min-width":"145"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"serviceStatus",label:"协议状态","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("serviceStatus2CH")(t.row.serviceStatus))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"生成活动图片","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary",loading:t.row.loading},on:{click:function(a){e.canvasImg(t.row)}}},[e._v("下载店铺图片\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"eStatus",label:"店铺状态","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.eStatus?"下线":"上线")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.eStatus?a("el-popover",{attrs:{placement:"left"},model:{value:t.row.popover,callback:function(a){e.$set(t.row,"popover",a)},expression:"scope.row.popover"}},[a("p",[e._v("确定下线？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.popover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.submitStatusForm(t.row)}}},[e._v("确定\n            ")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",size:"small"},slot:"reference"},[e._v("下线")])],1):e._e(),e._v(" "),1===t.row.eStatus?a("el-popover",{attrs:{placement:"left"},model:{value:t.row.popover,callback:function(a){e.$set(t.row,"popover",a)},expression:" scope.row.popover"}},[a("p",[e._v("确定上线？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.popover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.submitStatusForm(t.row)}}},[e._v("确定\n            ")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",size:"small"},slot:"reference"},[e._v("上线")])],1):e._e(),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.shopPop(t.row)}}})]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList}}),e._v(" "),a("el-dialog",{attrs:{title:e.form.pushHandsUserId?"修改地推店铺":"新增地推店铺",visible:e.dialogFormVisible,width:"560px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,disabled:e.updateLoading,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"店铺账号",prop:"account",rules:[{required:!0,message:"店铺账号不为空",trigger:["blur","change"]}]}},[a("el-input",{attrs:{disabled:e.form.pushHandsUserId},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account",t)},expression:"form.account"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"查看码",prop:"loginCode",rules:[{required:!0,message:"查看码不为空",trigger:["blur","change"]},{pattern:/^(?=(?:.*?[0-9]){5})(?=(?:.*?[!@#$%^*()]){1})(?!.*\s)[0-9!@#$%*^()]*$/,message:"查看码必须为5位数字和1位特殊字符！@ # $ % ^ * ()",trigger:["blur","change"]}]}},[a("el-input",{model:{value:e.form.loginCode,callback:function(t){e.$set(e.form,"loginCode",t)},expression:"form.loginCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邀请码",prop:"inviteCode",rules:[{required:!0,message:"邀请码不为空且为5位",trigger:["blur","change"]},{pattern:/^(?=.*[A-Z])(?=.*[0-9])[A-Z0-9]{5}$/,message:"邀请码只能为大写字母+数字的5位字符组合",trigger:["blur","change"]}]}},[a("el-input",{attrs:{disabled:e.form.pushHandsUserId},model:{value:e.form.inviteCode,callback:function(t){e.$set(e.form,"inviteCode",t)},expression:"form.inviteCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"真实姓名",prop:"realName",rules:[{required:!0,message:"真实姓名不为空",trigger:["blur","change"]},{max:99,message:"姓名最多99个字符",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.realName,callback:function(t){e.$set(e.form,"realName",t)},expression:"form.realName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号",prop:"idCard",rules:[{required:!0,message:"身份证号不为空",trigger:["blur","change"]},{max:50,message:"身份证号最多50个字符",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.idCard,callback:function(t){e.$set(e.form,"idCard",t)},expression:"form.idCard"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"phone",rules:[{required:!0,message:"手机号不为空",trigger:["blur","change"]},{pattern:/^(?:(?:\+|00)86)?1\d{10}$/,message:"手机号填写不正确",trigger:["blur","change"]},{max:30,message:"手机号最多30个字符",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"执照",prop:"license",rules:[{required:!0,message:"必填",trigger:["blur","change"]}]}},[a("ul",{staticClass:"avatar-image"},e._l(e.form.license,function(t,i){return a("li",{key:i},[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t,"preview-src-list":e.form.license}}),e._v(" "),a("lable",{staticClass:"icon",on:{click:function(t){return e.removeImg(i)}}},[a("i",{staticClass:"el-icon-delete"})])],1)}),0),e._v(" "),e.form.license.length<3?a("el-upload",{staticClass:"avatar-uploader",attrs:{accept:".jpeg,.jpg,.png,.gif","show-file-list":!1,"http-request":e.uploadLicense,"before-upload":e.beforeLicenseUpload}},[e.form.license.length<3?a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}):e._e()]):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"协议",prop:"divideRate",rules:[{validator:e.divideRule,trigger:["blur","change"]}]}},[a("table",{staticClass:"expert-form-table"},[a("colgroup",[a("col",{attrs:{width:"25%"}}),e._v(" "),a("col",{attrs:{width:"25%"}}),e._v(" "),a("col",{attrs:{width:"25%"}}),e._v(" "),a("col",{attrs:{width:"25%"}})]),e._v(" "),a("tr",[a("td",[e._v("状态")]),e._v(" "),a("td",[e._v("分成比例")]),e._v(" "),a("td",[e._v("开始时间")]),e._v(" "),a("td",[e._v("结束时间")])]),e._v(" "),e._l(e.protocolList,function(t){return a("tr",{key:t.protocolId},[a("td",[e._v(e._s(e._f("protocolStatus2CH")(t.protocolStatus)))]),e._v(" "),a("td",[a("p",[e._v(e._s(1e3*t.divideRate/10)+"%")])]),e._v(" "),a("td",[e._v(e._s(t.startTime))]),e._v(" "),a("td",[e._v(e._s(t.endTime))])])}),e._v(" "),e.form.showAddProtocol||!e.form.pushHandsUserId?a("tr",[a("td",[e._v("待确认")]),e._v(" "),a("td",[a("el-input",{staticStyle:{width:"60px"},model:{value:e.form.divideRate,callback:function(t){e.$set(e.form,"divideRate",t)},expression:"form.divideRate"}}),e._v("%\n            ")],1),e._v(" "),a("td",[a("el-date-picker",{ref:"startTime",staticStyle:{width:"130px"},attrs:{type:"date","value-format":"yyyy.MM.dd",placeholder:"选择日期","picker-options":{disabledDate:function(t){return 0!==new Date(e.form.endTime).getTime()&&t.getTime()>new Date(e.form.endTime).getTime()}}},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}})],1),e._v(" "),a("td",[a("el-date-picker",{ref:"endTime",staticStyle:{width:"130px"},attrs:{type:"date","value-format":"yyyy.MM.dd",placeholder:"选择日期","picker-options":{disabledDate:function(t){return 0!==new Date(e.form.startTime).getTime()&&t.getTime()<new Date(e.form.startTime).getTime()}}},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1)]):e._e()],2)]),e._v(" "),e.form.pushHandsUserId?a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.protocolButton()}}},[e._v(e._s(e.form.showAddProtocol?"取消协议":"增加协议")+"\n        ")])],1):e._e()],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[]};var Ap=a("VU/8")(Rp,Op,!1,function(e){a("4B3V")},null,null).exports,Up={name:"HeadRedRankStatistics",data:function(){return{loading:!1,info:{}}},computed:{footballList:function(){return this.info.footballExpertHitRateMap||[]},basketballList:function(){return this.info.basketballExpertHitRateMap||[]}},methods:{chooseBox:function(e,t){this.$set(e,"checkIndex",t)},copyData:function(e){var t=this;Sh(e.target).then(function(e){t.$message.success("复制成功")}).catch(function(e){e&&t.$message.error(e.message)})},getStatistics:function(){var e=this;this.loading||(this.loading=!0,this.$service(Ui).then(function(t){200===t.code?e.info=t.data:e.$message.error(t.code+":"+t.message),e.loading=!1}).catch(function(t){t&&(e.loading=!1,e.$message.error(qo()(t)))}))}}},Vp={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"red-rank"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1)]),e._v(" "),a("el-form",{attrs:{inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary",loading:e.loading,size:"mini"},on:{click:function(t){return e.getStatistics()}}},[e._v("生成今日红人榜统计")])],1),e._v(" "),e.info.startTimeF?a("el-form-item",{attrs:{label:"时间范围"}},[e._v("\n      足球："),a("span",[e._v(e._s(e.info.startTimeF.replace(/:[0-9]{3}$/,""))+" ~ "+e._s(e.info.endTimeF.replace(/:[0-9]{3}$/,"")))]),e._v("；\n      篮球："),a("span",[e._v(e._s(e.info.startTimeB.replace(/:[0-9]{3}$/,""))+" ~ "+e._s(e.info.endTimeB.replace(/:[0-9]{3}$/,"")))])]):e._e()],1),e._v(" "),e.footballList.length>0?a("el-table",{attrs:{data:e.footballList,stripe:""}},[a("el-table-column",{attrs:{label:"足球专家"}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"专家昵称",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.info.userInfoMap[t.row.userId].nickname)+"\n        ")]}}],null,!1,2228149890)}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"专家ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{label:"成绩"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.hitRateDtoList,function(i,r){return a("div",{key:r,staticClass:"red-rank-statistics",class:{current:r===t.row.checkIndex},on:{click:function(a){return e.chooseBox(t.row,r)}}},[a("p",[e._v(e._s("近"+i.total+"中"+i.hit))]),e._v(" "),a("p",[e._v(e._s(e._f("toPercent")(i.hitRate)))])])})}}],null,!1,793884577)}),e._v(" "),a("el-table-column",{attrs:{label:"双击复制",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.checkIndex||0===t.row.checkIndex?a("div",{staticClass:"red-rank-statistics copy",on:{dblclick:function(t){return e.copyData(t)}}},[e._v("\n            "+e._s(t.row.hitRateDtoList[t.row.checkIndex].userId+",近"+t.row.hitRateDtoList[t.row.checkIndex].total+"中"+t.row.hitRateDtoList[t.row.checkIndex].hit)+"\n          ")]):e._e()]}}],null,!1,2129695159)})],1)],1):e._e(),e._v(" "),e.basketballList.length>0?a("el-table",{staticStyle:{"margin-top":"25px"},attrs:{data:e.basketballList,stripe:""}},[a("el-table-column",{attrs:{label:"篮球专家"}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"专家昵称",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.info.userInfoMap[t.row.userId].nickname)+"\n        ")]}}],null,!1,2228149890)}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"专家ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{label:"成绩"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.hitRateDtoList,function(i,r){return a("div",{key:r,staticClass:"red-rank-statistics",class:{current:r===t.row.checkIndex},on:{click:function(a){return e.chooseBox(t.row,r)}}},[a("p",[e._v(e._s("近"+i.total+"中"+i.hit))]),e._v(" "),a("p",[e._v(e._s(e._f("toPercent")(i.hitRate)))])])})}}],null,!1,793884577)}),e._v(" "),a("el-table-column",{attrs:{label:"快捷复制",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.checkIndex||0===t.row.checkIndex?a("el-tooltip",{attrs:{effect:"dark",content:"双击复制",placement:"top"}},[a("div",{staticClass:"red-rank-statistics copy",on:{dblclick:function(t){return e.copyData(t)}}},[e._v("\n              "+e._s(t.row.hitRateDtoList[t.row.checkIndex].userId+",近"+t.row.hitRateDtoList[t.row.checkIndex].total+"中"+t.row.hitRateDtoList[t.row.checkIndex].hit)+"\n            ")])]):e._e()]}}],null,!1,3051762673)})],1)],1):e._e()],1)},staticRenderFns:[]};var qp=a("VU/8")(Up,Vp,!1,function(e){a("nx/2")},null,null).exports,jp={name:"DeveloperWSMonitoring",data:function(){return{loading:!1,accessList:[],sidByAccessId:-1,sidTemp:"",sidLoading:!1,timer:null,sidForm:{},dialogSid:!1,timerNum:-1}},beforeRouteEnter:function(e,t,a){a(function(e){e.init()})},beforeRouteLeave:function(e,t,a){clearInterval(this.timer),a()},methods:{init:function(){this.timerNum=-1,this.getAccessList(),clearInterval(this.timer),this.timer=setInterval(this.getAccessList,2e4)},getAccessList:function(){var e=this;this.timerNum++,this.$service(yr.accessList).then(function(t){if(200===t.code&&t.data.length>0){var a=JSON.parse(qo()(e.accessList));e.accessList=t.data,e.accessList.forEach(function(t,i){e.$set(t,"status",a[i]&&a[i].status?a[i].status:{}),e.$set(t,"dispatchCount",a[i]&&a[i].dispatchCount?a[i].dispatchCount:{}),e.$set(t,"pubCount",a[i]&&a[i].pubCount?a[i].pubCount:{}),e.getStatusByAccessId(t),e.getMsgDispatchCount(t),e.getMsgPubCount(t)})}})},getStatusByAccessId:function(e){var t=this;this.$service(yr.statusByAccessId,{urlParams:{accessId:e.accessId}}).then(function(a){if(200===a.code){var i=JSON.parse(qo()(e.status));t.$set(e,"status",a.data),e.status.mqStatusInfoVoList.forEach(function(a,r){t.$set(a,"channelList",i.mqStatusInfoVoList&&i.mqStatusInfoVoList[r]&&i.mqStatusInfoVoList[r].channelList?i.mqStatusInfoVoList[r].channelList:[]),t.timerNum%5==0&&t.getChannelList(a,e.accessId)})}})},getChannelList:function(e,t){var a=this;this.$service(yr.channelListByAccessId,{urlParams:{accessId:t},params:{mqName:e.mqName}}).then(function(t){200===t.code&&a.$set(e,"channelList",t.data)})},delChannel:function(e,t,a){var i=this;this.$confirm("确定删除channel-"+t.channelName+"？",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){t.loading||(i.$set(t,"loading",!0),i.$service(yr.channelDelByAccessId,{urlParams:{accessId:a},params:{channelName:t.channelName}}).then(function(a){200===a.code?(t.delPop=!1,i.$message.success("Channel删除成功"),e.splice(e.indexOf(t),1)):i.$message.error(a.code+":"+a.message),t.loading=!1}).catch(function(e){e&&(t.loading=!1,i.$message.error(qo()(e)))}))})},sidSearch:function(){var e=this;return this.sidByAccessId<0?this.$message.error("请选择sid对应的实例"):this.sidTemp?void(this.sidLoading||(this.sidLoading=!0,this.$service(yr.clientQueryById,{urlParams:{accessId:this.sidByAccessId},params:{clientId:this.sidTemp}}).then(function(t){200===t.code?t.data.clientId?(e.sidForm=t.data,e.dialogSid=!0):e.$message.warning("找不到服务对应的SID."):e.$message.error(t.code+":"+t.message),e.sidLoading=!1}).catch(function(t){t&&(e.sidLoading=!1,e.$message.error(qo()(t)))}))):this.$message.error("请输入sid")},sidDel:function(){var e=this;return this.sidByAccessId<0?this.$message.error("请选择sid对应的实例"):this.sidTemp?void this.$confirm("确定删除sid-"+this.sidTemp+"？",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.sidLoading||(e.sidLoading=!0,e.$service(yr.clientDelById,{urlParams:{accessId:e.sidByAccessId},params:{clientId:e.sidTemp}}).then(function(t){200===t.code?e.$message.success("SID删除成功"):e.$message.error(t.code+":"+t.message),e.sidLoading=!1}).catch(function(t){t&&(e.sidLoading=!1,e.$message.error(qo()(t)))}))}):this.$message.error("请输入sid")},getMsgDispatchCount:function(e){var t=this;this.$service(yr.msgDispatch,{urlParams:{accessId:e.accessId}}).then(function(a){200===a.code?t.$set(e,"dispatchCount",a.data):t.$message.error(a.code+":"+a.message)}).catch(function(e){e&&t.$message.error(qo()(e))})},getMsgPubCount:function(e){var t=this;this.$service(yr.msgPub,{urlParams:{accessId:e.accessId}}).then(function(a){200===a.code?t.$set(e,"pubCount",a.data):t.$message.error(a.code+":"+a.message)}).catch(function(e){e&&t.$message.error(qo()(e))})}}},Qp={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"developer-log"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini"},model:{value:e.sidByAccessId,callback:function(t){e.sidByAccessId=t},expression:"sidByAccessId"}},[a("el-option",{attrs:{label:"请选择实例",value:-1}}),e._v(" "),e._l(e.accessList,function(e){return a("el-option",{key:e.accessId,attrs:{label:"实例"+e.accessId,value:e.accessId}})})],2),e._v(" "),a("el-input",{staticStyle:{width:"auto"},attrs:{placeholder:"请输入SID",clearable:"",size:"mini"},model:{value:e.sidTemp,callback:function(t){e.sidTemp=t},expression:"sidTemp"}}),e._v(" "),a("el-button-group",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:function(t){return e.sidSearch()}}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.sidDel()}}})],1)],1)]),e._v(" "),a("el-tabs",{attrs:{"tab-position":"left"}},e._l(e.accessList,function(t,i){return a("el-tab-pane",{key:i},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(e._s("实例"+t.accessId+" - "+(t.accessOpen?"开":"关")))]),e._v(" "),a("el-form",{attrs:{inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"地址:"}},[a("span",[e._v(e._s(t.serverAddr))])]),e._v(" "),a("el-form-item",{attrs:{label:"总链接数:"}},[a("span",[e._v(e._s(t.status&&t.status.instanceConnCount))])])],1),e._v(" "),t.dispatchCount&&t.pubCount?a("table",{staticClass:"ws-msg-count-table"},[a("thead",[a("tr",[a("th",{attrs:{rowspan:"2"}},[e._v("类型")]),a("th",{attrs:{rowspan:"2"}},[e._v("总数")]),a("th",{attrs:{colspan:"4"}},[e._v("吞吐量(个)")])]),e._v(" "),a("tr",[a("th",[e._v("1分钟")]),a("th",[e._v("5分钟")]),a("th",[e._v("15分钟")]),a("th",[e._v("平均")])])]),e._v(" "),a("tbody",[t.dispatchCount?a("tr",[a("td",[e._v("消息下发")]),e._v(" "),a("td",[e._v(e._s(t.dispatchCount.count))]),e._v(" "),a("td",[e._v(e._s(t.dispatchCount.oneMinuteRate))]),e._v(" "),a("td",[e._v(e._s(t.dispatchCount.fiveMinuteRate))]),e._v(" "),a("td",[e._v(e._s(t.dispatchCount.fifteenMinuteRate))]),e._v(" "),a("td",[e._v(e._s(t.dispatchCount.meanRate))])]):e._e(),e._v(" "),t.pubCount?a("tr",[a("td",[e._v("消息新增")]),e._v(" "),a("td",[e._v(e._s(t.pubCount.count))]),e._v(" "),a("td",[e._v(e._s(t.pubCount.oneMinuteRate))]),e._v(" "),a("td",[e._v(e._s(t.pubCount.fiveMinuteRate))]),e._v(" "),a("td",[e._v(e._s(t.pubCount.fifteenMinuteRate))]),e._v(" "),a("td",[e._v(e._s(t.pubCount.meanRate))])]):e._e()])]):e._e(),e._v(" "),t.status&&t.status.mqStatusInfoVoList?a("el-row",{attrs:{gutter:"8"}},e._l(t.status.mqStatusInfoVoList,function(i,r){return a("el-col",{key:r,staticStyle:{"margin-bottom":"10px"},attrs:{span:"12",sm:{span:12},lg:{span:8},xl:{span:6}}},[a("el-card",{attrs:{shadow:"never","body-style":{padding:"8px",fontSize:"12px"}}},[a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("el-col",{attrs:{span:10}},[a("b",{staticClass:"text-red",staticStyle:{"font-size":"14px"}},[e._v(e._s(i.mqName))])]),e._v(" "),a("el-col",{attrs:{span:14}},[e._v("总订阅数: "+e._s(i.allConnCount)+"、Channel数: "+e._s(i.channelCount))])],1),e._v(" "),a("el-table",{attrs:{size:"mini",data:i.channelList,height:"300"}},[a("el-table-column",{attrs:{prop:"channelName",label:"channelName"}}),e._v(" "),a("el-table-column",{attrs:{prop:"subCount",label:"订阅数",width:"100",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{width:"60",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(r){return[a("el-button",{attrs:{slot:"reference",type:"text",size:"mini"},on:{click:function(a){return e.delChannel(i.channelList,r.row,t.accessId)}},slot:"reference"},[e._v("删除")])]}}],null,!0)})],1)],1)],1)}),1):e._e()],1)}),1),e._v(" "),a("el-dialog",{attrs:{title:"SID搜索",visible:e.dialogSid,width:"500px",center:""},on:{"update:visible":function(t){e.dialogSid=t}}},[e.sidForm?a("el-form",{attrs:{"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:"SID:"}},[a("span",[e._v(e._s(e.sidForm.clientId))])]),e._v(" "),a("el-form-item",{attrs:{label:"地址:"}},[a("span",[e._v(e._s(e.sidForm.clientAddress))])]),e._v(" "),e._l(e.sidForm.subMqInfo,function(t,i){return a("el-form-item",{key:i,attrs:{label:i+":"}},e._l(t,function(t,i){return a("span",{key:t},[e._v(e._s(0===i?"":"、")+e._s(t))])}),0)})],2):e._e()],1)],1)},staticRenderFns:[]};var Wp=a("VU/8")(jp,Qp,!1,function(e){a("KwGT")},null,null).exports,Bp={name:"ChatroomStatistics",data:function(){return{appTab:0,activeTab:"user",userStatistics:{0:{},1:{}},userLoading:!1,userFilterDate:gh(new Date(new Date-864e5),"yyyy-MM-dd"),voteStatistics:{0:{},1:{}},voteLoading:!1,voteFilterStartTime:"",voteFilterEndTime:""}},computed:{ChatroomStatisticsApi:function(){return Sr[this.appTab]},userList:function(){var e=this.userStatistics[this.appTab];if(o()(e).length>0){var t=[];return["dayRoomDeviceMaxTop10","dayRoomDeviceMinTop10","dayChatUserCountTop10","dayChatMsgCountTop10","dayConcurrentDeviceTop10"].map(function(a){var i=e[a]&&e[a][0]||{};t.push({title:i.title||"",unit:i.unit||"",key:a,list:i.chatDataCardElementDtoList||[]})}),t}return[]},userRenderStatistics:function(){return this.userStatistics[this.appTab]},voteRenderStatistics:function(){return this.voteStatistics[this.appTab]}},created:function(){this.handleClickTabs()},methods:{handleAppTabCommand:function(e){this.appTab.toString()!==e.toString()&&(this.appTab=e,"1"===this.appTab.toString()&&"user"!==this.activeTab&&(this.activeTab="user"),this.handleClickTabs())},handleClickTabs:function(){switch(this.activeTab){case"user":default:0===o()(this.userRenderStatistics).length&&this.getUserStatistics();break;case"vote":0===o()(this.voteRenderStatistics).length&&this.getVoteStatistics()}},userExport:function(){if(0===o()(this.userRenderStatistics).length)return this.$message("暂无相关数据");window.open(location.origin+this.ChatroomStatisticsApi.user.export+"?date="+this.userFilterDate)},getUserStatistics:function(){var e=this;this.userLoading||(this.userLoading=!0,this.$service(this.ChatroomStatisticsApi.user.get,{params:{dateStr:this.userFilterDate}}).then(function(t){200===t.code?e.userStatistics[e.appTab]=t.data:e.$message.error(t.code+":"+t.message),e.userLoading=!1}).catch(function(t){t&&(e.userLoading=!1,e.$message.error(qo()(t)))}))},getVoteStatistics:function(){var e=this;if(!this.voteLoading){this.voteLoading=!0;var t={};this.voteFilterStartTime&&(t.startTime=this.voteFilterStartTime),this.voteFilterEndTime&&(t.endTime=this.voteFilterEndTime),this.$service(this.ChatroomStatisticsApi.vote.get,{params:t}).then(function(t){200===t.code?e.voteStatistics[e.appTab]=t.data:e.$message.error(t.code+":"+t.message),e.voteLoading=!1}).catch(function(t){t&&(e.voteLoading=!1,e.$message.error(qo()(t)))})}}}},Gp={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chatroom-statistics"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-dropdown",{on:{command:e.handleAppTabCommand}},[a("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("\n          切换 - "+e._s({0:"红彩",1:"精准比分"}[e.appTab])+" "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"0"}},[e._v("红彩")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"1"}},[e._v("精准比分")])],1)],1)],1)]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"聊天室人数统计",name:"user"}},[a("el-form",{attrs:{inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"选择日期"}},[a("el-date-picker",{staticStyle:{width:"130px"},attrs:{clearable:!1,editable:"false",type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{change:e.getUserStatistics},model:{value:e.userFilterDate,callback:function(t){e.userFilterDate=t},expression:"userFilterDate"}}),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:e.userLoading},on:{click:e.userExport}},[e._v("导出")])],1)],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.userLoading,expression:"userLoading"}],staticClass:"chatroom-statistics--content"},[Object.keys(e.userRenderStatistics).length>0?a("div",{staticClass:"chatroom-statistics--num"},[a("li",[a("b",[e._v(e._s(e.userRenderStatistics.dayMatchCount||"-")+"（"+e._s(e.userRenderStatistics.dayChatRoomCount||"-")+"）")]),e._v(" "),a("br"),e._v(" "),a("span",[e._v("当日比赛数(聊天室数)")])]),e._v(" "),a("li",[a("b",[e._v(e._s(e.userRenderStatistics.dayRoomDeviceCount||"-"))]),e._v(" "),a("br"),e._v(" "),a("span",[e._v("当日聊天室总用户数")])]),e._v(" "),a("li",[a("b",[e._v(e._s(e.userRenderStatistics.dayConcurrentDeviceTotalMax||"-"))]),e._v(" "),a("br"),e._v(" "),a("span",[e._v("当日聊天室最高并发用户数")])]),e._v(" "),a("li",[a("b",[e._v(e._s(e.userRenderStatistics.dayUserTotalCount||"-"))]),e._v(" "),a("br"),e._v(" "),a("span",[e._v("当日发言总人数")])]),e._v(" "),a("li",[a("b",[e._v(e._s(e.userRenderStatistics.dayMsgTotalCount||"-"))]),e._v(" "),a("br"),e._v(" "),a("span",[e._v("当日发言总条数")])]),e._v(" "),a("li",[a("b",[e._v(e._s(e.userRenderStatistics.dayVipUserTotalCount||"-"))]),e._v(" "),a("br"),e._v(" "),a("span",[e._v("当日聊天室总VIP用户数")])]),e._v(" "),a("li",[a("b",[e._v(e._s(e.userRenderStatistics.dayVipChatUserTotalCount||"-"))]),e._v(" "),a("br"),e._v(" "),a("span",[e._v("当日VIP发言人数")])])]):e._e(),e._v(" "),e._l(e.userList,function(t,i){return a("div",{key:i,staticClass:"chatroom-statistics--list"},[a("div",{staticClass:"title"},[e._v(e._s(t.title)+"（"+e._s(t.unit)+"）")]),e._v(" "),a("el-table",{ref:"elTable",refInFor:!0,attrs:{data:t.list,stripe:""}},[a("el-table-column",{attrs:{prop:"matchInfo",label:"赛事ID","min-width":"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"matchName",label:"比赛对阵","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"matchStartTime",label:"开赛时间","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dataInfo",label:"统计数据","min-width":"80"}}),e._v(" "),"dayChatUserCountTop10"===t.key?a("el-table-column",{attrs:{prop:"vipUser",label:"VIP人数","min-width":"80"}}):e._e()],1)],1)}),e._v(" "),e.userLoading||0!==Object.keys(e.userRenderStatistics).length?e._e():a("div",{staticClass:"chatroom-statistics--empty"},[a("span",[e._v("暂无数据~")])])],2)],1),e._v(" "),"0"===e.appTab.toString()?a("el-tab-pane",{attrs:{label:"用户投票统计",name:"vote"}},[a("el-form",{attrs:{inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"选择日期"}},[a("el-date-picker",{staticStyle:{width:"135px"},attrs:{type:"date",editable:"false",placeholder:"开始日期","value-format":"yyyy-MM-dd 00:00:00","picker-options":{disabledDate:function(t){return 0!==new Date(e.voteFilterEndTime).getTime()&&t.getTime()>new Date(e.voteFilterEndTime).getTime()}}},model:{value:e.voteFilterStartTime,callback:function(t){e.voteFilterStartTime=t},expression:"voteFilterStartTime"}}),e._v("\n          ~\n          "),a("el-date-picker",{staticStyle:{width:"135px"},attrs:{type:"date",editable:"false",placeholder:"结束日期","value-format":"yyyy-MM-dd 23:59:59","picker-options":{disabledDate:function(t){return 0!==new Date(e.voteFilterStartTime).getTime()&&t.getTime()<new Date(e.voteFilterStartTime).getTime()}}},model:{value:e.voteFilterEndTime,callback:function(t){e.voteFilterEndTime=t},expression:"voteFilterEndTime"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.getVoteStatistics}},[e._v("确定")])],1)],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.voteLoading,expression:"voteLoading"}],staticClass:"chatroom-statistics--content"},[Object.keys(e.voteRenderStatistics).length>0?a("div",{staticClass:"chatroom-statistics--num"},[a("li",[a("b",[e._v(e._s(e.voteRenderStatistics.voteNum>=0?e.voteRenderStatistics.voteNum:"-"))]),e._v(" "),a("br"),e._v(" "),a("span",[e._v("投票次数")])]),e._v(" "),a("li",[a("b",[e._v(e._s(e.voteRenderStatistics.voteHitNum>=0?e.voteRenderStatistics.voteHitNum:"-"))]),e._v(" "),a("br"),e._v(" "),a("span",[e._v("投中次数")])]),e._v(" "),a("li",[a("b",[e._v(e._s(e.voteRenderStatistics.userNum>=0?e.voteRenderStatistics.userNum:"-"))]),e._v(" "),a("br"),e._v(" "),a("span",[e._v("参与投票人数")])])]):e._e(),e._v(" "),Object.keys(e.voteRenderStatistics).length>0?a("div",{staticClass:"chatroom-statistics--list"},[e.voteRenderStatistics.chatCountList?a("table",{staticClass:"vote-table"},[a("thead",[a("tr",[a("th",[e._v("聊天等级")]),e._v(" "),e._l(e.voteRenderStatistics.chatCountList,function(t,i){return a("th",{key:i},[e._v(e._s(t.voteLevel))])})],2)]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("人数")]),e._v(" "),e._l(e.voteRenderStatistics.chatCountList,function(t,i){return a("td",{key:i},[e._v(e._s(t.userNum))])})],2)])]):e._e(),e._v(" "),e.voteRenderStatistics.voteCountList?a("table",{staticClass:"vote-table"},[a("thead",[a("tr",[a("th",[e._v("投票等级")]),e._v(" "),e._l(e.voteRenderStatistics.voteCountList,function(t,i){return a("th",{key:i},[e._v(e._s(t.voteLevel))])})],2)]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("人数")]),e._v(" "),e._l(e.voteRenderStatistics.voteCountList,function(t,i){return a("td",{key:i},[e._v(e._s(t.userNum))])})],2)])]):e._e()]):e._e(),e._v(" "),e.voteLoading||0!==Object.keys(e.voteStatistics).length?e._e():a("div",{staticClass:"chatroom-statistics--empty"},[a("span",[e._v("暂无数据~")])])])],1):e._e()],1)],1)},staticRenderFns:[]};var Yp=a("VU/8")(Bp,Gp,!1,function(e){a("ORfI")},null,null).exports,Xp={name:"ChatroomNotice",data:function(){return{tableHeight:0,singlePublish:{matchInfoId:"",sendType:"",content:""},sendType:{0:"单场顶部栏通知",1:"单场信息流"},dialogAllVisible:!1,globalNotice:{content:""},nicknameEdit:!1,nickname:"",nicknameForm:{nickname:""},listType:"single",single:{loading:!1,list:[],pageIndex:1,pageSize:20,pageCount:1},global:{loading:!1,list:[],pageIndex:1,pageSize:20,pageCount:1}}},computed:{singleContentRule:function(){var e=[{required:!0,message:"通知内容不能为空",trigger:"blur"}];return"1"===this.singlePublish.sendType&&e.push({min:1,max:200,message:"长度在1-200个字符",tigger:"blur"}),e}},created:function(){this.getSingleList(),this.getGlobalList(),this.setHeight(),this.nickname=this.nicknameForm.nickname=this.$store.state.userInfo.nickname||""},methods:u()({},Object(sn.b)(["getUserInfo"]),{nicknameRule:function(e,t,a){t&&!/^[0-9A-Za-z\u4e00-\u9fa5]+$/gi.test(t)?a(new Error("昵称只能包含字母、数字和汉字字符")):a()},editNickname:function(){this.nicknameEdit=!0},cancelEditNickname:function(){this.nicknameEdit=!1,this.$refs.nicknameForm.resetFields(),this.$refs.nicknameForm.clearValidate(),this.nicknameForm.nickname=this.nickname},saveNickname:function(){var e=this;this.$refs.nicknameForm.validate(function(t){if(!t)return!1;e.$service(Hr.editnickname,{method:"post",data:e.nicknameForm}).then(function(t){200===t.code?(e.nicknameEdit=!1,e.nickname=e.nicknameForm.nickname,e.getUserInfo()):e.$message.error(t.code+":"+t.message)},function(t){e.single.loading=!1,e.$message.error(qo()(t))})})},setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.$store.state.windowHeight-e.$refs.elTable.$el.offsetTop-120})},publishingleSingleNotice:function(){var e=this;this.$refs.singleForm.validate(function(t){if(!t)return!1;e.add(Hr.add,e.singlePublish)})},publishGlobalNotice:function(){var e=this;this.$refs.globalNoticeForm.validate(function(t){if(!t)return!1;e.add(Mr.add,e.globalNotice)})},openDialogOfGlobal:function(){var e=this;this.dialogAllVisible=!0,this.$nextTick(function(){e.$refs.globalNoticeForm.resetFields(),e.$refs.globalNoticeForm.clearValidate()})},add:function(e,t){var a=this;this.$service(e,{method:"post",data:t}).then(function(t){e===Hr.add&&(a.singlePublish.content=""),200===t.code?("single"===a.listType&&a.getSingleList(),"global"===a.listType&&a.getGlobalList(),a.dialogAllVisible=!1):a.$message.error(t.code+":"+t.message)},function(e){a.single.loading=!1,a.$message.error(qo()(e))})},deleteGlobalNotice:function(e){var t=this;this.$service(Mr.delete,{urlParams:{chatSystemAnnounceId:e.chatSystemMsgId}}).then(function(e){200===e.code?t.getGlobalList():t.$message.error(e.code+":"+e.message)},function(e){t.single.loading=!1,t.$message.error(qo()(e))})},getSingleList:function(e,t){var a=this;this.single.loading||(this.single.loading=!0,this.single.pageIndex=e||1,this.$service(Hr.list,{urlParams:{pageIndex:this.single.pageIndex,pageSize:this.single.pageSize}}).then(function(e){a.single.loading=!1,200===e.code?(a.single.list=e.data.records||[],a.single.pageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1,a.setHeight()):a.$message.error(e.code+":"+e.message)},function(e){a.single.loading=!1,a.$message.error(qo()(e))}))},getGlobalList:function(e,t){var a=this;this.global.loading||(this.global.loading=!0,this.global.pageIndex=e||1,this.$service(Mr.list,{urlParams:{pageIndex:this.global.pageIndex,pageSize:this.global.pageSize}}).then(function(e){a.global.loading=!1,200===e.code?(a.global.list=e.data.records||[],a.global.pageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1):a.$message.error(e.code+":"+e.message)},function(e){a.global.loading=!1,a.$message.error(qo()(e))}))},handlerGlobalNotice:function(e){"Enter"===e.key&&(e.returnValue=!1)}}),watch:{windowHeight:function(){this.setHeight()},globalNotice:{deep:!0,handler:function(e){this.globalNotice.content=e.content.replace(/\r|\n/g,"")}},singlePublish:{deep:!0,handler:function(e){this.singlePublish.content=e.content.replace(/\r|\n/g,"")}}}},Kp={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"classroom-notice"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"global"===e.listType,expression:"listType==='global'"}],staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.openDialogOfGlobal}},[e._v("新建全局通知")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"single"===e.listType,expression:"listType==='single'"}],staticClass:"tools"},[a("el-form",{ref:"nicknameForm",staticClass:"nickname-form",attrs:{model:e.nicknameForm,"label-width":"98px",size:"mini"}},[a("el-form-item",{attrs:{label:"小助手昵称:",prop:"nickname",rules:[{required:!0,message:"昵称不能为空",trigger:"blur"},{min:2,max:6,message:"昵称为2-6个字符",trigger:"blur"},{validator:e.nicknameRule,message:"昵称只能包含字母、数字和汉字字符",trigger:"blur"}]}},[a("el-input",{attrs:{autocomplete:"off",disabled:!e.nicknameEdit},model:{value:e.nicknameForm.nickname,callback:function(t){e.$set(e.nicknameForm,"nickname",t)},expression:"nicknameForm.nickname"}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.nicknameEdit,expression:"!nicknameEdit"}],attrs:{type:"text"},on:{click:e.editNickname}},[e._v("修改")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.nicknameEdit,expression:"nicknameEdit"}],attrs:{type:"text"},on:{click:e.saveNickname}},[e._v("保存")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.nicknameEdit,expression:"nicknameEdit"}],attrs:{type:"text"},on:{click:e.cancelEditNickname}},[e._v("取消")])],1)],1)],1)]),e._v(" "),a("el-tabs",{ref:"elTable",on:{"tab-click":e.handleClick},model:{value:e.listType,callback:function(t){e.listType=t},expression:"listType"}},[a("el-tab-pane",{attrs:{label:"单场通知",name:"single"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"全局通知",name:"global"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.global.loading,expression:"global.loading"}],attrs:{data:e.global.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"content",label:"通知内容","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operateName",label:"发布人","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"210"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"left"},model:{value:t.row.delPop,callback:function(a){e.$set(t.row,"delPop",a)},expression:"scope.row.delPop"}},[a("p",[e._v("确定删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.deleteGlobalNotice(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:"",size:"small"},slot:"reference"})],1)]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.global.pageIndex,"page-count":e.global.pageCount},on:{"current-change":e.getGlobalList,"update:currentPage":function(t){return e.$set(e.global,"pageIndex",t)},"update:current-page":function(t){return e.$set(e.global,"pageIndex",t)}}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"single"===e.listType,expression:"listType==='single'"}],staticClass:"single-list"},[a("div",{staticClass:"single-form"},[a("el-form",{ref:"singleForm",attrs:{model:e.singlePublish,"label-width":"98px",size:"mini"}},[a("el-form-item",{attrs:{label:"赛事ID:",prop:"matchInfoId",rules:[{required:!0,message:"赛事ID不能为空",trigger:"blur"}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.singlePublish.matchInfoId,callback:function(t){e.$set(e.singlePublish,"matchInfoId",t)},expression:"singlePublish.matchInfoId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"通知类型:",prop:"sendType",rules:[{required:!0,message:"通知类型不能为空",trigger:"blur"}]}},[a("el-select",{attrs:{placeholder:"请选择通知类型"},model:{value:e.singlePublish.sendType,callback:function(t){e.$set(e.singlePublish,"sendType",t)},expression:"singlePublish.sendType"}},[a("el-option",{attrs:{label:"单场信息流",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"单场顶部栏通知",value:"0"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"通知内容:",prop:"content",rules:e.singleContentRule}},[a("el-input",{attrs:{type:"textarea",rows:"5"},nativeOn:{keydown:function(t){return e.handlerGlobalNotice(t)}},model:{value:e.singlePublish.content,callback:function(t){e.$set(e.singlePublish,"content",t)},expression:"singlePublish.content"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.publishingleSingleNotice}},[e._v("发布")])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.single.loading,expression:"single.loading"}],attrs:{data:e.single.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"content",label:"通知内容","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sendType",label:"通知类型","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.sendType[t.row.sendType]))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"chatDataId",label:"赛事ID","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"matchVSData",label:"赛事对阵","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operateName",label:"发布人","min-width":"80"}})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.single.pageIndex,"page-count":e.single.pageCount},on:{"current-change":e.getSingleList,"update:currentPage":function(t){return e.$set(e.single,"pageIndex",t)},"update:current-page":function(t){return e.$set(e.single,"pageIndex",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"快捷全局通知",visible:e.dialogAllVisible,center:""},on:{"update:visible":function(t){e.dialogAllVisible=t}}},[a("el-form",{ref:"globalNoticeForm",attrs:{model:e.globalNotice,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"通知内容:",prop:"content",rules:[{required:!0,message:"通知内容不能为空",trigger:"blur"}]}},[a("el-input",{attrs:{type:"textarea",rows:"3"},nativeOn:{keydown:function(t){return e.handlerGlobalNotice(t)}},model:{value:e.globalNotice.content,callback:function(t){e.$set(e.globalNotice,"content",t)},expression:"globalNotice.content"}})],1),e._v(" "),a("el-form-item",{staticClass:"text-align: right;"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.publishGlobalNotice}},[e._v("发布")])],1)],1)],1)],1)},staticRenderFns:[]};var Jp=a("VU/8")(Xp,Kp,!1,function(e){a("qbDM")},null,null).exports,Zp={name:"ChatroomExpert",data:function(){return{tableHeight:0,dialogVisible:!1,dialogIsEdit:!1,pageIndex:1,pageSize:20,loading:!1,pageCount:1,list:[],expertForm:{matchInfoId:"",expert_1:"",expert_2:"",status:!1}}},created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.$store.state.windowHeight-e.$refs.elTable.$el.offsetTop-63})},expert1_rule:function(e,t,a){""!==t||this.expertForm.expert_2?a():a(new Error("请填入至少一个驻场专家"))},getList:function(e,t){var a=this;this.loading||(this.loading=!0,this.pageIndex=e||1,this.$service(Lr,{urlParams:{pageIndex:this.pageIndex,pageSize:this.pageSize}}).then(function(e){a.loading=!1,200===e.code?(a.list=e.data.records||[],a.pageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1):a.$message.error(e.code+":"+e.message)},function(e){a.loading=!1,a.$message.error(qo()(e))}))},openDiaLog:function(e){var t=this;this.dialogVisible=!0,this.$nextTick(function(){t.$refs.expertForm.clearValidate()}),"add"===e?(this.$nextTick(function(){t.$refs.expertForm.resetFields()}),this.dialogIsEdit=!1):(this.dialogIsEdit=!0,this.dialogVisible=!0)},submit:function(){var e=this;this.$refs.expertForm.validate(function(t){if(t){var a={};a.matchInfoId=e.expertForm.matchInfoId,a.expertIds="",e.expertForm.expert_1&&(a.expertIds+=e.expertForm.expert_1),e.expertForm.expert_2&&(a.expertIds&&(a.expertIds+=","),a.expertIds+=e.expertForm.expert_2),a.status=e.expertForm.status?1:0,e.dialogIsEdit?e.operate("edit",a):e.operate("add",a)}})},operate:function(e,t){var a=this,i="add"===e?Dr:Pr;this.$service(i,{method:"post",data:t}).then(function(t){200===t.code?(a.$message.success("add"===e?"新增成功":"修改成功"),a.dialogVisible=!1,a.getList()):a.$message.error(t.code+":"+t.message)},function(e){a.$message.error(qo()(e))})},edit:function(e){this.expertForm.matchInfoId=e.matchInfoId,this.expertForm.status=!!e.status,this.expertForm.expert_1=e.expertIds[0],this.expertForm.expert_2=e.expertIds[1]||"",this.openDiaLog()},deleteExpert:function(e){var t=this;this.$set(e,"loading",!0),this.$service(zr,{method:"post",urlParams:{statusExtendId:e.statusExtendId}}).then(function(a){e.loading=!1,200===a.code?(t.$message.success("删除成功"),t.getList()):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})}},watch:{windowHeight:function(){this.setHeight()}}},ef={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chatroom-expert"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.openDiaLog("add")}}},[e._v("新增驻场专家")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"matchVSData",label:"赛事对阵","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"matchInfoId",label:"赛事ID","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"expertNicknames",label:"驻场专家","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"chatRoomOpenTime",label:"聊天室开放时间","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"210"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"left"},model:{value:t.row.delPop,callback:function(a){e.$set(t.row,"delPop",a)},expression:"scope.row.delPop"}},[a("p",[e._v("确定删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.deleteExpert(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:"",size:"small"},slot:"reference"})],1),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.edit(t.row)}}})]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount,"page-size":e.pageSize},on:{"current-change":e.getList,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}}),e._v(" "),a("el-dialog",{attrs:{title:e.dialogIsEdit?"修改驻场专家":e.新增驻场专家,visible:e.dialogVisible,center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"expertForm",attrs:{model:e.expertForm}},[a("el-form-item",{attrs:{label:"赛事ID:","label-width":"110px",prop:"matchInfoId",rules:[{required:!0,message:"赛事ID不能为空",trigger:"blur"}]}},[a("el-input",{attrs:{autocomplete:"off",disabled:e.dialogIsEdit},model:{value:e.expertForm.matchInfoId,callback:function(t){e.$set(e.expertForm,"matchInfoId",t)},expression:"expertForm.matchInfoId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"驻场专家1 ID:","label-width":"110px",prop:"expert_1",rules:[{validator:e.expert1_rule,message:"请填写专家ID",trigger:"blur"}]}},[a("el-input",{model:{value:e.expertForm.expert_1,callback:function(t){e.$set(e.expertForm,"expert_1",t)},expression:"expertForm.expert_1"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"驻场专家2 ID:","label-width":"110px",prop:"expert_2"}},[a("el-input",{model:{value:e.expertForm.expert_2,callback:function(t){e.$set(e.expertForm,"expert_2",t)},expression:"expertForm.expert_2"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"首页推荐:","label-width":"110px"}},[a("el-checkbox-group",{model:{value:e.expertForm.status,callback:function(t){e.$set(e.expertForm,"status",t)},expression:"expertForm.status"}},[a("el-checkbox",{attrs:{label:"该赛事推荐在红彩首页",name:"type"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submit}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},tf=a("VU/8")(Zp,ef,!1,null,null,null).exports,af={name:"MatchRecommend",data:function(){return{tableHeight:0,dialogVisible:!1,submitOfLoading:!1,submitText:{0:"提交",1:"提交中"},submitStatus:0,form:{matchInfoId:""},list:[],pageIndex:1,pageCount:1,limit:20,loading:!1}},created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.$store.state.windowHeight-e.$refs.elTable.$el.offsetTop-63})},openDialog:function(){var e=this;this.dialogVisible=!0,this.$nextTick(function(){e.$refs.form.resetFields(),e.$refs.form.clearValidate()})},submit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.add(),e.submitStatus=1,e.submitOfLoading=!0})},add:function(){this.operate($t,this.form)},deleteRecommend:function(e){this.operate(Ct,{matchInfoId:e.matchInfoId})},operate:function(e,t){var a=this;this.$service(e,{method:"post",data:t}).then(function(e){a.submitOfLoading=!1,a.dialogVisible=!1,200===e.code?(a.$message.success("提交成功"),a.getList()):a.$message.error(e.code+":"+e.message)},function(e){a.$message.error(qo()(e))})},getList:function(e,t){var a=this;this.loading||(this.loading=!0,this.pageIndex=e||1,this.$service(kt,{params:{offset:(this.pageIndex-1)*this.limit,limit:this.limit}}).then(function(e){a.loading=!1,200===e.code?(a.list=e.data.data||[],a.pageCount=Math.ceil(e.data.total/a.limit)):a.$message.error(e.code+":"+e.message)},function(e){a.loading=!1,a.$message.error(qo()(e))}))}},watch:{windowHeight:function(){this.setHeight()}}},rf={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"match-recommend"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.openDialog}},[e._v("新增首页赛事推荐")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"",height:e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"homeTeamName",label:"赛事对阵","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(1===t.rowlotteryCategoryId?t.row.homeTeamName+"VS"+t.row.awayTeamName:t.row.awayTeamName+"VS"+t.row.homeTeamName)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"matchInfoId",label:"赛事ID","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"recommendTime",label:"配置时间","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.recommendTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"210"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"left"},model:{value:t.row.delPop,callback:function(a){e.$set(t.row,"delPop",a)},expression:"scope.row.delPop"}},[a("p",[e._v("确定删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.deleteRecommend(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:"",size:"small"},slot:"reference"})],1)]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getGlobalList,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}}),e._v(" "),a("el-dialog",{attrs:{title:"新增首页赛事推荐",visible:e.dialogVisible,width:"400px",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"推荐赛事ID:",prop:"matchInfoId",rules:[{required:!0,message:"赛事ID不能为空",trigger:"blur"}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.matchInfoId,callback:function(t){e.$set(e.form,"matchInfoId",t)},expression:"form.matchInfoId"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.submitOfLoading},on:{click:e.submit}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},of=a("VU/8")(af,rf,!1,null,null,null).exports,nf={productId:"",productIdTemp:"",productType:"",productTypeTemp:"",name:"",probability:"",probabilityTemp:"",maxLimit:"",maxLimitTemp:"",loading:!1,position:0,positionTemp:0},sf={name:"ActivityDrawLottery",data:function(){return{loading:!1,pageIndex:1,pageSize:25,pageCount:1,list:[],tableHeight:null,productTypeList:{0:"谢谢参与",1:"优惠券",2:"点卡",3:"必中点卡"},dialogFormVisible:!1,form:{},updateLoading:!1,activityTypeList:{0:"普通用户",1:"银卡用户",2:"金卡用户",3:"钻石用户",4:"至尊用户"},testVisible:!1,testForm:{}}},computed:u()({},Object(sn.d)(["windowHeight"]),{showInit:function(){return/test|netease/gi.test(window.location.href)}}),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},listRules:function(e,t,a){var i=e.field,r=this.$refs["productTypeList"+i][0].value,o=this.$refs["productIdList"+i][0].value,n=this.$refs["probabilityList"+i][0].value,s=this.$refs["maxLimitList"+i][0].value,l=this.$refs["positionList"+i][0].value;return""===r?a(new Error("奖品类型不能为空")):/^\d+$/.test(o)?/^[0-1]{1}([.]([0-9]){1,2})?$/.test(n)?/^\d+$/.test(s)?/^\d+$/.test(l)?a():a(new Error("权重必须为正整数")):a(new Error("最大发放数必须为正整数")):a(new Error("中奖几率必须为0-1之间的小数，最多两位")):a(new Error("奖品ID必须为正整数"))},getList:function(e,t){var a=this;this.loading||(this.loading=!0,this.pageIndex=e||1,this.$service(Fr,{params:{pageIndex:this.pageIndex,pageSize:this.pageSize}}).then(function(e){a.loading=!1,200===e.code?(a.list=e.data.records||[],a.pageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1,!t&&(a.$refs.elTable.bodyWrapper.scrollTop=0)):a.$message.error(e.code+":"+e.message)},function(e){a.loading=!1,a.$message.error(qo()(e))}))},switchStatus:function(e){var t=this;this.$set(e,"statusLoading",!0),this.$service(Rr,{method:"post",params:{drawLotteryManageId:e.drawLotteryManageId,status:e.drawLotteryStatus}}).then(function(a){e.statusLoading=!1,200===a.code?t.$message.success("状态更新成功"):(t.$set(e,"drawLotteryStatus",e.drawLotteryStatus?0:1),t.$message.error(a.message))},function(a){e.statusLoading=!1,t.$set(e,"status",e.drawLotteryStatus?0:1),t.$message.error(qo()(a))})},activeDel:function(e){var t=this;e.loading||(this.$set(e,"loading",!0),this.$service(Or,{params:{drawLotteryManageId:e.drawLotteryManageId}}).then(function(a){200===a.code?(e.delPop=!1,t.$message.success("删除成功"),t.getList(t.pageIndex,!0)):t.$message.error(a.code+":"+a.message),e.loading=!1},function(a){e.loading=!1,t.$message.error(qo()(a))}))},getMatchInfo:function(e){var t=this;this.$set(e,"match",""),/^\d+$/.test(e.activityId)&&An(e.activityId).then(function(a){a.matchInfoId&&t.$set(e,"match",a.homeMatchTeam.teamName+" vs "+a.guestMatchTeam.teamName)}).catch(function(e){t.$message.error(e)})},getInfoById:function(e){return e?this.$service(Ar,{params:{drawLotteryManageId:e}}).then(function(e){return 200===e.code?Bo.a.resolve(e.data):Bo.a.reject(e.message)},function(e){if(e)return Bo.a.reject(e)}):Bo.a.resolve()},newPop:function(e,t){var a=this,i=e?e.drawLotteryManageId:null;this.getInfoById(i).then(function(i){var r={activityId:e?e.activityId:"",recHomePage:!!e&&!!e.recHomePage,recHomePageTemp:!!e&&!!e.recHomePage};e&&!t&&(r.drawLotteryManageId=e.drawLotteryManageId);var n={};o()(a.activityTypeList).map(function(e){n[e]=[]}),i&&i.forEach(function(e){r.drawLotteryManageId||delete e.drawLotteryId,e.productType=e.productType+"",e.productTypeTemp=e.productType,e.productIdTemp=e.productId,e.probabilityTemp=e.probability,e.maxLimitTemp=e.maxLimit,e.positionTemp=e.position,n[e.activityType].push(e)}),o()(n).map(function(e){n[e].length<1?n[e]=[u()({},nf,{productId:"0",productIdTemp:"0",productType:"0",productTypeTemp:"0",maxLimit:"10000000",maxLimitTemp:"10000000"}),u()({},nf,{productId:"",productIdTemp:"",productType:"3",productTypeTemp:"3",position:1,positionTemp:1})]:(n[e].filter(function(e){return"0"===e.productType}).length<1&&n[e].push(u()({},nf,{productId:"0",productIdTemp:"0",productType:"0",productTypeTemp:"0",maxLimit:"10000000",maxLimitTemp:"10000000"})),n[e].filter(function(e){return"3"===e.productType}).length<1&&n[e].push(u()({},nf,{productId:"0",productIdTemp:"0",productType:"3",productTypeTemp:"3"})))}),r.list=n,a.form=r,e&&e.activityId&&a.getMatchInfo(a.form),a.dialogFormVisible=!0,a.$nextTick(function(){a.$refs.form.clearValidate()})}).catch(function(e){e&&a.$message.error("获取活动详情失败，请稍后再试")})},addLotteryId:function(e){var t=this.form.list[e].map(function(e){return e.positionTemp}).sort(function(e,t){return t-e}),a=t?parseInt(t[0])+1:0;this.form.list[e].push(u()({},nf,{position:a,positionTemp:a}))},removeLotteryId:function(e,t){var a=this,i=this.form.list[t];this.delLotteryById(i[e].drawLotteryId).then(function(){i.splice(e,1)}).catch(function(e){a.$message.error(e)})},getLotteryInfoAnsy:function(e){e.productType===e.productTypeTemp&&e.productId===parseInt(e.productIdTemp)||(e.name=""),this.getLotteryInfo(e).catch(function(e){})},getLotteryInfo:function(e){var t=this,a=parseInt(e.productTypeTemp),i=e.productIdTemp;return e.name||0===a?Bo.a.resolve():e.loading?Bo.a.reject(new Error("正在获取商品类型信息，请稍后再试")):""!==e.productTypeTemp&&/^\d+$/.test(e.productIdTemp)?(e.name="",this.$set(e,"loading",!0),1===a?Un(i).then(function(a){return e.loading=!1,a.couponName?(e.name=a.couponName,Bo.a.resolve()):(t.$message.error("找不到对应的优惠券，请更换ID"),Bo.a.reject(new Error("找不到对应的优惠券，请更换ID")))},function(a){if(a)return e.loading=!1,t.$message.error(qo()(a)),Bo.a.reject(new Error(qo()(a)))}):2===a||3===a?function(e){return Xo(_,{params:{pointCardId:e}}).then(function(e){return 200===e.code?Bo.a.resolve(e.data):Bo.a.reject(e.message)},function(e){return Bo.a.reject(qo()(e))})}(i).then(function(a){return e.loading=!1,a.name?(e.name=a.name,Bo.a.resolve()):(t.$message.error("找不到对应的点卡，请更换ID"),Bo.a.reject(new Error("找不到对应的点卡，请更换ID")))},function(a){if(a)return e.loading=!1,t.$message.error(qo()(a)),Bo.a.reject(new Error(qo()(a)))}):void 0):Bo.a.reject(new Error("奖品ID必须为正整数"))},isRepeat:function(e){var t={},a=!1;return e.forEach(function(e){t[e]?a=!0:t[e]=!0}),a},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(t.updateLoading)return;for(var a=!1,i=o()(t.form.list),r=0;r<i.length;r++)if(t.isRepeat(t.form.list[i[r]].map(function(e){return e.positionTemp}))){a=!0,t.$message.warning(t.activityTypeList[i[r]]+"奖品列表中有位置重复的奖品");break}if(a)return;var n={activityId:t.form.activityId,recHomePage:t.form.recHomePageTemp?1:0};t.updateLoading=!0,t.addActivity(n).then(function(e){t.updateLoading=!1,t.form.drawLotteryManageId=e,t.dialogFormVisible=!1,t.getList();var a=o()(t.form.list).map(function(a){return t.form.list[a].map(function(i){var r={drawLotteryManageId:e,activityType:a,productId:i.productIdTemp,productType:i.productTypeTemp,probability:i.probabilityTemp,maxLimit:i.maxLimitTemp,position:i.positionTemp};return t.addLotteryById(r,a)})});Yo.a.all(a).then(function(e){t.$message.success("活动及活动抽奖列表创建成功")}).catch(function(e){t.$message.error(qo()(e))})}).catch(function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}})},clickLotteryId:function(e,t,a){var i=this;if(this.isRepeat(this.form.list[t].map(function(e){return e.positionTemp})))return this.$message.warning(this.activityTypeList[t]+"奖品列表中有位置重复的奖品");var r={activityType:t,productId:e.productIdTemp,productType:e.productTypeTemp,probability:e.probabilityTemp,maxLimit:e.maxLimitTemp,position:e.positionTemp};""!==e.productTypeTemp&&/^\d+$/.test(e.productIdTemp)&&/^[0-1]{1}([.]([0-9]){1,2})?$/.test(e.probabilityTemp)&&/^\d+$/.test(e.maxLimitTemp)&&/^\d+$/.test(e.positionTemp)&&this.getLotteryInfo(e).then(function(){e.drawLotteryId?(r.drawLotteryId=e.drawLotteryId,i.updateLotteryById(r,t).then(function(t){e.productId=parseInt(e.productIdTemp),e.productType=e.productTypeTemp,e.probability=parseFloat(e.probabilityTemp),e.maxLimit=parseInt(e.maxLimitTemp),e.position=parseInt(e.positionTemp),i.$message.success("更新成功")}).catch(function(e){i.$message.error(e)})):(r.drawLotteryManageId=a,i.addLotteryById(r,t).then(function(t){i.$set(e,"drawLotteryId",t),e.productId=parseInt(e.productIdTemp),e.productType=e.productTypeTemp,e.probability=parseFloat(e.probabilityTemp),e.maxLimit=parseInt(e.maxLimitTemp),e.position=parseInt(e.positionTemp),i.$message.success("新增成功")}).catch(function(e){i.$message.error(e)}))}).catch(function(e){})},addActivity:function(e){return this.$service(Nr,{method:"post",data:e}).then(function(e){return 200===e.code?Bo.a.resolve(e.data):Bo.a.reject(e.message)},function(e){return Bo.a.reject(qo()(e))})},updateRecHomePage:function(){var e=this;this.$service(Er,{method:"post",data:{drawLotteryManageId:this.form.drawLotteryManageId,recHomePage:this.form.recHomePageTemp?1:0}}).then(function(t){200===t.code?(e.form.recHomePage=e.form.recHomePageTemp,e.$message.success("更新成功"),e.getList(e.pageIndex,!0)):e.$message.error(t.message)}).catch(function(t){e.$message.error(qo()(t))})},addLotteryById:function(e,t){return this.$service(Ur,{method:"post",data:e}).then(function(e){return 200===e.code?Bo.a.resolve(e.data):Bo.a.reject(e.message)},function(e){return Bo.a.reject(qo()(e))})},updateLotteryById:function(e,t){return this.$service(Vr,{method:"post",data:e}).then(function(e){return 200===e.code?Bo.a.resolve():Bo.a.reject(e.message)},function(e){return Bo.a.reject(qo()(e))})},delLotteryById:function(e){return e?this.$service(qr,{params:{drawLotteryId:e}}).then(function(e){return 200===e.code?Bo.a.resolve():Bo.a.reject(e.message)},function(e){return Bo.a.reject(qo()(e))}):Bo.a.resolve()},initPop:function(){var e=this;this.$prompt("输入赛事ID","赛事初始化",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+$/,inputErrorMessage:"赛事ID必须为数字",closeOnClickModal:!1}).then(function(t){var a=t.value;e.$service("/api/admin/drawLottery/test/init",{params:{matchInfoId:a}}).then(function(t){200===t.code?e.$message.success("初始化成功"):e.$message.error(t.message)}).catch(function(t){t&&e.$message.error(qo()(t))})})},testPop:function(){var e=this;this.testForm={activityId:"",userId:""},this.testVisible=!0,this.$nextTick(function(){e.$refs.testForm.clearValidate()})},testSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a={activityId:t.testForm.activityId,userId:t.testForm.userId};t.$service("/api/admin/drawLottery/test/draw",{params:a}).then(function(e){200===e.code?(t.testVisible=!1,t.$message.success("抽奖成功")):t.$message.error(e.message)}).catch(function(e){e&&t.$message.error(qo()(e))})}})}},watch:{windowHeight:function(){this.setHeight()}}},lf={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"activity-draw-lottery"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[e.showInit?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.initPop()}}},[e._v("赛事初始化")]):e._e(),e._v(" "),e.showInit?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.testPop()}}},[e._v("抽奖测试")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.newPop()}}},[e._v("新建活动")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"drawLotteryManageId",label:"活动ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"activityTitle",label:"赛事名称","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"chatOpenTime",label:"聊天室开放时间","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.chatOpenTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"activityId",label:"赛事ID","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"recHomePage",label:"是否推荐到首页","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.recHomePage?"是":"否")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"210"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{disabled:t.row.statusLoading,"active-value":0,"inactive-value":1},nativeOn:{click:function(a){return e.switchStatus(t.row)}},model:{value:t.row.drawLotteryStatus,callback:function(a){e.$set(t.row,"drawLotteryStatus",a)},expression:"scope.row.drawLotteryStatus"}}),e._v(" "),a("el-popover",{attrs:{placement:"left"},model:{value:t.row.delPop,callback:function(a){e.$set(t.row,"delPop",a)},expression:"scope.row.delPop"}},[a("p",[e._v("确定删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.activeDel(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:"",size:"small"},slot:"reference"})],1),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.newPop(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.newPop(t.row,!0)}}},[e._v("复制")])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount,"page-size":e.pageSize},on:{"current-change":e.getList,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}}),e._v(" "),a("el-dialog",{attrs:{title:e.form.drawLotteryManageId?"修改活动":"新建活动","close-on-click-modal":!1,visible:e.dialogFormVisible,width:"800px",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,disabled:e.updateLoading,size:"mini"}},[a("el-form-item",{attrs:{prop:"activityId",rules:[{required:!0,message:"赛事ID必填",trigger:["blur"]},{pattern:/^\d+$/,message:"赛事ID必须为数字",trigger:["blur"]}]}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("关联赛事ID")]),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:e.form.drawLotteryManageId,autocomplete:"off"},on:{change:function(t){return e.getMatchInfo(e.form)}},model:{value:e.form.activityId,callback:function(t){e.$set(e.form,"activityId",t)},expression:"form.activityId"}}),e._v(" "),e.form.match?a("span",[e._v(e._s(e.form.match))]):e._e()],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"recHomePageTemp"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("推荐到首页")]),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-checkbox",{model:{value:e.form.recHomePageTemp,callback:function(t){e.$set(e.form,"recHomePageTemp",t)},expression:"form.recHomePageTemp"}},[e._v(e._s(e.form.recHomePageTemp?"是":"否"))]),e._v(" "),e.form.drawLotteryManageId&&e.form.recHomePage!==e.form.recHomePageTemp?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.updateRecHomePage(t)}}},[e._v("更新")]):e._e()],1)],1)],1),e._v(" "),e._l(e.form.list,function(t,i){return a("el-row",{key:i,staticStyle:{"margin-top":"15px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("b",{staticStyle:{"font-size":"16px",color:"#ff2222"}},[e._v(e._s(e.activityTypeList[i])+"抽奖:")])]),e._v(" "),a("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:24}},e._l(t,function(t,r){return a("el-form-item",{key:r,attrs:{prop:i+r+"",rules:{validator:e.listRules,trigger:["change","blur"]}}},[a("el-select",{ref:"productTypeList"+i+r,refInFor:!0,staticStyle:{width:"100px"},attrs:{disabled:"0"===t.productTypeTemp||"3"===t.productTypeTemp,placeholder:"请选择"},on:{change:function(a){return e.getLotteryInfoAnsy(t)}},model:{value:t.productTypeTemp,callback:function(a){e.$set(t,"productTypeTemp",a)},expression:"item.productTypeTemp"}},e._l(e.productTypeList,function(e,t){return a("el-option",{key:t,attrs:{disabled:"0"===t||"3"===t,label:e,value:t}})}),1),e._v(" "),a("span",[e._v("ID:")]),e._v(" "),a("el-input",{ref:"productIdList"+i+r,refInFor:!0,staticStyle:{width:"110px"},attrs:{disabled:"0"===t.productTypeTemp,"suffix-icon":t.loading?"el-icon-loading":""},on:{change:function(a){return e.getLotteryInfoAnsy(t)},blur:function(a){return e.getLotteryInfoAnsy(t)}},model:{value:t.productIdTemp,callback:function(a){e.$set(t,"productIdTemp",a)},expression:"item.productIdTemp"}}),e._v(" "),a("span",[e._v("中奖几率:")]),e._v(" "),a("el-input",{ref:"probabilityList"+i+r,refInFor:!0,staticStyle:{width:"80px"},model:{value:t.probabilityTemp,callback:function(a){e.$set(t,"probabilityTemp",a)},expression:"item.probabilityTemp"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"0"!==t.productTypeTemp,expression:"item.productTypeTemp !== '0'"}]},[e._v("最大发放:")]),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:"0"!==t.productTypeTemp,expression:"item.productTypeTemp !== '0'"}],ref:"maxLimitList"+i+r,refInFor:!0,staticStyle:{width:"80px"},model:{value:t.maxLimitTemp,callback:function(a){e.$set(t,"maxLimitTemp",a)},expression:"item.maxLimitTemp"}}),e._v(" "),a("span",[e._v("位置:")]),e._v(" "),a("el-input",{ref:"positionList"+i+r,refInFor:!0,staticStyle:{width:"60px"},model:{value:t.positionTemp,callback:function(a){e.$set(t,"positionTemp",a)},expression:"item.positionTemp"}}),e._v(" "),!e.form.drawLotteryManageId||t.productType===t.productTypeTemp&&t.productId===parseInt(t.productIdTemp)&&t.probability===parseFloat(t.probabilityTemp)&&t.maxLimit===parseInt(t.maxLimitTemp)&&t.position===parseInt(t.positionTemp)?e._e():a("el-button",{attrs:{type:"primary"},on:{click:function(a){return a.preventDefault(),e.clickLotteryId(t,i,e.form.drawLotteryManageId)}}},[e._v(e._s(t.drawLotteryId?"更新":"确认"))]),e._v(" "),"0"!==t.productTypeTemp&&"3"!==t.productTypeTemp?a("el-button",{attrs:{type:"text"},on:{click:function(t){return t.preventDefault(),e.removeLotteryId(r,i)}}},[e._v("删除")]):e._e(),e._v(" "),t.name?a("p",[e._v(e._s(e.productTypeList[t.productType])+"名称："+e._s(t.name))]):e._e()],1)}),1),e._v(" "),a("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:24}},[t.length<8?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return t.preventDefault(),e.addLotteryId(i)}}},[e._v("新增优惠券/点卡")]):e._e()],1)],1)})],2),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),e.form.drawLotteryManageId?e._e():a("el-button",{attrs:{size:"small",type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"测试","close-on-click-modal":!1,visible:e.testVisible,width:"500px",center:""},on:{"update:visible":function(t){e.testVisible=t}}},[a("el-form",{ref:"testForm",attrs:{model:e.testForm,size:"mini"}},[a("el-form-item",{attrs:{label:"赛事ID",prop:"activityId",rules:[{required:!0,message:"必填",trigger:["blur"]},{pattern:/^\d+$/,message:"必须为数字",trigger:["blur"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.testForm.activityId,callback:function(t){e.$set(e.testForm,"activityId",t)},expression:"testForm.activityId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户ID",prop:"userId",rules:[{required:!0,message:"必填",trigger:["blur"]},{pattern:/^\d+$/,message:"必须为数字",trigger:["blur"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.testForm.userId,callback:function(t){e.$set(e.testForm,"userId",t)},expression:"testForm.userId"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.testVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.testSubmit("testForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},cf=a("VU/8")(sf,lf,!1,null,null,null).exports,df={data:function(){return{loading:!0,list:[],form:{},dialogFormVisible:!1,advertiseTypeList:[],popType:null,updateLoading:!1,urlRedirectType:on.urlRedirectType}},created:function(){this.getList(),this.getAdvertiseTypeList()},methods:{position:function(e){this.advertiseTypeList.forEach(function(t){if(t.advertiseType===e)return t.name})},dateFormat:function(e){return gh(e,"yyyy-MM-dd hh:mm:ss")},getList:function(){var e=this;this.$service(jr).then(function(t){e.loading=!1,200===t.code?e.list=t.data.data||[]:e.$message.error(t.code+":"+t.message)},function(t){e.loading=!1,e.$message.error(qo()(t))})},getAdvertiseTypeList:function(){var e=this;this.$service(Br).then(function(t){200===t.code?e.advertiseTypeList=t.data:e.$message.error(t.code+":"+t.message)},function(t){e.$message.error(qo()(t))})},beforeImgUpload:function(e){if(e.size/1024/1024>5)return this.$message.error("上传头像图片大小不能超过 5MB!"),!1},uploadSingleImg:function(e){var t=this;En(e.file,"thread").then(function(e){t.$set(t.form,"imgUrl",e)},function(e){e&&t.$message.error("上传图片失败，请稍后再传！")})},linkRules:function(e,t,a){parseInt(this.form.linkType)<5||23===parseInt(this.form.linkType)||28===parseInt(this.form.linkType)||34===parseInt(this.form.linkType)?1===parseInt(this.form.linkType)||34===parseInt(this.form.linkType)?t?bh.url.test(t)?a():a(new Error("URL不合法")):a(new Error("URL不为空")):t?/^\d+$/.test(t)?a():a(new Error("ID必须为数字")):a(new Error("ID不为空")):a()},activityPop:function(e){var t=this;if(e){this.popType="edit",this.form=tn()({},e);var a=e.content,i=e.del,r=e.advertisingId,o=e.imgUrl,n=e.linkType,s=e.linkContent,l=e.advertType;this.form={content:a,del:i,advertisingId:r,imgUrl:o,linkType:n,linkContent:s,advertType:l}}else this.form={},this.popType="add";this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.form.clearValidate()})},submitActivity:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.updateLoading=!0,"add"===t.popType?t.addActivity(t.form):t.updateActivity(t.form))})},switchStatus:function(e){this.getEditParam(e)},getEditParam:function(e){this.$set(e,"statusLoading",!0);var t={content:e.content,del:e.del,advertisingId:e.advertisingId,imgUrl:e.imgUrl,linkType:e.linkType,linkContent:e.linkContent,advertType:e.advertType};this.updateActivity(t,e,!0)},addActivity:function(e){var t=this;this.$service(Qr,{method:"post",data:e}).then(function(e){t.updateLoading=!1,200===e.code?(t.$message.success("新增成功"),t.dialogFormVisible=!1,t.getList()):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})},updateActivity:function(e,t,a){var i=this;this.$service(Wr,{method:"post",data:e}).then(function(e){i.updateLoading=!1,200===e.code?(i.$message.success("修改成功"),i.dialogFormVisible=!1,i.getList()):(i.$message.error(e.code+":"+e.message),a&&(t.del=!t.del,t.statusLoading=!1))},function(e){i.updateLoading=!1,i.$message.error(qo()(e)),a&&(t.del=!t.del,t.statusLoading=!1)})}}},uf={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"activity-advertise"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.activityPop()}}},[e._v("创建广告")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"advertisingId",label:"广告ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"广告创建时间","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.createTime?e.dateFormat(t.row.createTime):"")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"advertType",label:"广告位置",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.position(t.row.advertType))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"content",label:"广告摘要","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"adminName",label:"创建人",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"230"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"small"},on:{click:function(a){return e.activityPop(t.row,e.haspop)}}}),e._v(" "),a("el-switch",{attrs:{disabled:t.row.statusLoading,"active-value":!1,"inactive-value":!0},nativeOn:{click:function(a){return e.switchStatus(t.row)}},model:{value:t.row.del,callback:function(a){e.$set(t.row,"del",a)},expression:"scope.row.del"}})]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:e.form.advertisingId?"修改广告":"创建广告",visible:e.dialogFormVisible,width:"520px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,disabled:e.updateLoading,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"广告位置",prop:"advertType",rules:[{required:!0,message:"必填",trigger:["blur","change"]}]}},[a("el-select",{model:{value:e.form.advertType,callback:function(t){e.$set(e.form,"advertType",t)},expression:"form.advertType"}},e._l(e.advertiseTypeList,function(e,t){return a("el-option",{key:t,attrs:{value:e.advertType,label:e.name}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"广告摘要",prop:"content",rules:[{required:!0,message:"必填",trigger:["blur","change"]},{max:15,message:"最多20个字符",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上传素材",prop:"imgUrl",rules:{required:!0,message:"不为空",trigger:["blur","change"]}}},[a("el-upload",{staticClass:"single-uploader",attrs:{accept:".jpeg,.jpg,.png,.gif","show-file-list":!1,"http-request":e.uploadSingleImg,"before-upload":e.beforeImgUpload}},[e.form.imgUrl?a("img",{staticClass:"single-img",attrs:{src:e.form.imgUrl+"?imageView&thumbnail=98y98&quality=85"}}):a("i",{staticClass:"el-icon-plus single-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"跳转类型",rules:{required:!0,message:"不为空",trigger:["blur","change"]},prop:"linkType"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.previewID},model:{value:e.form.linkType,callback:function(t){e.$set(e.form,"linkType",t)},expression:"form.linkType"}},e._l(e.urlRedirectType,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:parseInt(e.form.linkType)<5||23===parseInt(e.form.linkType)||28===parseInt(e.form.linkType)||34===parseInt(e.form.linkType),expression:"parseInt(form.linkType) < 5 || parseInt(form.linkType) === 23 || parseInt(form.linkType) === 28 || parseInt(form.linkType) === 34"}],attrs:{label:"ID/URL",prop:"linkContent",rules:{validator:e.linkRules,trigger:["blur","change"]}}},[a("el-input",{attrs:{autocomplete:"off","suffix-icon":e.previewLoading?"el-icon-loading":""},on:{change:e.previewID},model:{value:e.form.linkContent,callback:function(t){e.$set(e.form,"linkContent",t)},expression:"form.linkContent"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitActivity("form")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},mf=a("VU/8")(df,uf,!1,null,null,null).exports,pf={name:"FinanceCpsOrderDetail",data:function(){var e=new Date(0===(new Date).getMonth()?(new Date).getFullYear()-1:(new Date).getFullYear(),0===(new Date).getMonth()?11:(new Date).getMonth()-1);return{appList:[],pageIndex:1,pageSize:25,pageCount:1,type:1,month:e.getFullYear()+"."+(e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1),loading:!1,tableHeight:null,pushHandsAllFee:0,list:[],depositRate:"",depositRateNum:null}},computed:u()({},Object(sn.d)(["windowHeight"]),{depositRateAuth:function(){return mh([33,39],this.$store.state.userInfo.roleList)}}),created:function(){this.getList()},filters:{protocolStatus2CH:function(e){return{"-1":"待确认",1:"正常",0:"终止"}[e]||"-"}},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(e){var t=this;this.loading||(this.loading=!0,this.pageIndex=e||1,e||(this.depositRateNum=null),this.$service(Gr,{method:"get",params:{month:this.month,type:this.type,pageIndex:this.pageIndex,pageSize:this.pageSize}}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.resultPage&&e.data.resultPage.records||[],t.pageCount=e.data.resultPage&&e.data.resultPage.page&&e.data.resultPage.page.pageCount||1,t.depositRateNum=e.data.pushHandsDepositRate||null,t.$refs.elTable.bodyWrapper.scrollTop=0,t.pushHandsAllFee=e.data.pushHandsAllFee||0,t.$refs.elTable.bodyWrapper.scrollLeft=0,t.setHeight()):t.$message.error(e.code+":"+e.message)},function(e){e&&(t.loading=!1,t.$message.error(qo()(e)))}))},exportList:function(){if(0===this.list.length)return this.$message("暂无相关数据");var e=location.origin+Yr+"?month="+this.month+"&type="+this.type;window.open(e)},setDespositRate:function(){var e=this;this.$confirm("确定将当期滚动折扣率设置为"+this.depositRate+"%？",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.$service(Xr,{method:"post",data:{month:e.month,pushHandsTypeId:e.type,pushHandsDepositRate:e.depositRate/100}}).then(function(t){200===t.code?(e.getList(),e.$message.success("设置成功")):e.$message.error(t.message)},function(t){t&&e.$message.error(qo()(t))})})},delDespositRate:function(){var e=this;this.$confirm("确定清空当期滚动折扣率？",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.$service(Kr,{method:"post",data:{month:e.month,pushHandsTypeId:e.type}}).then(function(t){200===t.code?(e.getList(),e.$message.success("清除成功")):e.$message.error(t.message)},function(t){t&&e.$message.error(qo()(t))})})}},watch:{windowHeight:function(){this.setHeight()}}},ff={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"finance-expertIncome"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title)+"\n        ")])})],2)],1)]),e._v(" "),a("el-form",{attrs:{inline:!0,size:"mini",disabled:e.loading}},[a("el-form-item",[a("el-select",{staticStyle:{width:"110px"},on:{change:function(t){return e.getList()}},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[a("el-option",{attrs:{label:"专家推手",value:0}}),e._v(" "),a("el-option",{attrs:{label:"彩票店地推",value:1}})],1)],1),e._v(" "),a("el-form-item",[a("el-date-picker",{staticStyle:{width:"120px"},attrs:{type:"month",clearable:!1,"value-format":"yyyy.MM","picker-options":{disabledDate:function(e){var t=(new Date).getFullYear(),a=(new Date).getMonth();return e.getTime()>new Date(0===a?t-1:t,0===a?11:a-1)}}},on:{change:function(t){return e.getList()}},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.exportList}},[e._v("导出")])],1),e._v(" "),a("el-form-item",[e._v("\n      分销佣金总计："+e._s(e.pushHandsAllFee)+"\n    ")]),e._v(" "),e.depositRateNum?a("el-form-item",[a("span",[e._v("当月滚动折扣率: "+e._s(e._f("toPercent")(e.depositRateNum)))]),e._v(" "),"1"!==e.type.toString()?a("el-button",{attrs:{type:"primary"},on:{click:e.delDespositRate}},[e._v("清除")]):e._e()],1):e._e(),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.loading&&!e.depositRateNum,expression:"!loading && !depositRateNum"}],attrs:{label:"当月滚动折扣率"}},[a("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:"输入滚动折扣率"},model:{value:e.depositRate,callback:function(t){e.depositRate=t},expression:"depositRate"}}),e._v(" %\n      "),a("el-button",{attrs:{type:"primary"},on:{click:e.setDespositRate}},[e._v("设置")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"orderId",label:"订单ID","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"订单创建时间","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"订单成功时间","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.successTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsId",label:"商品ID","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsType",label:"商品类型","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"buyCount",label:"购买数量","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"costRedCurrency",label:"消耗红豆","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"costCash",label:"消耗现金","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pushHandsMerchantId",label:"推手合作商户ID",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pushHandsId",label:"推手ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pushHandsType",label:"推手类型",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cpsChannelType",label:"CPS渠道类型",width:"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cpsSplitRatio",label:"CPS分成比例",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("toPercent")(t.row.cpsSplitRatio))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"distriCommission",label:"分成佣金(元)",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.distriCommission?Math.round(100*t.row.distriCommission)/100:"")+"\n      ")]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","page-size":"pageSize","current-page":e.pageIndex,"page-count":e.pageCount},on:{"current-change":e.getList,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}})],1)},staticRenderFns:[]},hf=a("VU/8")(pf,ff,!1,null,null,null).exports,gf={name:"DeveloperFix",data:function(){return{modeIndex:"1",modeList:{1:"赛事修复",2:"专家修复",3:"用户修复",4:"数据服务修复",5:"公共服务",6:"赛事投票"},matchStatusList:on.matchStatus,matchStatusScore:{visible:!1,form:{},loading:!1},matchTeam:{visible:!1,form:{},loading:!1},matchLeague:{visible:!1,form:{},loading:!1},expertWinManual:{visible:!1,form:{},loading:!1},serviceDishRoadInit:{visible:!1,form:{},loading:!1},serviceDelTeamScore:{visible:!1,form:{},loading:!1},eloSendDrawMessage:{visible:!1,form:{},loading:!1},voteMatchInfo:{visible:!1,form:{},loading:!1,type:null}}},methods:{fixMatchLive:function(){var e=this;this.$prompt("输入赛事ID","新数据商文章直播修复",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+$/,inputErrorMessage:"赛事ID必须为数字",closeOnClickModal:!1}).then(function(t){var a=t.value;e.$service(Jr,{params:{matchInfoId:a}}).then(function(t){200===t.code?e.$message.success("新数据商文章直播修复成功"):e.$message.error(t.message)}).catch(function(t){t&&e.$message.error(qo()(t))})})},fixMatchThread:function(){var e=this;this.$prompt("输入赛事ID","赛事方案结算修复",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+$/,inputErrorMessage:"赛事ID必须为数字",closeOnClickModal:!1}).then(function(t){var a=t.value;e.$service(Zr,{urlParams:{matchInfoId:a}}).then(function(t){200===t.code?e.$message.success("赛事方案结算修复成功"):e.$message.error(t.message)}).catch(function(t){t&&e.$message.error(qo()(t))})})},fixMatchStatusScore:function(){var e=this;this.matchStatusScore.visible=!0,this.matchStatusScore.form={},this.$nextTick(function(){e.$refs.matchStatusScoreForm.clearValidate()})},fixMatchStatusScoreSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a=t.matchStatusScore.form,i={matchInfoId:a.matchInfoId,matchStatus:a.matchStatus,homeScore:a.homeScore||0,guestScore:a.guestScore||0};if(t.matchStatusScore.loading)return;t.matchStatusScore.loading=!0,t.$service(eo,{method:"post",urlParams:i}).then(function(e){200===e.code?(t.matchStatusScore.visible=!1,t.$message.success("赛事的状态和比分修复成功")):t.$message.error(e.code+":"+e.message),t.matchStatusScore.loading=!1},function(e){t.matchStatusScore.loading=!1,t.$message.error(qo()(e))})}})},fixMatchCache:function(){var e=this;this.$prompt("输入赛事ID","赛事缓存清理",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+$/,inputErrorMessage:"赛事ID必须为数字",closeOnClickModal:!1}).then(function(t){var a=t.value;e.$service(to,{params:{matchInfoId:a}}).then(function(t){200===t.code?e.$message.success("缓存清理成功"):e.$message.error(t.message)}).catch(function(t){t&&e.$message.error(qo()(t))})})},fixMatchTeam:function(){var e=this;this.matchTeam.visible=!0,this.matchTeam.form={},this.$nextTick(function(){e.$refs.matchTeamForm.clearValidate()})},fixMatchTeamSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a=t.matchTeam.form,i={jcName:a.jcName};if(a.shortName&&(i.shortName=a.shortName),a.teamName&&(i.teamName=a.teamName),a.teamEnName&&(i.teamEnName=a.teamEnName),t.matchTeam.loading)return;t.matchTeam.loading=!0,t.$service(ao,{method:"post",urlParams:{teamId:a.teamId},data:i}).then(function(e){200===e.code?(t.matchTeam.visible=!1,t.$message.success("修改球队竞彩名称成功")):t.$message.error(e.code+":"+e.message),t.matchTeam.loading=!1},function(e){t.matchTeam.loading=!1,t.$message.error(qo()(e))})}})},fixMatchLeague:function(){var e=this;this.matchLeague.visible=!0,this.matchLeague.form={},this.$nextTick(function(){e.$refs.matchLeagueForm.clearValidate()})},fixMatchLeagueSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a=t.matchLeague.form,i={jcName:a.jcName};if(a.shortName&&(i.shortName=a.shortName),t.matchLeague.loading)return;t.matchLeague.loading=!0,t.$service(io,{method:"post",urlParams:{leagueMatchId:a.leagueMatchId},data:i}).then(function(e){200===e.code?(t.matchLeague.visible=!1,t.$message.success("修改联赛竞彩名称成功")):t.$message.error(e.code+":"+e.message),t.matchLeague.loading=!1},function(e){t.matchLeague.loading=!1,t.$message.error(qo()(e))})}})},fixCommonByKey:function(){var e=this;this.$prompt("输入Key","清除缓存",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\S+$/,inputErrorMessage:"不为空",closeOnClickModal:!1}).then(function(t){var a=t.value;e.$service(oo,{params:{key:a}}).then(function(t){200===t.code?e.$message.success("清除缓存成功"):e.$message.error(t.message)}).catch(function(t){t&&e.$message.error(qo()(t))})})},getNanoData:function(){var e=this;this.$prompt("输入URL，请先打开浏览器DevTools","查看数据商接口数据",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\S+$/,inputErrorMessage:"不为空",closeOnClickModal:!1}).then(function(t){var a=t.value;e.$service(Ho,{method:"post",data:{url:a}}).then(function(t){200===t.code?(console.log(t.data),e.$message.success("查看成功")):e.$message.error(t.message)}).catch(function(t){t&&e.$message.error(qo()(t))})})},fixMatchNano:function(){var e=this;this.$prompt("输入赛事ID","雷速实时比分修复接口",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+$/,inputErrorMessage:"赛事ID必须为数字",closeOnClickModal:!1}).then(function(t){var a=t.value;e.$service(ro,{params:{matchInfoId:a}}).then(function(t){200===t.code?e.$message.success("雷速实时比分修复接口成功"):e.$message.error(t.message)}).catch(function(t){t&&e.$message.error(qo()(t))})})},fixExpertCacheById:function(){var e=this;this.$prompt("输入专家ID","专家可投注方案数清除缓存",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+$/,inputErrorMessage:"专家ID必须为数字",closeOnClickModal:!1}).then(function(t){var a=t.value;e.$service(no,{urlParams:{expertId:a}}).then(function(t){200===t.code?e.$message.success("专家可投注方案数清除缓存成功"):e.$message.error(t.message)}).catch(function(t){t&&e.$message.error(qo()(t))})})},fixExpertAutoFixAll:function(){var e=this;this.$confirm("确定自动修复所有专家可投注方案数?",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.$service(so).then(function(t){200===t.code?e.$message.success("自动修复所有专家可投注方案数成功"):e.$message.error(t.message)}).catch(function(t){t&&e.$message.error(qo()(t))})})},fixExpertWinFixAll:function(){var e=this;this.$confirm("确定自动修复所有专家连红数?",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.$service(lo).then(function(t){200===t.code?e.$message.success("自动修复所有专家连红数成功"):e.$message.error(t.message)}).catch(function(t){t&&e.$message.error(qo()(t))})})},fixExpertWinById:function(){var e=this;this.$prompt("输入专家ID","修复指定专家连红数",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+$/,inputErrorMessage:"专家ID必须为数字",closeOnClickModal:!1}).then(function(t){var a=t.value;e.$service(co,{params:{expertId:a}}).then(function(t){200===t.code?e.$message.success("专家连红数修复成功"):e.$message.error(t.message)}).catch(function(t){t&&e.$message.error(qo()(t))})})},fixExpertWinGetValueById:function(){var e=this;this.$prompt("输入专家ID","修复指定专家连红数",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+$/,inputErrorMessage:"专家ID必须为数字",closeOnClickModal:!1}).then(function(t){var a=t.value;e.$service(uo,{params:{expertId:a}}).then(function(t){200===t.code?e.$message({showClose:!0,message:"连红:"+t.data.continuityWinCount+"；最大连红:"+t.data.maxContinuityWinCount,type:"success"}):e.$message.error(t.message)}).catch(function(t){t&&e.$message.error(qo()(t))})})},fixExpertWinManualFix:function(){var e=this;this.expertWinManual.visible=!0,this.expertWinManual.form={},this.$nextTick(function(){e.$refs.expertWinManualFixForm.clearValidate()})},fixExpertWinManualFixSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a=t.expertWinManual.form,i={expertId:a.expertId,continuityWin:a.continuityWin,maxContinuityWin:a.maxContinuityWin};if(t.expertWinManual.loading)return;t.expertWinManual.loading=!0,t.$service(mo,{method:"post",urlParams:{expertId:a.expertId},data:i}).then(function(e){200===e.code?(t.expertWinManual.visible=!1,t.$message.success("手动修复专家连红成功")):t.$message.error(e.code+":"+e.message),t.expertWinManual.loading=!1},function(e){t.expertWinManual.loading=!1,t.$message.error(qo()(e))})}})},fixExpertPopularityRank:function(){var e=this;this.$prompt("彩种ID","清除周人气榜缓存",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+$/,inputErrorMessage:"彩种ID必须为数字",closeOnClickModal:!1}).then(function(t){var a=t.value;e.$service(po,{urlParams:{categoryId:a}}).then(function(t){200===t.code?e.$message.success("清除周人气榜缓存成功"):e.$message.error(t.message)}).catch(function(t){t&&e.$message.error(qo()(t))})})},fixUserCacheById:function(){var e=this;this.$prompt("用户ID","清除用户缓存",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+$/,inputErrorMessage:"用户ID必须为数字",closeOnClickModal:!1}).then(function(t){var a=t.value;e.$service(fo,{urlParams:{userId:a}}).then(function(t){200===t.code?e.$message.success("清除用户缓存成功"):e.$message.error(t.message)}).catch(function(t){t&&e.$message.error(qo()(t))})})},fixServiceDishRoadInit:function(){var e=this;this.serviceDishRoadInit.visible=!0,this.serviceDishRoadInit.form={},this.$nextTick(function(){e.$refs.serviceDishRoadInitForm.clearValidate()})},fixServiceDishRoadInitSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a={startTime:t.serviceDishRoadInit.form.startTime};if(t.serviceDishRoadInit.loading)return;t.serviceDishRoadInit.loading=!0,t.$service(ho,{params:a}).then(function(e){200===e.code?(t.serviceDishRoadInit.visible=!1,t.$message.success("初始化盘路榜成功")):t.$message.error(e.code+":"+e.message),t.serviceDishRoadInit.loading=!1},function(e){t.serviceDishRoadInit.loading=!1,t.$message.error(qo()(e))})}})},fixEloPredictOneMatch:function(){var e=this;this.$prompt("赛事ID","预测单个赛事红彩指数",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+$/,inputErrorMessage:"赛事ID必须为数字",closeOnClickModal:!1}).then(function(t){var a=t.value;e.$service(go,{urlParams:{matchInfoId:a}}).then(function(t){200===t.code?e.$message.success("预测单个赛事红彩指数成功"):e.$message.error(t.message)}).catch(function(t){t&&e.$message.error(qo()(t))})})},fixEloDelMatch:function(){var e=this;this.$prompt("赛事ID","红彩指数删除赛事",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+$/,inputErrorMessage:"赛事ID必须为数字",closeOnClickModal:!1}).then(function(t){var a=t.value;e.$service(vo,{urlParams:{matchInfoId:a}}).then(function(t){200===t.code?e.$message.success("红彩指数删除赛事成功"):e.$message.error(t.message)}).catch(function(t){t&&e.$message.error(qo()(t))})})},fixEloSettlement:function(){var e=this;this.$prompt("赛事ID","红彩指数修复结算",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+$/,inputErrorMessage:"赛事ID必须为数字",closeOnClickModal:!1}).then(function(t){var a=t.value;e.$service(bo,{urlParams:{matchInfoId:a}}).then(function(t){200===t.code?e.$message.success("红彩指数修复结算成功"):e.$message.error(t.message)}).catch(function(t){t&&e.$message.error(qo()(t))})})},fixEloListCache:function(){var e=this;this.$confirm("确定清除红彩指数列表缓存?",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.$service(_o).then(function(t){200===t.code?e.$message.success("清除红彩指数列表缓存成功"):e.$message.error(t.message)}).catch(function(t){t&&e.$message.error(qo()(t))})})},fixEloCacheById:function(){var e=this;this.$prompt("赛事ID","红彩指数清除赛事缓存",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+$/,inputErrorMessage:"赛事ID必须为数字",closeOnClickModal:!1}).then(function(t){var a=t.value;e.$service(yo,{urlParams:{matchInfoId:a}}).then(function(t){200===t.code?e.$message.success("红彩指数清除赛事缓存成功"):e.$message.error(t.message)}).catch(function(t){t&&e.$message.error(qo()(t))})})},fixServiceDelLeagueRating:function(){var e=this;this.$prompt("联赛ID","清空联赛等级分排行",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+$/,inputErrorMessage:"联赛ID必须为数字",closeOnClickModal:!1}).then(function(t){var a=t.value;e.$service(wo,{urlParams:{leagueMatchId:a}}).then(function(t){200===t.code?e.$message.success("清空联赛等级分排行成功"):e.$message.error(t.message)}).catch(function(t){t&&e.$message.error(qo()(t))})})},fixServiceDelTeamScore:function(){var e=this;this.serviceDelTeamScore.visible=!0,this.serviceDelTeamScore.form={},this.$nextTick(function(){e.$refs.serviceDelTeamScoreForm.clearValidate()})},fixServiceDelTeamScoreSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a=t.serviceDelTeamScore.form,i={leagueMatchId:a.leagueMatchId,teamId:a.teamId};if(t.serviceDelTeamScore.loading)return;t.serviceDelTeamScore.loading=!0,t.$service(To,{urlParams:i}).then(function(e){200===e.code?(t.serviceDelTeamScore.visible=!1,t.$message.success("清空球队等级分历史成功")):t.$message.error(e.code+":"+e.message),t.serviceDelTeamScore.loading=!1},function(e){t.serviceDelTeamScore.loading=!1,t.$message.error(qo()(e))})}})},fixServiceAllTeamCache:function(){var e=this;this.$confirm("清除所有联赛球队等级分缓存?",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.$service(Io).then(function(t){200===t.code?e.$message.success("清除所有联赛球队等级分缓存成功"):e.$message.error(t.message)}).catch(function(t){t&&e.$message.error(qo()(t))})})},fixEloFetchSchedule:function(){var e=this;this.$confirm("红彩指数更新赛程等级分?",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.$service(xo).then(function(t){200===t.code?e.$message.success("红彩指数更新赛程等级分成功"):e.$message.error(t.message)}).catch(function(t){t&&e.$message.error(qo()(t))})})},fixEloSendDrawMessage:function(){var e=this;this.eloSendDrawMessage.visible=!0,this.eloSendDrawMessage.form={},this.$nextTick(function(){e.$refs.eloSendDrawMessageForm.clearValidate()})},fixEloSendDrawMessageSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a=t.eloSendDrawMessage.form,i={competitionCode:a.competitionCode,season:a.season,round:a.round};if(t.eloSendDrawMessage.loading)return;t.eloSendDrawMessage.loading=!0,t.$service(ko,{urlParams:i}).then(function(e){200===e.code?(t.eloSendDrawMessage.visible=!1,t.$message.success("发送更新系数的mq消息成功")):t.$message.error(e.code+":"+e.message),t.eloSendDrawMessage.loading=!1},function(e){t.eloSendDrawMessage.loading=!1,t.$message.error(qo()(e))})}})},fixEloDelStatistic:function(){var e=this;this.$confirm("红彩指数清空联赛统计和头部信息?",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.$service($o).then(function(t){200===t.code?e.$message.success("红彩指数清空联赛统计和头部信息成功"):e.$message.error(t.message)}).catch(function(t){t&&e.$message.error(qo()(t))})})},voteMatchIdButton:function(e){var t=this,a=function(e,a){t.$prompt("赛事ID",e,{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+$/,inputErrorMessage:"赛事ID必须为数字",closeOnClickModal:!1}).then(function(i){var r=i.value;t.$service(a,{params:{matchId:r}}).then(function(a){200===a.code?t.$message.success(e+"成功"):t.$message.error(a.message)}).catch(function(e){e&&t.$message.error(qo()(e))})})};switch(e){case"init":a("初始化赛事投票",Co);break;case"cancle":a("取消赛事投票",Lo)}},voteClearCacheButton:function(e){var t=this;this.$prompt("投票ID","清除赛事投票缓存",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+$/,inputErrorMessage:"投票ID必须为数字",closeOnClickModal:!1}).then(function(e){var a=e.value;t.$service(Do,{params:{voteId:a}}).then(function(e){200===e.code?t.$message.success("清除赛事投票缓存成功"):t.$message.error(e.message)}).catch(function(e){e&&t.$message.error(qo()(e))})})},voteMatchInfoButton:function(e){var t=this;this.voteMatchInfo.visible=!0,this.voteMatchInfo.form={},this.voteMatchInfo.type=e,this.$nextTick(function(){t.$refs.voteMatchInfoForm.clearValidate()})},voteMatchInfoSubmit:function(e){var t=this,a=function(e,a,i){t.voteMatchInfo.loading||(t.voteMatchInfo.loading=!0,t.$service(e,{params:a}).then(function(e){200===e.code?(t.voteMatchInfo.visible=!1,t.$message.success(i+"成功")):t.$message.error(e.code+":"+e.message),t.voteMatchInfo.loading=!1},function(e){t.voteMatchInfo.loading=!1,t.$message.error(qo()(e))}))};this.$refs[e].validate(function(e){if(e){var i=t.voteMatchInfo.form,r={matchId:i.matchId,appearTime:i.appearTime};switch(t.voteMatchInfo.type){case"re":r.optionId=i.optionId,a(So,r,"重新结算赛事投票");break;case"half":a(Po,r,"开启赛事投票指定时机");break;case"rollback":a(zo,r,"回滚赛事投票结算")}}})},userVipStop:function(){var e=this;this.$prompt(null,"请输入用户ID",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\d+/,inputErrorMessage:"用户ID格式不正确"}).then(function(t){var a=t.value;e.$service(Mo,{method:"post",data:{userId:a}}).then(function(t){200===t.code?e.$message.success("停止VIP服务成功"):e.$message.error(t.message)}).catch(function(t){t&&e.$message.error(qo()(t))})})}}},vf={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"developer-fix"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1)]),e._v(" "),a("el-form",{attrs:{inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"修复类型"}},[a("el-select",{model:{value:e.modeIndex,callback:function(t){e.modeIndex=t},expression:"modeIndex"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.modeList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})],2)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:5}}),e._v(" "),a("el-col",{attrs:{span:10}})],1),e._v(" "),"1"===e.modeIndex?a("table",{staticClass:"developer-fix--table"},[a("tr",[a("td",[e._v("新数据商文章直播:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fixMatchLive}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("赛事方案结算修复:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fixMatchThread}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("赛事状态和比分修复:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fixMatchStatusScore}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("赛事缓存清理:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fixMatchCache}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("修改球队竞彩名称:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fixMatchTeam}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("修改联赛竞彩名称:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fixMatchLeague}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("雷速实时比分修复接口:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fixMatchNano}},[e._v("修复")])],1)])]):e._e(),e._v(" "),"2"===e.modeIndex?a("table",{staticClass:"developer-fix--table"},[a("tr",[a("td",[e._v("专家可投注方案数清除缓存:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fixExpertCacheById}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("自动修复所有专家可投注方案数")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fixExpertAutoFixAll}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("自动修复所有专家连红数")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fixExpertWinFixAll}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("修复指定专家连红数")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fixExpertWinById}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("获取专家连红计算结果")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fixExpertWinGetValueById}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("手动修复专家连红")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fixExpertWinManualFix}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("清除周人气榜缓存")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fixExpertPopularityRank}},[e._v("修复")])],1)])]):e._e(),e._v(" "),"3"===e.modeIndex?a("table",{staticClass:"developer-fix--table"},[a("tr",[a("td",[e._v("清除用户缓存:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fixUserCacheById}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("停用用户VIP服务:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.userVipStop}},[e._v("修复")])],1)])]):e._e(),e._v(" "),"4"===e.modeIndex?a("table",{staticClass:"developer-fix--table"},[a("tr",[a("td",[e._v("初始化盘路榜:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fixServiceDishRoadInit}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("预测单个赛事红彩指数:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fixEloPredictOneMatch}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("红彩指数删除赛事:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fixEloDelMatch}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("红彩指数修复结算:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fixEloSettlement}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("红彩指数清除列表缓存:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fixEloListCache}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("红彩指数清除赛事缓存:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fixEloCacheById}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("清空联赛等级分排行:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fixServiceDelLeagueRating}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("清空球队等级分历史:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fixServiceDelTeamScore}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("清除所有联赛球队等级分缓存:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fixServiceAllTeamCache}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("红彩指数更新赛程等级分:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fixEloFetchSchedule}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("发送更新系数的mq消息:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fixEloSendDrawMessage}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("红彩指数清空联赛统计和头部信息:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fixEloDelStatistic}},[e._v("修复")])],1)])]):e._e(),e._v(" "),"5"===e.modeIndex?a("table",{staticClass:"developer-fix--table"},[a("tr",[a("td",[e._v("通过KEY清除缓存:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.fixCommonByKey}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("通过URL查看数据商接口:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.getNanoData}},[e._v("查看")])],1)])]):e._e(),e._v(" "),"6"===e.modeIndex?a("table",{staticClass:"developer-fix--table"},[a("tr",[a("td",[e._v("初始化赛事投票:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.voteMatchIdButton("init")}}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("重新结算赛事投票:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.voteMatchInfoButton("re")}}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("取消赛事投票:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.voteMatchIdButton("cancle")}}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("清除赛事投票缓存:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.voteClearCacheButton}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("开启赛事投票指定时机:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.voteMatchInfoButton("half")}}},[e._v("修复")])],1)]),e._v(" "),a("tr",[a("td",[e._v("回滚赛事投票结算:")]),e._v(" "),a("td",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.voteMatchInfoButton("rollback")}}},[e._v("修复")])],1)])]):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"赛事状态和比分修复",visible:e.matchStatusScore.visible,width:"520px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){return e.$set(e.matchStatusScore,"visible",t)}}},[a("el-form",{ref:"matchStatusScoreForm",attrs:{model:e.matchStatusScore.form,disabled:e.matchStatusScore.loading,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"赛事ID",prop:"matchInfoId",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{pattern:/^\d+$/,message:"赛事ID必须为整数",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.matchStatusScore.form.matchInfoId,callback:function(t){e.$set(e.matchStatusScore.form,"matchInfoId",t)},expression:"matchStatusScore.form.matchInfoId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"赛事状态",prop:"matchStatus",rules:{required:!0,message:"不为空",trigger:["blur","change"]}}},[a("el-select",{model:{value:e.matchStatusScore.form.matchStatus,callback:function(t){e.$set(e.matchStatusScore.form,"matchStatus",t)},expression:"matchStatusScore.form.matchStatus"}},e._l(e.matchStatusList,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"主队比分",prop:"homeScore",rules:{pattern:/^\d+$/,message:"比分必须为整数",trigger:["blur","change"]}}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.matchStatusScore.form.homeScore,callback:function(t){e.$set(e.matchStatusScore.form,"homeScore",t)},expression:"matchStatusScore.form.homeScore"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"客队比分",prop:"guestScore",rules:{pattern:/^\d+$/,message:"比分必须为整数",trigger:["blur","change"]}}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.matchStatusScore.form.guestScore,callback:function(t){e.$set(e.matchStatusScore.form,"guestScore",t)},expression:"matchStatusScore.form.guestScore"}})],1),e._v(" "),a("el-form-item",[a("p",[e._v("注：赛事为结束状态时候，主队比分和客队比分，如果不传值则默认走数据库比分")])])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.matchStatusScore.visible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",loading:e.matchStatusScore.loading},on:{click:function(t){return e.fixMatchStatusScoreSubmit("matchStatusScoreForm")}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改球队竞彩名称",visible:e.matchTeam.visible,width:"520px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){return e.$set(e.matchTeam,"visible",t)}}},[a("el-form",{ref:"matchTeamForm",attrs:{model:e.matchTeam.form,disabled:e.matchTeam.loading,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"球队ID",prop:"teamId",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{pattern:/^\d+$/,message:"球队ID必须为整数",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.matchTeam.form.teamId,callback:function(t){e.$set(e.matchTeam.form,"teamId",t)},expression:"matchTeam.form.teamId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"球队竞彩名称",prop:"jcName",rules:{required:!0,message:"不为空",trigger:["blur","change"]}}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.matchTeam.form.jcName,callback:function(t){e.$set(e.matchTeam.form,"jcName",t)},expression:"matchTeam.form.jcName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"球队简称",prop:"shortName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.matchTeam.form.shortName,callback:function(t){e.$set(e.matchTeam.form,"shortName",t)},expression:"matchTeam.form.shortName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"球队全程",prop:"teamName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.matchTeam.form.teamName,callback:function(t){e.$set(e.matchTeam.form,"teamName",t)},expression:"matchTeam.form.teamName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"球队英文名称",prop:"teamEnName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.matchTeam.form.teamEnName,callback:function(t){e.$set(e.matchTeam.form,"teamEnName",t)},expression:"matchTeam.form.teamEnName"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.matchTeam.visible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",loading:e.matchTeam.loading},on:{click:function(t){return e.fixMatchTeamSubmit("matchTeamForm")}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改联赛竞彩名称",visible:e.matchLeague.visible,width:"520px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){return e.$set(e.matchLeague,"visible",t)}}},[a("el-form",{ref:"matchLeagueForm",attrs:{model:e.matchLeague.form,disabled:e.matchLeague.loading,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"联赛ID",prop:"leagueMatchId",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{pattern:/^\d+$/,message:"联赛ID必须为整数",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.matchLeague.form.leagueMatchId,callback:function(t){e.$set(e.matchLeague.form,"leagueMatchId",t)},expression:"matchLeague.form.leagueMatchId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联赛竞彩名称",prop:"jcName",rules:{required:!0,message:"不为空",trigger:["blur","change"]}}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.matchLeague.form.jcName,callback:function(t){e.$set(e.matchLeague.form,"jcName",t)},expression:"matchLeague.form.jcName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联赛简称",prop:"shortName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.matchLeague.form.shortName,callback:function(t){e.$set(e.matchLeague.form,"shortName",t)},expression:"matchLeague.form.shortName"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.matchLeague.visible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",loading:e.matchLeague.loading},on:{click:function(t){return e.fixMatchLeagueSubmit("matchLeagueForm")}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"手动修复专家连红",visible:e.expertWinManual.visible,width:"520px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){return e.$set(e.expertWinManual,"visible",t)}}},[a("el-form",{ref:"expertWinManualFixForm",attrs:{model:e.expertWinManual.form,disabled:e.expertWinManual.loading,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:"专家ID",prop:"expertId",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{pattern:/^\d+$/,message:"专家ID必须为整数",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.expertWinManual.form.expertId,callback:function(t){e.$set(e.expertWinManual.form,"expertId",t)},expression:"expertWinManual.form.expertId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"连红数",prop:"continuityWin",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{pattern:/^\d+$/,message:"连红数必须为整数",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.expertWinManual.form.continuityWin,callback:function(t){e.$set(e.expertWinManual.form,"continuityWin",t)},expression:"expertWinManual.form.continuityWin"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"最大连红数",prop:"maxContinuityWin",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{pattern:/^\d+$/,message:"最大连红数必须为整数",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.expertWinManual.form.maxContinuityWin,callback:function(t){e.$set(e.expertWinManual.form,"maxContinuityWin",t)},expression:"expertWinManual.form.maxContinuityWin"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.expertWinManual.visible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",loading:e.expertWinManual.loading},on:{click:function(t){return e.fixExpertWinManualFixSubmit("expertWinManualFixForm")}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"初始化盘路榜",visible:e.serviceDishRoadInit.visible,width:"520px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){return e.$set(e.serviceDishRoadInit,"visible",t)}}},[a("el-form",{ref:"serviceDishRoadInitForm",attrs:{model:e.serviceDishRoadInit.form,disabled:e.serviceDishRoadInit.loading,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"日期",prop:"startTime",rules:{required:!0,message:"不为空",trigger:["blur","change"]}}},[a("el-date-picker",{staticStyle:{width:"150px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.serviceDishRoadInit.form.startTime,callback:function(t){e.$set(e.serviceDishRoadInit.form,"startTime",t)},expression:"serviceDishRoadInit.form.startTime"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.serviceDishRoadInit.visible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",loading:e.serviceDishRoadInit.loading},on:{click:function(t){return e.fixServiceDishRoadInitSubmit("serviceDishRoadInitForm")}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"清空球队等级分历史",visible:e.serviceDelTeamScore.visible,width:"520px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){return e.$set(e.serviceDelTeamScore,"visible",t)}}},[a("el-form",{ref:"serviceDelTeamScoreForm",attrs:{model:e.serviceDelTeamScore.form,disabled:e.serviceDelTeamScore.loading,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"联赛ID",prop:"leagueMatchId",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{pattern:/^\d+$/,message:"ID必须为整数",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.serviceDelTeamScore.form.leagueMatchId,callback:function(t){e.$set(e.serviceDelTeamScore.form,"leagueMatchId",t)},expression:"serviceDelTeamScore.form.leagueMatchId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"球队",prop:"teamId",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{pattern:/^\d+$/,message:"ID必须为整数",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.serviceDelTeamScore.form.teamId,callback:function(t){e.$set(e.serviceDelTeamScore.form,"teamId",t)},expression:"serviceDelTeamScore.form.teamId"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.serviceDelTeamScore.visible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",loading:e.serviceDelTeamScore.loading},on:{click:function(t){return e.fixServiceDelTeamScoreSubmit("serviceDelTeamScoreForm")}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"发送更新系数的mq消息",visible:e.eloSendDrawMessage.visible,width:"520px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){return e.$set(e.eloSendDrawMessage,"visible",t)}}},[a("el-form",{ref:"eloSendDrawMessageForm",attrs:{model:e.eloSendDrawMessage.form,disabled:e.eloSendDrawMessage.loading,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"competitionCode",prop:"competitionCode",rules:{required:!0,message:"不为空",trigger:["blur","change"]}}},[a("el-input",{attrs:{placeholder:"competitionCode",autocomplete:"off"},model:{value:e.eloSendDrawMessage.form.competitionCode,callback:function(t){e.$set(e.eloSendDrawMessage.form,"competitionCode",t)},expression:"eloSendDrawMessage.form.competitionCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"season",prop:"season",rules:{required:!0,message:"不为空",trigger:["blur","change"]}}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.eloSendDrawMessage.form.season,callback:function(t){e.$set(e.eloSendDrawMessage.form,"season",t)},expression:"eloSendDrawMessage.form.season"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"round",prop:"round",rules:{required:!0,message:"不为空",trigger:["blur","change"]}}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.eloSendDrawMessage.form.round,callback:function(t){e.$set(e.eloSendDrawMessage.form,"round",t)},expression:"eloSendDrawMessage.form.round"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.eloSendDrawMessage.visible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",loading:e.eloSendDrawMessage.loading},on:{click:function(t){return e.fixEloSendDrawMessageSubmit("eloSendDrawMessageForm")}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"re"===e.voteMatchInfo.type?"重新结算赛事投票":"half"===e.voteMatchInfo.type?"开启赛事投票指定时机":"rollback"===e.voteMatchInfo.type?"回滚赛事投票结算":"",visible:e.voteMatchInfo.visible,width:"520px","close-on-click-modal":!1,center:""},on:{"update:visible":function(t){return e.$set(e.voteMatchInfo,"visible",t)}}},[a("el-form",{ref:"voteMatchInfoForm",attrs:{model:e.voteMatchInfo.form,disabled:e.voteMatchInfo.loading,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"赛事ID",prop:"matchId",rules:[{required:!0,message:"不为空",trigger:["blur","change"]},{pattern:/^\d+$/,message:"赛事ID必须为整数",trigger:["blur","change"]}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.voteMatchInfo.form.matchId,callback:function(t){e.$set(e.voteMatchInfo.form,"matchId",t)},expression:"voteMatchInfo.form.matchId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"投票时机",prop:"appearTime",rules:{required:!0,message:"不为空",trigger:["blur","change"]}}},[a("el-select",{model:{value:e.voteMatchInfo.form.appearTime,callback:function(t){e.$set(e.voteMatchInfo.form,"appearTime",t)},expression:"voteMatchInfo.form.appearTime"}},[a("el-option",{attrs:{value:"1",label:"上半场"}}),e._v(" "),a("el-option",{attrs:{value:"2",label:"下半场"}})],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"re"===e.voteMatchInfo.type,expression:"voteMatchInfo.type === 're'"}],attrs:{label:"选项结果",prop:"optionId",rules:{required:"re"===e.voteMatchInfo.type,message:"不为空",trigger:["blur","change"]}}},[a("el-select",{model:{value:e.voteMatchInfo.form.optionId,callback:function(t){e.$set(e.voteMatchInfo.form,"optionId",t)},expression:"voteMatchInfo.form.optionId"}},[a("el-option",{attrs:{value:"A",label:"A"}}),e._v(" "),a("el-option",{attrs:{value:"B",label:"B"}}),e._v(" "),a("el-option",{attrs:{value:"B",label:"C"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.voteMatchInfo.visible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",loading:e.voteMatchInfo.loading},on:{click:function(t){return e.voteMatchInfoSubmit("voteMatchInfoForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]};var bf=a("VU/8")(gf,vf,!1,function(e){a("8Rfg")},null,null).exports,_f={name:"ChatroomBanned",data:function(){return{appTab:0,type:"ADUserLabel",tableHeight:0,pageIndex:1,pageSize:20,loading:!1,pageCount:1,list:[],inputSearch:"",inputAdd:"",inputAddLoading:""}},computed:{ChatroomBannedApi:function(){return Ao[this.appTab]}},created:function(){this.getList(),this.setHeight()},methods:{handleAppTabCommand:function(e){this.appTab.toString()!==e.toString()&&(this.appTab=e,"1"===this.appTab.toString()&&(this.type="blockSomebody"),this.getList())},handleCommand:function(e){this.type!==e&&(this.type=e,this.getList())},setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.$store.state.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getList:function(e,t){var a=this;this.loading||void 0!==t&&!t||(this.loading=!0,this.pageIndex=e||1,this.$service(this.ChatroomBannedApi.list,{urlParams:{type:this.type,pageIndex:this.pageIndex,pageSize:this.pageSize},params:t||this.inputSearch?{userIdOrAccount:t}:{}}).then(function(e){200===e.code?(a.list=e.data.records||[],a.pageCount=e.data.page&&e.data.page.pageCount?e.data.page.pageCount:1):a.$message.error(e.code+":"+e.message),a.loading=!1}).catch(function(e){a.loading=!1,a.$message.error(qo()(e))}))},bannedAdd:function(){var e=this;if(!this.inputAdd)return this.$message.warning("请输入要封禁的用户ID/通行证");this.inputAddLoading||(this.inputAddLoading=!0,this.$service(this.ChatroomBannedApi.add,{method:"post",urlParams:{type:this.type},data:{userIdOrAccount:this.inputAdd,adminId:this.$store.state.userInfo.adminId,adminName:this.$store.state.userInfo.userName}}).then(function(t){200===t.code?(e.$message.success("新增封禁成功"),e.getList()):e.$message.error(t.code+":"+t.message),e.inputAddLoading=!1}).catch(function(t){e.inputAddLoading=!1,e.$message.error(qo()(t))}))},bannedDel:function(e){var t=this;this.$set(e,"loading",!0),this.$service(this.ChatroomBannedApi.del,{method:"post",urlParams:{type:this.type},data:{userIdOrAccount:e.userId,adminId:this.$store.state.userInfo.adminId,adminName:this.$store.state.userInfo.userName}}).then(function(a){e.loading=!1,200===a.code?(t.$message.success("删除成功"),t.getList(t.page)):t.$message.error(a.code+":"+a.message)}).catch(function(a){e.loading=!1,t.$message.error(qo()(a))})}},watch:{windowHeight:function(){this.setHeight()}}},yf={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chatroom-banned"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-dropdown",{on:{command:e.handleAppTabCommand}},[a("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("\n          切换 - "+e._s({0:"红彩",1:"精准比分"}[e.appTab])+" "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"0"}},[e._v("红彩")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"1"}},[e._v("精准比分")])],1)],1),e._v(" "),a("el-dropdown",{directives:[{name:"show",rawName:"v-show",value:"0"===e.appTab.toString(),expression:"appTab.toString() === '0'"}],on:{command:e.handleCommand}},[a("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("\n          切换 - "+e._s({blockSomebody:"拉黑",ADUserLabel:"广告封禁"}[e.type])+" "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"ADUserLabel"}},[e._v("广告封禁")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"blockSomebody"}},[e._v("拉黑")])],1)],1)],1)]),e._v(" "),a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"用户ID/账号","prefix-icon":"el-icon-search",clearable:"",size:"mini"},on:{clear:e.getList},model:{value:e.inputSearch,callback:function(t){e.inputSearch=t},expression:"inputSearch"}}),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.getList(1,e.inputSearch)}}},[e._v("搜索")]),e._v(" "),a("el-popover",{attrs:{placement:"bottom-start",width:"300",trigger:"click"},on:{show:function(t){e.inputAdd=""}}},[a("div",{staticClass:"el-popover-content"},[a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"用户ID/账号",clearable:"",size:"mini"},model:{value:e.inputAdd,callback:function(t){e.inputAdd=t},expression:"inputAdd"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.bannedAdd}},[e._v(e._s({blockSomebody:"封禁",ADUserLabel:"打广告标签"}[e.type]))])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",size:"mini"},slot:"reference"},[e._v("点击快速操作")])],1)],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{prop:"userId",label:"用户ID","min-width":"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"用户通行证","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"添加时间",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"adminName",label:"添加人","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"left"},model:{value:t.row.delPop,callback:function(a){e.$set(t.row,"delPop",a)},expression:"scope.row.delPop"}},[a("p",[e._v("确定删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.delPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.bannedDel(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:"",size:"small"},slot:"reference"})],1)]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-count":e.pageCount,"page-size":e.pageSize},on:{"current-change":e.getList,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}})],1)},staticRenderFns:[]},wf=a("VU/8")(_f,yf,!1,null,null,null).exports,Tf={name:"DeveloperWSMonitoringJZBF",data:function(){return{loading:!1,accessList:[],sidByAccessId:-1,sidTemp:"",sidLoading:!1,timer:null,sidForm:{},dialogSid:!1,chatStatusInfo:null,chatStatusLoading:!1,chatStatusPop:!1,socketStatusInfo:null,socketStatusLoading:!1,socketStatusPop:!1,timerNum:-1}},beforeRouteEnter:function(e,t,a){a(function(e){e.init()})},beforeRouteLeave:function(e,t,a){clearInterval(this.timer),a()},methods:{init:function(){this.timerNum=-1,this.getChatStatus(),this.getSocketStatus(),this.getAccessList(),clearInterval(this.timer),this.timer=setInterval(this.getAccessList,2e4)},getAccessList:function(){var e=this;this.timerNum++,this.$service(wr.accessList).then(function(t){if(200===t.code&&t.data.length>0){var a=JSON.parse(qo()(e.accessList));e.accessList=t.data,e.accessList.forEach(function(t,i){e.$set(t,"status",a[i]&&a[i].status?a[i].status:{}),e.$set(t,"dispatchCount",a[i]&&a[i].dispatchCount?a[i].dispatchCount:{}),e.$set(t,"pubCount",a[i]&&a[i].pubCount?a[i].pubCount:{}),e.getStatusByAccessId(t),e.getMsgDispatchCount(t),e.getMsgPubCount(t)})}})},getStatusByAccessId:function(e){var t=this;this.$service(wr.statusByAccessId,{urlParams:{accessId:e.accessId}}).then(function(a){if(200===a.code){var i=JSON.parse(qo()(e.status));t.$set(e,"status",a.data),e.status.mqStatusInfoVoList.forEach(function(a,r){t.$set(a,"channelList",i.mqStatusInfoVoList&&i.mqStatusInfoVoList[r]&&i.mqStatusInfoVoList[r].channelList?i.mqStatusInfoVoList[r].channelList:[]),t.timerNum%5==0&&t.getChannelList(a,e.accessId)})}})},getChannelList:function(e,t){var a=this;this.$service(wr.channelListByAccessId,{urlParams:{accessId:t},params:{mqName:e.mqName}}).then(function(t){200===t.code&&a.$set(e,"channelList",t.data)})},delChannel:function(e,t,a){var i=this;this.$confirm("确定删除channel-"+t.channelName+"？",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){t.loading||(i.$set(t,"loading",!0),i.$service(wr.channelDelByAccessId,{urlParams:{accessId:a},params:{channelName:t.channelName}}).then(function(a){200===a.code?(t.delPop=!1,i.$message.success("Channel删除成功"),e.splice(e.indexOf(t),1)):i.$message.error(a.code+":"+a.message),t.loading=!1}).catch(function(e){e&&(t.loading=!1,i.$message.error(qo()(e)))}))})},sidSearch:function(){var e=this;return this.sidByAccessId<0?this.$message.error("请选择sid对应的实例"):this.sidTemp?void(this.sidLoading||(this.sidLoading=!0,this.$service(wr.clientQueryById,{urlParams:{accessId:this.sidByAccessId},params:{clientId:this.sidTemp}}).then(function(t){200===t.code?t.data.clientId?(e.sidForm=t.data,e.dialogSid=!0):e.$message.warning("找不到服务对应的SID."):e.$message.error(t.code+":"+t.message),e.sidLoading=!1}).catch(function(t){t&&(e.sidLoading=!1,e.$message.error(qo()(t)))}))):this.$message.error("请输入sid")},sidDel:function(){var e=this;return this.sidByAccessId<0?this.$message.error("请选择sid对应的实例"):this.sidTemp?void this.$confirm("确定删除sid-"+this.sidTemp+"？",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.sidLoading||(e.sidLoading=!0,e.$service(wr.clientDelById,{urlParams:{accessId:e.sidByAccessId},params:{clientId:e.sidTemp}}).then(function(t){200===t.code?e.$message.success("SID删除成功"):e.$message.error(t.code+":"+t.message),e.sidLoading=!1}).catch(function(t){t&&(e.sidLoading=!1,e.$message.error(qo()(t)))}))}):this.$message.error("请输入sid")},getMsgDispatchCount:function(e){var t=this;this.$service(wr.msgDispatch,{urlParams:{accessId:e.accessId}}).then(function(a){200===a.code?t.$set(e,"dispatchCount",a.data):t.$message.error(a.code+":"+a.message)}).catch(function(e){e&&t.$message.error(qo()(e))})},getMsgPubCount:function(e){var t=this;this.$service(wr.msgPub,{urlParams:{accessId:e.accessId}}).then(function(a){200===a.code?t.$set(e,"pubCount",a.data):t.$message.error(a.code+":"+a.message)}).catch(function(e){e&&t.$message.error(qo()(e))})},getChatStatus:function(){var e=this;this.$service(br.status).then(function(t){200===t.code&&(e.chatStatusInfo={openStatus:!(!t.data||t.data&&void 0===t.data.openStatus)&&t.data.openStatus})})},switchChatStatus:function(){var e=this;if(!this.chatStatusLoading){this.chatStatusLoading=!0;var t=this.chatStatusInfo.openStatus;this.$service(br.updateStatus,{method:"post",data:{openStatus:t?0:1}}).then(function(a){e.chatStatusLoading=!1,200===a.code?(e.chatStatusPop=!1,e.chatStatusInfo.openStatus=!t,e.$message.success("更新状态成功")):e.$message.error(a.code+":"+a.message)},function(t){e.chatStatusLoading=!1,t&&e.$message.error(qo()(t))})}},getSocketStatus:function(){var e=this;this.$service(_r.get).then(function(t){200===t.code&&(e.socketStatusInfo={openStatus:!(!t.data||t.data&&void 0===t.data.openStatus)&&t.data.openStatus})})},switchSocketStatus:function(){var e=this;if(!this.socketStatusLoading){this.socketStatusLoading=!0;var t=this.socketStatusInfo.openStatus;this.$service(_r.update,{method:"post",data:{openStatus:t?0:1}}).then(function(a){e.socketStatusLoading=!1,200===a.code?(e.socketStatusPop=!1,e.socketStatusInfo.openStatus=!t,e.$message.success("更新状态成功")):e.$message.error(a.code+":"+a.message)},function(t){e.socketStatusLoading=!1,t&&e.$message.error(qo()(t))})}}}},If={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"developer-log"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[null!==e.chatStatusInfo?a("span",{staticStyle:{"margin-right":"10px"}},[a("b",[e._v("聊天室：")]),e._v(e._s(e.chatStatusInfo.openStatus?"上线":"下线")+"\n      ")]):e._e(),e._v(" "),null!==e.chatStatusInfo?a("el-popover",{attrs:{placement:"left"},model:{value:e.chatStatusPop,callback:function(t){e.chatStatusPop=t},expression:"chatStatusPop"}},[a("p",[e._v("确定"+e._s(e.chatStatusInfo.openStatus?"下线":"上线")+"聊天室？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.chatStatusPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:e.chatStatusLoading},on:{click:e.switchChatStatus}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",size:"mini"},slot:"reference"},[e._v(e._s(e.chatStatusInfo.openStatus?"下线":"上线"))])],1):e._e(),e._v(" "),null!==e.socketStatusInfo?a("span",{staticStyle:{"margin-right":"10px"}},[a("b",[e._v("socket推送：")]),e._v(e._s(e.socketStatusInfo.openStatus?"上线":"下线")+"\n      ")]):e._e(),e._v(" "),null!==e.socketStatusInfo?a("el-popover",{attrs:{placement:"left"},model:{value:e.socketStatusPop,callback:function(t){e.socketStatusPop=t},expression:"socketStatusPop"}},[a("p",[e._v("确定"+e._s(e.socketStatusInfo.openStatus?"下线":"上线")+"推送？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.socketStatusPop=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:e.socketStatusLoading},on:{click:e.switchSocketStatus}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",size:"mini"},slot:"reference"},[e._v(e._s(e.socketStatusInfo.openStatus?"下线":"上线"))])],1):e._e(),e._v(" "),a("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini"},model:{value:e.sidByAccessId,callback:function(t){e.sidByAccessId=t},expression:"sidByAccessId"}},[a("el-option",{attrs:{label:"请选择实例",value:-1}}),e._v(" "),e._l(e.accessList,function(e){return a("el-option",{key:e.accessId,attrs:{label:"实例"+e.accessId,value:e.accessId}})})],2),e._v(" "),a("el-input",{staticStyle:{width:"auto"},attrs:{placeholder:"请输入SID",clearable:"",size:"mini"},model:{value:e.sidTemp,callback:function(t){e.sidTemp=t},expression:"sidTemp"}}),e._v(" "),a("el-button-group",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:function(t){return e.sidSearch()}}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.sidDel()}}})],1)],1)]),e._v(" "),a("el-tabs",{attrs:{"tab-position":"left"}},e._l(e.accessList,function(t,i){return a("el-tab-pane",{key:i},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(e._s("实例"+t.accessId+" - "+(t.accessOpen?"开":"关")))]),e._v(" "),a("el-form",{attrs:{inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"地址:"}},[a("span",[e._v(e._s(t.serverAddr))])]),e._v(" "),a("el-form-item",{attrs:{label:"总链接数:"}},[a("span",[e._v(e._s(t.status&&t.status.instanceConnCount))])])],1),e._v(" "),t.dispatchCount&&t.pubCount?a("table",{staticClass:"ws-msg-count-table"},[a("thead",[a("tr",[a("th",{attrs:{rowspan:"2"}},[e._v("类型")]),a("th",{attrs:{rowspan:"2"}},[e._v("总数")]),a("th",{attrs:{colspan:"4"}},[e._v("吞吐量(个)")])]),e._v(" "),a("tr",[a("th",[e._v("1分钟")]),a("th",[e._v("5分钟")]),a("th",[e._v("15分钟")]),a("th",[e._v("平均")])])]),e._v(" "),a("tbody",[t.dispatchCount?a("tr",[a("td",[e._v("消息下发")]),e._v(" "),a("td",[e._v(e._s(t.dispatchCount.count))]),e._v(" "),a("td",[e._v(e._s(t.dispatchCount.oneMinuteRate))]),e._v(" "),a("td",[e._v(e._s(t.dispatchCount.fiveMinuteRate))]),e._v(" "),a("td",[e._v(e._s(t.dispatchCount.fifteenMinuteRate))]),e._v(" "),a("td",[e._v(e._s(t.dispatchCount.meanRate))])]):e._e(),e._v(" "),t.pubCount?a("tr",[a("td",[e._v("消息新增")]),e._v(" "),a("td",[e._v(e._s(t.pubCount.count))]),e._v(" "),a("td",[e._v(e._s(t.pubCount.oneMinuteRate))]),e._v(" "),a("td",[e._v(e._s(t.pubCount.fiveMinuteRate))]),e._v(" "),a("td",[e._v(e._s(t.pubCount.fifteenMinuteRate))]),e._v(" "),a("td",[e._v(e._s(t.pubCount.meanRate))])]):e._e()])]):e._e(),e._v(" "),t.status&&t.status.mqStatusInfoVoList?a("el-row",{attrs:{gutter:"8"}},e._l(t.status.mqStatusInfoVoList,function(i,r){return a("el-col",{key:r,staticStyle:{"margin-bottom":"10px"},attrs:{span:"12",sm:{span:12},lg:{span:8},xl:{span:6}}},[a("el-card",{attrs:{shadow:"never","body-style":{padding:"8px",fontSize:"12px"}}},[a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("el-col",{attrs:{span:10}},[a("b",{staticClass:"text-red",staticStyle:{"font-size":"14px"}},[e._v(e._s(i.mqName))])]),e._v(" "),a("el-col",{attrs:{span:14}},[e._v("总订阅数: "+e._s(i.allConnCount)+"、Channel数: "+e._s(i.channelCount))])],1),e._v(" "),a("el-table",{attrs:{size:"mini",data:i.channelList,height:"300"}},[a("el-table-column",{attrs:{prop:"channelName",label:"channelName"}}),e._v(" "),a("el-table-column",{attrs:{prop:"subCount",label:"订阅数",width:"100",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{width:"60",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(r){return[a("el-button",{attrs:{slot:"reference",type:"text",size:"mini"},on:{click:function(a){return e.delChannel(i.channelList,r.row,t.accessId)}},slot:"reference"},[e._v("删除")])]}}],null,!0)})],1)],1)],1)}),1):e._e()],1)}),1),e._v(" "),a("el-dialog",{attrs:{title:"SID搜索",visible:e.dialogSid,width:"500px",center:""},on:{"update:visible":function(t){e.dialogSid=t}}},[e.sidForm?a("el-form",{attrs:{"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:"SID:"}},[a("span",[e._v(e._s(e.sidForm.clientId))])]),e._v(" "),a("el-form-item",{attrs:{label:"地址:"}},[a("span",[e._v(e._s(e.sidForm.clientAddress))])]),e._v(" "),e._l(e.sidForm.subMqInfo,function(t,i){return a("el-form-item",{key:i,attrs:{label:i+":"}},e._l(t,function(t,i){return a("span",{key:t},[e._v(e._s(0===i?"":"、")+e._s(t))])}),0)})],2):e._e()],1)],1)},staticRenderFns:[]};var xf=a("VU/8")(Tf,If,!1,function(e){a("RRzt")},null,null).exports,kf={name:"StatisticsVip",data:function(){return{count:{0:{vip:null,loading:!1},1:{vip:null,loading:!1}}}},methods:{getVipCount:function(e){var t=this;this.count[e].loading||(this.count[e].loading=!0,this.$service(Uo,{params:{freeType:e}}).then(function(a){200===a.code?t.count[e].vip=a.data.userCount:t.$message.error(a.message)}).catch(function(e){e&&t.$message.error(qo()(e))}).finally(function(){t.count[e].loading=!1}))}}},$f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"statistics-journal"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1)]),e._v(" "),a("el-form",{attrs:{inline:!0,size:"mini"}},[null!==e.count[0].vip?a("el-form-item",{attrs:{label:"VIP用户统计数"}},[a("span",[e._v(e._s(e.count[0].vip))])]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{size:"mini",type:"primary",loading:e.count[0].loading},on:{click:function(t){return e.getVipCount(0)}}},[e._v("获取VIP用户数")])],1),e._v(" "),null!==e.count[1].vip?a("el-form-item",{attrs:{label:"VIP免费试用用户统计数"}},[a("span",[e._v(e._s(e.count[1].vip))])]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{size:"mini",type:"primary",loading:e.count[1].loading},on:{click:function(t){return e.getVipCount(1)}}},[e._v("获取VIP免费试用用户数")])],1)],1)],1)},staticRenderFns:[]},Cf=a("VU/8")(kf,$f,!1,null,null,null).exports,Sf={name:"DeveloperManage",data:function(){return{pollingStatus:{loading:!1},chatStatus:{loading:!1},socketStatus:{loading:!1},socketIMStatus:{loading:!1},ZCCBAStatus:{loading:!1}}},created:function(){this.getStatus("polling"),this.getStatus("chat"),this.getStatus("socket"),this.getStatus("im"),this.getStatus("zc")},methods:{getStatus:function(e){var t=this,a=this.getObj(e),i=a.obj,r=a.first,o=a.second,n={};r&&(n.firstLevelType=r),o&&(n.secondLevelType=o),this.$service(w,{params:n}).then(function(e){if(200===e.code){var a=!1;"object"===Qo()(e.data)?void 0!==e.data.openStatus&&(a=e.data.openStatus):a=e.data,t.$set(i,"openStatus",a)}})},statusUpdate:function(e){var t=this,a=this.getObj(e),i=a.obj,r=a.first,o=a.second;if(!i.loading){i.loading=!0;var n=i.openStatus,s={openStatus:n?0:1};r&&(s.firstLevelType=r),o&&(s.secondLevelType=o),this.$service(T,{method:"post",data:s}).then(function(e){200===e.code?(i.openStatus=!n,t.$message.success("更新成功")):t.$message.error(e.message)}).catch(function(e){e&&t.$message.error(qo()(e))}).finally(function(){i.loading=!1})}},getObj:function(e){var t=null,a=null,i=null;switch(e){case"polling":t=this.pollingStatus,a="PUSH_ACCESS",i="polling";break;case"chat":t=this.chatStatus,a="CHAT";break;case"socket":t=this.socketStatus,a="PUSH_ACCESS";break;case"im":t=this.socketIMStatus,a="PUSH_ACCESS",i="vip_key";break;case"zc":t=this.ZCCBAStatus,a="LEAGUE_MATCH_CMS_DOC"}return{obj:t,first:a,second:i}}}},Lf={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"statistics-journal"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title))])})],2)],1)]),e._v(" "),void 0!==e.pollingStatus.openStatus?a("el-form",{attrs:{inline:!0,size:"mini"}},[a("el-form-item",[a("span",[e._v("客户端轮询状态: "+e._s(e.pollingStatus.openStatus?"打开":"关闭"))])]),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"primary",loading:e.pollingStatus.loading},on:{click:function(t){return e.statusUpdate("polling")}}},[e._v(e._s(e.pollingStatus.openStatus?"关闭":"打开"))])],1)],1):e._e(),e._v(" "),a("el-form",{attrs:{inline:!0,size:"mini"}},[void 0!==e.chatStatus.openStatus?a("el-form-item",[a("span",{staticStyle:{"margin-right":"10px"}},[e._v("\n        红彩-聊天室："+e._s(e.chatStatus.openStatus?"上线":"下线")+"\n      ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:e.chatStatus.loading},on:{click:function(t){return e.statusUpdate("chat")}}},[e._v(e._s(e.chatStatus.openStatus?"下线":"上线"))])],1):e._e(),e._v(" "),void 0!==e.socketStatus.openStatus?a("el-form-item",[a("span",{staticStyle:{"margin-right":"10px"}},[e._v("\n        红彩-socket推送："+e._s(e.socketStatus.openStatus?"上线":"下线")+"\n      ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:e.socketStatus.loading},on:{click:function(t){return e.statusUpdate("socket")}}},[e._v(e._s(e.socketStatus.openStatus?"下线":"上线"))])],1):e._e(),e._v(" "),void 0!==e.socketIMStatus.openStatus?a("el-form-item",[a("span",{staticStyle:{"margin-right":"10px"}},[e._v("\n        红彩-客服socket推送："+e._s(e.socketIMStatus.openStatus?"上线":"下线")+"\n      ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:e.socketIMStatus.loading},on:{click:function(t){return e.statusUpdate("im")}}},[e._v(e._s(e.socketIMStatus.openStatus?"下线":"上线"))])],1):e._e()],1),e._v(" "),void 0!==e.ZCCBAStatus.openStatus?a("el-form",{attrs:{inline:!0,size:"mini"}},[a("el-form-item",[a("span",[e._v("中超/CBA免费资讯展示: "+e._s(e.ZCCBAStatus.openStatus?"打开":"关闭"))])]),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"primary",loading:e.ZCCBAStatus.loading},on:{click:function(t){return e.statusUpdate("zc")}}},[e._v(e._s(e.ZCCBAStatus.openStatus?"关闭":"打开"))])],1)],1):e._e()],1)},staticRenderFns:[]},Df=a("VU/8")(Sf,Lf,!1,null,null,null).exports,Pf={name:"offline",data:function(){return{activeTab:0,loading:!1,expands:[],list:[],offset:0,limit:20,total:1,tableHeight:null,dialogFormVisible:!1,urlDisable:!1,form:{name:"",url:"",zipUrl:"",md5:"",apiList:"",mark:"",codeVersion:"",version:""},formRules:{name:[{required:!0,message:"名称必填",trigger:"blur"}],url:[{required:!0,type:"url",message:"请输入正确的链接",trigger:"blur"}],zipUrl:[{required:!0,type:"url",message:"请输入正确的链接",trigger:"blur"}],md5:[{required:!0,message:"必填",trigger:"blur"}]},apkUrl:null,updateLoading:!1}},computed:u()({},Object(sn.d)(["windowHeight"])),created:function(){this.getList(),this.setHeight()},methods:{setHeight:function(){var e=this;this.$nextTick(function(){e.tableHeight=e.windowHeight-e.$refs.elTable.$el.offsetTop-63})},getRowKeys:function(e){return e.versionKey},handleClickTabs:function(){this.pageIndex=1,this.pageCount=1,this.list=[],this.getList()},getList:function(e){var t=this;this.loading||(this.loading=!0,this.offset=e?(e-1)*this.limit:0,this.$service(Fo,{params:{appId:this.activeTab,offset:this.offset,limit:this.limit}}).then(function(e){t.loading=!1,200===e.code?(t.list=e.data.data||[],t.total=e.data.total,t.$refs.elTable.bodyWrapper.scrollTop=0):t.$message.error(e.code+":"+e.message)},function(e){t.$message.error(qo()(e))}))},offlineChange:function(e,t){var a=this;e.loading=!0;var i="";i="on"===t?Eo:Ro,"on"===t?e.isShowOn=!1:e.isShowDelete=!1,this.$service(i,{method:"post",data:{paramId:e.paramId}}).then(function(i){if(e.loading=!1,200===i.code){var r="";r="on"===t?"上线成功":"下线成功",a.$message.success(r),a.rollback(e),a.getList(Math.floor(a.offset/a.limit)+1,!0)}else a.$message.error(i.code+":"+i.message)},function(t){e.loading=!1,a.$message.error(qo()(t))})},rollback:function(e){var t=this;console.log(e),this.$service(Oo,{method:"post",data:{url:e.url,appId:this.activeTab}}).then(function(a){e.loading=!1,200===a.code?(t.$set(e,"historyList",a.data),e.isShowRollback=!1):t.$message.error(a.code+":"+a.message)},function(a){e.loading=!1,t.$message.error(qo()(a))})},copyData:function(e){var t=this;this.form={name:e.name,url:e.url,zipUrl:e.zipUrl,apiList:e.apiList,version:e.version},this.dialogFormVisible=!0,this.urlDisable=!0,this.$nextTick(function(){t.$refs.form.clearValidate()})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(t.updateLoading)return;t.updateLoading=!0;var a=[];(a=t.form).appId=t.activeTab,t.$service(No,{method:"post",data:a}).then(function(e){t.updateLoading=!1,200===e.code?(t.dialogFormVisible=!1,t.urlDisable=!1,t.getList()):t.$message.error(e.code+":"+e.message)},function(e){t.updateLoading=!1,t.$message.error(qo()(e))})}})}},watch:{windowHeight:function(){this.setHeight()}}},zf={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"channel-promotion"},[a("div",{staticClass:"nav-tools"},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.matched,function(t,i){return a("el-breadcrumb-item",{key:i},[e._v(e._s(t.meta.title)+"\n        ")])})],2)],1),e._v(" "),a("div",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.dialogFormVisible=!0,e.form={},e.urlDisable=!1}}},[e._v("新建")])],1)]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClickTabs},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"红彩",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"精准比分",name:"1"}})],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"elTable",attrs:{data:e.list,stripe:"","max-height":e.tableHeight<400?400:e.tableHeight}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-table",{attrs:{"show-header":!1,data:t.row.historyList}},[a("el-table-column",{attrs:{prop:" name",label:"名称","min-width":"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"url",label:"页面地址","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"zipUrl",label:"zip包地址","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"md5",label:"md5","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{label:"更新时间",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n            ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态","min-width":"40"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(0===t.row.status?"下线":"上线")+"\n            ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"version",label:"版本","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.version)+"\n            ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"left"},model:{value:t.row.isShowOn,callback:function(a){e.$set(t.row,"isShowOn",a)},expression:"scope.row.isShowOn"}},[a("p",[e._v("上线")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.isShowOn=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.offlineChange(t.row,"on")}}},[e._v("\n                    确定\n                  ")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:t.row.isMajor?"":"primary",size:"small"},slot:"reference"},[e._v("上线")])],1)]}}],null,!0)})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称","min-width":"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"url",label:"页面地址","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"zipUrl",label:"zip包地址","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"md5",label:"md5","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{label:"更新时间",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")([t.row.createTime,"yyyy-MM-dd hh:mm:ss"]))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态","min-width":"40"}}),e._v(" "),a("el-table-column",{attrs:{label:"版本","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"left"},model:{value:t.row.isShowRollback,callback:function(a){e.$set(t.row,"isShowRollback",a)},expression:"scope.row.isShowRollback"}},[a("p",[e._v("回滚")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.isShowRollback=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.rollback(t.row)}}},[e._v("确定\n            ")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",size:"small"},on:{click:function(e){t.row.isShowRollback=!0}},slot:"reference"},[e._v("回滚\n          ")])],1),e._v(" "),t.row.zipUrl?a("el-popover",{attrs:{placement:"left"},model:{value:t.row.isShowDelete,callback:function(a){e.$set(t.row,"isShowDelete",a)},expression:"scope.row.isShowDelete"}},[a("p",[e._v("下线")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.isShowDelete=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.row.loading},on:{click:function(a){return e.offlineChange(t.row,"off")}}},[e._v("确定\n            ")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",size:"small"},slot:"reference"},[e._v("下线")])],1):e._e(),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.copyData(t.row)}}},[e._v("拷贝")])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"page-bar-reset",attrs:{background:"",layout:"prev, pager, next","current-page":Math.floor(e.offset/e.limit)+1,total:e.total,"page-size":e.limit},on:{"current-change":e.getList,"update:currentPage":function(t){e.$set(Math,"floor(offset/limit) + 1",t)},"update:current-page":function(t){e.$set(Math,"floor(offset/limit) + 1",t)}}}),e._v(" "),a("el-dialog",{attrs:{title:"新增离线配置","close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,disabled:e.updateLoading,"label-width":"110px",size:"small"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"url",prop:"url"}},[a("el-input",{attrs:{autocomplete:"off",disabled:e.urlDisable},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"zipUrl",prop:"zipUrl"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.zipUrl,callback:function(t){e.$set(e.form,"zipUrl",t)},expression:"form.zipUrl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"md5",prop:"md5"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.md5,callback:function(t){e.$set(e.form,"md5",t)},expression:"form.md5"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"mark"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.mark,callback:function(t){e.$set(e.form,"mark",t)},expression:"form.mark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"apiList",prop:"apiList"}},[a("el-input",{attrs:{autosize:{minRows:2,maxRows:6},autocomplete:"off",type:"textarea"},model:{value:e.form.apiList,callback:function(t){e.$set(e.form,"apiList",t)},expression:"form.apiList"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"版本",prop:"version"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.version,callback:function(t){e.$set(e.form,"version",t)},expression:"form.version"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"codeVersion",prop:"codeVersion"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},autocomplete:"off"},model:{value:e.form.codeVersion,callback:function(t){e.$set(e.form,"codeVersion",t)},expression:"form.codeVersion"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.updateLoading},on:{click:function(t){return e.submitForm("form")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},Hf=a("VU/8")(Pf,zf,!1,null,null,null).exports;s.a.use(nn.a);var Mf=[{path:"*",name:"Error",component:hn,meta:{title:"404",navShow:!1}},{path:"/401",name:"Forbidden",component:vn,meta:{title:"401",navShow:!1}},{path:"/",name:"home",redirect:"/article/quizlist",meta:{title:"首页",navShow:!1}},{path:"/article",name:"Article",component:pn,redirect:"/article/quizlist",meta:{title:"文章管理",roles:[33,34,35,36,38,40],keepAlive:!0,navShow:!0},children:[{path:"quizlist",name:"ArticleQuizList",component:yn,meta:{title:"竞彩文章",roles:[33,34,35,36,38,40],keepAlive:!0,navShow:!0}},{path:"numlotterylist",name:"ArticleNumLotteryList",component:Kn,meta:{title:"数字彩文章",roles:[33,34,35,36,38,40],keepAlive:!0,navShow:!0}},{path:"reviewlist",name:"ArticleReviewList",component:mc,meta:{title:"复盘文章",roles:[33,34,35,36,38,40],keepAlive:!0,navShow:!0}},{path:"threadlist",name:"ArticleThreadList",component:hc,meta:{title:"普通文章",roles:[33,34,35,36,38,40],keepAlive:!0,navShow:!0}},{path:"quizdetail/:id",name:"ArticleQuizDetail",component:Wn,meta:{title:"文章详情",roles:[33,34,35,36,38,40]}}]},{path:"/heade",name:"Head",component:pn,meta:{title:"头图&弹框",roles:[33,34,35,36,38,40],keepAlive:!0,navShow:!0},children:[{path:"slideshow",name:"HeadSlideShow",component:Ql,meta:{title:"头图列表",roles:[33,34,35,36,38,40],keepAlive:!0,navShow:!0}},{path:"redrank",name:"HeadRedRank",component:pn,meta:{title:"红人榜管理",roles:[33,34,35,36,38,40],keepAlive:!0,navShow:!0},children:[{path:"list",name:"HeadRedRankList",component:Gl,meta:{title:"红人榜列表",roles:[33,34,35,36,38,40],keepAlive:!0,navShow:!0}},{path:"stat",name:"HeadRedRankStatistics",component:qp,meta:{title:"红人榜统计",roles:[33,34,35,36,38,40],keepAlive:!0,navShow:!0}}]},{path:"expertrecommend",name:"HeadExpertRecommend",component:Pp,meta:{title:"专家弹框",roles:[33,34,35,36,38,40],keepAlive:!0,navShow:!0}}]},{path:"/expert",name:"Expert",component:pn,redirect:"/expert/list",meta:{title:"专家管理",roles:[33,34,35,36,40],keepAlive:!0,navShow:!0},children:[{path:"list",name:"ExpertList",component:Nl,meta:{title:"专家列表",roles:[33,34,35,36,40],keepAlive:!0,navShow:!0}},{path:"question",name:"ExpertQuestion",component:Vl,meta:{title:"心愿卡管理",roles:[33,34,35,36,40],keepAlive:!0,navShow:!0}},{path:"detail/:id",name:"ExpertDetail",component:Ol,meta:{title:"专家详情",roles:[33,34,35,36,40]}}]},{path:"/match",name:"Match",component:pn,redirect:"/match/list",meta:{title:"赛事管理",roles:[33,34,35,36,40],keepAlive:!0,navShow:!0},children:[{path:"list",name:"MatchList",component:Kl,meta:{title:"赛事列表",roles:[33,34,35,36,40],keepAlive:!0,navShow:!0}},{path:"binding",name:"MatchBinding",component:ic,meta:{title:"新旧赛事匹配",roles:[33,34,35,36,40],keepAlive:!0,navShow:!0}},{path:":id",name:"MatchDetail",component:ec,meta:{title:"赛事详情",roles:[33,34,35,36,40]}},{path:"/recommend",name:"MatchRecommend",component:of,meta:{title:"首页赛事推荐配置",roles:[33,34,35,36,40],keepAlive:!0,navShow:!0}}]},{path:"/numlottery",name:"NumLottery",component:cc,meta:{title:"数字彩管理",roles:[33,34,35,36,40],keepAlive:!0,navShow:!0}},{path:"/chatroom",name:"Chatroom",component:pn,meta:{title:"聊天室管理",roles:[33,34,35,36,40],keepAlive:!0,navShow:!0},children:[{path:"statistics",name:"ChatroomStatistics",component:Yp,meta:{title:"数据统计",roles:[33,34,35,36,40],navShow:!0}},{path:"notice",name:"ChatroomNotice",component:Jp,meta:{title:"聊天室通知",roles:[33,34,35,36,40],navShow:!0}},{path:"expert",name:"ChatroomExpert",component:tf,meta:{title:"驻场专家",roles:[33,34,35,36,40],navShow:!0}},{path:"banned",name:"ChatroomBanned",component:wf,meta:{title:"广告快速封禁",roles:[33,34,35,36,40],navShow:!0}}]},{path:"/tcmmatch",name:"TcmMatch",component:Bd,meta:{title:"竞猜赛事管理",roles:[33,34,35,36,40],keepAlive:!0,navShow:!0}},{path:"/tcmmatch/:id",name:"TcmMatchDetail",component:Xd,meta:{title:"竞猜赛事详情",roles:[33,34,35,36,40]}},{path:"/push",name:"Push",component:bc,meta:{title:"Push管理",roles:[33,34,35,36,40],keepAlive:!0,navShow:!0}},{path:"/finance",name:"Finance",component:pn,meta:{title:"财务管理",roles:[33,34,35,36,37,39],keepAlive:!0,navShow:!0},children:[{path:"recharge",name:"FinanceRecharge",component:Vc,meta:{title:"红豆新增",roles:[33,34,35,36,37,39],keepAlive:!0,navShow:!0}},{path:"oncePurchase",name:"FinanceOncePurchase",component:Qc,meta:{title:"一次性消耗",roles:[33,34,35,36,37,39],keepAlive:!0,navShow:!0}},{path:"expertIncome",name:"FinanceExpertIncome",component:Gc,meta:{title:"专家净收入",roles:[33,34,35,36,39],keepAlive:!0,navShow:!0}},{path:"expertProtocol",name:"FinanceExpertProtocol",component:Kc,meta:{title:"专家协议详情",roles:[33,34,35,36,39],keepAlive:!0,navShow:!0}},{path:"monthlyOfSp",name:"FinanceMonthlyOfSp",component:td,meta:{title:"包月消耗",roles:[33,34,35,36,37,39],keepAlive:!0,navShow:!0}},{path:"monthlyConfirmedOfSp",name:"FinanceMonthlyConfirmedOfSp",component:od,meta:{title:"包月可确认消耗",roles:[33,34,35,36,37,39],keepAlive:!0,navShow:!0}},{path:"pointCardAdd",name:"FinancePointCardAdd",component:ld,meta:{title:"点卡新增",roles:[33,34,35,36,37,39],keepAlive:!0,navShow:!0}},{path:"pointCardConfirmed",name:"FinancePointCardConfirmed",component:ud,meta:{title:"点卡消耗",roles:[33,34,35,36,37,39],keepAlive:!0,navShow:!0}},{path:"pointConfirmed",name:"FinancePointConfirmed",component:fd,meta:{title:"点数消耗",roles:[33,34,35,36,37,39],keepAlive:!0,navShow:!0}},{path:"tcmConsum",name:"FinanceTcmConsum",component:vd,meta:{title:"竞猜消耗",roles:[33,34,35,36,37,39],keepAlive:!0,navShow:!0}},{path:"cpsorderdetail",name:"FinanceCpsOrderDetail",component:hf,meta:{title:"红彩推手订单明细",roles:[33,34,35,36,37,39],keepAlive:!0,navShow:!0}}]},{path:"/order",name:"Order",component:pn,meta:{title:"订单管理",roles:[33,34,35,36,37,39,40],keepAlive:!0,navShow:!0},children:[{path:"rechargelist",name:"OrderRechargeList",component:bl,meta:{title:"充值订单管理",roles:[33,34,35,36,37,40],keepAlive:!0,navShow:!0}},{path:"recharge/:id/:source",name:"OrderRechargeDetail",component:wl,props:!0,meta:{title:"充值订单详情",roles:[33,34,35,36,37,40],navShow:!1}},{path:"iphone",name:"OrderIphone",component:il,meta:{title:"苹果调单管理",roles:[33,34,35,36,37,39,40],keepAlive:!0,navShow:!0}},{path:"productlist",name:"OrderProductList",component:ml,meta:{title:"商品订单管理",roles:[33,34,35,36,37,40],keepAlive:!0,navShow:!0}},{path:"product/:jzbf/:id/:appId/:type",name:"OrderProductDetail",component:hl,props:!0,meta:{title:"商品订单详情",roles:[33,34,35,36,37,40]}},{path:"paymentlist",name:"OrderPaymentList",component:nl,meta:{title:"支付订单管理",roles:[33,34,35,36,37,40],keepAlive:!0,navShow:!0}},{path:"payment/:id/:source",name:"OrderPaymentDetail",component:cl,props:!0,meta:{title:"支付订单详情",roles:[33,34,35,36,37,40]}},{path:"tcmlist",name:"OrderTcmOrderList",component:xl,meta:{title:"竞猜订单管理",roles:[33,34,35,36,37,40],keepAlive:!0,navShow:!0}},{path:"tcm/:id",name:"OrderTcmOrderDetail",component:Cl,props:!0,meta:{title:"TCM订单详情",roles:[33,34,35,36,37,40],navShow:!1}},{path:"quiz/:id",name:"OrderQuizOrderDetail",component:Dl,props:!0,meta:{title:"拉新活动订单详情",roles:[33,34,35,36,37,40],navShow:!1}}]},{path:"/tcmdetai",name:"TcmDetail",component:pn,meta:{title:"积分/N币明细",roles:[33,34,35,36,39,40],keepAlive:!0,navShow:!0},children:[{path:"creditadd",name:"TcmDetailCreditAdd",component:yd,meta:{title:"积分新增",roles:[33,34,35,36,39,40],keepAlive:!0,navShow:!0}},{path:"creditconsume",name:"TcmDetailCreditConsume",component:Id,meta:{title:"积分消耗",roles:[33,34,35,36,39,40],keepAlive:!0,navShow:!0}},{path:"nadd",name:"TcmDetailNadd",component:$d,meta:{title:"N币新增",roles:[33,34,35,36,39,40],keepAlive:!0,navShow:!0}},{path:"nconsume",name:"TcmDetailNConsume",component:Ld,meta:{title:"N币消耗",roles:[33,34,35,36,40],keepAlive:!0,navShow:!0}}]},{path:"/appleflow",name:"AppleFlow",component:Tu,meta:{title:"人工掉单流程",roles:[33,34,35,36,40],keepAlive:!0,navShow:!0}},{path:"/price",name:"Price",component:pn,meta:{title:"价格管理",roles:[33,34,35,36,40],keepAlive:!0,navShow:!0},children:[{path:"recharge",name:"PriceRecharge",component:wc,meta:{title:"充值价格",roles:[33,34,35,36,40],keepAlive:!0,navShow:!0}},{path:"product",name:"PriceProduct",component:Oc,meta:{title:"商品价格",roles:[33,34,35,36,40],keepAlive:!0,navShow:!0}}]},{path:"/coupon",name:"Coupon",component:pn,meta:{title:"优惠券管理",roles:[33,34,35,36,37,38,40],keepAlive:!0,navShow:!0},children:[{path:"package",name:"CouponPackage",component:gp,meta:{title:"优惠券组合",roles:[33,34,35,36,37,38,40],keepAlive:!0,navShow:!0}},{path:"category",name:"CouponCategory",component:_p,meta:{title:"优惠券类别",roles:[33,34,35,36,37,38,40],keepAlive:!0,navShow:!0}},{path:"channel",name:"CouponChannel",component:Tp,meta:{title:"优惠券渠道",roles:[33,34,35,36,37,38,40],keepAlive:!0,navShow:!0}},{path:"detail/:id/:source",name:"CouponDetail",component:kp,meta:{title:"优惠券详情",roles:[33,34,35,36,37,38,40]}}]},{path:"/message",name:"Message",component:pn,meta:{title:"消息管理",roles:[33,34,35,36,37,40],keepAlive:!0,navShow:!0},children:[{path:"system",name:"MessageSystem",component:zd,meta:{title:"系统消息",roles:[33,34,35,36,37,40],keepAlive:!0,navShow:!0}},{path:"operating",name:"MessageOperating",component:Fd,meta:{title:"运营消息",roles:[33,34,35,36,37,40],keepAlive:!0,navShow:!0}},{path:"category",name:"MessageCategory",component:Rd,meta:{title:"消息类别",roles:[33,34,35,36,37,40],keepAlive:!0,navShow:!0}},{path:"condition",name:"MessageCondition",component:Ud,meta:{title:"触发条件",roles:[33,34,35,36,37,40],keepAlive:!0,navShow:!0}}]},{path:"/user",name:"User",component:pn,meta:{title:"用户模块",roles:[33,34,35,36,37,40],keepAlive:!0,navShow:!0},children:[{path:"list",name:"UserList",component:Ns,meta:{title:"用户列表",roles:[33,34,35,36,37,40],keepAlive:!0,navShow:!0}},{path:"detail/:id/:source",name:"UserDetail",component:Ks,meta:{title:"用户详情",roles:[33,34,35,36,37,40],navShow:!1},props:!0},{path:"account",name:"UserAccount",component:el,meta:{title:"手机绑定-解绑",roles:[33,34,35,36,37,40],keepAlive:!0,navShow:!0}},{path:"blacklist",name:"UserBlacnklist",component:jd,meta:{title:"黑名单列表",roles:[33,34,35,36,37,40],keepAlive:!0,navShow:!0}}]},{path:"/activity",name:"Activity",component:pn,meta:{title:"活动管理",roles:[33,34,35,36,37,39,40],keepAlive:!0,navShow:!0},children:[{path:"tcmmalllist",name:"ActivityTcmMallList",component:Nu,meta:{title:"竞猜奖品管理",roles:[33,34,35,36,37,40],keepAlive:!0,navShow:!0}},{path:"tcmmallorder",name:"ActivityTcmMallOrder",component:Ru,meta:{title:"竞猜兑奖订单",roles:[33,34,35,36,37,39,40],keepAlive:!0,navShow:!0}},{path:"quizfornew",name:"ActivityQuizForNew",component:Uu,meta:{title:"拉新竞猜活动",roles:[33,34,35,36,37,40],keepAlive:!0,navShow:!0}},{path:"app",name:"ActivityApp",component:ju,meta:{title:"客户端活动广场",roles:[33,34,35,36,37,40],keepAlive:!0,navShow:!0}},{path:"wap",name:"ActivityWap",component:Bu,meta:{title:"WAP活动",roles:[33,34,35,36,37,40],keepAlive:!0,navShow:!0}},{path:"freethread",name:"ActivityFreeThread",component:Xu,meta:{title:"免费方案",roles:[33,34,35,36,40],keepAlive:!0,navShow:!0}},{path:"invitation",name:"ActivityInvitation",component:Sp,meta:{title:"邀请码拉新",roles:[33,34,35,36,37,40],keepAlive:!0,navShow:!0}},{path:"presentation",name:"ActivityPresentation",component:Mp,meta:{title:"买X增N活动",roles:[33,34,35,36,37,40],keepAlive:!0,navShow:!0}},{path:"pushhands",name:"ActivityPushHands",component:Ep,meta:{title:"推手计划",roles:[33,34,35,36,37,40],keepAlive:!0,navShow:!0}},{path:"lotterypush",name:"ActivityLotteryPush",component:Ap,meta:{title:"彩票店地推",roles:[33,34,35,36,37,40],keepAlive:!0,navShow:!0}},{path:"darwlottery",name:"ActivityDrawLottery",component:cf,meta:{title:"聊天室转盘抽奖",roles:[33,34,35,36,37,40],keepAlive:!0,navShow:!0}},{path:"advertise",name:"Advertise",component:mf,meta:{title:"首页信息流广告",roles:[33,34,35,36,37,40],keepAlive:!0,navShow:!0}}]},{path:"/statistics",name:"Statistics",component:pn,meta:{title:"数据统计",roles:[33,34,35,36,37,38],keepAlive:!0,navShow:!0},children:[{path:"consumer",name:"StatisticsConsumer",component:vm,meta:{title:"消费统计",roles:[33,34,35,38],keepAlive:!0,navShow:!0}},{path:"recharge",name:"StatisticsRecharge",component:rp,meta:{title:"充值统计",roles:[33,34,35,36],keepAlive:!0,navShow:!0}},{path:"expert",name:"StatisticsExpert",component:zm,meta:{title:"专家统计",roles:[33,34,35,36],keepAlive:!0,navShow:!0}},{path:"product",name:"StatisticsProduct",component:Gm,meta:{title:"付费服务统计",roles:[33,34,35,36,37],keepAlive:!0,navShow:!0}},{path:"journal",name:"StatisticsJournal",component:Fm,meta:{title:"月流水报表",roles:[33,34,35,36,37,38],keepAlive:!0,navShow:!0}},{path:"vip",name:"StatisticsVip",component:Cf,meta:{title:"VIP统计",roles:[33,34,35,36,37,38],keepAlive:!0,navShow:!0}}]},{path:"/auth",name:"Auth",component:pn,meta:{title:"权限管理",roles:[33,34,37],keepAlive:!0,navShow:!0},children:[{path:"users",name:"AuthUsers",component:ns,meta:{title:"用户管理",roles:[33],keepAlive:!0,navShow:!0}},{path:"roles",name:"AuthRoles",component:is,meta:{title:"角色管理",roles:[33,34,37],keepAlive:!0,navShow:!0}},{path:"api",name:"AuthApi",component:es,meta:{title:"资源管理",roles:[33,34,37],keepAlive:!0,navShow:!0}}]},{path:"/app",name:"App",component:pn,meta:{title:"版本维护",roles:[33,34,37,38],keepAlive:!0,navShow:!0},children:[{path:"version",name:"AppVersion",component:cs,meta:{title:"发布新版",roles:[33,34,37,38],keepAlive:!0,navShow:!0}},{path:"hotfix",name:"AppHotFix",component:ms,meta:{title:"热修复",roles:[33,34,37,38],keepAlive:!0,navShow:!0}},{path:"switch",name:"AppSwitch",component:bs,meta:{title:"开关控制",roles:[33,34,37],keepAlive:!0,navShow:!0}}]},{path:"/market",name:"Market",component:pn,meta:{title:"投放管理",roles:[33,34,37,38,40],keepAlive:!0,navShow:!0},children:[{path:"apk",name:"MarketApk",component:xs,meta:{title:"APK上传",roles:[33,34,37,38,40],keepAlive:!0,navShow:!0}},{path:"channelpromotion",name:"MarketChannelPromotion",component:Cs,meta:{title:"渠道推广管理",roles:[33,34,37,38,40],keepAlive:!0,navShow:!0}},{path:"shorturl",name:"MarketShortUrl",component:Ds,meta:{title:"iOS短链",roles:[33,34,37,38,40],keepAlive:!0,navShow:!0}},{path:"channelgroup",name:"MarketChannelGroup",component:ku,meta:{title:"渠道组管理",roles:[33,34,37,38,40],keepAlive:!0,navShow:!0}},{path:"wapcoupon",name:"MarketWapCoupon",component:Su,meta:{title:"WAP优惠券",roles:[33,34,37,38,40],keepAlive:!0,navShow:!0}},{path:"cooperationcompany",name:"MarketCooperationCompany",component:Pu,meta:{title:"合作公司配置",roles:[33,34,37,38,40],keepAlive:!0,navShow:!0}},{path:"cooperationapp",name:"MarketCooperationApp",component:Mu,meta:{title:"合作应用配置",roles:[33,34,37,38,40],keepAlive:!0,navShow:!0}}]},{path:"/developer",name:"Developer",component:pn,meta:{title:"开发者",roles:[24,33,34,35,36,37,40],keepAlive:!0,navShow:!0},children:[{path:"log",name:"DeveloperLog",component:ws,meta:{title:"日志查询",roles:[24],keepAlive:!0,navShow:!0}},{path:"ws",name:"DeveloperWSMonitoring",component:Wp,meta:{title:"WS监控",roles:[33,34],keepAlive:!0,navShow:!0}},{path:"ws-jzbf",name:"DeveloperWSMonitoringJZBF",component:xf,meta:{title:"WS监控-精准比分",roles:[33,34],keepAlive:!0,navShow:!0}},{path:"fix",name:"DeveloperFix",component:bf,meta:{title:"修复管理",roles:[33,34,35,36,37,40],keepAlive:!0,navShow:!0}},{path:"manage",name:"DeveloperManage",component:Df,meta:{title:"日常管理",roles:[33,34],keepAlive:!0,navShow:!0}},{path:"offline",name:"OffLine",component:Hf,meta:{title:"离线配置",roles:[33,34,35,36,37,40],keepAlive:!0,navShow:!0}}]}],Ff=new nn.a({routes:Mf});Ff.beforeEach(function(e,t,a){if(dn.state.userInfo)e.meta.roles?mh(e.meta.roles,dn.state.userInfo.roleList)?a():a({path:"/401"}):a();else{var i=l.Loading.service();dn.dispatch("getUserInfo").then(function(){mh(e.meta.roles,dn.state.userInfo.roleList)?a():a({path:"/401"}),i.close()},function(){i.close(),window.location.href=window.location.origin+m.login})}});var Nf=Ff,Ef={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8};function Rf(e){this.mode=Ef.MODE_8BIT_BYTE,this.data=e}Rf.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}};for(var Of=Rf,Af=0,Uf=1,Vf=2,qf=3,jf=4,Qf=5,Wf=6,Bf=7,Gf={glog:function(e){if(e<1)throw new Error("glog("+e+")");return Gf.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return Gf.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},Yf=0;Yf<8;Yf++)Gf.EXP_TABLE[Yf]=1<<Yf;for(var Xf=8;Xf<256;Xf++)Gf.EXP_TABLE[Xf]=Gf.EXP_TABLE[Xf-4]^Gf.EXP_TABLE[Xf-5]^Gf.EXP_TABLE[Xf-6]^Gf.EXP_TABLE[Xf-8];for(var Kf=0;Kf<255;Kf++)Gf.LOG_TABLE[Gf.EXP_TABLE[Kf]]=Kf;var Jf=Gf;function Zf(e,t){if(void 0===e.length)throw new Error(e.length+"/"+t);for(var a=0;a<e.length&&0===e[a];)a++;this.num=new Array(e.length-a+t);for(var i=0;i<e.length-a;i++)this.num[i]=e[i+a]}Zf.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),a=0;a<this.getLength();a++)for(var i=0;i<e.getLength();i++)t[a+i]^=Jf.gexp(Jf.glog(this.get(a))+Jf.glog(e.get(i)));return new Zf(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=Jf.glog(this.get(0))-Jf.glog(e.get(0)),a=new Array(this.getLength()),i=0;i<this.getLength();i++)a[i]=this.get(i);for(var r=0;r<e.getLength();r++)a[r]^=Jf.gexp(Jf.glog(e.get(r))+t);return new Zf(a,0).mod(e)}};var eh=Zf,th={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;this.getBCHDigit(t)-this.getBCHDigit(this.G15)>=0;)t^=this.G15<<this.getBCHDigit(t)-this.getBCHDigit(this.G15);return(e<<10|t)^this.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;this.getBCHDigit(t)-this.getBCHDigit(this.G18)>=0;)t^=this.G18<<this.getBCHDigit(t)-this.getBCHDigit(this.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!==e;)t++,e>>>=1;return t},getPatternPosition:function(e){return this.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,a){switch(e){case Af:return(t+a)%2==0;case Uf:return t%2==0;case Vf:return a%3==0;case qf:return(t+a)%3==0;case jf:return(Math.floor(t/2)+Math.floor(a/3))%2==0;case Qf:return t*a%2+t*a%3==0;case Wf:return(t*a%2+t*a%3)%2==0;case Bf:return(t*a%3+(t+a)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new eh([1],0),a=0;a<e;a++)t=t.multiply(new eh([1,Jf.gexp(a)],0));return t},getLengthInBits:function(e,t){if(t>=1&&t<10)switch(e){case Ef.MODE_NUMBER:return 10;case Ef.MODE_ALPHA_NUM:return 9;case Ef.MODE_8BIT_BYTE:case Ef.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case Ef.MODE_NUMBER:return 12;case Ef.MODE_ALPHA_NUM:return 11;case Ef.MODE_8BIT_BYTE:return 16;case Ef.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case Ef.MODE_NUMBER:return 14;case Ef.MODE_ALPHA_NUM:return 13;case Ef.MODE_8BIT_BYTE:return 16;case Ef.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),a=0,i=0;i<t;i++)for(var r=0;r<t;r++){for(var o=0,n=e.isDark(i,r),s=-1;s<=1;s++)if(!(i+s<0||t<=i+s))for(var l=-1;l<=1;l++)r+l<0||t<=r+l||0===s&&0===l||n===e.isDark(i+s,r+l)&&o++;o>5&&(a+=3+o-5)}for(var c=0;c<t-1;c++)for(var d=0;d<t-1;d++){var u=0;e.isDark(c,d)&&u++,e.isDark(c+1,d)&&u++,e.isDark(c,d+1)&&u++,e.isDark(c+1,d+1)&&u++,0!==u&&4!==u||(a+=3)}for(var m=0;m<t;m++)for(var p=0;p<t-6;p++)e.isDark(m,p)&&!e.isDark(m,p+1)&&e.isDark(m,p+2)&&e.isDark(m,p+3)&&e.isDark(m,p+4)&&!e.isDark(m,p+5)&&e.isDark(m,p+6)&&(a+=40);for(var f=0;f<t;f++)for(var h=0;h<t-6;h++)e.isDark(h,f)&&!e.isDark(h+1,f)&&e.isDark(h+2,f)&&e.isDark(h+3,f)&&e.isDark(h+4,f)&&!e.isDark(h+5,f)&&e.isDark(h+6,f)&&(a+=40);for(var g=0,v=0;v<t;v++)for(var b=0;b<t;b++)e.isDark(b,v)&&g++;return a+=10*(Math.abs(100*g/t/t-50)/5)}};function ah(){this.buffer=[],this.length=0}ah.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var a=0;a<t;a++)this.putBit(1==(e>>>t-a-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var ih=ah,rh=1,oh=0,nh=3,sh=2,lh={RS_BLOCK_TABLE:[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],getRSBlocks:function(e,t){var a=this.getRsBlockTable(e,t);if(void 0===a)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var i=a.length/3,r=[],o=0;o<i;o++)for(var n=a[3*o+0],s=a[3*o+1],l=a[3*o+2],c=0;c<n;c++)r.push({totalCount:s,dataCount:l});return r},getRsBlockTable:function(e,t){switch(t){case rh:return this.RS_BLOCK_TABLE[4*(e-1)+0];case oh:return this.RS_BLOCK_TABLE[4*(e-1)+1];case nh:return this.RS_BLOCK_TABLE[4*(e-1)+2];case sh:return this.RS_BLOCK_TABLE[4*(e-1)+3];default:return}}};function ch(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[],this.PAD0=236,this.PAD1=17}ch.prototype={addData:function(e){var t=new Of(e);this.dataList.push(t),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=lh.getRSBlocks(e,this.errorCorrectLevel),a=new ih,i=0,r=0;r<t.length;r++)i+=t[r].dataCount;for(var o=0;o<this.dataList.length;o++){var n=this.dataList[o];a.put(n.mode,4),a.put(n.getLength(),th.getLengthInBits(n.mode,e)),n.write(a)}if(a.getLengthInBits()<=8*i)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++){this.modules[a]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[a][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null===this.dataCache&&(this.dataCache=this.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var a=-1;a<=7;a++)if(!(e+a<=-1||this.moduleCount<=e+a))for(var i=-1;i<=7;i++)t+i<=-1||this.moduleCount<=t+i||(this.modules[e+a][t+i]=a>=0&&a<=6&&(0===i||6===i)||i>=0&&i<=6&&(0===a||6===a)||a>=2&&a<=4&&i>=2&&i<=4)},getBestMaskPattern:function(){for(var e=0,t=0,a=0;a<8;a++){this.makeImpl(!0,a);var i=th.getLostPoint(this);(0===a||e>i)&&(e=i,t=a)}return t},createMovieClip:function(e,t,a){var i=e.createEmptyMovieClip(t,a);this.make();for(var r=0;r<this.modules.length;r++)for(var o=1*r,n=0;n<this.modules[r].length;n++){var s=1*n;this.modules[r][n]&&(i.beginFill(0,100),i.moveTo(s,o),i.lineTo(s+1,o),i.lineTo(s+1,o+1),i.lineTo(s,o+1),i.endFill())}return i},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=th.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var a=0;a<e.length;a++){var i=e[t],r=e[a];if(null==this.modules[i][r])for(var o=-2;o<=2;o++)for(var n=-2;n<=2;n++)this.modules[i+o][r+n]=-2===o||2===o||-2===n||2===n||0===o&&0===n}},setupTypeNumber:function(e){for(var t=th.getBCHTypeNumber(this.typeNumber),a=0;a<18;a++){var i=!e&&1==(t>>a&1);this.modules[Math.floor(a/3)][a%3+this.moduleCount-8-3]=i}for(var r=0;r<18;r++){var o=!e&&1==(t>>r&1);this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=o}},setupTypeInfo:function(e,t){for(var a=this.errorCorrectLevel<<3|t,i=th.getBCHTypeInfo(a),r=0;r<15;r++){var o=!e&&1==(i>>r&1);r<6?this.modules[r][8]=o:r<8?this.modules[r+1][8]=o:this.modules[this.moduleCount-15+r][8]=o}for(var n=0;n<15;n++){var s=!e&&1==(i>>n&1);n<8?this.modules[8][this.moduleCount-n-1]=s:n<9?this.modules[8][15-n-1+1]=s:this.modules[8][15-n-1]=s}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var a=-1,i=this.moduleCount-1,r=7,o=0,n=this.moduleCount-1;n>0;n-=2)for(6===n&&n--;;){for(var s=0;s<2;s++)if(null===this.modules[i][n-s]){var l=!1;o<e.length&&(l=1==(e[o]>>>r&1)),th.getMask(t,i,n-s)&&(l=!l),this.modules[i][n-s]=l,-1===--r&&(o++,r=7)}if((i+=a)<0||this.moduleCount<=i){i-=a,a=-a;break}}},createData:function(e,t,a){for(var i=lh.getRSBlocks(e,t),r=new ih,o=0;o<a.length;o++){var n=a[o];r.put(n.mode,4),r.put(n.getLength(),th.getLengthInBits(n.mode,e)),n.write(r)}for(var s=0,l=0;l<i.length;l++)s+=i[l].dataCount;if(r.getLengthInBits()>8*s)throw new Error("code length overflow. ("+r.getLengthInBits()+">"+8*s+")");for(r.getLengthInBits()+4<=8*s&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(!1);for(;!(r.getLengthInBits()>=8*s||(r.put(this.PAD0,8),r.getLengthInBits()>=8*s));)r.put(this.PAD1,8);return this.createBytes(r,i)},createBytes:function(e,t){for(var a=0,i=0,r=0,o=new Array(t.length),n=new Array(t.length),s=0;s<t.length;s++){var l=t[s].dataCount,c=t[s].totalCount-l;i=Math.max(i,l),r=Math.max(r,c),o[s]=new Array(l);for(var d=0;d<o[s].length;d++)o[s][d]=255&e.buffer[d+a];a+=l;var u=th.getErrorCorrectPolynomial(c),m=new eh(o[s],u.getLength()-1).mod(u);n[s]=new Array(u.getLength()-1);for(var p=0;p<n[s].length;p++){var f=p+m.getLength()-n[s].length;n[s][p]=f>=0?m.get(f):0}}for(var h=0,g=0;g<t.length;g++)h+=t[g].totalCount;for(var v=new Array(h),b=0,_=0;_<i;_++)for(var y=0;y<t.length;y++)_<o[y].length&&(v[b++]=o[y][_]);for(var w=0;w<r;w++)for(var T=0;T<t.length;T++)w<n[T].length&&(v[b++]=n[T][w]);return v}};var dh=ch,uh=function(){return function e(t){if(!t||0===t.length)return[];var a=[];return t.map(function(t){t.meta&&t.meta.keepAlive&&a.push(t.name),t.children&&(a=[].concat(rn()(a),rn()(e(t.children))))}),a}(Mf)},mh=function(e,t){return!(!e||!t)&&!!e.filter(function(e){return t.includes(e)}).length},ph=function(e,t,a,i){if(!e||!on[e]||void 0===t)return"";var r=on[e];(0===i||i)&&r[i]&&(r=r[i]);var o=null;return r.forEach(function(e){parseInt(e.id)===parseInt(t)?o=e.name:e.type&&e.type===t&&(o=e.name)}),o||a||""},fh=function(e){return"number"==typeof e&&!isNaN(e)},hh=function(e,t){return function(a,i){var r=a[e],o=i[e];return fh(Number(r))||fh(Number(o))||(r=Number(r),o=Number(o)),t?r-o<0?1:r-o>0?-1:0:r-o<0?-1:r-o>0?1:0}},gh=function(e,t,a){if(!e)return a||"";var i=new Date(e),r={"M+":i.getMonth()+1,"d+":i.getDate(),"h+":i.getHours(),"m+":i.getMinutes(),"s+":i.getSeconds(),"q+":Math.floor((i.getMonth()+3)/3),S:i.getMilliseconds()};for(var o in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(i.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?r[o]:("00"+r[o]).substr((""+r[o]).length)));return t},vh=function(e){return e.replace(/&nbsp;/g," ").replace(/<script.*?>.*?<\/script>/gim,"").replace(/<[^>]+/g,function(e){return e.replace(/ (on\w+=)/g," _$1")})},bh={url:/^((http|https|ftp):\/\/)(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,=]|:|@)|\/|\?)*)?$/i},_h=function(e){if("object"===(void 0===e?"undefined":Qo()(e))){for(var t in e)!e.hasOwnProperty(t)||null!==e[t]&&void 0!==e[t]&&""!==e[t]||delete e[t];return e}},yh=function(e){var t=document.createElement("div");return t.innerHTML=e,t.style.display="none",(t.textContent||t.innerText).trim().replace(/\s+/g," ").length},wh=function(e,t,a){return t=t||100,a=a||t,new Bo.a(function(i,r){e||r(new Error("no image src"));var o=new Image;o.crossOrigin="Anonymous",o.src=e+"?imageView&thumbnail="+t+"y"+a+"&quality=85",o.onload=function(){i(o)},o.onerror=function(t){var a=function(){var e=null;if(window.XMLHttpRequest)e=new XMLHttpRequest;else if(window.XMLHttpRequest)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}return e}();a||r(new Error("XMLHttpRequest error")),a.open("GET",e,!0),a.responseType="blob",a.onload=function(){var e=new Image,t=URL.createObjectURL(this.response);e.onload=function(){i(e),URL.revokeObjectURL(t)},e.src=t},a.onerror=function(e){r(e)},a.send()}})},Th=function(e){var t={width:256,height:256,typeNumber:-1,correctLevel:sh,background:"#ffffff",foreground:"#000000"};e=tn()(t,"string"==typeof e?{text:e}:e);var a=new dh(e.typeNumber,e.correctLevel);a.addData(e.text),a.make();var i=document.createElement("canvas");i.style.display="none",i.width=e.width,i.height=e.height;for(var r=i.getContext("2d"),o=e.width/a.getModuleCount(),n=e.height/a.getModuleCount(),s=0;s<a.getModuleCount();s++)for(var l=0;l<a.getModuleCount();l++){r.fillStyle=a.isDark(s,l)?e.foreground:e.background;var c=Math.ceil((l+1)*o)-Math.floor(l*o),d=Math.ceil((s+1)*n)-Math.floor(s*n);r.fillRect(Math.round(l*o),Math.round(s*n),c,d)}return i},Ih=function(e,t,a){if(e){t=t||"未命名",a=a||"jpg";var i=document.createElement("a");i.href=e,i.download=t+"."+a,document.body.appendChild(i),i.click(),document.body.removeChild(i)}},xh=function(e,t,a,i){e.beginPath(0),e.arc(t-i,a-i,i,0,Math.PI/2),e.lineTo(i,a),e.arc(i,a-i,i,Math.PI/2,Math.PI),e.lineTo(0,i),e.arc(i,i,i,Math.PI,3*Math.PI/2),e.lineTo(t-i,0),e.arc(t-i,i,i,3*Math.PI/2,2*Math.PI),e.lineTo(t,a-i),e.closePath()},kh=function(e,t,a,i,r,o,n,s){2*o>i||2*o>r||(e.save(),e.translate(t,a),xh(e,i,r,o),e.lineWidth=n||1,e.strokeStyle=s||"#000",e.stroke(),e.restore())},$h=function(e,t,a,i,r,o,n){2*o>i||2*o>r||(e.save(),e.translate(t,a),xh(e,i,r,o),e.fillStyle=n||"#000",e.fill(),e.restore())},Ch=function(e,t,a,i,r,o){if(e&&"string"==typeof t&&"number"==typeof a&&"number"==typeof i){var n=e.canvas;void 0===r&&(r=n&&n.width||300),void 0===o&&(o=n&&parseInt(window.getComputedStyle(n).lineHeight)||parseInt(window.getComputedStyle(document.body).lineHeight));var s="";t.split("").forEach(function(t,n){var l=s+t;e.measureText(l).width>r&&n>0?(e.fillText(s,a,i),s=t,i+=o):s=l}),e.fillText(s,a,i)}},Sh=function(e){if(!e.innerText)return Bo.a.reject(new Error("缺少目标对象"));if(window.clipboardData&&window.clipboardData.setData)return clipboardData.setData("Text",e.innerText),Bo.a.resolve();if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var t=document.createElement("textarea");t.textContent=e.innerText,t.style.position="fixed",document.body.appendChild(t),t.select();try{return document.execCommand("copy"),Bo.a.resolve()}catch(e){return Bo.a.reject(new Error("复制失败，请手动复制"))}finally{document.body.removeChild(t)}}},Lh=a("o/zv"),Dh=a.n(Lh),Ph={name:"MenuNavItem",props:["routerData","navIndex","basePath"],methods:{resolvePath:function(e){return Dh.a.resolve(this.basePath,e)},checkAuth:function(e,t){return mh(e,t)}}},zh={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menu-wrap"},[e.routerData.children?a("el-submenu",{attrs:{index:e.navIndex}},[a("template",{slot:"title"},[e._v(e._s(e.routerData.meta.title))]),e._v(" "),e._l(e.routerData.children,function(t,i){return t.meta.navShow&&e.routerData.children&&e.checkAuth(t.meta.roles,e.$store.state.userInfo.roleList)?a("MenuNavItem",{key:i,attrs:{routerData:t,navIndex:e.navIndex+"-"+(i+1),basePath:e.resolvePath(e.routerData.path)}}):e._e()})],2):a("router-link",{attrs:{to:e.resolvePath(e.routerData.path)}},[a("el-menu-item",{attrs:{index:e.resolvePath(e.routerData.path)}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.routerData.meta.title))])])],1)],1)},staticRenderFns:[]},Hh={name:"menuNav",data:function(){return{routerMap:Mf}},components:{MenuNavItem:a("VU/8")(Ph,zh,!1,null,null,null).exports},methods:{checkAuth:function(e,t){return mh(e,t)}}},Mh={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-menu",{attrs:{"default-active":e.$route.path}},e._l(e.routerMap,function(t,i){return t.meta.navShow&&e.checkAuth(t.meta.roles,e.$store.state.userInfo.roleList)?a("MenuNavItem",{key:i,attrs:{routerData:t,navIndex:i+1,basePath:t.path}}):e._e()}),1)},staticRenderFns:[]};var Fh=a("VU/8")(Hh,Mh,!1,function(e){a("wNw5")},null,null).exports,Nh={name:"AsideFixed",components:{MenuNav:Fh}},Eh={render:function(){var e=this.$createElement,t=this._self._c||e;return this.$store.state.userInfo?t("el-aside",{staticClass:"aside-fixed",attrs:{width:"180px"}},[t("el-scrollbar",{staticStyle:{position:"absolute",top:"0",bottom:"0",width:"100%"},attrs:{"wrap-class":"scrollbar-wrapper"}},[t("MenuNav")],1)],1):this._e()},staticRenderFns:[]};var Rh=a("VU/8")(Nh,Eh,!1,function(e){a("3kcH")},"data-v-ee8a5c70",null).exports,Oh={name:"AsideDrawer",components:{MenuNav:Fh}},Ah={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.$store.state.userInfo?a("div",{staticClass:"aside-drawer",class:{open:e.$store.state.menuOpen}},[a("div",{staticClass:"mask",on:{click:function(t){e.$store.state.menuOpen=!1}}}),e._v(" "),a("el-aside",{staticClass:"aside-fixed",attrs:{width:"180px"}},[a("el-scrollbar",{staticStyle:{position:"absolute",top:"0",bottom:"0",width:"100%"},attrs:{"wrap-class":"scrollbar-wrapper"}},[a("MenuNav")],1)],1)],1):e._e()},staticRenderFns:[]};var Uh=a("VU/8")(Oh,Ah,!1,function(e){a("DgHx")},"data-v-3e948829",null).exports,Vh={name:"App",computed:u()({},Object(sn.d)(["userInfo"]),{keepAliveRoutes:function(){return uh()}}),created:function(){var e=this;window.onresize=function(){e.$store.state.windowHeight=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,e.$store.state.windowWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}},components:{Header:Zo,AsideFixed:Rh,AsideDrawer:Uh},watch:{userInfo:function(e){e&&window.WaterMark.mark({text:e.loginName})},$route:function(){this.$store.state.menuOpen&&(this.$store.state.menuOpen=!1,window.scrollTo(0,0))}}},qh={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("el-container",{staticStyle:{"min-height":"100vh"}},[t("el-header",{staticStyle:{"background-color":"#e62121",position:"fixed",left:"0",top:"0",right:"0","z-index":"999"},attrs:{height:"48px"}},[t("Header")],1),this._v(" "),this.$store.state.windowWidth>=1280?t("AsideFixed"):t("AsideDrawer"),this._v(" "),t("el-main",{style:{margin:"48px 0 0 "+(this.$store.state.windowWidth>=1280?180:0)+"px","min-width":"768px"}},[t("keep-alive",{attrs:{include:[].concat(this.keepAliveRoutes)}},[t("router-view")],1)],1)],1)],1)},staticRenderFns:[]};var jh=a("VU/8")(Vh,qh,!1,function(e){a("Me5S")},null,null).exports;a("+Nlw");s.a.config.productionTip=!1,o()(i).forEach(function(e){s.a.filter(e,i[e])}),s.a.use(c.a),s.a.prototype.$service=Xo,new s.a({el:"#app",router:Nf,store:dn,components:{App:jh},template:"<App/>"})},ZMWB:function(e,t){},arY2:function(e,t){},fzjT:function(e,t){},io1K:function(e,t){},lHC7:function(e,t){},lRwf:function(e,t){e.exports=Vue},m0ca:function(e,t){},"nx/2":function(e,t){},qbDM:function(e,t){},tTEB:function(e,t){},u1o1:function(e,t){},wNw5:function(e,t){},wXvF:function(e,t){},x9dA:function(e,t){},yh1w:function(e,t){},z54z:function(e,t){},zPM9:function(e,t){}},[0]);